


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <style>.async-hide { opacity: 0 !important} </style>
    <script>
      (function() {
        var optimizeId = 'GTM-NGM64B',
            gtmId = 'GTM-PZ7GMV9',
            dataLayerName = 'dataLayer',
            hideObj = {},
            hideGTMId = Math.random() < 0.5 ? optimizeId : gtmId;
            hideObj[hideGTMId] = true;

        var dPush = function(status) {
          window[dataLayerName].push({
            event: 'optimize_anti_flicker_test',
            milestones: {
              antiFlickerStart: window[dataLayerName].hide.start,
              antiFlickerEnd: new Date().getTime(),
              testStatus: status
            }
          });
        };

        (function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;h.end=i=function(){clearTimeout(t); s.className=s.className.replace(RegExp(' ?'+y),'')};(a[n]=a[n]||[]).hide=h;var t = setTimeout(function(){dPush('timeout');i();h.end=null},c);h.timeout=c;})(window,document.documentElement,'async-hide',dataLayerName,4000,hideObj);

        if (hideGTMId === optimizeId) {
          var el = document.createElement('script');
          el.src = 'https://www.googleoptimize.com/optimize.js?id=' + optimizeId;
          el.addEventListener('error', function() {
            dPush('optimizeSnippetError');
            window[dataLayerName].hide.end && window[dataLayerName].hide.end();
          });
          document.head.appendChild(el);
        } else {
          window[dataLayerName].push({
            gtmOptimize: true
          });
        }
        function gtag() {dataLayer.push(arguments)};
        gtag('event', 'optimize.callback', {
          callback: function() {
            dPush(hideGTMId === optimizeId ? 'optimizeSnippet' : 'gtmTag');
          }
        });
      })();
    </script>
    
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>GTM Tips | Simo Ahava's blog</title>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.simoahava.com/categories/gtm-tips/index.xml">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/categories/gtm-tips/">
    
    <meta name="description" content="Simo Ahava&#39;s blog">
    <meta property="og:description" content="Simo Ahava&#39;s blog">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="GTM Tips">
    <meta property="og:url" content="https://www.simoahava.com/categories/gtm-tips/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="GTM Tips">
    <meta name="twitter:description" content="Simo Ahava&#39;s blog">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
        

      
      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
        
          <section class="postShorten-group main-content-wrap">
            <span class="breadcrumbs">You are here: <a href="https://www.simoahava.com/categories/">Categories</a> / GTM Tips</span>
            
            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/multiple-gtm-containers-on-the-page/">
          #GTMTips: Multiple GTM Containers On The Page
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-12-21T09:35:12Z">
        
  December 21, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/multiple-gtm-containers-on-the-page/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      For some reason, you might run into a situation where you need to add multiple Google Tag Manager containers on the same page. Usually this is because of poor governance or an inflexible organization. My recommendation is to fix things in your projects first, and only resort to multiple containers if you can't seem to resolve your governance issues using your vocal cords (or your fists).
Officially, Google Tag Manager introduced support for adding multiple containers earlier in 2015.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/multiple-gtm-containers-on-the-page/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/multiple-gtm-containers-on-the-page/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/12/multiple-containers-same-page.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/">
          #GTMTips: GTM Container Snippet In The HEAD
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-12-15T08:56:20Z">
        
  December 15, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      (UPDATE 28 Sep 2016: The official recommendation has finally caught up with the times. Now the correct placement for the JavaScript methods of the container snippet is, indeed, in &lt;head&gt;.)
I want to address something I've been confused about from the very first day since I started using Google Tag Manager. Why on earth would an asynchronously loading JavaScript library be recommended to place in the beginning of &lt;body&gt;, when the logical place to start loading dependencies is as early as possible in the document load process?
      <p>
        <a href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/12/GTM-container-snippet-head.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/">
          #GTMTips: Useful GTM For iOS Tips
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-12-03T07:49:22Z">
        
  December 3, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      A while ago I wrote a blog post about how to install Google Tag Manager for iOS using the Swift programming language (you can read the article here). I've been doing a lot of work with Swift lately, and I'm more and more convinced that GTM is actually a very powerful utility for running in your iOS app instead of the Google Analytics SDK.
Why? Because it abstracts a lot of the nitty-gritty you'd otherwise need to explicitly manage in your GA installation.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/12/ios-swift-gtm-tips.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/referral-exclusion-on-receipt-page/">
          #GTMTips: Referral Exclusion On Receipt Page
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-11-19T07:27:02Z">
        
  November 19, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/referral-exclusion-on-receipt-page/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      You might have noticed that the Referral Exclusion List in Google Analytics is difficult to maintain. You can't copy a list from one property to another, the list is a wildcard match for domain names (so all subdomains are automatically excluded), and it's just about the clunkiest user interface we've seen since ERP tools from the 1990s. A while ago, I wrote of a solution which lets you manage referral exclusions using Google Tag Manager, and it's still a neat trick, as it's way more flexible than said clunky UI.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/referral-exclusion-on-receipt-page/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/referral-exclusion-on-receipt-page/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/11/exclude-referrals-receipt-page.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
          #GTMTips: Check For New User
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-09-17T11:13:14Z">
        
  September 17, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/check-for-new-user/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Every now and then we want to create a bridge between the stateful machines we send data to (e.g. Google Analytics), and the stateless environment where we collect the data itself (e.g. Google Tag Manager). This is not easy. There is no synergy between Google Analytics and Google Tag Manager which would let the latter understand anything about things like sessions or landing pages or Bounce Rates.
One thing we can reliably measure, however, is whether or not the visitor is a New User in Google Analytics.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/check-for-new-user/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/09/gtmtips-check-new-user.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
          #GTMTips: Prevent Tag From Firing In iFrame
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-09-04T10:35:53Z">
        
  September 4, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Unfortunately, iFrames still exist. They are used to embed content from one page into another. Frames are horrible, nasty things, very often riddled with cross-domain problems, performance issues, responsive design obstructions and other crap from the nether pits of hell. Regardless, if you're stuck with an iFrame which also collects data to your Google Analytics property, for example, you probably want to prevent at least the first Page View from firing, since otherwise you'll be double-counting Page Views: once on the main page and once in the iFrame.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/09/prevent-tag-from-firing-in-iframe.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/">
          #GTMTips: Product-Scoped Custom Dimensions And Metrics
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-08-14T07:01:37Z">
        
  August 14, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/#commento">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      With the advent of Enhanced Ecommerce for Universal Analytics, a new scope was introduced for Custom Dimensions and Metrics. Product scope can be used to send information about each product that is sent through Enhanced Ecommerce, but it's not exactly the most logical or intuitive thing to wrap your head around.
In this #GTMTips post, we'll take a look at how to implement Product-Scoped Custom definitions via Google Tag Manager, and I'll quickly explain how they work in relation to queries and reports you might want to build on top of them.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2015/08/product-scoped-custom-dimensions-and-metrics.jpg"/>
      </div>
    </a>
  
</article>

            
            
  <div class="pagination-bar">
    <ul class="pagination">
      
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/categories/gtm-tips/page/11/">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/categories/gtm-tips/page/13/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
      
      <li class="pagination-number">page 12 of 17</li>
    </ul>
  </div>


          </section>
        
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

