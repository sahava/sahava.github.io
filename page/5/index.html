


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
	<meta name="generator" content="Hugo 0.73.0" />
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Google Tag Manager and Google Analytics | Simo Ahava's blog</title>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.simoahava.com/index.xml">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/">
    
    <meta name="description" content="Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.">
    <meta property="og:description" content="Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Google Tag Manager and Google Analytics">
    <meta property="og:url" content="https://www.simoahava.com/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Google Tag Manager and Google Analytics">
    <meta name="twitter:description" content="Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    


    

      
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener ">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://masto.measure.chat/@SimoAhava" target="_blank" rel="noopener me">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
      
      <span class="sidebar-button-desc">Mastodon</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
        <section class="postShorten-group main-content-wrap">
          

  <span class="talks"><span class="fa fa-md fa-bullhorn"></span><a title="Next conference talk" href="https://www.simoahava.com/upcoming-talks/">Mar 20, 2023: Emerce Conversion &amp; Analytics, Amsterdam</a></span>


	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
	  
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/recaptcha-v3-server-side-tagging/">
          reCAPTCHA v3 With Google Tag Manager Server-side Tagging
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-04-30T07:00:58&#43;03:00">
        
  April 30, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/recaptcha-v3-server-side-tagging/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      I&rsquo;ve written about Google&rsquo;s reCAPTCHA v3 before. It&rsquo;s a verification API, which analyzes the signals fed into it and returns a bot score, based on how &ldquo;bot-like&rdquo; the hits are.
It&rsquo;s a great way to validate whether or not to collect data from certain sources that exhibit bot-like behavior. You&rsquo;ll want to ignore those in your analytics tools, for example, as they tend to add a lot of (unrealistic) noise to the data set.
      <p>
        <a href="https://www.simoahava.com/analytics/recaptcha-v3-server-side-tagging/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/recaptcha-v3-server-side-tagging/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/04/recaptcha-v3-with-google-tag-manager-server-side-tagging.jpg"/>
      </div>
    </a>
  
</article>

          
	  <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/provision-server-side-tagging-application-manually/">
          Provision Server-side Tagging Application Manually
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-04-15T07:48:42&#43;02:00">
        
  April 15, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/provision-server-side-tagging-application-manually/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      The automatic provisioning process of the Google Tag Manager server-side tagging service is extremely useful.
With just a few clicks of the button, you can have a fully functional (albeit limited to testing use) server-side tagging endpoint on the Google Cloud Platform (GCP).
 For a video overview of the automatic deployment, see this video.
 However, the automatic provisioning process creates a new Google Cloud Platform project and, at the time of writing, always deploys the App Engine application (on which the tagging server runs) in the us-central-1 GCP region.
      <p>
        <a href="https://www.simoahava.com/analytics/provision-server-side-tagging-application-manually/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/provision-server-side-tagging-application-manually/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/03/provision-server-side-tagging-application-manually.jpg"/>
      </div>
    </a>
  
</article>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/url-parser-variable-template-server-containers/">
          #GTMTips: The URL Parser Variable Template For Server Containers
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-04-09T07:25:12&#43;03:00">
        
  April 9, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/url-parser-variable-template-server-containers/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      With server-side tagging, you can send any types of HTTP requests to the Server container. The Server container parses these, fires up container instances, and sends the data onwards to first-party data stores and third-party vendors alike.
Often these requests contain URL strings encoded in query parameters. A prime example is the document location parameter in Universal Analytics requests.
Server-side Clients would parse these URL strings and convert them into the format required by the event data object.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/url-parser-variable-template-server-containers/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/url-parser-variable-template-server-containers/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/04/url-parser-template-server-containers.jpg"/>
      </div>
    </a>
  
</article>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/">
          Facebook Conversions API Using GA4 Web Tags And A GTM Server
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-03-19T07:42:34&#43;02:00">
        
  March 19, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Facebook has now officially released their Conversions API tag template for server-side tagging in Google Tag Manager.
With this tag template, you can create a server-side tag that fires with any Client designed to parse requests into a unified event model.
  One such Client already exists, and every single Server container has it built-in: the GA4 Client.
 If you haven&rsquo;t yet deployed a Server container, check out this video walkthrough for more details on how to do it.
      <p>
        <a href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/03/facebook-conversions-api-server-side-tagging.jpg"/>
      </div>
    </a>
  
</article>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/">
          #GTMTips: Map Multiple Domains To A Server-side Tagging Endpoint
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-03-09T14:38:12&#43;02:00">
        
  March 9, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      One of the biggest perks of working with server-side tagging is that you can establish a first-party context between the site sending the data and the server-side tagging endpoint itself.
This leads to many benefits, including improved control of the data streams, the possibility to set cookies that extend beyond ITP&rsquo;s restrictions, and reduced stress on an already very likely overloaded Content Security Policy.
In this article, I&rsquo;ll show you how to map multiple custom domains to your Google Cloud Project application.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/03/map-multiple-domains-server-side-tagging-endpoint.jpg"/>
      </div>
    </a>
  
</article>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/write-to-google-bigquery-from-gtm-server-container/">
          Write To Google BigQuery From A GTM Server Container
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-03-03T09:57:51&#43;02:00">
        
  March 3, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/write-to-google-bigquery-from-gtm-server-container/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Ever since it was released that server-side tagging in Google Tag Manager would run on the Google Cloud Platform stack, my imagination has been running wild.
By running on GCP, the potential for integrations with other GCP components is limitless. The output to Cloud Logging already introduces interesting pipeline opportunities, but now it gets even better.
It&rsquo;s finally possible to write directly to Google BigQuery from a Client or tag template!
      <p>
        <a href="https://www.simoahava.com/analytics/write-to-google-bigquery-from-gtm-server-container/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/write-to-google-bigquery-from-gtm-server-container/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/03/write-to-google-big-query-from-a-gtm-server-container.jpg"/>
      </div>
    </a>
  
</article>

	  
	    
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/data-layer-picker-variable-template/">
          #GTMTips: The Data Layer Picker Variable Template
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2021-02-25T22:14:46&#43;02:00">
        
  February 25, 2021

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/data-layer-picker-variable-template/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      There&rsquo;s a new custom variable template in town! The Data Layer Picker template lets you create variables that have a singular, exceptional (in Google Tag Manager&rsquo;s context, at least) purpose:
You can access the keys and values that were in the object pushed into dataLayer itself. And &hellip; that&rsquo;s it! Read on to understand why this might be useful.
Tip 123: Direct access to the dataLayer.push()   If you know your Data Layer Variable, you&rsquo;ll know that it comes in two versions.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/data-layer-picker-variable-template/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/data-layer-picker-variable-template/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2021/02/data-layer-picker-template.jpg"/>
      </div>
    </a>
  
</article>

	  
          
  <div class="pagination-bar">
    <ul class="pagination">
      
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/page/4/">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/page/6/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
      
      <li class="pagination-number">page 5 of 54</li>
    </ul>
  </div>


        </section>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2023 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://commento.simoahava.com/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
         

    
  </body>
</html>

