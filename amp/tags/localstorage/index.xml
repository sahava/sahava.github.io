<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Localstorage on Simo Ahava's blog</title><link>https://www.simoahava.com/amp/tags/localstorage/</link><description>Recent content in Localstorage on Simo Ahava's blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 19 Nov 2018 12:09:33 +0200</lastBuildDate><atom:link href="https://www.simoahava.com/amp/tags/localstorage/index.xml" rel="self" type="application/rss+xml"/><item><title>Persist Google Tag Manager's dataLayer Across Pages</title><link>https://www.simoahava.com/amp/analytics/persist-datalayer-across-pages/</link><pubDate>Mon, 19 Nov 2018 12:09:33 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/persist-datalayer-across-pages/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>UPDATE 4 June 2020&lt;/strong>: Instead of copying the Custom HTML code from the article, please load it from the &lt;a href="https://gist.github.com/sahava/baee63650eed471a2d1eac5825037a05">GitHub Gist&lt;/a> instead.&lt;/p>
&lt;/blockquote>
&lt;p>Four years ago, I wrote an article on &lt;a href="https://www.simoahava.com/amp/analytics/persist-datalayer-google-tag-manager/">how to persist GTM&amp;rsquo;s &lt;code>dataLayer&lt;/code> from page to page&lt;/a>. Unfortunately, the solution was a bit clumsy, requiring you to give specific &lt;em>commands&lt;/em> for the interactions, which made it really unwieldy in the long run. &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> still doesn&amp;rsquo;t offer us a native way to persist the &lt;code>dataLayer&lt;/code> array or its &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/">internal data model&lt;/a> from one page to the other, so I thought it was about time I revisit this idea.&lt;/p></description></item><item><title>Run Google Tag Manager And Google Analytics In Local Files</title><link>https://www.simoahava.com/amp/analytics/run-google-tag-manager-google-analytics-local-files/</link><pubDate>Tue, 02 Aug 2016 13:01:25 +0000</pubDate><guid>https://www.simoahava.com/amp/analytics/run-google-tag-manager-google-analytics-local-files/</guid><description>&lt;p>&lt;em>Last updated 2 March 2018.&lt;/em>&lt;/p>
&lt;p>Every now and then you might be urged to run &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> and/or &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> &lt;em>locally&lt;/em>, meaning without the benefit of a web server serving your files. In other words, you&amp;rsquo;re loading an HTML file from your computer in the web browser. You can identify a locally run file by the &lt;strong>file:///&lt;/strong> &lt;em>protocol&lt;/em> in the address bar.&lt;/p>


 &lt;a href="https://www.simoahava.com/amp/images/2016/08/local-ga.jpg" title="Local file in web browser">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2016/08/local-ga.jpg" layout="responsive" alt="Local file in web browser" height="264" width="1026">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Now, deploying Google Tag Manager onto that file with the hopes of running Google Analytics requests locally isn&amp;rsquo;t quite simple. Well, actually, the deployment is fairly simple, but customizing it so that it actually sends useful hits requires some tweaking.&lt;/p></description></item><item><title>Persist dataLayer In Google Tag Manager</title><link>https://www.simoahava.com/amp/analytics/persist-datalayer-google-tag-manager/</link><pubDate>Mon, 01 Sep 2014 06:57:02 +0000</pubDate><guid>https://www.simoahava.com/amp/analytics/persist-datalayer-google-tag-manager/</guid><description>&lt;p>(Update 19 November 2018: See &lt;a href="https://www.simoahava.com/amp/analytics/persist-datalayer-across-pages/">this article&lt;/a> for a more elegant solution.)&lt;/p>
&lt;p>If you know your &lt;a href="https://www.simoahava.com/amp/analytics/javascript-101-gtm-part-1/">JavaScript&lt;/a>, you know that all variables, functions, objects, resources, and data in the document get rewritten with every page load. In other words, every single page refresh builds the page from scratch, and the state of the document before the page refresh is left drifting in the ocean of oblivion.&lt;/p>
&lt;p>&lt;a href="http://www.google.com/tagmanager">Google Tag Manager&lt;/a>&amp;rsquo;s dataLayer is also one such entity. It gets rewritten with every page load, so it&amp;rsquo;s not possible to have a dataLayer variable &lt;em>persist&lt;/em> from one page to the other without using cookies or, as I&amp;rsquo;m going to show in this guide, the &lt;a href="http://www.w3schools.com/html/html5_webstorage.asp">HTML5 Web Storage API&lt;/a>. For web analytics, this is a bit of a shame. It forces us to think of things in the scope of a single page, when rarely anything worth mentioning has a lifespan that short.&lt;/p></description></item></channel></rss>