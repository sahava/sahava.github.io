<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gtmtips on Simo Ahava's blog</title><link>https://www.simoahava.com/amp/tags/gtmtips/</link><description>Recent content in Gtmtips on Simo Ahava's blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Fri, 29 Aug 2025 07:00:00 +0300</lastBuildDate><atom:link href="https://www.simoahava.com/amp/tags/gtmtips/index.xml" rel="self" type="application/rss+xml"/><item><title>#GTMTips: How To Load Google Scripts From A Server Container</title><link>https://www.simoahava.com/amp/gtmtips/new-way-load-google-scripts-server-container/</link><pubDate>Fri, 29 Aug 2025 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtmtips/new-way-load-google-scripts-server-container/</guid><description>&lt;p>On &lt;strong>June 30, 2025&lt;/strong>, Google announced that they are consolidating how Google&amp;rsquo;s script libraries for the web (e.g. &lt;code>gtm.js&lt;/code> and &lt;code>gtag.js&lt;/code>) are loaded when using a &lt;a href="https://developers.google.com//tag-platform/tag-manager/server-side/dependency-serving?option=sgtm">server-side Google Tag Manager&lt;/a> container.&lt;/p>
&lt;p>Before, you had the &lt;strong>Web Container Client&lt;/strong> for loading the &lt;code>gtm.js&lt;/code> file, and you had the &lt;strong>Google Analytics 4 Client&lt;/strong> for loading the &lt;code>gtag.js&lt;/code> file.&lt;/p>
&lt;p>Now, you only use the former.&lt;/p>
&lt;blockquote>
&lt;p>There is also the &lt;strong>Google Tag Gateway&lt;/strong> option, which might be a better idea in case you really want to load Google&amp;rsquo;s scripts from a first-party context. Server-side Google Tag Manager isn&amp;rsquo;t necessarily the best content delivery option. Read more about the &lt;a href="https://developers.google.com/tag-platform/tag-manager/gateway/setup-guide?setup=manual">Google Tag Gateway&lt;/a> here.&lt;/p></description></item><item><title>#GTMTips: SGTM Fetches GA4 Configurations Automatically</title><link>https://www.simoahava.com/amp/gtmtips/sgtm-fetches-ga4-configuration-automatically/</link><pubDate>Tue, 11 Feb 2025 07:06:25 +0200</pubDate><guid>https://www.simoahava.com/amp/gtmtips/sgtm-fetches-ga4-configuration-automatically/</guid><description>&lt;p>One of the most popular use cases for &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side Google Tag Manager&lt;/a>, often shared on this blog, too, is to &lt;strong>split&lt;/strong> an incoming stream into &lt;strong>multiple different endpoints&lt;/strong>.&lt;/p>
&lt;p>Since the demise of &lt;a href="https://www.simoahava.com/amp/analytics/customtask-the-guide/">&lt;code>customTask&lt;/code>&lt;/a> for Universal Analytics (Rest In Peace!), there hasn&amp;rsquo;t really been a solid, officially supported way of splitting a single GA4 stream into multiple endpoints. This is useful in case you want to create a &amp;ldquo;global rollup&amp;rdquo; property that combines data from multiple local sites, for example.&lt;/p></description></item><item><title>#GTMTips: Quickly Duplicate Tags In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtmtips/quickly-duplicate-tags-google-tag-manager/</link><pubDate>Tue, 26 Nov 2024 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/gtmtips/quickly-duplicate-tags-google-tag-manager/</guid><description>&lt;p>There are many reasons why you might want to duplicate your tags (or triggers, or variables, or templates) in Google Tag Manager.&lt;/p>
&lt;p>One prime example is &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging&lt;/a>, where it&amp;rsquo;s sensible to first build and validate your tracking setup before migrating fully to a server-side approach.&lt;/p>
&lt;p>Alternatively, you might want to collect analytics data to a second property, for example when you want to have a local &lt;em>and&lt;/em> a global dataset for site visit data.&lt;/p></description></item><item><title>#GTMTips: Automatic Page View Hits In SGTM After Consent Granted</title><link>https://www.simoahava.com/amp/gtmtips/automatic-page-view-hits-to-sgtm-after-consent-granted/</link><pubDate>Tue, 30 Apr 2024 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtmtips/automatic-page-view-hits-to-sgtm-after-consent-granted/</guid><description>&lt;p>If you&amp;rsquo;re using &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side">server-side Google Tag Manager&lt;/a>, &lt;a href="https://www.simoahava.com/amp/analytics/consent-mode-v2-google-tags/">Google (Advanced) Consent Mode&lt;/a> and you&amp;rsquo;re collecting hits to Google Analytics 4, you might have noticed something odd happening when switching consent to &lt;code>granted&lt;/code> state.&lt;/p>
&lt;p>It looks as if your &lt;code>page_view&lt;/code> hits as well as any other hits marked as &amp;ldquo;Conversions&amp;rdquo; (or &lt;a href="https://support.google.com/analytics/answer/13965727">key events&lt;/a> now, I guess) are &lt;strong>automatically redispatched&lt;/strong> to the server-side Google Tag Manager endpoint when consent is granted!&lt;/p>
&lt;p>This sounds incredibly useful. You no longer need to reconfigure the dispatch of important events after consent is granted.&lt;/p></description></item><item><title>#GTMTips: Consent Granted Reprocesses Previously Denied Hits</title><link>https://www.simoahava.com/amp/gtmtips/consent-granted-reprocesses-previously-denied-hits/</link><pubDate>Thu, 07 Mar 2024 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/gtmtips/consent-granted-reprocesses-previously-denied-hits/</guid><description>&lt;p>This will be a quick tip, but it&amp;rsquo;s here to correct my previous statements in the comments section of &lt;a href="https://www.simoahava.com/amp/analytics/consent-mode-v2-google-tags/">different articles&lt;/a> on this blog.&lt;/p>
&lt;p>When using &lt;a href="https://support.google.com/google-ads/answer/10000067?hl=en">Advanced Consent Mode&lt;/a>, Google Analytics 4 collects hits when consent is in &lt;code>&amp;quot;denied&amp;quot;&lt;/code> state. These hits have a lot of parameters stripped off them, including identifiers like the &lt;strong>Client ID&lt;/strong> and the &lt;strong>Session ID&lt;/strong>.&lt;/p>
&lt;p>The hits will not surface in reports directly, but they will instead go through a &lt;a href="https://support.google.com/analytics/answer/11161109?hl=en">modeling process&lt;/a> to enrich the reports once modeled.&lt;/p></description></item><item><title>#GTMTips: Prevent SGTM From Setting The FPID Cookie</title><link>https://www.simoahava.com/amp/gtm-tips/prevent-sgtm-from-setting-fpid-cookie/</link><pubDate>Thu, 27 Apr 2023 07:47:46 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/prevent-sgtm-from-setting-fpid-cookie/</guid><description>&lt;p>The &lt;a href="https://www.simoahava.com/amp/analytics/fpid-cookie-google-analytics-server-side-tagging/">&lt;code>FPID&lt;/code> cookie&lt;/a> is what &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side Google Tag Manager&lt;/a> would prefer to use for your &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side/send-data">Google Analytics 4&lt;/a> tracking.&lt;/p>
&lt;p>It&amp;rsquo;s a cookie set in the &lt;strong>HTTP response&lt;/strong> from the server, and it&amp;rsquo;s flagged as &lt;code>HttpOnly&lt;/code>, which means it&amp;rsquo;s only accessible by a web server running on the domain on which it was set.&lt;/p>
&lt;p>There&amp;rsquo;s nothing wrong with the technology, and I do recommend that server-side setups toggle it on by default.&lt;/p>
&lt;p>However, there might be cases where you want the server-side &lt;strong>GA4 client&lt;/strong> (which handles the incoming GA4 requests) to occasionally &lt;em>not&lt;/em> use the &lt;code>FPID&lt;/code> cookie. Perhaps it&amp;rsquo;s because you have a custom consent system in place, or perhaps you want some GA4 measurement IDs to use the regular JavaScript cookies and others to use the &lt;code>FPID&lt;/code>.&lt;/p></description></item><item><title>#GTMTips: Override Google Analytics 4 Fields In Server-Side GTM</title><link>https://www.simoahava.com/amp/gtm-tips/override-ga4-fields-in-server-side-gtm/</link><pubDate>Thu, 30 Mar 2023 06:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/override-ga4-fields-in-server-side-gtm/</guid><description>&lt;p>&lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">Server-side tagging&lt;/a> is all about &lt;em>control&lt;/em>. Being able to intercept, modify, and even block requests as they come in &lt;em>before&lt;/em> they are dispatched to their actual endpoints is extremely valuable.&lt;/p>
&lt;p>The built-in &lt;strong>Google Analytics 4&lt;/strong> tag template has options for modifying event parameters and user properties in the Google Analytics 4 request, but did you know you can use these options to modify some of the &lt;strong>fields&lt;/strong> as well, such as Client ID, User ID, and event Engagement Time?&lt;/p></description></item><item><title>#GTMTips: Use GA4 Schema In Universal Analytics Ecommerce</title><link>https://www.simoahava.com/amp/gtm-tips/use-ga4-schema-in-universal-analytics-ecommerce/</link><pubDate>Tue, 30 Aug 2022 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-ga4-schema-in-universal-analytics-ecommerce/</guid><description>&lt;p>With the &lt;a href="https://support.google.com/analytics/answer/11583528?hl=en">sunset announcement&lt;/a> of the Universal Analytics service, it certainly does seem like a waste of time to write articles about it.&lt;/p>
&lt;p>However, a recent update to &lt;a href="https://www.googletagmanager.com/">Google Tag Manager&lt;/a> is an interesting one and should provide relief to those Google Analytics users who are set on double-tagging their sites for both Universal Analytics and Google Analytics 4 &lt;em>and&lt;/em> who want to make use of GA4&amp;rsquo;s new &lt;strong>Data Layer schema&lt;/strong>.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll do a quick overview of what the new &lt;strong>Use GA4 Schema&lt;/strong> option does in Google Tag Manager&amp;rsquo;s Universal Analytics tags (found under Ecommerce settings).&lt;/p></description></item><item><title>#GTMTips: Preflight Requests in Server-side Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/preflight-requests-in-server-side-google-tag-manager/</link><pubDate>Wed, 27 Jul 2022 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/preflight-requests-in-server-side-google-tag-manager/</guid><description>&lt;p>With certain types of &lt;strong>HTTP requests&lt;/strong>, the web browser might first dispatch a request with the &lt;strong>OPTIONS&lt;/strong> method, also known as a &lt;a href="https://developer.mozilla.org/en-US/docs/Glossary/Preflight_request">preflight request&lt;/a>.&lt;/p>
&lt;p>The purpose of the preflight request is to &amp;ldquo;check&amp;rdquo; with the web server that it&amp;rsquo;s equipped to handle the type of cross-origin request the browser wants to dispatch.&lt;/p>
&lt;p>If the server doesn&amp;rsquo;t handle this preflight request, or if it returns a response that doesn&amp;rsquo;t agree with what the web browser wants to actually dispatch, the check fails and the browser refuses to send the actual request.&lt;/p></description></item><item><title>#GTMTips: Preview Requests In Server-side Google Tag Manager</title><link>https://www.simoahava.com/amp/gtmtips/preview-server-side-google-tag-manager/</link><pubDate>Thu, 30 Jun 2022 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtmtips/preview-server-side-google-tag-manager/</guid><description>&lt;p>&lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">Server-side Google Tag Manager&lt;/a> has an &lt;em>excellent&lt;/em> &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side/debug">Preview mode&lt;/a>, which lets you &lt;strong>inspect incoming requests&lt;/strong>, &lt;strong>monitor the event data object&lt;/strong>, &lt;strong>view console messages&lt;/strong>, and &lt;strong>identify outgoing requests&lt;/strong>, among other things.&lt;/p>
&lt;p>To enable this Preview mode on the web, you simply need to click the &lt;strong>Preview&lt;/strong> button in the container, after which any requests sent from the &lt;strong>same browser instance&lt;/strong> will be automatically shown in the Preview mode window.&lt;/p>
&lt;p>However, what about if you want to send requests from another browser? Or from a non-browser data source? Or what if you want to play with &lt;strong>XHR&lt;/strong> or &lt;strong>Fetch&lt;/strong> without having access to cookie credentials?&lt;/p></description></item><item><title>#GTMTips: Setup IAM For Manual Installation Of Server-side GTM</title><link>https://www.simoahava.com/amp/gtmtips/setup-iam-manual-installation-server-side-gtm/</link><pubDate>Mon, 25 Apr 2022 07:00:01 +0300</pubDate><guid>https://www.simoahava.com/amp/gtmtips/setup-iam-manual-installation-server-side-gtm/</guid><description>&lt;p>If you want to &lt;a href="https://www.simoahava.com/amp/analytics/provision-server-side-tagging-application-manually/">manually install server-side Google Tag Manager&lt;/a> on App Engine in the Google Cloud Platform, you are of course welcome to do so.&lt;/p>
&lt;p>The main benefits of doing this are that you get to &lt;strong>choose the region where App Engine is deployed&lt;/strong> and that you can use &lt;strong>existing project resources&lt;/strong> instead of having a new project automatically created for you.&lt;/p>
&lt;p>However, to run the script without errors, there are a number of things you need to enable first. In this article, I&amp;rsquo;ll walk you through the required permissions.&lt;/p></description></item><item><title>#GTMTips: Setup A Google Tag Manager Server Using Cloud Run</title><link>https://www.simoahava.com/amp/gtmtips/setup-google-tag-manager-server-cloud-run/</link><pubDate>Fri, 25 Feb 2022 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/gtmtips/setup-google-tag-manager-server-cloud-run/</guid><description>&lt;p>While &lt;strong>Google App Engine&lt;/strong>, the default implementation pattern of &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side Google Tag Manager&lt;/a>, is straightforward to setup with the &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side#set_up_a_gcp_tagging_server">automatic provisioning steps&lt;/a>, it&amp;rsquo;s certainly not the only way to deploy the server.&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://www.simoahava.com/amp/analytics/deploy-server-side-google-tag-manager-aws/">You can set it up in Amazon AWS&lt;/a> (this blog)&lt;/li>
&lt;li>&lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-azure-app-service/">You can set it up in Microsoft Azure&lt;/a> (this blog)&lt;/li>
&lt;li>&lt;a href="https://code.markedmondson.me/gtm-serverside-cloudrun/">You can set it up with Cloud Run&lt;/a> (&lt;a href="https://twitter.com/holomarked">Mark Edmondson&amp;rsquo;s&lt;/a> blog)&lt;/li>
&lt;/ul>
&lt;p>In fact, the &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side/manual-setup-guide">manual setup guide&lt;/a> gives you the details on how to deploy a Google Tag Manager Server in &lt;em>any&lt;/em> environment that runs Docker.&lt;/p></description></item><item><title>#GTMTips: Manipulate Response Headers In Server-side Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/manipulate-response-headers-server-side-google-tag-manager/</link><pubDate>Thu, 30 Dec 2021 07:00:13 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/manipulate-response-headers-server-side-google-tag-manager/</guid><description>&lt;p>Although &lt;em>most&lt;/em> of &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">Server-side Tagging in Google Tag Manager&lt;/a> revolves, quite rightfully, around &lt;a href="https://developers.google.com/tag-platform/tag-manager/server-side/intro#how_clients_work">&lt;strong>Clients&lt;/strong>&lt;/a>, there&amp;rsquo;s still plenty of value to be derived from &lt;strong>tags&lt;/strong>, too.&lt;/p>
&lt;p>Naturally, the most common use case for server-side tags is to map the incoming requests to the Server container (filtered through Clients) and dispatch them to their respective endpoints.&lt;/p>
&lt;p>But in addition to dispatching HTTP requests, tags can do &lt;em>so much&lt;/em> more.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll share with you a neat way how to utilize tags to manipulate the &lt;strong>HTTP responses&lt;/strong> the Server container sends back to the request source.&lt;/p></description></item><item><title>#GTMTips: Cross-domain Tracking In Google Analytics 4</title><link>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-google-analytics-4/</link><pubDate>Mon, 25 Oct 2021 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-google-analytics-4/</guid><description>&lt;p>Setting up &lt;strong>cross-domain tracking&lt;/strong> in &lt;strong>Google Analytics 4&lt;/strong> has been &lt;a href="https://support.google.com/analytics/answer/10071811?hl=en">well-documented&lt;/a>.&lt;/p>
&lt;p>The main departure from &lt;strong>Universal Analytics&lt;/strong> is how cross-domain measurement is something you configure through the &lt;em>Google Analytics user interface&lt;/em> rather than through implementation and JavaScript.&lt;/p>
&lt;p>While this approach is obviously beneficial especially for those who lack the know-how or the resources to configure the JavaScript trackers, it does lead to problems, too.&lt;/p>
&lt;p>In this article, I want to tackle these edge cases. They are:&lt;/p></description></item><item><title>#GTMTips: Google Ads Remarketing In GTM Server Containers</title><link>https://www.simoahava.com/amp/gtm-tips/google-ads-remarketing-gtm-server-containers/</link><pubDate>Thu, 09 Sep 2021 07:22:22 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/google-ads-remarketing-gtm-server-containers/</guid><description>&lt;p>Google has released the &lt;strong>Google Ads Remarketing&lt;/strong> tag for &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging in Google Tag Manager&lt;/a>.&lt;/p>
&lt;p>Functionally, it&amp;rsquo;s remarkably similar to the &lt;a href="https://www.simoahava.com/amp/analytics/google-ads-server-side-tagging-google-tag-manager/">Conversion Tracking tag&lt;/a> they released previously. In fact, you should go ahead and read that article first, so that you have an understanding of how Google Ads tracking works through Server containers!&lt;/p>
&lt;p>Follow &lt;a href="https://developers.google.com/tag-manager/serverside/ads-remarketing-setup">this link&lt;/a> to read the official documentation.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll walk you through how to set things up, and I&amp;rsquo;ll also provide an overview of &lt;strong>how it works&lt;/strong>.&lt;/p></description></item><item><title>#GTMTips: Cross-domain Tracking With Server-side FPID Cookie</title><link>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-server-side-fpid-cookie/</link><pubDate>Fri, 13 Aug 2021 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-server-side-fpid-cookie/</guid><description>&lt;p>The &lt;strong>FPID cookie&lt;/strong> in &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging&lt;/a> for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is an &lt;code>HttpOnly&lt;/code>, &lt;strong>server-managed&lt;/strong> ID cookie that&amp;rsquo;s designed to replace the &lt;em>JavaScript-managed&lt;/em> &lt;code>_ga&lt;/code> cookie used by Google Analytics 4 and Universal Analytics.&lt;/p>
&lt;p>For more details about the cookie itself, check out my &lt;a href="https://www.simoahava.com/amp/analytics/fpid-cookie-google-analytics-server-side-tagging/">previous article on FPID&lt;/a>.&lt;/p>
&lt;p>In that article, I mentioned one caveat for adopting FPID being the fact that &lt;a href="https://support.google.com/analytics/answer/10071811?hl=en">cross-domain tracking&lt;/a> will not work.&lt;/p>
&lt;p>I mean, how could it? FPID is an &lt;code>HttpOnly&lt;/code> cookie, which means it&amp;rsquo;s not available to JavaScript in the browser. Cross-domain tracking, on the other hand, decorates links dynamically as users click them, which means it needs the cookie to be available via JavaScript so that it could be decorated into the target page URL.&lt;/p></description></item><item><title>#GTMTips: The URL Parser Variable Template For Server Containers</title><link>https://www.simoahava.com/amp/gtm-tips/url-parser-variable-template-server-containers/</link><pubDate>Fri, 09 Apr 2021 07:25:12 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/url-parser-variable-template-server-containers/</guid><description>&lt;p>With &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging&lt;/a>, you can send any types of HTTP requests to the Server container. The Server container parses these, fires up container instances, and sends the data onwards to first-party data stores and third-party vendors alike.&lt;/p>
&lt;p>Often these requests contain URL strings encoded in query parameters. A prime example is the &lt;a href="https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters#dl">document location&lt;/a> parameter in Universal Analytics requests.&lt;/p>
&lt;p>Server-side &lt;strong>Clients&lt;/strong> would parse these URL strings and convert them into the format required by the &lt;a href="https://developers.google.com/tag-manager/serverside/common-event-data">event data object&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Map Multiple Domains To A Server-side Tagging Endpoint</title><link>https://www.simoahava.com/amp/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/</link><pubDate>Tue, 09 Mar 2021 14:38:12 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/map-multiple-domains-server-side-tagging-endpoint/</guid><description>&lt;p>One of the biggest perks of working with &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging&lt;/a> is that you can establish a &lt;strong>first-party context&lt;/strong> between the site sending the data and the server-side tagging endpoint itself.&lt;/p>
&lt;p>This leads to &lt;em>many&lt;/em> benefits, including improved control of the &lt;strong>data streams&lt;/strong>, the possibility to &lt;strong>set cookies&lt;/strong> that extend beyond &lt;a href="https://www.cookiestatus.com/safari/#first-party-cookies">ITP&amp;rsquo;s restrictions&lt;/a>, and reduced stress on an already very likely overloaded &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">&lt;strong>Content Security Policy&lt;/strong>&lt;/a>.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll show you how to map multiple custom domains to your Google Cloud Project application. I&amp;rsquo;ll also show you how to configure the container to support previewing all these different domains.&lt;/p></description></item><item><title>#GTMTips: The Data Layer Picker Variable Template</title><link>https://www.simoahava.com/amp/gtm-tips/data-layer-picker-variable-template/</link><pubDate>Thu, 25 Feb 2021 22:14:46 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/data-layer-picker-variable-template/</guid><description>&lt;p>There&amp;rsquo;s a new &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">custom variable template&lt;/a> in town! The &lt;strong>Data Layer Picker&lt;/strong> template lets you create variables that have a singular, exceptional (in &lt;a href="https://www.googletagmanager.com/">Google Tag Manager&amp;rsquo;s&lt;/a> context, at least) purpose:&lt;/p>
&lt;p>You can access the keys and values that were in the object pushed into &lt;code>dataLayer&lt;/code> itself. And &amp;hellip; that&amp;rsquo;s it! Read on to understand why this might be useful.&lt;/p>
&lt;h2 id="tip-123-direct-access-to-the-datalayerpush">Tip 123: Direct access to the dataLayer.push()&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2021/02/data-layer-picker-template.jpg" title="data-layer-picker-template.jpg">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2021/02/data-layer-picker-template.jpg" layout="responsive" alt="data-layer-picker-template.jpg" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>If you know your &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#5-data-layer-variable">Data Layer Variable&lt;/a>, you&amp;rsquo;ll know that it comes in &lt;a href="https://www.simoahava.com/amp/gtm-tips/data-layer-variable-versions-explained/">two versions&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Write Client ID And Other GTAG Fields Into dataLayer</title><link>https://www.simoahava.com/amp/gtmtips/write-client-id-other-gtag-fields-datalayer/</link><pubDate>Fri, 22 Jan 2021 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/gtmtips/write-client-id-other-gtag-fields-datalayer/</guid><description>&lt;p>One of the big omissions, at least for now, in &lt;a href="https://support.google.com/analytics/answer/10089681">Google Analytics 4&lt;/a> is the &lt;a href="https://www.simoahava.com/amp/analytics/customtask-the-guide/">&lt;code>customTask&lt;/code>&lt;/a>. It is unfortunate, but no such mechanism exists in the client-side SDKs.&lt;/p>
&lt;p>This means that you won&amp;rsquo;t be able to do all the magical things that &lt;a href="https://www.simoahava.com/amp/tools/customtask-builder/">&lt;code>customTask&lt;/code> enables in Universal Analytics&lt;/a>. One of the biggest headaches is how to collect extremely useful fields such as the Client ID, as these are &lt;em>not&lt;/em> available by default in the Google Analytics 4 reporting interface.&lt;/p></description></item><item><title>#GTMTips: Container Notifications In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/container-notifications-google-tag-manager/</link><pubDate>Thu, 03 Sep 2020 07:42:29 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/container-notifications-google-tag-manager/</guid><description>&lt;p>A recent update to &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> introduced &lt;strong>container notifications&lt;/strong>.&lt;/p>
&lt;p>By subscribing to container notifications, your Google Tag Manager login email address can be configured to receive an email for some of the key workflows in Google Tag Manager: containers getting published, and containers being submitted for &lt;a href="https://www.simoahava.com/amp/analytics/new-approval-workflow-gtm-360/">approval&lt;/a> (Tag Manager 360 only), for example.&lt;/p>
&lt;p>Be sure to check out the &lt;a href="https://support.google.com/tagmanager/answer/9713667">official help center article&lt;/a> about container notifications.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll walk you through the feature and share a couple of tips on how to make it even more useful!&lt;/p></description></item><item><title>#GTMTips: Utilize App Engine Headers In Server-side Tagging</title><link>https://www.simoahava.com/amp/gtm-tips/utilize-app-engine-headers-server-side-tagging/</link><pubDate>Wed, 26 Aug 2020 09:00:17 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/utilize-app-engine-headers-server-side-tagging/</guid><description>&lt;p>When you create a &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">Server container&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, GTM creates an &lt;a href="https://cloud.google.com/appengine">App Engine&lt;/a> deployment in the Google Cloud Platform for you.&lt;/p>
&lt;p>App Engine is a &lt;strong>managed serverless platform&lt;/strong>, which basically means it&amp;rsquo;s a (set of) virtual machine(s) running in the cloud, with some extra bells and whistles added to make managing it easier.&lt;/p>
&lt;p>A potentially useful thing that App Engine does is decorate all incoming HTTP requests with some HTTP headers that can be used in the app. These headers include &lt;strong>geolocation&lt;/strong> headers, based on the IP address of the machine that sent the hits.&lt;/p></description></item><item><title>#GTMTips: Get True IP Anonymization With Server-side Tagging</title><link>https://www.simoahava.com/amp/gtm-tips/get-true-ip-anonymization-server-side-tagging/</link><pubDate>Tue, 25 Aug 2020 09:52:51 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/get-true-ip-anonymization-server-side-tagging/</guid><description>&lt;p>Since the &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">release of Server-side tagging&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, I&amp;rsquo;ve jumped at every opportunity to celebrate the tools it provides for improving end-user privacy and data security.&lt;/p>
&lt;p>One of the biggest benefits is obfuscation-by-default. Since all hits are passed through the server-side proxy, the default view for any third-party tool (such as Google Analytics) is that of the server in the Google Cloud rather than the browser and device with which the user was browsing the site.&lt;/p></description></item><item><title>#GTMTips: Build A Custom Universal Analytics Client For Server-side Tagging</title><link>https://www.simoahava.com/amp/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/</link><pubDate>Wed, 12 Aug 2020 07:03:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/</guid><description>&lt;p>You can utilize &lt;a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">&lt;em>Server-side tagging&lt;/em>&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> to build your own custom Universal Analytics proxy.&lt;/p>
&lt;p>This proxy comes in the shape of a new &lt;strong>Client&lt;/strong> &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">custom template&lt;/a>, which takes the incoming &lt;code>/collect&lt;/code> requests and sends them to Google Analytics. While doing so, it also returns the &lt;code>_ga&lt;/code> cookie in a &lt;code>Set-Cookie&lt;/code> header, thus preventing Safari&amp;rsquo;s &lt;a href="https://www.cookiestatus.com/safari/">Intelligent Tracking Prevention&lt;/a> from capping its expiration to just 7 days.&lt;/p>
&lt;blockquote>
&lt;p>You might also be interested in reading what &lt;a href="https://www.simoahava.com/amp/analytics/fpid-cookie-google-analytics-server-side-tagging/">Google&amp;rsquo;s own solution&lt;/a> is for migrating from JavaScript cookies to those set in HTTP headers.&lt;/p></description></item><item><title>#GTMTips: Send Google Analytics Requests To Custom Endpoint</title><link>https://www.simoahava.com/amp/gtm-tips/send-google-analytics-requests-custom-endpoint/</link><pubDate>Wed, 12 Aug 2020 07:01:00 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/send-google-analytics-requests-custom-endpoint/</guid><description>&lt;p>When you use &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> on the web, you are most likely implementing one of &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs">analytics.js&lt;/a>, the &lt;a href="https://developers.google.com/analytics/devguides/collection/gtagjs">global site tag (gtag.js)&lt;/a>, or Universal Analytics tags via &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>.&lt;/p>
&lt;p>These libraries all end up doing the same thing: compiling a payload-rich HTTP request to an endpoint at &lt;code>https://www.google-analytics.com&lt;/code>.&lt;/p>
&lt;p>What if you want to have the JavaScript libraries do their job, but instead of sending the data to Google&amp;rsquo;s servers, you send them to a new, custom endpoint?&lt;/p></description></item><item><title>#GTMTips: Fix Container Preview In Google Chrome's Incognito Mode</title><link>https://www.simoahava.com/amp/gtm-tips/fix-preview-google-chrome-incognito-mode/</link><pubDate>Mon, 29 Jun 2020 13:08:26 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/fix-preview-google-chrome-incognito-mode/</guid><description>&lt;p>Since updating to &lt;a href="https://venturebeat.com/2020/05/19/google-chrome-83/">Google Chrome 83&lt;/a>, you might have noticed that &lt;a href="https://tagmanager.google.com/">Google Tag Manager&amp;rsquo;s&lt;/a> &lt;strong>Preview&lt;/strong> mode no longer works when browsing Chrome in Incognito mode.&lt;/p>
&lt;p>This is because starting with Chrome 83, &lt;strong>third-party cookies are blocked by default in Incognito windows&lt;/strong>.&lt;/p>
&lt;p>Google Tag Manager uses third-party cookies to serve browsers in Preview mode with the container draft rather than the live container.&lt;/p>
&lt;p>There&amp;rsquo;s a simple workaround to make sure Preview mode continues working for any site you want to browse in Preview mode.&lt;/p></description></item><item><title>#GTMTips: Use An All Events Trigger For More Control</title><link>https://www.simoahava.com/amp/gtm-tips/use-all-events-trigger-more-control/</link><pubDate>Wed, 06 May 2020 14:37:05 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-all-events-trigger-more-control/</guid><description>&lt;p>One of the most versatile &lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">triggers&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is the &lt;strong>Custom Event trigger&lt;/strong>. As its name indicates, you can use it to fire your tags when an &lt;strong>event&lt;/strong> is pushed into &lt;code>dataLayer&lt;/code>.&lt;/p>
&lt;p>This process is at the heart of GTM&amp;rsquo;s &lt;code>dataLayer&lt;/code> system. And it&amp;rsquo;s not just &lt;em>custom&lt;/em> events. Every single trigger type in Google Tag Manager uses the &lt;code>event&lt;/code> key in a &lt;code>dataLayer.push()&lt;/code>, which is why you&amp;rsquo;ll see events like &lt;code>gtm.click&lt;/code> (for the Click / All Elements trigger) and &lt;code>gtm.timer&lt;/code> (for the Timer trigger) ending up in &lt;code>dataLayer&lt;/code>, too.&lt;/p></description></item><item><title>#GTMTips: Use gtag.js Parameters In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/use-gtag-js-parameters-google-tag-manager/</link><pubDate>Fri, 24 Apr 2020 14:39:51 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-gtag-js-parameters-google-tag-manager/</guid><description>&lt;p>With the proliferation of &lt;a href="https://developers.google.com/analytics/devguides/collection/gtagjs">gtag.js&lt;/a> implementations, we can see that there&amp;rsquo;s a small-ish paradigm shift in how to implement Google&amp;rsquo;s stack of marketing tools.&lt;/p>
&lt;p>As adding gtag.js snippets to the site code becomes more and more common (to cater to things like &lt;a href="https://support.google.com/optimize/answer/9183119?hl=en">early Optimize loading&lt;/a>), you might be at a point where you have lots of interesting information stored in the gtag.js queue but no way to access it in your &lt;a href="https://tagmanager.google.comJ/">Google Tag Manager&lt;/a> tags and variables.&lt;/p></description></item><item><title>#GTMTips: Why Does The Google Analytics Tag Show 'Failed'</title><link>https://www.simoahava.com/amp/gtm-tips/google-analytics-tag-failed/</link><pubDate>Wed, 08 Apr 2020 13:57:43 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/google-analytics-tag-failed/</guid><description>&lt;p>I&amp;rsquo;ve covered the more pervasive issue with tags not firing in &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a> in my article on the &lt;a href="https://www.simoahava.com/amp/analytics/still-running-google-tag-manager-tags/">&amp;ldquo;Still Running&amp;rdquo; status&lt;/a>. However, there&amp;rsquo;s an additional problem you might face with &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a>: tags that show status &lt;strong>Failed&lt;/strong>, and which refuse to send any data to Google Analytics.&lt;/p>
&lt;p>There are a couple of possible reasons for this, and we&amp;rsquo;ll explore them in this article.&lt;/p>
&lt;blockquote>
&lt;p>Note that &lt;em>any&lt;/em> tag type in Google Tag Manager can signal &lt;strong>Failed&lt;/strong>. With the advent of &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">Custom Templates&lt;/a>, more and more templates are &lt;em>doing it right&lt;/em>, meaning they elicit an explicit &lt;strong>Failed&lt;/strong> status when the tag runs into issues. This isn&amp;rsquo;t the case with many native templates - they just gobble up the errors and refuse to signal that something went wrong.&lt;/p></description></item><item><title>#GTMTips: Keep iOS And Android Firebase Containers In Sync</title><link>https://www.simoahava.com/amp/analytics/keep-ios-android-firebase-containers-sync/</link><pubDate>Fri, 13 Mar 2020 09:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/keep-ios-android-firebase-containers-sync/</guid><description>&lt;p>With &lt;a href="https://www.simoahava.com/amp/analytics/ios-quickstart-google-analytics-firebase-tag-manager/">iOS&lt;/a> and &lt;a href="https://www.simoahava.com/amp/analytics/android-quickstart-google-analytics-firebase-google-tag-manager/">Android&lt;/a> containers available for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, it&amp;rsquo;s tempting to add &lt;a href="https://developers.google.com/tag-manager/android/v5">GTM as an integration&lt;/a> into an existing Firebase setup for your apps. It&amp;rsquo;s also a fine way to get acquainted with Firebase in the first place, as it has a &lt;a href="https://firebase.google.com/products">plethora of features&lt;/a> to make application development easier.&lt;/p>
&lt;p>Furthermore, with the advent of &lt;a href="https://www.simoahava.com/amp/analytics/getting-started-with-google-analytics-app-web/">App + Web&lt;/a>, there&amp;rsquo;s even more incentive to integrate your app with Firebase.&lt;/p>
&lt;p>Adding Google Tag Manager is basically one extra dependency, and even if the feature set &lt;em>at the moment&lt;/em> isn&amp;rsquo;t too spectacular, I&amp;rsquo;d be surprised if things like &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">custom templates&lt;/a> wouldn&amp;rsquo;t make their way to mobile at some point.&lt;/p></description></item><item><title>#GTMTips: Chrome Samesite Warnings For Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/chrome-samesite-warnings-google-tag-manager/</link><pubDate>Tue, 17 Dec 2019 14:00:02 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/chrome-samesite-warnings-google-tag-manager/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Update 17 February 2020&lt;/strong>: Google Tag Manager&amp;rsquo;s Preview mode cookies &lt;em>have&lt;/em> been updated with the necessary flags, so they will not break once SameSite enforcement begins.&lt;/p>
&lt;/blockquote>
&lt;p>If you&amp;rsquo;ve opened the &lt;a href="https://developers.google.com/web/tools/chrome-devtools/console">browser console&lt;/a> in Google Chrome (since &lt;a href="https://blog.chromium.org/2019/05/improving-privacy-and-security-on-web.html">Chrome 76&lt;/a>), you might have seen a bunch of warnings in a yellow background related to something called a &lt;code>SameSite&lt;/code> cookie attribute that is either missing or incompletely set for cookies set on external domains. If you use Google Tag Manager, especially in Preview mode, you might have seen a warning about the &lt;code>http(s)://www.googletagmanager.com&lt;/code> domain.&lt;/p></description></item><item><title>#GTMTips: Walkthrough Of Custom Template Tests</title><link>https://www.simoahava.com/amp/gtm-tips/tag-template-test-walkthrough/</link><pubDate>Wed, 20 Nov 2019 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/tag-template-test-walkthrough/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> now lets you add &lt;strong>unit tests&lt;/strong> directly to your &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">custom templates&lt;/a>. This is useful, since it allows you to control the code stability of your templates, especially if you&amp;rsquo;ve decided to &lt;a href="https://www.simoahava.com/amp/analytics/introducing-tag-manager-template-gallery/">share those templates with the public&lt;/a>.&lt;/p>
&lt;p>I recently shared &lt;a href="https://www.simoahava.com/amp/analytics/writing-tests-for-custom-templates-google-tag-manager/">a general guide&lt;/a> for how template tests work, but I wanted to expand the topic a little, and share with you two walkthroughs of custom template tests: one for a &lt;strong>variable template&lt;/strong> and one for a &lt;strong>tag template&lt;/strong>.&lt;/p></description></item><item><title>#GTMTips: Track Outbound Link Clicks In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/track-outbound-links-google-tag-manager/</link><pubDate>Wed, 30 Oct 2019 16:39:24 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/track-outbound-links-google-tag-manager/</guid><description>&lt;p>I&amp;rsquo;ve written about &lt;a href="https://www.simoahava.com/amp/gtm-tips/track-outbound-links-in-gtm-v2/">outbound link click tracking&lt;/a> before. It&amp;rsquo;s a very solid way to track interactions on the site, as clicking a link that leads &lt;em>away&lt;/em> from a site is a signal of &amp;hellip; well, something.&lt;/p>
&lt;p>In &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> it&amp;rsquo;s now &lt;em>extremely&lt;/em> easy and efficient to track outbound link clicks, thanks to the introduction of a new configuration in the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#8-auto-event-variable">Auto-Event variable&lt;/a>.&lt;/p>
&lt;p>This article will introduce the new method and show you how you can quickly set it up!&lt;/p></description></item><item><title>#GTMTips: The Mysterious .macro() Call In Custom HTML Tags</title><link>https://www.simoahava.com/amp/gtm-tips/mysterious-macro-call-custom-html-tags/</link><pubDate>Mon, 28 Oct 2019 11:14:20 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/mysterious-macro-call-custom-html-tags/</guid><description>&lt;p>When previewing &lt;strong>Custom HTML tags&lt;/strong> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> you&amp;rsquo;ve almost certainly run into a situation where the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/">GTM variable&lt;/a> shows up as a weird JavaScript method resembling something like this:&lt;/p>
&lt;p>&lt;code>google_tag_manager[&amp;quot;GTM-ABCD123&amp;quot;].macro(15)&lt;/code>&lt;/p>
&lt;p>And this is when you were expecting it to show the actual, resolved value!&lt;/p>
&lt;p>It doesn&amp;rsquo;t help that every now and then the preview mode actually shows to &lt;strong>correct&lt;/strong> value in the preview mode.&lt;/p>
&lt;p>What&amp;rsquo;s up with that? Well, there&amp;rsquo;s a fairly logical explanation to this. Read on!&lt;/p></description></item><item><title>#GTMTips: When Click Variables Are Undefined</title><link>https://www.simoahava.com/amp/gtm-tips/click-variables-undefined/</link><pubDate>Mon, 09 Sep 2019 11:59:41 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/click-variables-undefined/</guid><description>&lt;p>A surprisingly common question in &lt;a href="https://support.google.com/tagmanager/community?hl=en">forums&lt;/a> and &lt;a href="https://www.measure.chat/">communities&lt;/a> seems to be why the built-in &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#clicks">Click variables&lt;/a> show up as &lt;code>undefined&lt;/code> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&amp;rsquo;s&lt;/a> Preview mode, even if you click around the site.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll walk you through some of the reasons why this might happen.&lt;/p>
&lt;h2 id="tip-104-what-to-do-when-click-variables-are-undefined">Tip 104: What to do when Click variables are undefined&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2019/09/click-variables-undefined.jpg" title="Click variables are undefined">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2019/09/click-variables-undefined.jpg" layout="responsive" alt="Click variables are undefined" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Here&amp;rsquo;s the situation: you want to create a Click trigger for your tags, but in order to do so, you&amp;rsquo;d need to see what values the built-in Click variables (e.g. Click Classes, Click ID) get. Thus, it&amp;rsquo;s a chick-and-the-egg situation - you can&amp;rsquo;t create the trigger until you know what to track, and you can&amp;rsquo;t track until you create the trigger.&lt;/p></description></item><item><title>#GTMTips: Get Latest Exchange Rates For Client-side Conversions</title><link>https://www.simoahava.com/amp/gtm-tips/get-latest-exchange-rates-client-side-conversions/</link><pubDate>Wed, 07 Aug 2019 13:00:43 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/get-latest-exchange-rates-client-side-conversions/</guid><description>&lt;p>It&amp;rsquo;s been a while since I&amp;rsquo;ve last written a bona fide &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> &lt;strong>trick&lt;/strong>, so here comes. This was inspired by Bart Gibby&amp;rsquo;s question in &lt;a href="https://www.measure.chat/">Measure Slack&lt;/a>.&lt;/p>
&lt;p>The purpose is to fetch the latest currency exchange rates from the &lt;a href="https://exchangeratesapi.io">exchangeratesapi.io&lt;/a> service, cache them using &lt;code>sessionStorage&lt;/code>, and push the results into &lt;code>dataLayer&lt;/code>. From &lt;code>dataLayer&lt;/code>, they can then be utilized in Custom JavaScript variables and custom variable templates to perform client-side conversions. I&amp;rsquo;ll show you how!&lt;/p></description></item><item><title>#GTMTips: Enable Preview Mode In The Safari Browser</title><link>https://www.simoahava.com/amp/gtm-tips/enable-preview-mode-safari-browser/</link><pubDate>Wed, 24 Jul 2019 10:32:02 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/enable-preview-mode-safari-browser/</guid><description>&lt;p>With &lt;a href="https://www.simoahava.com/amp/analytics/itp-2-1-and-web-analytics/">Intelligent Tracking Prevention&lt;/a>, the Safari browser is on a crusade against cross-site tracking. One of the most obvious and long-standing ways to battle cross-site tracking has been to &lt;strong>block third-party cookies&lt;/strong> in the web browser, and this is exactly what Safari does by default.&lt;/p>
&lt;p>However, &lt;a href="https://tagmanager.google.com/">Google Tag Manager&amp;rsquo;s&lt;/a> Preview mode relies on a third-party cookies, so that it can serve you the draft version of the container while serving the regular, live container to your site visitors.&lt;/p></description></item><item><title>#GTMTips: Introducing The GTM Templates Library</title><link>https://www.simoahava.com/amp/gtm-tips/introducing-gtm-templates-library/</link><pubDate>Tue, 23 Jul 2019 11:51:06 +0300</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/introducing-gtm-templates-library/</guid><description>&lt;p>When &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">Custom Templates&lt;/a> were &lt;a href="https://www.blog.google/products/marketingplatform/analytics/tag-manager-introducing-custom-templates/">released&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, many of us active in the GTM communities started doing two things: 1) creating our &lt;a href="https://github.com/sahava/GoogleTagManagerTemplates/">own custom templates&lt;/a>, and 2) waiting patiently for Google to release a &amp;ldquo;gallery&amp;rdquo; or &amp;ldquo;library&amp;rdquo; for distributing these community contributions.&lt;/p>
&lt;p>While I have full faith in the latter happening some time in the future, I thought it would be fun to create something similar to a library, and then open-sourcing it for the community to help out with or to download locally for their own purposes.&lt;/p></description></item><item><title>#GTMTips: Send Page Visibility State To Google Analytics</title><link>https://www.simoahava.com/amp/analytics/send-page-visibility-state-to-ga/</link><pubDate>Tue, 18 Jun 2019 09:07:40 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/send-page-visibility-state-to-ga/</guid><description>&lt;p>One of my pet peeves about &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> has to do with nomenclature. For example, a &lt;strong>User&lt;/strong> isn&amp;rsquo;t really a user but a &lt;strong>browser instance&lt;/strong>, and &lt;strong>Direct&lt;/strong> traffic isn&amp;rsquo;t necessarily &amp;ldquo;direct&amp;rdquo; at all, but rather just traffic that has no discernible source. But being so invested in &lt;strong>content&lt;/strong> analytics, my biggest gripe has to do with &lt;strong>Pageviews&lt;/strong>.&lt;/p>
&lt;p>A &lt;strong>Pageview&lt;/strong> in Google Analytics is collected when a hit with the hit type &lt;code>pageview&lt;/code> is received successfully by the Google Analytics endpoint. This hit is dispatched most often with a JavaScript library such as &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a> or &lt;a href="https://developers.google.com/analytics/devguides/collection/gtagjs/">gtag.js&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Create Facebook Pixel Custom Tag Template</title><link>https://www.simoahava.com/amp/analytics/create-facebook-pixel-custom-tag-template/</link><pubDate>Thu, 23 May 2019 18:05:00 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/create-facebook-pixel-custom-tag-template/</guid><description>&lt;p>After the recent release of &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">Custom Templates&lt;/a> for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, my mind has been occupied by very little else. However, I have a nagging feeling that due to how involved the feature set is, there&amp;rsquo;s still a lot of demystifying that needs to take place before templates are fully embraced by the GTM user base.&lt;/p>
&lt;p>In this article, I want to show you a concrete example of template creation. It&amp;rsquo;s going to be much more ambitious than the simple &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/#tag-template-walkthrough">walkthrough&lt;/a> I explored in the &lt;a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">main guide&lt;/a>. This time, we&amp;rsquo;ll step through creating an actual, functional template that caters to a very specific use case: the &lt;a href="https://developers.facebook.com/docs/facebook-pixel/implementation/">Facebook Pixel&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Fetch The Latest Value Of A Data Layer Variable</title><link>https://www.simoahava.com/amp/analytics/fetch-latest-value-data-layer-variable/</link><pubDate>Thu, 25 Apr 2019 12:00:56 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/fetch-latest-value-data-layer-variable/</guid><description>&lt;p>One of &lt;a href="https://tagmanager.google.com/">Google Tag Manager&amp;rsquo;s&lt;/a> oldest and most reliable features is that it &lt;strong>freezes&lt;/strong> the state of Data Layer variables to the moment when the trigger event occurred. Thus, any tags firing on this trigger (and any variables resolved on this trigger event) will always have access to the same value of each Data Layer variable.&lt;/p>
&lt;p>However, there are situations where this is not a good thing. One is &lt;a href="https://www.simoahava.com/amp/analytics/understanding-tag-sequencing-in-google-tag-manager/#5-note-about-using-datalayer-push-in-the-sequence">tag sequencing&lt;/a>, and the other is a scenario where you want to run some custom code that should access the &lt;strong>latest&lt;/strong> value of the Data Layer variable at a moment in time &lt;strong>after&lt;/strong> the tag has already fired. Read on for an example!&lt;/p></description></item><item><title>#GTMTips: Create Utility Variables By Returning Functions</title><link>https://www.simoahava.com/amp/analytics/create-utility-variables-returning-functions/</link><pubDate>Wed, 13 Mar 2019 13:24:28 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/create-utility-variables-returning-functions/</guid><description>&lt;p>In &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#4-custom-javascript">Custom JavaScript variable&lt;/a> is an &lt;strong>anonymous function&lt;/strong> with a &lt;code>return&lt;/code> statement. It does not take any parameters, and by default it&amp;rsquo;s &lt;strong>impossible&lt;/strong> to pass any parameters to it, because the Custom JS variable is simply resolved to whatever value the function returns. If it returns a number, for example, passing a parameter to it would make no sense and would result in a &lt;code>TypeError&lt;/code> since the variable resolves to a number, not a function.&lt;/p></description></item><item><title>#GTMTips: Use localStorage For Client ID Persistence In Google Analytics</title><link>https://www.simoahava.com/amp/analytics/use-localstorage-client-id-persistence-google-analytics/</link><pubDate>Mon, 25 Feb 2019 12:31:37 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/use-localstorage-client-id-persistence-google-analytics/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Updated 1 October 2019&lt;/strong> With &lt;a href="https://webkit.org/blog/9521/intelligent-tracking-prevention-2-3/">ITP 2.3&lt;/a> it looks like Safari is reducing the usefulness of &lt;code>localStorage&lt;/code> as well, so this solution should &lt;strong>not&lt;/strong> be considered future-proof. The only stable way to persist client-side data at the moment seems to be &lt;a href="https://www.simoahava.com/amp/google-cloud/create-cookie-rewrite-web-service-google-cloud/">HTTP cookies&lt;/a>.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>&lt;strong>Updated 7 March 2019&lt;/strong> - Added some extra &lt;a href="#caveats">caveats&lt;/a> to this solution. Also, be sure to read my article on &lt;a href="https://www.simoahava.com/amp/analytics/itp-2-1-and-web-analytics/">ITP 2.1&lt;/a>, which has far more detail on what Intelligent Tracking Prevention is and how to work with it.&lt;/p></description></item><item><title>#GTMTips: Use Enhanced Ecommerce Data Layer With Facebook Pixel</title><link>https://www.simoahava.com/amp/analytics/enhanced-ecommerce-facebook-pixel/</link><pubDate>Thu, 07 Feb 2019 13:45:00 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/enhanced-ecommerce-facebook-pixel/</guid><description>&lt;p>A recurring question in the &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> communities (e.g. &lt;a href="https://productforums.google.com/forum/#!categories/tag-manager">product forums&lt;/a>) is &lt;strong>how to use an Enhanced Ecommerce &lt;code>dataLayer&lt;/code> object with the &lt;a href="https://www.facebook.com/business/help/651294705016616">Facebook pixel code&lt;/a>&lt;/strong>? It&amp;rsquo;s a common question since running a Facebook conversion pixel on a site that also collects data from the store into Google Analytics&amp;rsquo; &lt;a href="https://www.simoahava.com/amp/analytics/enhanced-ecommerce-guide-for-google-tag-manager/">Enhanced Ecommerce&lt;/a> reports is probably a very typical scenario.&lt;/p>
&lt;blockquote>
&lt;p>Side note: Since Google+ is about to go the way of the dodo, I&amp;rsquo;ve created an &lt;a href="https://gtm-archive.firebaseapp.com/">archive of the entire community&lt;/a> which you can browse and make text searches against.&lt;/p></description></item><item><title>#GTMTips: Trigger Javascript Function Without Using A Custom HTML Tag</title><link>https://www.simoahava.com/amp/analytics/trigger-javascript-without-using-custom-html-tag/</link><pubDate>Thu, 17 Jan 2019 19:39:15 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/trigger-javascript-without-using-custom-html-tag/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Last updated 9 October 2020&lt;/strong>: &lt;code>customTask&lt;/code> updated to a more stable version.&lt;/p>
&lt;/blockquote>
&lt;p>The &lt;strong>Custom HTML tag&lt;/strong> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is splendid. It&amp;rsquo;s your go-to tool when you need to run arbitrary JavaScript on the webpage. Some might even use it to actually add HTML elements to the page, but I&amp;rsquo;m willing to bet running JavaScript is its most common use.&lt;/p>
&lt;p>However, there&amp;rsquo;s a downside to Custom HTML tags, which is only made more apparent on single-page apps which do not clear the full page when transitioning from one state to another. Custom HTML tags are &lt;strong>injected to the end of &lt;code>&amp;lt;body&amp;gt;&lt;/code>&lt;/strong>, which means you might end up with a &lt;strong>lot&lt;/strong> of clutter in your Document Object Model.&lt;/p></description></item><item><title>#GTMTips: Use Click Variables With Element Visibility Trigger</title><link>https://www.simoahava.com/amp/analytics/use-click-variables-with-element-visibility-trigger/</link><pubDate>Tue, 11 Dec 2018 16:23:04 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/use-click-variables-with-element-visibility-trigger/</guid><description>&lt;p>If you are enjoying the &lt;a href="https://www.simoahava.com/amp/analytics/element-visibility-trigger-google-tag-manager/">Element Visibility trigger&lt;/a> as much as I am, you&amp;rsquo;ll be glad to know of a very simple tip that might make your life easier when using &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>.&lt;/p>
&lt;p>The tip is this: If you&amp;rsquo;ve activated the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#clicks">built-in&lt;/a> Click variables, they will be automatically populated with details about the element that caused the Element Visibility trigger to activate!&lt;/p>
&lt;h2 id="tip-92-use-built-in-variables-to-analyze-the-visible-element">Tip 92: Use Built-in variables to analyze the visible element&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2018/12/click-variables-element-visibility.jpg" title="Built-in variables for element visibility trigger">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2018/12/click-variables-element-visibility.jpg" layout="responsive" alt="Built-in variables for element visibility trigger" height="560" width="940">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Yes, it&amp;rsquo;s confusing they&amp;rsquo;re still named &lt;strong>Click&lt;/strong> variables, especially since they&amp;rsquo;re duplicated in the &lt;strong>Form&lt;/strong> variables, and even more so since they can be used with the &lt;strong>Element Visibility&lt;/strong> trigger to identify which element became visibility.&lt;/p></description></item><item><title>#GTMTips: Search dataLayer For A Key-Value Pair</title><link>https://www.simoahava.com/amp/analytics/search-datalayer-for-key-value-pair/</link><pubDate>Tue, 06 Nov 2018 10:05:27 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/search-datalayer-for-key-value-pair/</guid><description>&lt;p>One of the difficulties of working with &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> and the &lt;a href="https://www.simoahava.com/amp/analytics/data-layer/">&lt;code>dataLayer&lt;/code> structure&lt;/a> is that GTM doesn&amp;rsquo;t preserve &lt;strong>history&lt;/strong> of the items collected into its &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/">data model&lt;/a>. Or, at least, it doesn&amp;rsquo;t preserve it in a manner that would let us access it.&lt;/p>
&lt;p>This is typically a very niche problem, but it does surface every now and then. For example, say you wanted to query whether an &lt;code>event&lt;/code> with some specific value has already been pushed into &lt;code>dataLayer&lt;/code>. Well, this is impossible, since any &lt;code>event&lt;/code> you use to trigger this check would overwrite this previous &lt;code>event&lt;/code> value in the data model (since any given key can only have one value at a time).&lt;/p></description></item><item><title>#GTMTips: The Errors Tab In Preview Mode</title><link>https://www.simoahava.com/amp/analytics/new-errors-tab-preview-mode/</link><pubDate>Fri, 02 Nov 2018 01:01:50 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/new-errors-tab-preview-mode/</guid><description>&lt;p>While using the &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> user interface around Halloween 2018, you might have noticed a new tab in Google Tag Manager&amp;rsquo;s Preview mode. The tab is named &lt;strong>Errors&lt;/strong> and shows you the &lt;strong>number of exceptions thrown by GTM&amp;rsquo;s tag templates on the page&lt;/strong>. In this short &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> post, I&amp;rsquo;ll quickly walk you through what the tab shows.&lt;/p>
&lt;h2 id="tip-90-the-errors-tab-in-preview-mode">Tip 90: The Errors Tab In Preview Mode&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2018/11/errors-tab-preview-mode.jpg" title="Errors tab in Preview Mode">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2018/11/errors-tab-preview-mode.jpg" layout="responsive" alt="Errors tab in Preview Mode" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>The tab&amp;rsquo;s name is an apt description of what the tab shows. If a &lt;strong>tag template&lt;/strong> in GTM &lt;strong>fails to fire&lt;/strong> due to an error, this tab would show details about the tag that failed and the error that caused it.&lt;/p></description></item><item><title>#GTMTips: Prevent Clicks And Form Submits From Redirecting</title><link>https://www.simoahava.com/amp/analytics/prevent-clicks-and-form-submits-redirect/</link><pubDate>Tue, 16 Oct 2018 12:06:49 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/prevent-clicks-and-form-submits-redirect/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> offers us some nice built-in &lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">triggers&lt;/a> so that we can automatically listen for specific user interactions on the website, reacting to them however we wish, though typically it would be to fire a tag. The tricky thing especially with the click triggers and &lt;a href="https://www.simoahava.com/amp/analytics/track-form-engagement-with-google-tag-manager/">form submission tracking&lt;/a> is that the page has a nasty habit of redirecting you to the link or form target page before letting you see the respective data in Google Tag Manager&amp;rsquo;s excellent preview mode.&lt;/p></description></item><item><title>#GTMTips: Format Value Option In Google Tag Manager Variables</title><link>https://www.simoahava.com/amp/analytics/format-value-option-in-google-tag-manager-variables/</link><pubDate>Sat, 08 Sep 2018 22:42:58 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/format-value-option-in-google-tag-manager-variables/</guid><description>&lt;p>A very recent addition to &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is the &lt;strong>Format Value&lt;/strong> option in all of &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/">GTM&amp;rsquo;s variables&lt;/a>. With Format Value, you can modify the output of the variable with a number of pre-defined transformations.&lt;/p>
&lt;p>This is extremely handy, because you no longer need to create Custom JavaScript variables whose sole purpose of existence it to change the output of &lt;em>other&lt;/em> variables to lowercase, or to change &lt;code>undefined&lt;/code> values to fallback strings (e.g. &lt;code>(not set)&lt;/code>).&lt;/p></description></item><item><title>#GTMTips: Introducing The customTask Builder</title><link>https://www.simoahava.com/amp/analytics/introducing-customtask-builder/</link><pubDate>Thu, 23 Aug 2018 16:15:24 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/introducing-customtask-builder/</guid><description>&lt;p>One of the coolest features of &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> and, as a consequence, &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is &lt;a href="https://www.simoahava.com/amp/analytics/customtask-the-guide/">&lt;code>customTask&lt;/code>&lt;/a>. It&amp;rsquo;s a method you can use to add and execute code &lt;em>as the hit to Google Analytics is being generated&lt;/em>.&lt;/p>
&lt;p>I&amp;rsquo;ve written &lt;a href="https://www.simoahava.com/amp/tags/customtask/">A LOT&lt;/a> about &lt;code>customTask&lt;/code>, and much of the feedback I&amp;rsquo;ve received has been around the question of &lt;strong>how to combine all these different tricks into one &lt;code>customTask&lt;/code> script&lt;/strong>. The problem is, you see, that a tag or hit can only have one &lt;code>customTask&lt;/code> script attached to it, so the code within must combine all the different tricks I&amp;rsquo;ve been writing about over the past months.&lt;/p></description></item><item><title>#GTMTips: Decorate Links And Decorate Forms Tag Types</title><link>https://www.simoahava.com/amp/analytics/decorate-links-decorate-forms-tags/</link><pubDate>Wed, 08 Aug 2018 12:39:45 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/decorate-links-decorate-forms-tags/</guid><description>&lt;p>Getting &lt;a href="https://www.simoahava.com/amp/tags/#cross-domain-tracking-list">cross-domain tracking&lt;/a> right in &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> is difficult. Even if you use &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. There are many known issues when cross-domain tracking &lt;a href="https://www.simoahava.com/amp/analytics/iframe-cross-domain-tracking-in-google-tag-manager/">iframes&lt;/a>, for example.&lt;/p>
&lt;p>Google Tag Manager implements the cross-domain tracking plugin quite handily via the Universal Analytics tag template, and often the easiest way to track links and form submits is to use the &lt;strong>Auto-Link Domains&lt;/strong> option, as described in this great series of posts on &lt;a href="https://www.bounteous.com/insights/2015/06/16/cross-domain-tracking-with-google-tag-manager/">cross-domain tracking&lt;/a> by Bounteous.&lt;/p>
&lt;p>However, sometimes you want more precision in decorating the URLs. Perhaps you only want to decorate one specific link rather than all links that share the same hostname. Or perhaps you only want to decorate forms when they are submitted by your actual visitors rather than internal users.&lt;/p></description></item><item><title>#GTMTips: Two Simple Data Model Tricks</title><link>https://www.simoahava.com/amp/analytics/two-simple-data-model-tricks/</link><pubDate>Fri, 03 Aug 2018 09:46:04 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/two-simple-data-model-tricks/</guid><description>&lt;p>One of the more difficult concepts in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is the &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/">&lt;em>data model&lt;/em>&lt;/a>. In essence, the data model is what Google Tag Manager uses to populate the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/#5-data-layer-variable">Data Layer variable&lt;/a>. You might be tempted to think that it&amp;rsquo;s the same thing as the &lt;code>dataLayer&lt;/code> array, but it&amp;rsquo;s not.&lt;/p>
&lt;p>The data model is a representation of the keys and values you &lt;em>push&lt;/em> into &lt;code>dataLayer&lt;/code>. Whenever you push any key into &lt;code>dataLayer&lt;/code>, GTM grabs this key and updates the corresponding key in its data model with the new value, or in the case of objects and arrays merges the old and the new value together.&lt;/p></description></item><item><title>#GTMTips: Get Position Index Of Visible Element</title><link>https://www.simoahava.com/amp/analytics/get-position-index-of-visible-element/</link><pubDate>Thu, 02 Aug 2018 09:35:24 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/get-position-index-of-visible-element/</guid><description>&lt;p>It&amp;rsquo;s time for a very simple &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> article (I know, I always write that these are simple tips, but then they escalate into complex behemoths). Today, we&amp;rsquo;ll cover a nifty trick you can use with the &lt;a href="https://www.simoahava.com/amp/analytics/element-visibility-trigger-google-tag-manager/">Element Visibility trigger&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. This tip was inspired by a question from Eugen Potlog in the &lt;a href="https://www.facebook.com/groups/329145737601165/">Google Tag Manager Facebook group&lt;/a>.&lt;/p>
&lt;p>The use case is that you have an Element Visibility trigger firing for a number of elements all sharing the same CSS selector. In the image below, I want the visibility trigger to fire when any &lt;code>&amp;lt;h2&amp;gt;&lt;/code> header element becomes visibile on the screen. However, I also want to know which one of all those headers caused the trigger to fire. In other words, I want the &lt;strong>position&lt;/strong> of the header; If it&amp;rsquo;s the 5th header from the top, I want to get the number &lt;code>5&lt;/code> to use in my tags. If it&amp;rsquo;s the first header, I want it to return &lt;code>1&lt;/code>.&lt;/p></description></item><item><title>#GTMTips: Tag Sequencing With Custom HTML Tags</title><link>https://www.simoahava.com/amp/analytics/tag-sequencing-custom-html-tags/</link><pubDate>Sun, 22 Jul 2018 10:14:32 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/tag-sequencing-custom-html-tags/</guid><description>&lt;p>&lt;a href="https://www.simoahava.com/amp/analytics/understanding-tag-sequencing-in-google-tag-manager/">Tag sequencing&lt;/a> was introdced to &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> in late 2015. Its main purpose was to facilitate the &lt;em>sequential&lt;/em> firing of tags that have dependencies with each other. Due to the &lt;a href="https://www.pluralsight.com/guides/introduction-to-asynchronous-javascript">asynchronous&lt;/a> nature of third-party libraries like Google Tag Manager, it&amp;rsquo;s difficult to establish an order of completion with tags that compete for their chance to fire.&lt;/p>
&lt;p>Tag sequencing changed this, as it allows you to establish &lt;strong>setup&lt;/strong> and &lt;strong>cleanup&lt;/strong> tags - the former firing &lt;em>before&lt;/em> the main tag, and the latter &lt;em>after&lt;/em>.&lt;/p></description></item><item><title>#GTMTips: Fire Trigger When User Is About To Leave The Page</title><link>https://www.simoahava.com/amp/analytics/fire-trigger-when-user-about-to-leave-page/</link><pubDate>Sun, 15 Jul 2018 09:25:44 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/fire-trigger-when-user-about-to-leave-page/</guid><description>&lt;p>One of the great ways to leverage &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> in your web analytics tracking is to make use of all the possible &lt;a href="https://www.simoahava.com/amp/analytics/simple-custom-event-listeners-gtm/">custom events&lt;/a> that the browser has to offer. One such event is &lt;a href="https://developer.mozilla.org/en-US/docs/Web/Events/beforeunload">&lt;code>beforeunload&lt;/code>&lt;/a>. It&amp;rsquo;s dispatched in the browser when the user is about to &lt;em>unload&lt;/em> the page. This means, typically, that the user is about to leave the page after clicking a link, or they are about to exit the browser by either closing the tab or the entire window.&lt;/p></description></item><item><title>#GTMTips: Add Hit Type As A Custom Dimension</title><link>https://www.simoahava.com/amp/analytics/add-hit-type-custom-dimension/</link><pubDate>Mon, 14 May 2018 15:17:39 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/add-hit-type-custom-dimension/</guid><description>&lt;p>I&amp;rsquo;ve spent a considerable amount of time talking and writing about how to &lt;a href="https://www.simoahava.com/amp/analytics/improve-data-collection-with-four-custom-dimensions/">improve&lt;/a> the &lt;a href="https://www.simoahava.com/amp/analytics/track-browsing-behavior-in-google-analytics/">granularity&lt;/a> of your &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> data, especially when using &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. I&amp;rsquo;ve also gone on and on and on (and on) about &lt;a href="https://www.simoahava.com/amp/analytics/customtask-the-guide/">&lt;code>customTask&lt;/code>&lt;/a>, which makes adding metadata to the Google Analytics hits dispatched from your website a breeze.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll introduce a simple way to add yet another level of detail to your GA hits, using &lt;code>customTask&lt;/code> as the method of choice. The piece of data we&amp;rsquo;ll add is the &lt;strong>hit type&lt;/strong> of the hit (e.g. &lt;em>pageview&lt;/em>, &lt;em>event&lt;/em>, and &lt;em>timing&lt;/em>) which, for some ludicrous reason, is not a default dimension available in Google Analytics reports.&lt;/p></description></item><item><title>#GTMTips: Delay The History Change Trigger</title><link>https://www.simoahava.com/amp/analytics/delay-the-history-change-trigger/</link><pubDate>Wed, 09 May 2018 10:06:13 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/delay-the-history-change-trigger/</guid><description>&lt;p>When working with the analytics of &lt;a href="https://en.wikipedia.org/wiki/Single-page_application">single-page applications (SPA)&lt;/a>, there are a number of things to pay attention to. For example, you need to make sure that Google Analytics doesn&amp;rsquo;t &lt;a href="https://www.simoahava.com/amp/gtm-tips/fix-rogue-referral-problem-single-page-sites/">break your session attribution&lt;/a>, and that you are not inadvertently &lt;a href="https://www.simoahava.com/amp/analytics/site-speed-sample-rate-multiple-page-views/">inflating your page speed timing metrics&lt;/a>. Actually, there are so many &amp;ldquo;gotchas&amp;rdquo; when it comes to SPA tracking in tools like &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> that you just can&amp;rsquo;t get by with a plug-and-play implementation.&lt;/p>
&lt;p>See &lt;a href="https://www.bounteous.com/insights/2018/03/30/single-page-applications-google-analytics/">Dan Wilkerson&amp;rsquo;s excellent article&lt;/a>, which sums nicely the can of worms involved with tracking an SPA.&lt;/p></description></item><item><title>#GTMTips: Notify The Page That Google Tag Manager Has Loaded</title><link>https://www.simoahava.com/amp/analytics/notify-page-google-tag-manager-loaded/</link><pubDate>Fri, 13 Apr 2018 15:29:31 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/notify-page-google-tag-manager-loaded/</guid><description>&lt;p>Here&amp;rsquo;s a quick tip in response to a query in Twitter by Riccardo Mares. By making a small change to the &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> &lt;a href="https://www.simoahava.com/amp/analytics/container-snippet-gtm-secrets-revealed/">container snippet&lt;/a>, you can have the &lt;code>&amp;lt;script&amp;gt;&lt;/code> element generated by the snippet notify the page as soon as the Google Tag Manager library has downloaded.&lt;/p>
&lt;p>What you do with this information is up to you. If you are working directly with the &lt;a href="https://www.simoahava.com/analytics/100-google-tag-manager-learnings/#28-google-tag-manager-gtm-xxxx-datalayer-methods">&lt;code>google_tag_manager&lt;/code>&lt;/a> interface, for example, it might make sense to not act until the interface has been established.&lt;/p></description></item><item><title>#GTMTips: Sort Custom Dimensions By Index Number</title><link>https://www.simoahava.com/amp/analytics/sort-custom-dimensions-by-index-number/</link><pubDate>Thu, 12 Apr 2018 14:15:50 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/sort-custom-dimensions-by-index-number/</guid><description>&lt;p>Here&amp;rsquo;s a hacky &lt;a href="https://www.simoahava.com/amp/tags/gtmtips">#GTMTips&lt;/a> tip for you. Have you ever had a &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> container, where you&amp;rsquo;ve been updating your &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> tags over the years? And perhaps these tags (and, today, &lt;a href="https://www.simoahava.com/amp/analytics/google-analytics-settings-variable-in-gtm/">Google Analytics Settings variables&lt;/a>) have been updated with an ever-expanding list of Custom Dimensions? And perhaps this list of Custom Dimensions is sorted willy-nilly, because once you have 50+ rows, it just doesn&amp;rsquo;t seem like a fun thing to do to go over each row and update them so that they are sorted by Custom Dimension index?&lt;/p></description></item><item><title>#GTMTips: Use Wildcard CSS Selectors With All Elements Triggers</title><link>https://www.simoahava.com/amp/analytics/use-wildcard-css-selectors-with-all-elements-triggers/</link><pubDate>Fri, 06 Apr 2018 11:00:08 +0300</pubDate><guid>https://www.simoahava.com/amp/analytics/use-wildcard-css-selectors-with-all-elements-triggers/</guid><description>&lt;p>When using the &lt;strong>All Elements&lt;/strong> &lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">trigger&lt;/a> in &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>, it&amp;rsquo;s easy to overlook the fact that it captures &lt;strong>all&lt;/strong> clicks on the page. It&amp;rsquo;s also brutally accurate - it captures clicks on the &lt;strong>exact&lt;/strong> element that was below the mouse button when a click happened. This means that when working with the All Elements trigger, you need to be more careful when identifying the &lt;a href="https://www.simoahava.com/amp/analytics/capturing-the-correct-element-in-google-tag-manager/">correct element&lt;/a> you actually want to track clicks on.&lt;/p></description></item><item><title>#GTMTips: Embed Facebook Messenger Chat With Google Tag Manager</title><link>https://www.simoahava.com/amp/analytics/add-facebook-messenger-chat-google-tag-manager/</link><pubDate>Mon, 19 Mar 2018 09:09:35 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/add-facebook-messenger-chat-google-tag-manager/</guid><description>&lt;p>A while ago, I published a &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> article, where I showed how you can &lt;a href="https://www.simoahava.com/amp/analytics/add-html-elements-page-programmatically/">add HTML elements to the page programmatically&lt;/a> using &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>. This is relevant because GTM&amp;rsquo;s validators prevent you from adding custom parameters to HTML elements that are injected directly via the Custom HTML tag. To circumvent this validation, you need to create the element programmatically, before appending it to the document.&lt;/p>
&lt;p>A while ago, Matteo Gamba asked me a question related to the &lt;a href="https://developers.facebook.com/docs/messenger-platform/discovery/customer-chat-plugin">Facebook Customer Chat Plugin&lt;/a>. This plugin lets you add the Messenger chat of your own Facebook application directly to the website. It&amp;rsquo;s pretty cool, but the problem is that you are instructed to embed the plugin using custom HTML attributes, and these will not pass validation.&lt;/p></description></item><item><title>#GTMTips: Check Container ID With eventCallback</title><link>https://www.simoahava.com/amp/analytics/check-container-id-with-eventcallback/</link><pubDate>Wed, 14 Mar 2018 11:40:51 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/check-container-id-with-eventcallback/</guid><description>&lt;p>When you use the &lt;code>dataLayer.push()&lt;/code> command on a page with a &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> container, you pass information to GTM&amp;rsquo;s &lt;a href="https://www.simoahava.com/amp/analytics/data-layer/">internal data model&lt;/a> and potentially fire tags (if the &lt;code>push()&lt;/code> &lt;a href="https://www.simoahava.com/amp/gtm-tips/add-the-event-key-to-datalayer-pushes/">contained an &lt;code>event&lt;/code> key&lt;/a>). You can also &lt;a href="https://www.simoahava.com/amp/gtm-tips/hitcallback-eventcallback/">add the &lt;code>eventCallback&lt;/code> key&lt;/a> to these pushes. The value of this key should be a function, and this function is then executed once the container finishes processing any tags that might have fired on that &lt;code>dataLayer.push()&lt;/code>.&lt;/p>
&lt;p>This is useful if you want to give Google Tag Manager time to complete its operations before proceeding with other actions on the page, for example.&lt;/p></description></item><item><title>#GTMTips: Add HTML Elements To The Page Programmatically</title><link>https://www.simoahava.com/amp/analytics/add-html-elements-page-programmatically/</link><pubDate>Fri, 02 Mar 2018 09:00:52 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/add-html-elements-page-programmatically/</guid><description>&lt;p>One of the annoying quirks of &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> is that it strips out any non-standard HTML attributes from elements you add to Custom HTML tags. I&amp;rsquo;m using &amp;ldquo;non-standard&amp;rdquo; as a qualifier here, because I don&amp;rsquo;t have an exhaustive list of attributes that are ignored. But at least &lt;strong>data attributes&lt;/strong> (e.g. &lt;code>data-id&lt;/code>) and attributes with custom names (e.g. &lt;code>aria-labelledby&lt;/code>) are either stripped out upon injection, or GTM might actually prevent you from even saving the container if the Custom HTML tag has elements with these attributes.&lt;/p></description></item><item><title>#GTMTips: Check For Undefined Value</title><link>https://www.simoahava.com/amp/analytics/check-for-undefined-value/</link><pubDate>Tue, 27 Feb 2018 09:46:58 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/check-for-undefined-value/</guid><description>&lt;p>This is one of those &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> posts that I was certain I&amp;rsquo;d already written. So it came as a mild surprise when I realized I&amp;rsquo;d never tackled this aspect of &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>.&lt;/p>
&lt;p>It&amp;rsquo;s a short and sweet tip again. Today we&amp;rsquo;ll learn &lt;strong>how to check if a variable is undefined using Google Tag Manager&lt;/strong>.&lt;/p>
&lt;h2 id="tip-73-check-for-undefined-variable-values">Tip 73: Check for undefined variable values&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2018/02/check-for-undefined-value.jpg" title="Check for undefined value">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2018/02/check-for-undefined-value.jpg" layout="responsive" alt="Check for undefined value" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>If a variable is &lt;code>undefined&lt;/code>, it means that a variable with the given name does not currently have any valid value in memory. In JavaScript, the typical check for &lt;code>undefined&lt;/code> is done like this:&lt;/p></description></item><item><title>#GTMTips: Edit Google Analytics Tag Settings</title><link>https://www.simoahava.com/amp/analytics/edit-google-analytics-tag-settings/</link><pubDate>Mon, 19 Feb 2018 08:39:44 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/edit-google-analytics-tag-settings/</guid><description>&lt;p>When the &lt;a href="https://www.simoahava.com/amp/analytics/google-analytics-settings-variable-in-gtm/">Google Analytics Settings variable&lt;/a> was introduced in May 2017, it resulted in a significant change in the &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> tag user interface in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. The default UI for editing a tag was stripped down of all GA-specific settings, and the new &lt;strong>Google Analytics Settings&lt;/strong> drop-down was the replacement.&lt;/p>
&lt;p>Unfortunately, the bulk of Google Tag Manager articles online (including those on this blog) still refer to the old interface in screenshots and instructions. This &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> article is a very quick tip to show you how to reveal tag-specific settings without using a Google Analytics Settings variable.&lt;/p></description></item><item><title>#GTMTips: Fix Missing Page View Event And Broken Triggers</title><link>https://www.simoahava.com/amp/analytics/fix-missing-page-view-broken-triggers/</link><pubDate>Fri, 09 Feb 2018 09:18:42 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/fix-missing-page-view-broken-triggers/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> should be relatively easy to implement. Just paste the &lt;a href="https://www.simoahava.com/amp/analytics/container-snippet-gtm-secrets-revealed/">container snippet&lt;/a> to the &lt;code>&amp;lt;head&amp;gt;&lt;/code> of the page and you&amp;rsquo;re good to go! However, at some point you&amp;rsquo;ll want to configure the &lt;code>dataLayer&lt;/code> structure, too (read more about &lt;code>dataLayer&lt;/code> &lt;a href="https://www.simoahava.com/amp/analytics/data-layer/">here&lt;/a>). There are two ways to do it: the &lt;a href="https://www.simoahava.com/amp/gtm-tips/datalayer-declaration-vs-push/">right way and the wrong way&lt;/a>.&lt;/p>
&lt;p>In this article, we&amp;rsquo;ll see what happens if you do it the wrong way, how to identify the issue, and how to fix it.&lt;/p></description></item><item><title>#GTMTips: Automatically Duplicate Google Analytics Hits To Snowplow</title><link>https://www.simoahava.com/amp/analytics/automatically-fork-google-analytics-hits-snowplow/</link><pubDate>Thu, 01 Feb 2018 08:30:47 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/automatically-fork-google-analytics-hits-snowplow/</guid><description>&lt;p>I&amp;rsquo;m back with another &lt;a href="https://www.simoahava.com/amp/tags/customtask/">&lt;code>customTask&lt;/code>&lt;/a> tip, but this time I&amp;rsquo;m exploring some new territory. &lt;a href="https://snowplowanalytics.com/">Snowplow&lt;/a> just introduced their &lt;a href="https://snowplowanalytics.com/blog/2018/01/25/snowplow-r99-carnac-with-google-analytics-support/">latest version update&lt;/a>, which included (among other things) an adapter for processing Google Analytics payloads. Never heard of Snowplow? It&amp;rsquo;s a collection of open-source libraries designed to let you build your own analytics pipeline, all the way from data collection, through ETL (extract, transform, load), using custom enrichments and JSON schemas, and finally into your own data warehouse, where you can then analyze the data using whatever tools you find preferable. Everything is designed to run over &lt;a href="https://aws.amazon.com/">Amazon Web Services&lt;/a>, so you don&amp;rsquo;t need to invest in local server hardware or hosting services.&lt;/p></description></item><item><title>#GTMTips: Simple Custom Event Listeners With Google Tag Manager</title><link>https://www.simoahava.com/amp/analytics/simple-custom-event-listeners-gtm/</link><pubDate>Tue, 23 Jan 2018 12:12:01 +0200</pubDate><guid>https://www.simoahava.com/amp/analytics/simple-custom-event-listeners-gtm/</guid><description>&lt;p>First of all, check out &lt;a href="https://www.simoahava.com/amp/analytics/custom-event-listeners-gtm/">this article&lt;/a> for an overview of how custom event listeners work in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. The reason I&amp;rsquo;m writing this &lt;a href="https://www.simoahava.com/amp/tags/gtmtips/">#GTMTips&lt;/a> article is that I want to upgrade the solution slightly, and I want to bring it back into the spotlight. Why? Because it&amp;rsquo;s still one of the most effective ways to customize your Google Tag Manager implementation.&lt;/p>
&lt;p>A &lt;strong>custom event listener&lt;/strong> is a handler you write with JavaScript. It lets you handle any &lt;a href="https://developer.mozilla.org/en-US/docs/Web/Events">JavaScript DOM events&lt;/a>, such as click, form submit, mouse hover, drag, touch, error, page load and unload, and so many more. It also lets you leverage the &lt;code>useCapture&lt;/code> parameter which will prove very helpful if you have &lt;a href="https://www.simoahava.com/amp/gtm-tips/fix-problems-with-gtm-listeners/">other JavaScript on the site interfering&lt;/a> with GTM&amp;rsquo;s default event &lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">triggers&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Opt-out Of Google Analytics Tracking</title><link>https://www.simoahava.com/amp/gtm-tips/opt-out-of-google-analytics-tracking/</link><pubDate>Tue, 09 Jan 2018 16:17:18 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/opt-out-of-google-analytics-tracking/</guid><description>&lt;p>A while ago I posted a &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post where I detailed the steps you can take to &lt;a href="https://www.simoahava.com/amp/gtm-tips/respect-opt-out-from-advertising-and-analytics/">opt-out of all Google Analytics tracking&lt;/a> and the DoubleClick redirects that often follow. It was a fun exercise, but because it relies on preventing requests on a tag-by-tag basis (using the ubiquituous &lt;a href="https://www.simoahava.com/amp/tags/customtask/">&lt;code>customTask&lt;/code>&lt;/a>), it can be a chore to handle in large containers.&lt;/p>
&lt;p>In this article, we&amp;rsquo;ll continue with the theme of opting out from &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> tracking by leveraging a solution provided by the &lt;a href="https://developers.google.com/analytics/devguides/collection/gtagjs/user-opt-out">tool itself&lt;/a>. To make it work, we&amp;rsquo;ll use a Custom HTML tag together with some &lt;a href="https://www.simoahava.com/amp/analytics/understanding-tag-sequencing-in-google-tag-manager/">tag sequencing&lt;/a>.&lt;/p></description></item><item><title>#GTMTips: Auto Link Domains With Regex</title><link>https://www.simoahava.com/amp/gtm-tips/auto-link-domains-with-regex/</link><pubDate>Thu, 21 Dec 2017 10:06:19 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/auto-link-domains-with-regex/</guid><description>&lt;blockquote>
&lt;p>Update &lt;strong>5 March 2019&lt;/strong> due to GTM not supporting negative lookbehinds any more.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> makes it fairly easy to do &lt;a href="https://support.google.com/analytics/answer/1034342">cross-domain tracking&lt;/a>. Basically, you list the hostnames you want to automatically decorate with linker parameters in the &lt;strong>Auto-Link Domains&lt;/strong> field of your Page View tag, and that takes care of decorating the URLs with the necessary parameter. It&amp;rsquo;s dead easy, even if there are a bunch of traps you need to watch out for (see my post on &lt;a href="https://www.simoahava.com/amp/analytics/troubleshooting-cross-domain-tracking-in-google-analytics/">troubleshooting cross-domain tracking issues&lt;/a>).&lt;/p></description></item><item><title>#GTMTips: Add A Load Listener To Script Elements</title><link>https://www.simoahava.com/amp/gtm-tips/add-load-listener-script-elements/</link><pubDate>Tue, 12 Dec 2017 11:21:51 +0200</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/add-load-listener-script-elements/</guid><description>&lt;p>One of the challenges in working with &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> (or any JavaScript-based platform for that matter) is what to do with &lt;a href="https://www.simoahava.com/amp/analytics/google-analytics-page-load/">race conditions&lt;/a>. A &lt;strong>race condition&lt;/strong> emerges when you have two resources competing for execution in the browser, and there is a degree of unpredictability to which &amp;ldquo;wins&amp;rdquo; the race.&lt;/p>
&lt;p>A prime example is working with &lt;a href="https://www.jquery.com/">jQuery&lt;/a>. It&amp;rsquo;s one of the most popular JavaScript libraries out there, and websites utilize it for a multitude of things, many useful for Google Tag Manager, too. For example, jQuery trivializes &lt;a href="http://api.jquery.com/jquery.ajax/">asynchronous HTTP requests&lt;/a> and &lt;a href="https://api.jquery.com/category/traversing/">DOM traversal&lt;/a>, both of which can cause headaches to GTM users.&lt;/p></description></item><item><title>#GTMTips: Respect Opt-Out From Advertising And Analytics</title><link>https://www.simoahava.com/amp/gtm-tips/respect-opt-out-from-advertising-and-analytics/</link><pubDate>Fri, 03 Nov 2017 08:09:09 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/respect-opt-out-from-advertising-and-analytics/</guid><description>&lt;p>With &lt;a href="https://piwik.pro/blog/gdpr-interview-aurelie-pols/">GDPR&lt;/a> looming around the corner, it&amp;rsquo;s time to explore the options you have at your disposal for respecting the new, stricter regulations for tracking users and for collecting data about their visits to your website.&lt;/p>
&lt;blockquote>
&lt;p>UPDATE 20 June 2018: Google has released the &lt;code>allowAdFeatures&lt;/code> field which renders the solution below redundant (at least for the &lt;code>displayFeaturesTask&lt;/code> part of it). Please refer to &lt;a href="https://www.simoahava.com/amp/analytics/allow-block-advertising-features-google-analytics/">this article&lt;/a> for more details on how to conditionally block the advertising hit to DoubleClick.&lt;/p></description></item><item><title>#GTMTips: Remove PII From Google Analytics Hits</title><link>https://www.simoahava.com/amp/gtm-tips/remove-pii-google-analytics-hits/</link><pubDate>Thu, 31 Aug 2017 14:31:10 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/remove-pii-google-analytics-hits/</guid><description>&lt;p>Sending &lt;strong>personally identifiable information&lt;/strong> (PII) to &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> is one of the things you should really avoid doing. For one, it&amp;rsquo;s against the terms of service of the platform, but also you will most likely be in violation of national, federal, or EU legislation drafted to protect the privacy of individuals online.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post, I&amp;rsquo;ll show you a way to make sure that any tags you configure this solution with will not contain strings that might be construed as PII. The tip is for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, but with very little modifications it will work with Universal Analytics, too.&lt;/p></description></item><item><title>#GTMTips: Pagination And Quick Search</title><link>https://www.simoahava.com/amp/gtm-tips/pagination-and-quick-search/</link><pubDate>Tue, 22 Aug 2017 07:12:20 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/pagination-and-quick-search/</guid><description>&lt;p>If you open the &lt;a href="https://tagmanager.google.com/">Google Tag Manager user interface&lt;/a> and browser your tags, triggers, and variables, you might notice that the UI now has two new features:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Pagination, where only 50 results are shown per page&lt;/p>
&lt;/li>
&lt;li>
&lt;p>A quick search / filter bar at the top of each list, which lets you narrow the list down to results that match your query&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;strong>Pagination&lt;/strong> might be a nuisance in large containers, but it was implemented to improve performance. Fetching the list of assets and rendering them on the screen can be a pretty hefty amount of API work, especially if the container is bloated. By introducing pagination, only 50 items are processed at a time, which speeds up the UI. However, being forced to plow through pages of assets can get tedious.&lt;/p></description></item><item><title>#GTMTips: Create String From Multiple Object Properties</title><link>https://www.simoahava.com/amp/gtm-tips/create-string-multiple-object-properties/</link><pubDate>Mon, 31 Jul 2017 07:56:34 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/create-string-multiple-object-properties/</guid><description>&lt;p>&lt;a href="https://developers.facebook.com/docs/facebook-pixel/">Facebook&amp;rsquo;s pixel&lt;/a> has an attribute named &lt;code>content_ids&lt;/code> (required for &lt;a href="https://developers.facebook.com/docs/marketing-api/dynamic-ad">Dynamic Ads&lt;/a>), which requires an Array of content IDs as its value. It&amp;rsquo;s very possible you&amp;rsquo;re running this pixel on a site which already has &lt;a href="https://developers.google.com/tag-manager/enhanced-ecommerce">Enhanced Ecommerce&lt;/a> for Universal Analytics implemented, and now you want to use the same Enhanced Ecommerce data that your developers have already made available in this Facebook pixel.&lt;/p>
&lt;p>Or perhaps you want to concatenate a list of strings, such as article tags (&lt;code>['culture', 'politics']&lt;/code>), and send it as a comma-separated string to Google Analytics (&lt;code>'culture,politics'&lt;/code>).&lt;/p></description></item><item><title>#GTMTips: Send Google Analytics Tag To Multiple Properties</title><link>https://www.simoahava.com/amp/gtm-tips/send-google-analytics-tag-multiple-properties/</link><pubDate>Mon, 26 Jun 2017 07:54:57 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/send-google-analytics-tag-multiple-properties/</guid><description>&lt;p>Here we are again, revisiting an old theme. When using &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, we often want to send the contents of the same tag to multiple &lt;a href="https://analytics.google.com">Universal Analytics&lt;/a> properties. With on-page GA, this used to be quite simple, as all you had to do was create a new tracker and then just remember to run the &lt;code>ga('trackerName.send'...)&lt;/code> commands to all the trackers (or you could use my &lt;a href="https://www.simoahava.com/amp/analytics/simple-tracker-duplication-universal-analytics/">duplicator&lt;/a> plugin). With GTM, your options are more limited, since Google Tag Manager abstracts the tracker object, giving you far fewer tools to work with.&lt;/p></description></item><item><title>#GTMTips: Use customTask To Access Tracker Values In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/use-customtask-access-tracker-values-google-tag-manager/</link><pubDate>Tue, 13 Jun 2017 08:27:38 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-customtask-access-tracker-values-google-tag-manager/</guid><description>&lt;p>One of the things I&amp;rsquo;ve recommended from the get-go is to &lt;a href="https://www.simoahava.com/amp/analytics/improve-data-collection-with-four-custom-dimensions/">always send the Client ID&lt;/a> to &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> with your users&amp;rsquo; hits. This is very useful for adding a level of granularity to your tracking. At first, I recommended using an Event tag to do this. Then I modified my approach a little so that you could send it with your initial &lt;a href="https://www.simoahava.com/amp/analytics/access-the-tracker-object-in-your-page-view-tag/">Page View&lt;/a> (thus not inflating your hit counts).&lt;/p>
&lt;p>However, Universal Analytics recently released a new &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks">task API&lt;/a>, &lt;code>customTask&lt;/code>, which lets you access the model object mid-tag, thus letting you modify the payload that is dispatched to Google Analytics. In this article, I&amp;rsquo;ll show you how this works by using the classic example of sending the Client ID to Google Analytics.&lt;/p></description></item><item><title>#GTMTips: Enable And Fire Triggers In Google Tag Manager</title><link>https://www.simoahava.com/amp/gtm-tips/enable-fire-triggers-google-tag-manager/</link><pubDate>Mon, 08 May 2017 07:23:51 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/enable-fire-triggers-google-tag-manager/</guid><description>&lt;p>This is, by no means, a novel topic in this blog. I&amp;rsquo;ve covered &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>&amp;rsquo;s event tracking and triggers numerous times before (see below).&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://www.simoahava.com/amp/analytics/auto-event-tracking-gtm-2-0/">Auto-Event Tracking In GTM 2.0&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.simoahava.com/amp/gtm-tips/track-outbound-links-in-gtm-v2/">#GTMtips: Track Outbound Links In GTM V2&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.simoahava.com/amp/gtm-tips/fix-problems-with-gtm-listeners/">#GTMtips: Fix Problems With GTM Listeners&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">Trigger Guide For Google Tag Manager&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>However, based on the number of queries we still see in the Google Tag Manager &lt;a href="https://productforums.google.com/forum/#!forum/tag-manager">Product Forums&lt;/a> about event tracking, I believe one particular aspect of GTM&amp;rsquo;s triggers invites revisiting. I&amp;rsquo;m talking about the way that &lt;strong>Just Links&lt;/strong>, &lt;strong>Form&lt;/strong>, and &lt;strong>Timer&lt;/strong> triggers can be both &lt;strong>Enabled&lt;/strong> and &lt;strong>Fired&lt;/strong>. This can easily lead to some confusion.&lt;/p></description></item><item><title>#GTMTips: User Permissions</title><link>https://www.simoahava.com/amp/gtm-tips/user-permissions/</link><pubDate>Mon, 10 Apr 2017 10:24:11 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/user-permissions/</guid><description>&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> article, we&amp;rsquo;ll take a look at &lt;a href="https://support.google.com/tagmanager/answer/6107011?hl=en">&lt;strong>user permissions&lt;/strong>&lt;/a> and access control levels that &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> lets you set today. Doing access control &lt;em>right&lt;/em> from a user interface AND user experience perspective is really difficult, and GTM is no exception. Nevertheless, there are several levels of user control that you can modify from account and container settings, and it&amp;rsquo;s useful to familiarize with these so that managing a big, sprawling account hierarchy would be just a bit easier.&lt;/p></description></item><item><title>#GTMTips: Cross-domain Tracking With Multiple GA Trackers</title><link>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-with-multiple-ga-trackers/</link><pubDate>Wed, 08 Mar 2017 15:15:04 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/cross-domain-tracking-with-multiple-ga-trackers/</guid><description>&lt;p>To be fair, this tip isn&amp;rsquo;t just for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> but for regular old on-page &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> as well. It&amp;rsquo;s one of those little things that&amp;rsquo;s corroding your data quality without you ever realizing it. Namely, this tip is about how to handle &lt;strong>cross-domain tracking&lt;/strong> in situations where you are sending data to multiple Google Analytics properties on the same page.&lt;/p>
&lt;p>It&amp;rsquo;s a very typical scenario - you have a &amp;ldquo;local&amp;rdquo; property, which tracks only the traffic of the current site, and then a &amp;ldquo;rollup&amp;rdquo; property, where you send data from all your organization&amp;rsquo;s websites. The rollup property would need cross-domain tracking enabled, since you want to track users across your organization&amp;rsquo;s many website domains.&lt;/p></description></item><item><title>#GTMTips: Test Against Multiple URLs In Your Triggers</title><link>https://www.simoahava.com/amp/gtm-tips/gtmtips-test-multiple-urls-triggers/</link><pubDate>Fri, 10 Feb 2017 10:16:15 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtmtips-test-multiple-urls-triggers/</guid><description>&lt;p>The beauty of &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a>, at least how I&amp;rsquo;ve envisioned them, is that they can be really simple or crazy complex. The important thing is that the &lt;em>idea&lt;/em> is conveyed clearly enough. That&amp;rsquo;s why so many of these tips have originated from discussions in our &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> &lt;a href="https://plus.google.com/communities/104865292981489764063">Google+ community&lt;/a>, the &lt;a href="https://productforums.google.com/forum/#!forum/tag-manager">Product Forums&lt;/a>, and in private email correspondence with people asking for help. Today&amp;rsquo;s tip, for example, originated from a back-and-forth with Sleyman Okan, so thank you for the inspiration!&lt;/p></description></item><item><title>#GTMTips: 10 Useful Custom JavaScript Tricks</title><link>https://www.simoahava.com/amp/gtm-tips/10-useful-custom-javascript-tricks/</link><pubDate>Wed, 18 Jan 2017 11:34:13 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/10-useful-custom-javascript-tricks/</guid><description>&lt;p>I recently published a &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> guide called &lt;a href="https://www.simoahava.com/amp/gtm-tips/10-useful-css-selectors/">10 Useful CSS Selectors&lt;/a>, and it was very well received. Inspired by the feedback, here&amp;rsquo;s the next instalment. This time, we&amp;rsquo;re going over some useful JavaScript tips and tricks that you can use to make your &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> deployment even more efficient. &lt;a href="https://www.simoahava.com/amp/tags/javascript/">I&amp;rsquo;ve written &lt;strong>a lot&lt;/strong> about JavaScript in this blog&lt;/a>, and I intend to keep on doing so in the future. As always, if JavaScript is somewhat of a mystery to you, I strongly recommend you take the &lt;a href="https://www.codecademy.com/learn/javascript">Codecademy (free) course on JS&lt;/a>, and take a look at the other available web technology tracks while you&amp;rsquo;re there!&lt;/p></description></item><item><title>#GTMTips: 10 Useful CSS Selectors</title><link>https://www.simoahava.com/amp/gtm-tips/10-useful-css-selectors/</link><pubDate>Wed, 04 Jan 2017 10:37:16 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/10-useful-css-selectors/</guid><description>&lt;p>Without a doubt, the possibility to leverage &lt;a href="http://www.w3schools.com/cssref/css_selectors.asp">CSS selectors&lt;/a> in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&amp;rsquo;s&lt;/a> trigger conditions is one of the most useful features of the platform. It gives you an amazing amount of flexibility, especially when combined with GTM&amp;rsquo;s click and form triggers.&lt;/p>
&lt;p>Essentially, CSS selectors let you test an &lt;strong>HTML Element&lt;/strong> against a &lt;em>selector string&lt;/em>. This check verifies that the element matches the given selector. In practice, this would mean that when you use the click or form trigger, you can check if the &lt;strong>Click Element&lt;/strong> or &lt;strong>Form Element&lt;/strong> &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/">built-in variables&lt;/a> match a specific selector, allowing you to confirm that the action happened on the correct element. I&amp;rsquo;ll explain this with more detail further down.&lt;/p></description></item><item><title>#GTMTips: Change Management With Workspaces</title><link>https://www.simoahava.com/amp/gtm-tips/change-management-workspaces/</link><pubDate>Tue, 13 Dec 2016 10:01:42 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/change-management-workspaces/</guid><description>&lt;p>A while ago, the &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> team published one of my favorite feature releases in the history of GTM: &lt;a href="https://support.google.com/tagmanager/answer/7059647?hl=en">Workspaces&lt;/a>. I was so thrilled by this release that I went ahead and published &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-workspaces/">a guide&lt;/a> on how to implement and leverage this new feature.&lt;/p>
&lt;p>Workspaces is a very comprehensive feature in Google Tag Manager. This is because it changed the entire underlying data model. We no longer work directly with a single container draft. Instead, our work is done in a cordoned section of the container, protected from changes made to other workspaces until such a time that we choose to sync the latest container version to our workspace, or vice versa.&lt;/p></description></item><item><title>#GTMTips: Fix The Rogue Referral Problem In Single-Page Sites</title><link>https://www.simoahava.com/amp/gtm-tips/fix-rogue-referral-problem-single-page-sites/</link><pubDate>Tue, 01 Nov 2016 11:58:07 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/fix-rogue-referral-problem-single-page-sites/</guid><description>&lt;p>Single-page sites (or single-page apps) typically have just one page load. When navigating the site, subsequent content is either uncovered from the DOM, where it&amp;rsquo;s been in a hidden state, or loaded from the server using HTTP requests that do not invoke a new page refresh. This behavior, however, has some implications for &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> tracking, especially when configured via &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>.&lt;/p>
&lt;p>The crux of the problem is this: When you create a &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers">Google Analytics tracker&lt;/a>, the URL of the page (without a possible #hash) from when the tracker was created is sent as the value of the &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#location">Document Location&lt;/a> field with every hit that uses this tracker. This is used for a number of things, most significantly attributing the session to the campaign specified by URL parameters such as &lt;code>gclid&lt;/code> (AdWords) or &lt;code>utm_source, utm_medium&lt;/code>.&lt;/p></description></item><item><title>#GTMTips: Restrict Custom HTML Tag Scope</title><link>https://www.simoahava.com/amp/gtm-tips/restrict-custom-html-tag-scope/</link><pubDate>Tue, 18 Oct 2016 15:06:53 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/restrict-custom-html-tag-scope/</guid><description>&lt;p>What better way to celebrate the &lt;strong>50th&lt;/strong> &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> article than, well, a &lt;em>really useful &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> tip&lt;/em>?! This tip is so useful and simple; it encapsulates everything that I had in mind when starting this series. The tip is about &lt;em>restricting scope&lt;/em> of Custom HTML Tags. This is an important concept, because it&amp;rsquo;s possible that you&amp;rsquo;re stuffing your page&amp;rsquo;s global JavaScript namespace with all sorts of junk, and thus inadvertently causing conflicts.&lt;/p></description></item><item><title>#GTMTips: Debug Change History In GTM</title><link>https://www.simoahava.com/amp/gtm-tips/debug-change-history-gtm/</link><pubDate>Fri, 30 Sep 2016 07:44:44 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/debug-change-history-gtm/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> can be quite the hierarchical mess. You have &lt;em>accounts&lt;/em> which comprise &lt;em>containers&lt;/em>. Containers are split into &lt;em>container versions&lt;/em>, and you use &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-workspaces/">&lt;em>workspaces&lt;/em>&lt;/a> to create new versions. Phew! Trying to keep tabs on all the activity within these layers can be quite the chore.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> article, I&amp;rsquo;ll do a quick walkthrough of (almost) all the places where you can review changes made in your Google Tag Manager account and container.&lt;/p></description></item><item><title>#GTMTips: Use eventTimeout With eventCallback</title><link>https://www.simoahava.com/amp/gtm-tips/use-eventtimeout-eventcallback/</link><pubDate>Wed, 27 Jul 2016 08:43:20 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-eventtimeout-eventcallback/</guid><description>&lt;p>There are times when I&amp;rsquo;m disappointed with &lt;a href="https://developers.google.com/tag-manager/devguide">Google&amp;rsquo;s developer documentation&lt;/a>, especially for &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. Most of the time they get it right, and I&amp;rsquo;d say around 80% of questions being thrown around the forums can be answered just by reading through the documentation. But there are some cases where the documentation is misleading or even downright dangerous. One of these cases is &lt;a href="https://developers.google.com/tag-manager/enhanced-ecommerce">Enhanced Ecommerce&lt;/a>.&lt;/p>
&lt;p>This isn&amp;rsquo;t going to be a thorough critique of said documentation, but the tip in this post has to do with one of the examples that the documentation gives for &lt;a href="https://developers.google.com/tag-manager/enhanced-ecommerce#product-clicks">measuring Product Clicks&lt;/a>. In the comment it says:&lt;/p></description></item><item><title>#GTMTips: Deploy GTM In Your Chrome Extension</title><link>https://www.simoahava.com/amp/gtm-tips/gtmtips-deploy-gtm-chrome-extension/</link><pubDate>Wed, 22 Jun 2016 07:31:57 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtmtips-deploy-gtm-chrome-extension/</guid><description>&lt;p>Have you created a &lt;a href="https://developer.chrome.com/extensions">Chrome Extension&lt;/a>, and now you&amp;rsquo;re dying to find out how users are interacting with it? Perhaps you want to see what features are (not) being utilized, or perhaps you&amp;rsquo;re just interested in knowing if people are actually using it.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll show you how to configure &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, so that it works in the restricted sandbox of the Chrome Extension. You&amp;rsquo;ll need to make some tweaks, but it&amp;rsquo;s still perfectly doable.&lt;/p></description></item><item><title>#GTMTips: Using document.write Safely In GTM Tags</title><link>https://www.simoahava.com/amp/gtm-tips/using-document-write-safely-gtm-tags/</link><pubDate>Tue, 17 May 2016 07:25:04 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/using-document-write-safely-gtm-tags/</guid><description>&lt;p>This article is a guest article by someone from the analytics community I really look up to. &lt;a href="https://www.bounteous.com/insights/author/danwilkerson/">Dan Wilkerson&lt;/a> is an analytics developer at &lt;a href="https://www.bounteous.com/">Bounteous&lt;/a>, a company I hold in high esteem. Dan is one of the smartest technical analytics experts out there, and a large bulk of the awesome scripts and hacks that Bounteous produces (almost on a daily basis) have been orchestrated by him. So I&amp;rsquo;m very pleased to give the floor to Dan, so that he can tell you all about using the pesky &lt;code>document.write()&lt;/code> method in your &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> Custom HTML Tags!&lt;/p></description></item><item><title>#GTMTips: The Timer Trigger</title><link>https://www.simoahava.com/amp/gtm-tips/timer-trigger/</link><pubDate>Mon, 25 Apr 2016 10:02:10 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/timer-trigger/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> has a &lt;a href="https://www.simoahava.com/amp/analytics/trigger-guide-google-tag-manager/">Trigger&lt;/a> type which fires after a certain duration of time has passed on the web page: the Timer Trigger. The most common uses for the Timer Trigger seem to be either to send an event to Google Analytics after X seconds of dwell time (to kill the Bounce), or to defer a Tag from firing until some asynchronous request has completed with certainty.&lt;/p>
&lt;p>In the previous version of Google Tag Manager, the Timer was a separate listener Tag, which meant that you could start a timer based on a user interaction such as a click. In the current version of GTM, this is no longer possible, as the Timer Trigger will only start when GTM is first loaded on the page. So, one of the tips in this article will be how create your own Timer, in case you want to start one based on some other stimulus than the Page View.&lt;/p></description></item><item><title>#GTMTips: 10 Blogs, 10 Articles, 10 People To Follow</title><link>https://www.simoahava.com/amp/gtm-tips/gtmtips-10-blogs-10-articles-10-people-follow/</link><pubDate>Mon, 04 Apr 2016 15:11:07 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtmtips-10-blogs-10-articles-10-people-follow/</guid><description>&lt;p>Quite a while ago, I wrote &lt;a href="https://www.simoahava.com/amp/analytics/awesome-google-tag-manager-resources/">an article&lt;/a> on what I considered (then) to be my favorite &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> resources. Many of them are still very valid, but I still wanted to write a follow-up. Times have changed, and GTM is very different from what it was two years ago when I wrote the post.&lt;/p>
&lt;p>So in this article, I want to divert your attention to 10 blogs, 10 articles, and 10 people - all which are and/or share excellent Google Tag Manager content on a periodic basis.&lt;/p></description></item><item><title>#GTMTips: Track JavaScript Errors As Events</title><link>https://www.simoahava.com/amp/gtm-tips/track-javascript-errors-events/</link><pubDate>Thu, 24 Mar 2016 07:11:53 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/track-javascript-errors-events/</guid><description>&lt;p>Back back to the friggin&amp;rsquo; basics. Almost two years ago, I wrote a two-parter on how to have fun with &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>: &lt;a href="https://www.simoahava.com/amp/analytics/fun-with-google-tag-manager-part-1/">Part 1&lt;/a>, and &lt;a href="https://www.simoahava.com/amp/analytics/fun-google-tag-manager-part-2/">Part 2&lt;/a>. The first part had a nice exercise for tracking JavaScript Errors as Google Analytics Events, using the recently published &amp;ldquo;JavaScript Error Listener&amp;rdquo; Tag.&lt;/p>
&lt;p>Well, that was in GTM V1. Now we&amp;rsquo;ve been smoothly sailing with the wonderful new interface for well over a year, and it&amp;rsquo;s time to update some of these nifty tricks. In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post, I&amp;rsquo;ll show you how to track uncaught JavaScript errors in the new interface, plus give you some tips on the overall process.&lt;/p></description></item><item><title>#GTMTips: Check If DOM Ready Or Window Loaded Have Fired</title><link>https://www.simoahava.com/amp/gtm-tips/check-if-dom-ready-or-window-loaded-have-fired/</link><pubDate>Thu, 04 Feb 2016 09:06:59 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/check-if-dom-ready-or-window-loaded-have-fired/</guid><description>&lt;p>Every now and then I run into a problem which needs some creativity to find a fix. When choosing a course of action, I tend to land first on an extremely complicated solution. However, if I&amp;rsquo;m patient enough, I manage to whittle it down to something far more manageable and efficient.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post, I&amp;rsquo;ll show you one of these extremely simple solutions to a problem which you might normally overcomplicate. The solution is a very well hidden feature of &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>, buried deep in the bowels of the &lt;code>google_tag_manager&lt;/code> interface.&lt;/p></description></item><item><title>#GTMTips: Be Careful With The Tracker Name Setting</title><link>https://www.simoahava.com/amp/gtm-tips/be-careful-with-the-tracker-name-setting/</link><pubDate>Mon, 25 Jan 2016 11:44:19 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/be-careful-with-the-tracker-name-setting/</guid><description>&lt;p>Hello friends! Today I want to direct your attention to a &lt;strong>dangerous&lt;/strong> setting found within the bowels of the Universal Analytics Tag template in &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. In fact, GTM itself &lt;em>highly discourages&lt;/em> you from meddling with it:&lt;/p>


 &lt;a href="https://www.simoahava.com/amp/images/2016/01/highly-discouraged-tracker-name.jpg" title="Use of tracker name is highly discouraged">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2016/01/highly-discouraged-tracker-name.jpg" layout="responsive" alt="Use of tracker name is highly discouraged" height="180" width="1254">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>I actually agree with this warning. It should be highly discouraged, as modifying the tracker name introduces a potential hazard to your tracking plan, &lt;em>unless you know what you&amp;rsquo;re doing&lt;/em>.&lt;/p></description></item><item><title>#GTMTips: Data Layer Variable Versions Explained</title><link>https://www.simoahava.com/amp/gtm-tips/data-layer-variable-versions-explained/</link><pubDate>Tue, 19 Jan 2016 11:59:35 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/data-layer-variable-versions-explained/</guid><description>&lt;p>&lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>&amp;rsquo;s &lt;a href="https://www.simoahava.com/amp/analytics/data-layer/">Data Layer&lt;/a> is something I&amp;rsquo;ve touched upon in pretty much all of my articles. It&amp;rsquo;s such an integral part of what makes a tag management solution great and applicable to a host of business scenarios. I&amp;rsquo;ve also talked at length about the internal data model of Google Tag Manager, and this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post is very much related to this rather murky concept.&lt;/p>
&lt;p>In this post, we&amp;rsquo;ll go over the &lt;strong>Data Layer Variable Version&lt;/strong> selection, and I&amp;rsquo;ll try to explain just what this selector does.&lt;/p></description></item><item><title>#GTMTips: Track Launch Campaigns In GTM For iOS</title><link>https://www.simoahava.com/amp/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/</link><pubDate>Wed, 23 Dec 2015 08:10:43 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/</guid><description>&lt;p>In &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> for iOS, there are two types of campaign measurement. There&amp;rsquo;s &lt;a href="https://developers.google.com/analytics/devguides/collection/ios/v3/campaigns#ios-install">install campaign measurement&lt;/a>, which lets you track the channels which brought your visitors to the App Store, where they proceeded to download your app. There&amp;rsquo;s also &lt;a href="https://developers.google.com/analytics/devguides/collection/ios/v3/campaigns#general-campaigns">launch campaign tracking&lt;/a>, which lets you attribute app launches to specific campaigns.&lt;/p>
&lt;p>In this tip post, we&amp;rsquo;ll tackle the latter. We&amp;rsquo;ll leverage a feature of the &lt;a href="https://developers.google.com/analytics/devguides/collection/ios/v3/">Google Analytics iOS SDK&lt;/a> to build the parameters, and then push them to &lt;code>dataLayer&lt;/code> so that they can be used in the Tag.&lt;/p></description></item><item><title>#GTMTips: URL Source In The URL Variable</title><link>https://www.simoahava.com/amp/gtm-tips/url-source-in-the-url-variable/</link><pubDate>Tue, 22 Dec 2015 07:53:18 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/url-source-in-the-url-variable/</guid><description>&lt;p>One of the less-known features of &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>, a hidden gem if you will, is the &lt;strong>URL Source&lt;/strong> setting in the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/">URL Variable&lt;/a> type. It lets you parse &lt;em>any&lt;/em> URL String for its components.&lt;/p>
&lt;h2 id="tip-38-parse-url-strings-with-the-url-source-setting">Tip 38: Parse URL strings with the URL Source setting&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/12/url-source-variable.jpg" title="Parse URL string with URL Source setting">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/12/url-source-variable.jpg" layout="responsive" alt="Parse URL string with URL Source setting" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>The setting itself is easy to find. Just edit an existing &lt;strong>URL&lt;/strong> Variable, or create a new one. Then, scroll down to the &lt;strong>More Settings&lt;/strong> divider, expand it, and you&amp;rsquo;ll see the &lt;strong>URL Source&lt;/strong> drop-down list.&lt;/p></description></item><item><title>#GTMTips: Multiple GTM Containers On The Page</title><link>https://www.simoahava.com/amp/gtm-tips/multiple-gtm-containers-on-the-page/</link><pubDate>Mon, 21 Dec 2015 09:35:12 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/multiple-gtm-containers-on-the-page/</guid><description>&lt;p>For some reason, you might run into a situation where you need to add multiple &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> containers on the same page. Usually this is because of poor governance or an inflexible organization. My recommendation is to fix things in your projects first, and only resort to multiple containers if you can&amp;rsquo;t seem to resolve your governance issues using your vocal cords (or your fists).&lt;/p>
&lt;p>Officially, Google Tag Manager introduced &lt;a href="https://developers.google.com/tag-manager/devguide?hl=en#multiple-containers">support for adding multiple containers&lt;/a> earlier in 2015. It&amp;rsquo;s still not a recommended process, however, and rightfully so. Personally, I hope that development efforts in GTM would be directed towards making a single container more manageable by different parties, rather than adding support for hacks like this.&lt;/p></description></item><item><title>#GTMTips: GTM Container Snippet In The HEAD</title><link>https://www.simoahava.com/amp/gtm-tips/gtm-container-snippet-in-the-head/</link><pubDate>Tue, 15 Dec 2015 08:56:20 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtm-container-snippet-in-the-head/</guid><description>&lt;p>(&lt;strong>UPDATE 28 Sep 2016&lt;/strong>: The &lt;a href="https://developers.google.com/tag-manager/quickstart">official recommendation&lt;/a> has finally caught up with the times. Now the correct placement for the JavaScript methods of the container snippet is, indeed, in &lt;code>&amp;lt;head&amp;gt;&lt;/code>.)&lt;/p>
&lt;p>I want to address something I&amp;rsquo;ve been confused about from the very first day since I started using &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>. Why on earth would an asynchronously loading JavaScript library be recommended to place in the beginning of &lt;code>&amp;lt;body&amp;gt;&lt;/code>, when the logical place to start loading dependencies is as early as possible in the document load process? Well, the main reason for this is that the GTM library makes modifications to the document object model of the page in such a way that &lt;a href="https://support.microsoft.com/en-us/kb/927917">might cause conflicts&lt;/a> when using Internet Explorer 7 or older.&lt;/p></description></item><item><title>#GTMTips: Useful GTM For iOS Tips</title><link>https://www.simoahava.com/amp/gtm-tips/useful-gtm-for-ios-tips/</link><pubDate>Thu, 03 Dec 2015 07:49:22 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/useful-gtm-for-ios-tips/</guid><description>&lt;p>A while ago I wrote a blog post about how to install &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a> for iOS using the Swift programming language (you can read the article &lt;a href="https://www.simoahava.com/amp/analytics/setup-google-tag-manager-ios-with-swift/">here&lt;/a>). I&amp;rsquo;ve been doing a lot of work with Swift lately, and I&amp;rsquo;m more and more convinced that GTM is actually a very powerful utility for running in your iOS app instead of the &lt;a href="https://developers.google.com/analytics/devguides/collection/ios/v3/">Google Analytics SDK&lt;/a>.&lt;/p>
&lt;p>Why? Because it abstracts a lot of the nitty-gritty you&amp;rsquo;d otherwise need to explicitly manage in your GA installation. Also, by using the &lt;code>TAGDataLayer&lt;/code> interface, you&amp;rsquo;re abstracting stuff &lt;em>yourself&lt;/em>, not forced to adopt any specific syntax or semantic structure in your tracking. Instead, you&amp;rsquo;ll be leveraging generic key-value pairs and an object structure, which you&amp;rsquo;re probably already familiar with if you&amp;rsquo;ve worked with GTM for the web.&lt;/p></description></item><item><title>#GTMTips: Referral Exclusion On Receipt Page</title><link>https://www.simoahava.com/amp/gtm-tips/referral-exclusion-on-receipt-page/</link><pubDate>Thu, 19 Nov 2015 07:27:02 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/referral-exclusion-on-receipt-page/</guid><description>&lt;p>You might have noticed that the &lt;a href="https://support.google.com/analytics/answer/2795830?hl=en">Referral Exclusion List&lt;/a> in &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a> is difficult to maintain. You can&amp;rsquo;t copy a list from one property to another, the list is a wildcard match for domain names (so all subdomains are automatically excluded), and it&amp;rsquo;s just about the clunkiest user interface we&amp;rsquo;ve seen since ERP tools from the 1990s. A while ago, I &lt;a href="https://www.simoahava.com/amp/gtm-tips/implement-referral-exclusions-via-gtm/">wrote of a solution&lt;/a> which lets you manage referral exclusions using &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>, and it&amp;rsquo;s still a neat trick, as it&amp;rsquo;s way more flexible than said clunky UI.&lt;/p></description></item><item><title>#GTMTips: Check For New User</title><link>https://www.simoahava.com/amp/gtm-tips/check-for-new-user/</link><pubDate>Thu, 17 Sep 2015 11:13:14 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/check-for-new-user/</guid><description>&lt;p>Every now and then we want to create a bridge between the stateful machines we send data to (e.g. &lt;a href="https://analytics.google.com/">Google Analytics&lt;/a>), and the stateless environment where we collect the data itself (e.g. &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a>). This &lt;em>is not easy&lt;/em>. There is no synergy between Google Analytics and Google Tag Manager which would let the latter understand anything about things like &lt;em>sessions&lt;/em> or &lt;em>landing pages&lt;/em> or &lt;em>Bounce Rates&lt;/em>.&lt;/p>
&lt;p>One thing we can reliably measure, however, is whether or not the visitor is a &lt;strong>New User&lt;/strong> in Google Analytics. This is done by checking whether or not the Universal Analytics cookie &lt;code>_ga&lt;/code> exists in the user&amp;rsquo;s browser when they enter the site. Naturally, this check needs to happen before the Universal Analytics Tag has time to create the cookie, which is the only difficult thing to solve here.&lt;/p></description></item><item><title>#GTMTips: Prevent Tag From Firing In iFrame</title><link>https://www.simoahava.com/amp/gtm-tips/prevent-tag-from-firing-in-iframe/</link><pubDate>Fri, 04 Sep 2015 10:35:53 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/prevent-tag-from-firing-in-iframe/</guid><description>&lt;p>Unfortunately, iFrames still exist. They are used to embed content from one page into another. Frames are horrible, nasty things, very often riddled with cross-domain problems, performance issues, responsive design obstructions and other crap from the nether pits of hell. Regardless, if you&amp;rsquo;re stuck with an iFrame which also collects data to your &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> property, for example, you probably want to prevent at least the &lt;strong>first&lt;/strong> Page View from firing, since otherwise you&amp;rsquo;ll be double-counting Page Views: once on the main page and once in the iFrame. In this tip, I&amp;rsquo;ll show you how to prevent a Tag from firing if it&amp;rsquo;s executed in a document that is in an iFrame.&lt;/p></description></item><item><title>#GTMTips: Product-Scoped Custom Dimensions And Metrics</title><link>https://www.simoahava.com/amp/gtm-tips/product-scoped-custom-dimensions-and-metrics/</link><pubDate>Fri, 14 Aug 2015 07:01:37 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/product-scoped-custom-dimensions-and-metrics/</guid><description>&lt;p>With the advent of &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce">Enhanced Ecommerce for Universal Analytics&lt;/a>, a new &lt;strong>scope&lt;/strong> was introduced for &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/custom-dims-mets">Custom Dimensions and Metrics&lt;/a>. &lt;strong>Product scope&lt;/strong> can be used to send information about each product that is sent through Enhanced Ecommerce, but it&amp;rsquo;s not exactly the most logical or intuitive thing to wrap your head around.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMTips&lt;/a> post, we&amp;rsquo;ll take a look at how to implement Product-Scoped Custom definitions via &lt;a href="https://developers.google.com/tag-manager/enhanced-ecommerce">Google Tag Manager&lt;/a>, and I&amp;rsquo;ll quickly explain how they work in relation to queries and reports you might want to build on top of them.&lt;/p></description></item><item><title>#GTMTips: Block Your Tags With Trigger Exceptions</title><link>https://www.simoahava.com/amp/gtm-tips/block-your-tags-with-trigger-exceptions/</link><pubDate>Mon, 10 Aug 2015 09:54:29 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/block-your-tags-with-trigger-exceptions/</guid><description>&lt;p>To prevent a Tag from firing in &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>, you can:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Delete the Tag&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Remove all Triggers from the Tag&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Add an &lt;strong>Exception&lt;/strong> Trigger to the Tag&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>The third option is usually the best if the blocking is just temporary. Exceptions are what used to be called &lt;em>blocking rules&lt;/em> in the first version of GTM. To add them is easy enough. In the &lt;strong>Fire On&lt;/strong> step of Tag creation, you can click &lt;strong>Create Exceptions&lt;/strong>, and choose the Trigger that will block this Tag from firing.&lt;/p></description></item><item><title>#GTMTips: Access Array Members In The Data Layer</title><link>https://www.simoahava.com/amp/gtm-tips/access-array-members-in-the-data-layer/</link><pubDate>Fri, 24 Jul 2015 06:16:55 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/access-array-members-in-the-data-layer/</guid><description>&lt;p>In JavaScript, if you want to access an Array member, you use square bracket notation to retrieve the value stored at a specific index. Indices are numbered in order, with the first index always being at location &lt;strong>zero (0)&lt;/strong>. This means that to get the first value stored in Array &lt;code>simo&lt;/code>, you&amp;rsquo;d use something like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">firstValue&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">simo&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">];&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;p>In &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a>, you can push Arrays into the &lt;a href="https://www.simoahava.com/amp/analytics/data-layer/">Data Layer&lt;/a>. However, the &lt;a href="https://www.simoahava.com/amp/analytics/variable-guide-google-tag-manager/">Data Layer Variable&lt;/a> type, which you use to retrieve values stored in the Data Layer, does &lt;strong>not&lt;/strong> support the aforementioned square bracket notation in its fields. Instead, you need to use a special, proprietary format to access Array members.&lt;/p></description></item><item><title>#GTMTips: Implement Referral Exclusions Via GTM</title><link>https://www.simoahava.com/amp/gtm-tips/implement-referral-exclusions-via-gtm/</link><pubDate>Fri, 17 Jul 2015 11:46:56 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/implement-referral-exclusions-via-gtm/</guid><description>&lt;p>Maintaining the list of &lt;a href="https://support.google.com/analytics/answer/2795830?hl=en">Referral Exclusions&lt;/a> in &lt;a href="https://analytics.google.com">Google Analytics&lt;/a> admin is a &lt;strong>pain&lt;/strong>. Especially if you have a webstore, the number of referral sources you need to exclude to avoid sessions being split can grow really fast. Also, it&amp;rsquo;s not like the list is has the most intuitive UI. Instead of a handy text area where you could just copy-paste stuff, you&amp;rsquo;re left with a horrible line-by-line list, and there&amp;rsquo;s no way of copying lists across properties or anything useful like that.&lt;/p></description></item><item><title>#GTMTips: Remember To Flush Unused Data Layer Variables</title><link>https://www.simoahava.com/amp/gtm-tips/remember-to-flush-unused-data-layer-variables/</link><pubDate>Tue, 30 Jun 2015 15:36:59 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/remember-to-flush-unused-data-layer-variables/</guid><description>&lt;p>Here&amp;rsquo;s a tip that&amp;rsquo;s especially important to anyone working with a single-page application. &lt;a href="https://tagmanager.google.com">Google Tag Manager&lt;/a> &lt;em>persists&lt;/em> items in its &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/">data model&lt;/a> until you either manually delete the variable and/or its value from the data model, or until the user browses away from the page. There&amp;rsquo;s nothing as annoying as the example in the image below, where a value that was set for an earlier Tag is resent with a new Tag, even though the purpose was to leave it out.&lt;/p></description></item><item><title>#GTMTips: Remove Email Addresses From URL Parameters</title><link>https://www.simoahava.com/amp/gtm-tips/remove-email-addresses-from-url-parameters/</link><pubDate>Mon, 22 Jun 2015 10:39:53 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/remove-email-addresses-from-url-parameters/</guid><description>&lt;p>PII (Personally Identifiable Information) is something we need to actively combat against when using Google Analytics, as the platform &lt;a href="https://support.google.com/analytics/answer/2795983">explicitly forbids&lt;/a> sending PII to Google Analytics properties in any size, form, or shape.&lt;/p>
&lt;p>One of the most common ways of accidentally passing PII to a property is via query parameters. Many email platforms out there, for example, see no problem in including the user&amp;rsquo;s email address in the query string, especially when the user follows a link in a newsletter. This is, however, a definite no-no in Google Analytics. Thus, I wanted to create a blanket solution for proactively weeding out potential PII in your Google Analytics Tags deployed via Google Tag Manager.&lt;/p></description></item><item><title>#GTMTips: Take The Google Tag Manager Fundamentals Course</title><link>https://www.simoahava.com/amp/gtm-tips/take-the-google-tag-manager-fundamentals-course/</link><pubDate>Mon, 15 Jun 2015 12:50:02 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/take-the-google-tag-manager-fundamentals-course/</guid><description>&lt;p>Are you (even marginally) interested in one of the most powerful tag management systems out there? Do you want to refresh your memory on how JavaScript works in the web? Do you want to get the most out of Google Tag Manager as the go-to system for all marketing and measurement tagging on your websites?&lt;/p>
&lt;p>Take the &lt;a href="https://analyticsacademy.withgoogle.com/course05/preview">Google Tag Manager Fundamentals Course&lt;/a> at the &lt;a href="https://analyticsacademy.withgoogle.com/explorer">Analytics Academy&lt;/a>, then! And take it even if you have no idea what the tool is.&lt;/p></description></item><item><title>#GTMTips: Add Google Tag Manager To Your Blogger Blog</title><link>https://www.simoahava.com/amp/gtm-tips/add-google-tag-manager-to-your-blogger-blog/</link><pubDate>Thu, 11 Jun 2015 16:17:17 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/add-google-tag-manager-to-your-blogger-blog/</guid><description>&lt;p>This is a very simple tip, but judging by the number of queries on the &lt;a href="https://productforums.google.com/forum/#!forum/tag-manager">Product Forums&lt;/a>, it should prove helpful.&lt;/p>
&lt;p>&lt;a href="http://www.blogger.com/">Blogger&lt;/a> is a free blogging service by Google. Like WordPress, they allow you to run hosted blogs on the blogger.com domain, and they also allow you to modify the HTML source. This, of course, means that you can add the Google Tag Manager code to the HTML template, if you wish (and why wouldn&amp;rsquo;t you!).&lt;/p></description></item><item><title>#GTMtips: How To Get Google Tag Manager Help</title><link>https://www.simoahava.com/amp/gtm-tips/how-to-get-google-tag-manager-help/</link><pubDate>Mon, 25 May 2015 17:22:54 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/how-to-get-google-tag-manager-help/</guid><description>&lt;p>&lt;a href="http://tagmanager.google.com/">Google Tag Manager&lt;/a> has a learning curve. We&amp;rsquo;ve all gone through it. The &lt;a href="https://developers.google.com/tag-manager/devguide">developer guide&lt;/a> as well as the new and improved &lt;a href="https://support.google.com/tagmanager/?hl=en#topic=3441530">help center&lt;/a> are very useful, but they do not answer all the questions a thorough implementation project might face. There are many ways to find answers to your questions, and I thought I&amp;rsquo;d go through some of my favorite options here.&lt;/p>
&lt;h2 id="tip-22-get-gtm-assistance">Tip 22: Get GTM Assistance&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/05/get-gtm-assistance.jpg" title="Get Google Tag Manager help">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/05/get-gtm-assistance.jpg" layout="responsive" alt="Get Google Tag Manager help" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>To help you in getting help with GTM, there are two things we&amp;rsquo;ll need to go over: &lt;strong>where&lt;/strong> to look for help, and &lt;strong>how&lt;/strong> to ask for assistance.&lt;/p></description></item><item><title>#GTMtips: Use The All Pages Trigger Correctly</title><link>https://www.simoahava.com/amp/gtm-tips/use-the-all-pages-trigger-correctly/</link><pubDate>Wed, 22 Apr 2015 07:47:19 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/use-the-all-pages-trigger-correctly/</guid><description>&lt;p>Here&amp;rsquo;s a very quick tip this time, but one that&amp;rsquo;s caused a lot of headache for many &lt;a href="http://tagmanager.google.com">Google Tag Manager&lt;/a> users.&lt;/p>
&lt;h2 id="tip-21-use-the-all-pages-trigger-correctly">Tip 21: Use the All Pages Trigger correctly&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/04/use-all-pages-correctly.jpg" title="Use the All Pages Trigger correctly">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/04/use-all-pages-correctly.jpg" layout="responsive" alt="Use the All Pages Trigger correctly" height="540" width="960">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Let&amp;rsquo;s face it, &lt;strong>All Pages&lt;/strong> isn&amp;rsquo;t really an intuitive Trigger name. Many seem to interpret it as: &lt;em>enable&lt;/em> the Tag to fire on all pages, but use the other Trigger (e.g. Link Click) to actually fire it.&lt;/p></description></item><item><title>#GTMtips: Migration To V2 Using The Migration Assistant</title><link>https://www.simoahava.com/amp/gtm-tips/migration-to-v2-using-the-migration-assistant/</link><pubDate>Tue, 31 Mar 2015 08:48:11 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/migration-to-v2-using-the-migration-assistant/</guid><description>&lt;p>On March 30th, right on (the latest) schedule, the Migration Assistant tool was published for &lt;a href="http://tagmanager.google.com/">Google Tag Manager V2&lt;/a>. This tool lets you opt-in to account migration for your &lt;em>legacy&lt;/em> Google Tag Manager Accounts. Migration means simply that the accounts will be converted to V2 accounts, and you will have access to all the new features the upgrade provides.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMtips&lt;/a> post, we&amp;rsquo;ll go over the migration steps (it&amp;rsquo;s pretty simple), and I&amp;rsquo;ll leave you with a couple of tips on how to get started with the new features.&lt;/p></description></item><item><title>#GTMtips: Debugging Tag Execution Properly</title><link>https://www.simoahava.com/amp/gtm-tips/debugging-tag-execution-properly/</link><pubDate>Mon, 23 Mar 2015 13:32:03 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/debugging-tag-execution-properly/</guid><description>&lt;p>One of the unfortunate misunderstandings regarding the wonderful &lt;a href="http://tagmanager.google.com">Google Tag Manager&lt;/a> Preview mode is what it actually means when GTM reports &amp;ldquo;Tags Fired On This Event&amp;rdquo;. For many, this seems to indicate that whatever code the Tag was meant to execute also completed successfully. However, this is not the case.&lt;/p>
&lt;h2 id="tip-19-debugging-tag-execution-vs-actual-requests">Tip 19: Debugging Tag execution vs. actual requests&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/03/debugging-tag-execution.jpg" title="Debugging Tag Execution vs. Actual Requests">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/03/debugging-tag-execution.jpg" layout="responsive" alt="Debugging Tag Execution vs. Actual Requests" height="848" width="1519">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Let&amp;rsquo;s get the distinction straight right away:&lt;/p></description></item><item><title>#GTMtips: Track URL Fragments As Pageviews</title><link>https://www.simoahava.com/amp/gtm-tips/track-url-fragments-as-pageviews/</link><pubDate>Tue, 10 Mar 2015 08:30:31 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/track-url-fragments-as-pageviews/</guid><description>&lt;p>(&lt;strong>Updated 15 July 2015&lt;/strong>: Added a huge simplification. Jump straight to the update at the end.)&lt;/p>
&lt;p>URL fragments are strings of characters that follow a &lt;strong>hash mark&lt;/strong> (#) in the URL. Typically, they are used for anchor links, where following a link keeps you on the same page but jumps the browser to some anchored position. They&amp;rsquo;re also the tool of choice for single-page apps, where content is served dynamically without page reloads.&lt;/p></description></item><item><title>#GTMtips: Add The "event" Key To dataLayer Pushes</title><link>https://www.simoahava.com/amp/gtm-tips/add-the-event-key-to-datalayer-pushes/</link><pubDate>Thu, 26 Feb 2015 09:10:01 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/add-the-event-key-to-datalayer-pushes/</guid><description>&lt;p>In &lt;a href="http://tagmanager.google.com">Google Tag Manager&lt;/a>, every single Tag requires a Trigger to fire. Every single Trigger requires an Event condition to activate. Sometimes, these Event conditions are obfuscated under template semantics, but you can also create a Custom Event Trigger, where you specify the value of the &amp;rsquo;event&amp;rsquo; key in &lt;code>dataLayer&lt;/code> that fires your tag. You can read more about the relationship between GTM events and Tags in these two posts:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;a href="https://www.simoahava.com/amp/gtm-tips/gtmtips-rules-nutshell/">#GTMtips: Rules In A Nutshell&lt;/a>&lt;/p></description></item><item><title>#GTMtips: Setting Google Analytics Fields In GTM</title><link>https://www.simoahava.com/amp/gtm-tips/setting-google-analytics-fields-in-gtm/</link><pubDate>Fri, 13 Feb 2015 08:06:57 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/setting-google-analytics-fields-in-gtm/</guid><description>&lt;p>Due to a recent change in the UI (see entry for February 12, 2015 in &lt;a href="https://support.google.com/tagmanager/answer/4620708">the release notes&lt;/a>), the large and ever-expanding group of fields you could set for your Universal Analytics tags has been mostly removed. Instead, the often obscure &lt;strong>Fields to Set&lt;/strong> selection has been promoted to the top of More Settings, and you control most of the Universal Analytics fields through this selector.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMtips&lt;/a>, we&amp;rsquo;ll take a quick look at what&amp;rsquo;s changed, how it&amp;rsquo;s changed, and how to work with this new, slimmed-down tag template.&lt;/p></description></item><item><title>#GTMtips: Track File Downloads In GTM V2</title><link>https://www.simoahava.com/amp/gtm-tips/track-file-downloads-in-gtm-v2/</link><pubDate>Fri, 06 Feb 2015 08:39:03 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/track-file-downloads-in-gtm-v2/</guid><description>&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMtips&lt;/a> post, we&amp;rsquo;ll go over a simple method for tracking file downloads in &lt;a href="http://tagmanager.google.com/">Google Tag Manager&lt;/a>, specifically the new, V2 interface. Also, &amp;ldquo;tracking file downloads&amp;rdquo; means sending Events to Google Analytics, so this is a GA for GTM guide as well.&lt;/p>
&lt;h2 id="tip-15-set-up-file-download-tracking-in-gtm">Tip 15: Set up file download tracking in GTM&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/02/track-file-downloads.jpg" title="Track File Downloads in GTM V2">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/02/track-file-downloads.jpg" layout="responsive" alt="Track File Downloads in GTM V2" height="848" width="1519">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Since we&amp;rsquo;re using Google Analytics as the tracking platform, we&amp;rsquo;ll need the following ingredients to make this setup work:&lt;/p></description></item><item><title>#GTMtips: Track Outbound Links In GTM V2</title><link>https://www.simoahava.com/amp/gtm-tips/track-outbound-links-in-gtm-v2/</link><pubDate>Mon, 26 Jan 2015 10:09:50 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/track-outbound-links-in-gtm-v2/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>NOTE 30 Oct 2019:&lt;/strong> I&amp;rsquo;ve published &lt;a href="https://www.simoahava.com/amp/gtm-tips/track-outbound-links-google-tag-manager/">a new article&lt;/a> on outbound link tracking in Google Tag Manager, which makes the whole process much, MUCH simpler. I strongly recommend you read that article instead.&lt;/p>
&lt;/blockquote>
&lt;p>Tracking outbound links is important for many. Identifying the exit paths is almost as important as tracking entrances. In this simple &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMtips&lt;/a> post, I&amp;rsquo;ll show you how to track outbound links with a simple Trigger + Auto-Event Variable combination in the new Google Tag Manager interface.&lt;/p></description></item><item><title>#GTMtips: Create A Generic Event Tag</title><link>https://www.simoahava.com/amp/analytics/create-a-generic-event-tag/</link><pubDate>Thu, 15 Jan 2015 08:28:01 +0000</pubDate><guid>https://www.simoahava.com/amp/analytics/create-a-generic-event-tag/</guid><description>&lt;p>With &lt;a href="http://tagmanager.google.com">Google Tag Manager&lt;/a>, there are a million different ways to make your tagging setup leaner and more flexible. The reason this should be a priority is because the UI isn&amp;rsquo;t perfect. The more tags you have, the more difficult it becomes to manage your assets.&lt;/p>
&lt;p>In this &lt;a href="https://www.simoahava.com/amp/categories/gtm-tips/">#GTMtips&lt;/a> post, I show you one of my favorite ways to put your container on a diet.&lt;/p>
&lt;h2 id="tip-13-how-to-create-a-generic-event-tag">Tip 13: How to create a Generic Event Tag&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2015/01/generic-event-tag.jpg" title="Generic Event Tag">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2015/01/generic-event-tag.jpg" layout="responsive" alt="Generic Event Tag" height="848" width="1519">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>I&amp;rsquo;ve seen a &lt;strong>lot&lt;/strong> of containers that suffer from the same problem. They have many Event tags which only differ by the &lt;em>Event&lt;/em> that triggers them and/or by the tag fields of &lt;em>Event Category / Action / Label / Value&lt;/em>. There&amp;rsquo;s an easy way to reduce redundancy here. It&amp;rsquo;s the Generic Event Tag (you guessed it!).&lt;/p></description></item><item><title>#GTMTips: Add Konami Code To Your Site</title><link>https://www.simoahava.com/amp/gtm-tips/add-konami-code-to-your-site/</link><pubDate>Mon, 05 Jan 2015 11:40:04 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/add-konami-code-to-your-site/</guid><description>&lt;p>You&amp;rsquo;ve probably heard of the &lt;a href="http://en.wikipedia.org/wiki/Konami_Code">Konami Code&lt;/a>. It&amp;rsquo;s a cheat code in many Konami games, where the cheat is executed with a sequence of key presses on the keyboard. Since then, it&amp;rsquo;s become one of the staples of video game folk lore, and many websites, games, and applications have their own easter eggs activated with the Konami code.&lt;/p>
&lt;p>The sequence of keys is:&lt;/p>
&lt;p>&lt;strong>up, up, down, down, left, right, left, right, B, A&lt;/strong>&lt;/p></description></item><item><title>#GTMTips: Prevent Repeat Transactions</title><link>https://www.simoahava.com/amp/gtm-tips/prevent-repeat-transactions/</link><pubDate>Fri, 12 Dec 2014 08:46:42 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/prevent-repeat-transactions/</guid><description>&lt;p>In this tip, we&amp;rsquo;ll take a look at how to leverage a custom first-party cookie to prevent repeat hits of any kind. This is most useful for transactions, since a &lt;a href="http://stackoverflow.com/questions/26697898/google-analytics-duplicate-transactions">common problem&lt;/a> with &lt;a href="http://www.google.com/analytics/">Google Analytics&lt;/a> (traditional) &lt;a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce">eCommerce tracking&lt;/a> is that a transaction hit is sent again upon subsequent entries to the receipt page, for example using the Back button of the browser. In some cases, and this is not a good practice, a receipt e-mail is sent to the user with a link &lt;em>back to the receipt page&lt;/em>, where the transaction is sent over and over again upon entry.&lt;/p></description></item><item><title>#GTMtips: Fix Problems With GTM Listeners</title><link>https://www.simoahava.com/amp/gtm-tips/fix-problems-with-gtm-listeners/</link><pubDate>Tue, 25 Nov 2014 17:06:27 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/fix-problems-with-gtm-listeners/</guid><description>&lt;p>I&amp;rsquo;ve written about this before &lt;a href="https://www.simoahava.com/amp/analytics/google-analytics-page-load/">here&lt;/a> and &lt;a href="https://www.simoahava.com/amp/analytics/dont-gtm-listeners-work/">here&lt;/a>, but this issue remains probably the biggest problem users have when implementing Google Tag Manager.&lt;/p>
&lt;h2 id="tip-10-resolve-conflicts-with-gtms-listeners">Tip 10: Resolve conflicts with GTM&amp;rsquo;s listeners&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/11/fix-gtm-listeners.jpg" title="Fix GTM Listeners">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/11/fix-gtm-listeners.jpg" layout="responsive" alt="Fix GTM Listeners" height="848" width="1519">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>The tip title is actually wrong. You&amp;rsquo;re not fixing &lt;a href="http://tagmanager.google.com">Google Tag Manager&lt;/a> listeners. Rather, you&amp;rsquo;re resolving conflicts that &lt;em>other&lt;/em> scripts on your page might introduce.&lt;/p>
&lt;p>GTM&amp;rsquo;s event listening is based on something called &lt;strong>event delegation&lt;/strong>. Event delegation makes use of the document object model (DOM) and its tree-like hierarchy.&lt;/p></description></item><item><title>#GTMtips: Migrate Containers To New UI</title><link>https://www.simoahava.com/amp/gtm-tips/migrate-containers-to-new-ui/</link><pubDate>Mon, 10 Nov 2014 08:08:13 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/migrate-containers-to-new-ui/</guid><description>&lt;p>If you haven&amp;rsquo;t lived in a barrel, you should know by now that &lt;a href="http://analytics.blogspot.fi/2014/10/making-tag-management-more-accessible.html">a new version&lt;/a> of Google Tag Manager has been released. You can find the new version at &lt;a href="http://tagmanager.google.com/">http://tagmanager.google.com/&lt;/a>, and there&amp;rsquo;s already a bunch of good articles about the new UI out there. I want to point out two: &amp;ldquo;&lt;a href="http://www.bloggerchica.com/update-setting-up-ga-via-gtms-new-ux/">Setting up GA via GTM&amp;rsquo;s new UX&lt;/a>&amp;rdquo; by Krista Seiden, and &amp;ldquo;&lt;a href="https://www.bounteous.com/insights/2014/10/15/google-tag-manager-refresh/">Google Tag Manager Refresh  6 Things You Need to Know&lt;/a>&amp;rdquo; by Jonathan Weber from Bounteous. Both are wonderful run-throughs of the new features, and should get you up-to-date with what&amp;rsquo;s changed.&lt;/p></description></item><item><title>Auto-Event Tracking In GTM 2.0</title><link>https://www.simoahava.com/amp/analytics/auto-event-tracking-gtm-2-0/</link><pubDate>Tue, 28 Oct 2014 15:04:24 +0000</pubDate><guid>https://www.simoahava.com/amp/analytics/auto-event-tracking-gtm-2-0/</guid><description>&lt;p>In the new version of &lt;a href="http://www.google.com/tagmanager">Google Tag Manager&lt;/a>, auto-event tracking has received a considerable usability upgrade. It might seem quirky at first, especially if you&amp;rsquo;re used to the old &lt;a href="https://www.simoahava.com/amp/analytics/auto-event-tracking-google-tag-manager/">auto-event tracking&lt;/a> method, but the logic behind the new setup is brilliant.&lt;/p>


 &lt;a href="https://www.simoahava.com/amp/images/2014/10/auto-event-tracking.jpg" title="Auto-Event Tracking in GTM 2.0">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/10/auto-event-tracking.jpg" layout="responsive" alt="Auto-Event Tracking in GTM 2.0" height="371" width="1048">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>The most important distinction is that auto-event tracking isn&amp;rsquo;t something you control with separate &lt;strong>tags&lt;/strong> anymore. Rather, it&amp;rsquo;s now entirely &lt;em>trigger&lt;/em>-driven, meaning you activate and specify the auto-event tracking of your choice using tag triggers (triggers are what ye olde folk used to call rules).&lt;/p></description></item><item><title>#GTMtips: Once userId, Always userId</title><link>https://www.simoahava.com/amp/gtm-tips/once-userid-always-userid/</link><pubDate>Wed, 22 Oct 2014 18:15:00 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/once-userid-always-userid/</guid><description>&lt;p>The &lt;a href="https://support.google.com/analytics/answer/3123663">User ID&lt;/a> is definitely one of the coolest things about Universal Analytics, &lt;em>if used correctly&lt;/em>. It might reveal some surprising insights about your visitors, since now you&amp;rsquo;re not restricted to analysing visitors as just browser or device instances as before, but rather you can build your stories around all the touch points the user might have had on their journey to and through your web properties.&lt;/p>
&lt;p>With this simple tip, you can extend User ID tracking to return users without them needing to authenticate. This is done with a cookie.&lt;/p></description></item><item><title>#GTMtips: dataLayer Declaration Vs. .push()</title><link>https://www.simoahava.com/amp/gtm-tips/datalayer-declaration-vs-push/</link><pubDate>Mon, 13 Oct 2014 06:43:21 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/datalayer-declaration-vs-push/</guid><description>&lt;p>Here&amp;rsquo;s a tip on how to avoid a horrible, horrible mistake with &lt;a href="http://www.google.com/tagmanager/">Google Tag Manager&lt;/a>.&lt;/p>
&lt;h2 id="tip-7-always-use-push-with-datalayer">Tip 7: Always use .push() with dataLayer&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/10/datalayer-declaration-push.jpg" title="dataLayer declaration vs. .push()">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/10/datalayer-declaration-push.jpg" layout="responsive" alt="dataLayer declaration vs. .push()" height="848" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>When you assign a value to a variable using the equals ( = ) sign, you are actually reallocating the variable to a new value, and the garbage collection system of the runtime environment sweeps the previous value to bit heaven.&lt;/p>
&lt;p>Let&amp;rsquo;s put it simply: if you redefine &lt;code>dataLayer&lt;/code> after the GTM container snippet, you will break GTM&amp;rsquo;s proprietary functions. No, I&amp;rsquo;m not trying to be dramatic, it&amp;rsquo;s the truth. You cause havoc because GTM &lt;a href="https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/">modifies the native &lt;code>push()&lt;/code> method&lt;/a> that all Arrays have, adding stuff of little importance such as &lt;strong>a listener which fires tags when an &amp;rsquo;event&amp;rsquo; key is pushed!&lt;/strong>.&lt;/p></description></item><item><title>#GTMtips: hitCallback And eventCallback</title><link>https://www.simoahava.com/amp/gtm-tips/hitcallback-eventcallback/</link><pubDate>Mon, 29 Sep 2014 07:03:16 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/hitcallback-eventcallback/</guid><description>&lt;p>This time we&amp;rsquo;ll take a look at two different, JavaScript-y features of Google Analytics and Google Tag Manager. &lt;strong>Callback&lt;/strong> as a concept should be familiar to anyone who&amp;rsquo;s ever used a programming language. It&amp;rsquo;s basically a piece of code that is passed as an argument to some function, so that when this second function has completed, the callback is executed.&lt;/p>
&lt;p>For web analytics, callbacks are hugely important, since they allow you to impose a firing order for your asynchronous tags. Asynchronous tags, as you might know, abhor order and precision, so sometimes it&amp;rsquo;s necessary to use a callback to have at least an inkling of predictability in your tag jungle.&lt;/p></description></item><item><title>#GTMtips: Chain Macros In Lookup Tables</title><link>https://www.simoahava.com/amp/gtm-tips/chain-macros-lookup-tables/</link><pubDate>Tue, 23 Sep 2014 10:05:17 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/chain-macros-lookup-tables/</guid><description>&lt;p>One of the cool things about using a tag management solution is that you can leverage &lt;em>variables&lt;/em> like never before. In Google Tag Manager, these variables are referred to as macros, and you can identify a macro with the syntax of &lt;strong>{{macro name}}&lt;/strong>. In this tip I&amp;rsquo;ll show you how you can actually call macros from other macros, using a Lookup Table as an example.&lt;/p>
&lt;h2 id="tip-5-chain-macros-in-lookup-tables-and-other-macros">Tip 5: Chain Macros In Lookup Tables (And Other Macros)&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/09/gtmtips-chain-macros.jpg" title="Chain Macros in Lookup Tables and Other Macros">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/09/gtmtips-chain-macros.jpg" layout="responsive" alt="Chain Macros in Lookup Tables and Other Macros" height="848" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>It&amp;rsquo;s not just Lookup Tables, either. You can pretty much use a macro in any field where there is a script context (because macros are JavaScript functions and require a script context to be run). Valid fields are, for example, Custom HTML Tags, Custom JavaScript Macros, Google Analytics tag fields, and so on.&lt;/p></description></item><item><title>#GTMtips: Undefined Dimensions Won't Get Sent</title><link>https://www.simoahava.com/amp/gtm-tips/undefined-dimensions-wont-get-sent/</link><pubDate>Tue, 16 Sep 2014 15:32:33 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/undefined-dimensions-wont-get-sent/</guid><description>&lt;p>This might not sound like a tip to you. You might think, &amp;ldquo;Dimensions won&amp;rsquo;t get sent? Sounds like a bug!&amp;rdquo;. You&amp;rsquo;re wrong. This is one of the awesome features of the GA API, and it&amp;rsquo;s key to making your tag setups leaner when sending data to Google Analytics.&lt;/p>
&lt;h2 id="tip-4-undefined-dimensions-are-left-out-of-ga-hits">Tip 4: Undefined dimensions are left out of GA hits&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/09/undefined-dimension-not-sent.jpg" title="Undefined dimensions don&amp;#39;t get sent to Google Analytics">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/09/undefined-dimension-not-sent.jpg" layout="responsive" alt="Undefined dimensions don&amp;#39;t get sent to Google Analytics" height="848" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>Note that &amp;lsquo;undefined&amp;rsquo; here means the special value &lt;code>undefined&lt;/code> in JavaScript. For a refresher, &lt;a href="https://www.simoahava.com/amp/analytics/fun-with-google-tag-manager-part-1/">check this post&lt;/a>. If you use a macro in a dimension field of Google Tag Manager&amp;rsquo;s Universal Analytics tags, this dimension will be left out of the hit payload if its return value is &lt;code>undefined&lt;/code>.&lt;/p></description></item><item><title>#GTMtips: Rules In A Nutshell</title><link>https://www.simoahava.com/amp/gtm-tips/gtmtips-rules-nutshell/</link><pubDate>Fri, 12 Sep 2014 08:45:35 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/gtmtips-rules-nutshell/</guid><description>&lt;p>Rules are the cornerstone of Google Tag Manager. As with any critical element in a system, they are easy to get wrong. This tip is just a refresher on how GTM firing and blocking rules work.&lt;/p>
&lt;h2 id="tip-3-google-tag-manager-rules-in-a-nutshell">Tip 3: Google Tag Manager rules in a nutshell&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/09/rules-in-a-nutshell.jpg" title="Rules in Google Tag Manager">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/09/rules-in-a-nutshell.jpg" layout="responsive" alt="Rules in Google Tag Manager" height="848" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>So, let&amp;rsquo;s go through these points one-by-one.&lt;/p>
&lt;p>&lt;strong>Every tag requires a firing rule to work&lt;/strong> - this is a given. Without a firing rule, your tag will not be written in the document object, and it will never be executed.&lt;/p></description></item><item><title>#GTMtips: Check {{referrer}} For Previous Page URL</title><link>https://www.simoahava.com/amp/gtm-tips/check-referrer-for-previous-page-url/</link><pubDate>Mon, 08 Sep 2014 06:28:54 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/check-referrer-for-previous-page-url/</guid><description>&lt;p>Here&amp;rsquo;s a simple way to check what was the source of the visitor&amp;rsquo;s arrival to the current page. It&amp;rsquo;s done by utilizing the &lt;strong>{{referrer}}&lt;/strong> macro, which comes out-of-the-box in any GTM setup.&lt;/p>
&lt;h2 id="tip-2-use-referrer-to-see-where-the-visitor-came-from">Tip 2: Use {{referrer}} to see where the visitor came from&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/09/tip2.jpg" title="GTM Tips: Use {{referrer}} to see where the visitor came from">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/09/tip2.jpg" layout="responsive" alt="GTM Tips: Use {{referrer}} to see where the visitor came from" height="860" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>You might want to also explore the Component Types and create new macros for &lt;strong>{{referrer path}}&lt;/strong> and &lt;strong>{{referrer host name}}&lt;/strong> for example:&lt;/p></description></item><item><title>#GTMtips: Save GATC In A Constant String Macro</title><link>https://www.simoahava.com/amp/gtm-tips/save-gatc-constant-string-macro/</link><pubDate>Fri, 05 Sep 2014 11:59:13 +0000</pubDate><guid>https://www.simoahava.com/amp/gtm-tips/save-gatc-constant-string-macro/</guid><description>&lt;p>I wanted to try something new (and, naturally, I&amp;rsquo;m running out of content ideas), so let me introduce the hashtag &lt;strong>#gtmtips&lt;/strong>. I hope others contribute as well, but I will be adding a new tip as often as possible. I&amp;rsquo;ve got maybe 20 tips in store right now, and I&amp;rsquo;m writing new ones all the time. So without further ado, here&amp;rsquo;s&amp;hellip;&lt;/p>
&lt;h2 id="tip-1-save-gatc-in-a-constant-string-macro">Tip 1: Save GATC In A Constant String Macro&lt;/h2>


 &lt;a href="https://www.simoahava.com/amp/images/2014/09/Dia1.jpg" title="Save GATC In A Constant String Macro">
 
 &lt;amp-img src="https://www.simoahava.com/amp/images/2014/09/Dia1.jpg" layout="responsive" alt="Save GATC In A Constant String Macro" height="860" width="1518">&lt;/amp-img>
 
 &lt;/a>
 

&lt;p>This is an easy one, and everyone should already be doing this in one way or another. The point is that you shouldn&amp;rsquo;t use strings in fields which are often used. Save the string in a macro, so all you have to do is refer to the macro in all your tags. That way, if the string ever changes (for example, when transferring to another property), you don&amp;rsquo;t have to rewrite the field in all your tags.&lt;/p></description></item></channel></rss>