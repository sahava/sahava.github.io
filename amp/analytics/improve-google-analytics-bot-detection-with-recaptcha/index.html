<!doctype html><html ⚡ lang=en-us class=no-js><head><meta charset=utf-8><script async custom-element=amp-youtube src=https://cdn.ampproject.org/v0/amp-youtube-0.1.js></script><script async custom-element=amp-accordion src=https://cdn.ampproject.org/v0/amp-accordion-0.1.js></script><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-sidebar src=https://cdn.ampproject.org/v0/amp-sidebar-0.1.js></script><script async custom-element=amp-social-share src=https://cdn.ampproject.org/v0/amp-social-share-0.1.js></script><script async custom-element=amp-twitter src=https://cdn.ampproject.org/v0/amp-twitter-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script><script async src=https://cdn.ampproject.org/v0.js></script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>.type-simmer{padding:8px;background:rgba(179,138,197,.2);box-shadow:2px 2px 1px #ccc;border-radius:5px}/*!normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css*/html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{display:none;text-indent:-9999px;visibility:hidden}.inner{margin:0 auto;max-width:710px;position:relative;width:80%}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{background:#fff;min-height:100%;position:relative;transition:transform .5s ease;z-index:10}html{font-size:62.5%;-webkit-tap-highlight-color:transparent}body,html{height:100%;max-height:100%}body{color:#3a4145;font-family:Merriweather,serif;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-size:1.8rem;letter-spacing:.01rem;line-height:1.75em;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{color:#2e2e2e;font-family:Open Sans,sans-serif;-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;line-height:1.15em;margin:0 0 .4em;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{clear:left;float:left;font-weight:700;overflow:hidden;text-align:right;text-overflow:ellipsis;white-space:nowrap;width:180px}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{border:0;border-top:1px solid #efefef;display:block;height:1px;margin:3.2em 0;padding:0}blockquote{border-left:.4em solid #4a4a4a;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em}blockquote p{font-style:italic;margin:.8em 0}blockquote small{color:#ccc;display:inline-block;font-size:.9em;margin:.8em 0 .8em 1.5em}blockquote small:before{content:"— "}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{border:1px solid #e3edf3;border-radius:2px;font-size:.85em;padding:1px 3px;white-space:pre-wrap}code,pre,tt{background:#f7fafb;font-family:Inconsolata,monospace,sans-serif}pre{border:1px solid #e3edf3;border-radius:3px;box-sizing:border-box;font-size:.9em;margin:0 0 1.75em;overflow:auto;padding:10px;white-space:pre;width:100%}pre code,pre tt{background:0 0;border:none;font-size:inherit;padding:0;white-space:pre-wrap}kbd{background:#f4f4f4;border:1px solid #ccc;border-radius:4px;box-shadow:0 1px rgba(0,0,0,.2),inset 0 1px #fff;color:#666;display:inline-block;font-size:.9em;font-weight:700;margin-bottom:.4em;padding:1px 8px;text-shadow:#fff 0 1px 0}table{background-color:transparent;box-sizing:border-box;margin:1.75em 0;max-width:100%;width:100%}table td,table th{border-top:1px solid #efefef;line-height:20px;padding:8px;text-align:left;vertical-align:top}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:0 0}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{background:#222 no-repeat 50%;background-size:cover;display:table;height:100vh;margin-bottom:5rem;overflow:hidden;position:relative;text-align:center;width:100%}.main-header.cover{background-image:url(https://www.simoahava.com/images/maisema.jpg)}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{margin:0 0 30px;padding:35px 40px;position:relative}.main-nav a{font-family:Open Sans,sans-serif;text-decoration:none}.scroll-down{animation:bounce 4s 2s infinite;bottom:45px;display:block;font-size:1.5em;left:50%;position:absolute;text-align:center;z-index:100}.scroll-down:hover{animation:none;color:#fff}.home-template .main-header:after{background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%);border-radius:100%;bottom:0;content:" ";display:block;height:130px;left:50%;margin-left:-75px;position:absolute;width:150px}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover .scroll-down,.no-cover.main-header:after{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{box-sizing:border-box;height:38px}.menu-button{background:rgba(0,0,0,.1);border:1px solid #bfc8cd;border-radius:3px;color:#9eabb3;display:inline-block;float:right;font-size:12px;line-height:35px;opacity:1;padding:0 15px;text-align:center;text-transform:uppercase;transition:all .5s ease;white-space:nowrap}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent);border:none;height:70px;left:0;position:absolute;right:0;top:0}.no-cover .main-nav.overlay,.no-cover .menu-button{background:0 0}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{background:#fff;border-color:#fff;color:#222}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{color:#fff;font-family:Open Sans,sans-serif;font-size:5rem;font-weight:700;letter-spacing:-1px;margin:10px 0}.page-description{color:hsla(0,0%,100%,.8);font-family:Merriweather,serif;font-size:2rem;font-weight:400;letter-spacing:.01rem;line-height:1.5em;margin:0}.no-cover.main-header{background:#f5f8fa;max-height:40vh;min-height:160px}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{border-color:rgba(0,0,0,.3);color:rgba(0,0,0,.4)}.main-header-content .page-title{animation:fade-in-down .6s;animation-delay:.2s}.main-header-content .page-description{animation:fade-in-down .9s;animation-delay:.1s}.post{border-bottom:1px solid #ebf2f6;margin:4rem auto;max-width:710px;padding-bottom:4rem;position:relative;width:80%;word-wrap:break-word;hyphens:auto}.post-header{padding-bottom:10px}.post:after{background:#fff;border:1px solid #e7eef2;border-radius:100%;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";display:block;height:7px;left:50%;margin-left:-5px;position:absolute;width:7px}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{font-size:.9em;line-height:1.7em;margin:0}.read-more{font-size:.8em;font-style:italic;text-decoration:none}.post-meta{color:#9eabb3;display:block;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;margin:1.75rem 0 0}.author-thumb{border-radius:100%;float:left;height:24px;margin-right:9px;width:24px}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{min-height:77px;padding:.3rem 40px 0 100px;position:relative}.post-date{border-left:1px solid #d5dbde;display:inline-block;font-size:1.3rem;margin-left:8px;padding-left:12px;text-transform:uppercase;white-space:nowrap}.user-image{left:0;position:absolute;top:0}.user-name{display:block;font-weight:700}.user-bio{display:block;font-size:1.4rem;line-height:1.5em;max-width:440px}.publish-meta{padding:4.3rem 0 4rem;position:absolute;right:0;text-align:right;top:0}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{font-size:.8em;text-align:center}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{bottom:10px;box-shadow:0 15px 10px rgba(0,0,0,.7);content:"";height:20%;max-width:480px;position:absolute;width:50%;z-index:-2}figure.polaroid:after{left:auto;right:10px;transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;transform:rotate(-3deg)}figure.polaroid{background:#fff;border:none;border-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);margin-bottom:1.5em;max-width:100%;padding:15px;position:relative;width:450px}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;margin:0;outline:1px solid #ccc;padding:0}figure.polaroid figcaption{font-family:Kaushan Script,cursive;font-size:1.3em;font-weight:400;padding:.8em .5em .4em;text-align:right}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;font-size:.8em;font-style:italic;margin-top:.5em;padding:.2em;text-align:center}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{font-size:2em;text-decoration:none}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{color:#a2a2a2;font-size:2em;text-decoration:none}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{border:none;margin:0;padding:0}.post-template .content{overflow:hidden}.post-template .post{border-bottom:none;margin-top:0;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{border-top:1px solid #ebf2f6;margin:6rem 0 0;padding:6rem 0 0;position:relative}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{font-size:1.4rem;line-height:1.75em;margin:1rem 0}.author-meta{font-size:1.4rem;font-style:italic;line-height:1;list-style:none;margin:0;padding:0}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;right:0;top:6rem;width:180px}.post-footer .share a{color:#bbc7cc;display:inline-block;font-size:1.8rem;margin:1rem 1.6rem 1.6rem 0;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{background:0 0;height:85px;margin-bottom:0;min-height:0}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{background:0 0;height:10vh;min-height:100px}.author-profile{border-bottom:1px solid #ebf2f6;padding:0 15px 5rem;text-align:center}.author-profile:after{border:1px solid #e7eef2;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";height:7px;margin-left:-5px;width:7px}.author-image,.author-profile:after{background:#fff;border-radius:100%;display:block;left:50%;position:absolute}.author-image{box-shadow:0 0 0 1px #e7eef2;box-sizing:border-box;height:80px;margin-left:-40px;overflow:hidden;padding:6px;top:-56px;width:80px;z-index:2}.author-image .img{background-image:url(https://www.simoahava.com/images/simo.png);background-position:50%;background-size:cover;border-radius:100%;display:block;height:100%;position:relative;width:100%}.author-profile .author-image{box-shadow:none;height:120px;left:auto;margin:-100px auto 0;padding:3px;position:relative;top:auto;width:120px}.author-title{margin:1.5rem 0 1rem}.author-bio{color:#50585d;font-size:1.8rem;font-weight:200;letter-spacing:0;line-height:1.5em;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{font-family:Merriweather,serif;font-size:1.7rem;letter-spacing:.01rem;margin:2rem 0}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);color:#909090;font-family:Open Sans,Verdana,sans-serif;font-size:11px;font-weight:700;overflow-y:auto;text-align:left;width:400px}#sidebar .nav-title{color:#fff;font-size:1.5em;font-weight:100;left:30px;position:absolute;text-transform:uppercase;top:45px}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{font-size:10px;height:20px;padding:0;position:absolute;right:25px;top:38px;width:20px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{background:#969696;content:"";height:1px;position:absolute;top:0;top:15px;transition:background .15s ease;width:20px}#sidebar .nav-close:before{transform:rotate(45deg)}#sidebar .nav-close:after{transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{background:0 0;border:none;font-size:2rem;margin:.4em 0 .2em}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open,#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{counter-reset:item;list-style:none;padding:90px 9% 5%}#sidebar li:before{color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item;display:block;float:right;font-size:1.2rem;padding-left:5px;padding-right:4%;text-align:right;vertical-align:bottom}#sidebar li{margin:0}#sidebar li a{display:block;font-size:1.4rem;line-height:1.4;overflow:hidden;padding:.6rem 4%;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}#sidebar li a:after{color:hsla(0,0%,100%,.2);content:" ...............................................................";display:inline-block;margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{border-bottom:1px solid hsla(0,0%,100%,.5);content:" ";height:1px;width:100%}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{background:#fff;border-radius:3px;bottom:30px;box-sizing:border-box;display:block;font-family:Open Sans,sans-serif;font-size:12px;height:38px;left:30px;line-height:35px;padding:0 20px;position:absolute;right:30px;text-align:center;text-decoration:none;text-transform:uppercase;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{color:#9eabb3;font-family:Open Sans,sans-serif;font-size:1.3rem;margin:4rem auto;max-width:710px;position:relative;text-align:center;width:80%}.pagination a{color:#9eabb3;transition:all .2s ease}.newer-posts,.older-posts{border:1px solid #bfc8cd;border-radius:4px;display:inline-block;padding:0 15px;position:absolute;text-decoration:none;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;min-width:100px;padding:2px 0}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{border-color:#98a0a4;color:#889093}.extra-pagination{border-bottom:1px solid #ebf2f6;display:none}.extra-pagination:after{background:#fff;border:1px solid #e7eef2;border-radius:100%;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";display:block;height:7px;left:50%;margin-left:-5px;position:absolute;width:7px}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{color:#bbc7cc;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;margin:8rem 0 0;padding:.5rem 15px;position:relative}.site-footer a{color:#bbc7cc;font-weight:700;text-decoration:none}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{box-sizing:border-box;height:auto;height:60vh;min-height:240px;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{height:40vh;margin-bottom:15px}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{background:0 0;border-radius:0;padding:0 5px}.menu-button,.menu-button:hover{border-color:transparent;color:#2e2e2e}.menu-button:hover{background:0 0}body.nav-opened .menu-button{background:0 0;border:transparent}.main-nav.overlay a:hover{background:0 0;border-color:transparent;color:#fff}.no-cover .main-nav.overlay{background:0 0}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{margin:2rem auto;width:auto}.post{line-height:1.65em;margin:2rem 16px;padding-bottom:2rem;width:auto}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{margin-bottom:0;padding-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{border-bottom:1px dashed #ebf2f6;margin:0 0 2rem;padding:0 0 1.6rem}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;line-height:1.75em;margin:0}.author-meta li:before{display:none}.newer-posts,.older-posts{margin:10px 0;position:static}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{border:1px solid #777;box-shadow:5px 5px 2px rgba(0,0,0,.4);height:auto;margin-bottom:20px;max-width:100%}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{background-color:#007bff;color:#fff}.badge{border-radius:.25rem;display:inline-block;font-size:80%;font-weight:700;line-height:1;padding:.25em .4em;text-align:center;vertical-align:middle;white-space:nowrap}</style><link rel=canonical href=https://www.simoahava.com/analytics/improve-google-analytics-bot-detection-with-recaptcha/><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin=anonymous referrerpolicy=no-referrer><meta name=theme-color content="#ffffff"><title>Improve Google Analytics Bot Detection With ReCAPTCHA | Simo Ahava's blog</title>
<meta property="og:title" content="Improve Google Analytics Bot Detection With ReCAPTCHA"><meta name=description content="Build your own reCAPTCHA v3 verification mechanism and send the results to Google Analytics for improved bot detection."><meta property="og:description" content="Build your own reCAPTCHA v3 verification mechanism and send the results to Google Analytics for improved bot detection."><meta property="og:type" content="article"><meta property="og:url" content="https://www.simoahava.com/amp/analytics/improve-google-analytics-bot-detection-with-recaptcha/"><meta name=twitter:image content="https://www.simoahava.com/images/2019/09/bot-traffic-in-ga.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2019/09/bot-traffic-in-ga.jpg"><meta property="article:published_time" content="2019-10-23T06:00:00Z"><meta property="article:modified_time" content="2019-10-23T06:00:00Z"><meta property="og:site_name" content="Simo Ahava's blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development."><meta property="article:section" content="Analytics"><meta property="article:tag" content="google tag manager"><meta property="article:tag" content="google analytics"><meta property="article:tag" content="php"><meta property="article:tag" content="node.js"><meta property="article:tag" content="recaptcha"><meta name=twitter:card content="summary"><meta itemprop=name content="Improve Google Analytics Bot Detection With reCAPTCHA"><meta itemprop=description content="Build your own reCAPTCHA v3 verification mechanism and send the results to Google Analytics for improved bot detection."><meta itemprop=datePublished content="2019-10-23T09:00:00+03:00"><meta itemprop=dateModified content="2019-10-23T09:00:00+03:00"><meta itemprop=wordCount content="2269"><meta itemprop=keywords content="Google Tag Manager,Google Analytics,Php,Node.js,Recaptcha"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.","url":"https:\/\/www.simoahava.com\/amp\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Improve Google Analytics Bot Detection With reCAPTCHA | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2019\/09\/bot-traffic-in-ga.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/amp\/","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/amp\/analytics\/improve-google-analytics-bot-detection-with-recaptcha\/","datePublished":"2019-10-23T09:00:00\u002b03:00","dateModified":"2019-10-23T09:00:00\u002b03:00","description":"Build your own reCAPTCHA v3 verification mechanism and send the results to Google Analytics for improved bot detection.","author":{"@type":"Person","name":"Simo Ahava"}}</script></head><body><amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials=include></amp-analytics><amp-sidebar id=sidebar layout=nodisplay side=right><h3 class=nav-title>Menu</h3><a href=# class=nav-close on=tap:sidebar.close role=button tabindex=1><span class=hidden>Close</span></a><ul><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/>Home</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/gtm-tips/>GTM Tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/about-simo-ahava/>About</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tools/>Tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/blog-statistics/>Blog Statistics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/upcoming-talks/>Upcoming Talks</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/custom-templates/>Templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/newsletter/>Newsletter</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/>Full (non-AMP) site</a></li><amp-accordion><section><h3 class=nav-section><i class="fa fa-caret-down section-open" aria-hidden=true></i>
<i class="fa fa-caret-right section-close" aria-hidden=true></i>
Categories</h3><div><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/analytics/>analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/content-management/>content management</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/digital-marketing/>digital marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/google-cloud/>google cloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/gtm-tips/>gtm tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/personal/>personal</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/privacy/>privacy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/seo/>seo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/web-design/>web design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/web-development/>web development</a></li></div></section><section><h3 class=nav-section><i class="fa fa-caret-down section-open" aria-hidden=true></i>
<i class="fa fa-caret-right section-close" aria-hidden=true></i>
Tags</h3><div><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ab-testing/>ab testing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/accelerated-mobile-pages/>accelerated mobile pages</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ad-blocker/>ad blocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/adblocker/>adblocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/add-on/>add-on</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/adwords/>adwords</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/agile/>agile</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/amazon/>amazon</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/amp/>amp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/analytics/>analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/android/>android</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/api/>api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app/>app</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app-engine/>app engine</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app+web/>app+web</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/approval/>approval</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/apps/>apps</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/apps-script/>apps script</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/array/>array</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/attribution/>attribution</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/audience-design/>audience design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/audit/>audit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/auto-event-tracking/>auto-event tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/auto-link-domains/>auto-link domains</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/aws/>aws</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/azure/>azure</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/basketball/>basketball</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/beforeunload/>beforeunload</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/best-practices/>best practices</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/big-data/>big data</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/bigquery/>bigquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/blogger/>blogger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/bounce-rate/>bounce rate</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/built-in-variables/>built-in variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/calculated-metrics/>calculated metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/callback/>callback</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/campaign-tracking/>campaign tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/celebration/>celebration</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/change-history/>change history</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/chrome/>chrome</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/chrome-extension/>chrome extension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/click-tracking/>click tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/click-variables/>click variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/clickstream/>clickstream</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/client-id/>client id</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/client-template/>client template</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/clientid/>clientid</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cloud-functions/>cloud functions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cloud-run/>cloud run</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cms/>cms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cname/>cname</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conferences/>conferences</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/consent/>consent</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/consent-mode/>consent mode</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container/>container</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container-export/>container export</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container-snippet/>container snippet</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content/>content</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-analysis/>content analysis</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-blocker/>content blocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-engagement/>content engagement</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-grouping/>content grouping</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-management/>content management</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-management-system/>content management system</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-security-policy/>content security policy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-strategy/>content strategy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/context/>context</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conversion/>conversion</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conversions-api/>conversions api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookie/>cookie</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookiedomain/>cookiedomain</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookies/>cookies</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/core-web-vitals/>core web vitals</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/creative/>creative</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cross-domain/>cross-domain</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cross-domain-tracking/>cross-domain tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/csp/>csp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/css/>css</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/css-selectors/>css selectors</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom/>custom</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-dimension/>custom dimension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-dimensions/>custom dimensions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html/>custom html</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html-tag/>custom html tag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html-tags/>custom html tags</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-javascript/>custom javascript</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-metrics/>custom metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-templates/>custom templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/customtask/>customtask</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dan-wilkerson/>dan wilkerson</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dashboard/>dashboard</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data/>data</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-collection/>data collection</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-engineering/>data engineering</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-layer/>data layer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-layer-variable/>data layer variable</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-model/>data model</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-quality/>data quality</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/datalayer/>datalayer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/debug/>debug</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/debugging/>debugging</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/definition-of-success/>definition of success</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/developer/>developer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/developer-tools/>developer tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/development/>development</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/digital-marketing/>digital marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/docker/>docker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/document.write/>document.write</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dom/>dom</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/duplicate/>duplicate</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dynamic-content/>dynamic content</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/easter-egg/>easter egg</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ecomemrce/>ecomemrce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ecommerce/>ecommerce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/education/>education</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/element-visibility/>element visibility</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/engagement/>engagement</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/enhanced-ecommerce/>enhanced ecommerce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/enrichment/>enrichment</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/environments/>environments</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/errors/>errors</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event/>event</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event-listener/>event listener</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event-listeners/>event listeners</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/eventcallback/>eventcallback</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/events/>events</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/excel/>excel</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/exceptions/>exceptions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/experimentation/>experimentation</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/exploit/>exploit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/extension/>extension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/facebook/>facebook</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/false/>false</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/family/>family</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/fields-to-set/>fields to set</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firebase/>firebase</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firestore/>firestore</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firing-rules/>firing rules</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/folders/>folders</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/form/>form</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/form-tracking/>form tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/format-value/>format value</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/forms/>forms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/fpid/>fpid</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ga-spy/>ga spy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ga4/>ga4</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gcp/>gcp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gdpr/>gdpr</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google/>google</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-ads/>google ads</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics/>google analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics-4/>google analytics 4</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics-settings/>google analytics settings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-bigquery/>google bigquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-cloud/>google cloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-cloud-platform/>google cloud platform</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-sheets/>google sheets</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-tag/>google tag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-tag-manager/>google tag manager</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-trends/>google trends</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-optimize/>google-optimize</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/googletagmanager/>googletagmanager</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/governance/>governance</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtag/>gtag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtag.js/>gtag.js</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm/>gtm</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm-sonar/>gtm sonar</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm-tools/>gtm tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm360/>gtm360</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtmtips/>gtmtips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/guest-post/>guest post</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/guide/>guide</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/hack/>hack</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history/>history</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history-change-trigger/>history change trigger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history-listener/>history listener</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/hugo/>hugo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/iframe/>iframe</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/>intelligent tracking prevention</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/internal-traffic/>internal traffic</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ios/>ios</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ip/>ip</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/it-department/>it department</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/itp/>itp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/javascript/>javascript</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/jquery/>jquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/klipfolio/>klipfolio</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/learning/>learning</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/lighthouse/>lighthouse</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/links/>links</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/listeners/>listeners</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/local/>local</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/localstorage/>localstorage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/lookup-table/>lookup table</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/macros/>macros</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/marketer/>marketer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/marketing/>marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/measurement-protocol/>measurement protocol</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/meta-description/>meta description</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/metrics/>metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/migration/>migration</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/mixcloud/>mixcloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/mobile/>mobile</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/modern-cms/>modern cms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/modular-architecture/>modular architecture</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/monitor/>monitor</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/navigation/>navigation</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/netbooster/>netbooster</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/new-ui/>new ui</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/node.js/>node.js</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/nodejs/>nodejs</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/non-technical/>non-technical</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/open-source/>open source</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/opt-out/>opt-out</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/owasp/>owasp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/page-load-time/>page load time</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/page-timings/>page timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/parameter-reporting/>parameter reporting</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/penguin/>penguin</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/performance/>performance</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/permissions/>permissions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/persistence/>persistence</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/personal/>personal</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/personal-experience/>personal experience</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/php/>php</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/pii/>pii</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/pitch/>pitch</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/piwik-pro/>piwik pro</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/plugins/>plugins</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/poetry/>poetry</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/postmessage/>postmessage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ppc/>ppc</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/preview/>preview</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/preview-mode/>preview mode</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/privacy/>privacy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/process/>process</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/proxy/>proxy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/public-speaking/>public speaking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/query-string/>query string</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/queue-time/>queue time</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/r/>r</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/race-condition/>race condition</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/reaktor/>reaktor</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/recaptcha/>recaptcha</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/referral/>referral</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/regular-expression/>regular expression</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/release/>release</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/resources/>resources</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/rules/>rules</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/safari/>safari</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sales/>sales</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/samesite/>samesite</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/schema/>schema</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/score-card/>score card</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/scroll-depth/>scroll depth</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search/>search</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-api/>search api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-engine-optimization/>search engine optimization</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-trends/>search trends</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/security/>security</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/selection/>selection</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/seo/>seo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/seo-report/>seo report</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/serp/>serp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/server-side/>server-side</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/server-side-tagging/>server-side tagging</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/session/>session</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sessions/>sessions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sgtm/>sgtm</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/shopify/>shopify</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/simmer/>simmer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/single-page-apps/>single-page apps</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/site-search/>site search</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/site-speed/>site speed</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/slack/>slack</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/snippet/>snippet</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/snowplow/>snowplow</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/social-interactions/>social interactions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/soundcloud/>soundcloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/spa/>spa</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/splash-page/>splash page</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/static-site/>static site</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/still-running/>still running</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/storage/>storage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/support/>support</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/swift/>swift</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/syntax-highlight/>syntax highlight</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-management-solution/>tag management solution</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-management-solutions/>tag management solutions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-sequencing/>tag sequencing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-templates/>tag templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tags/>tags</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tasks/>tasks</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/technical-marketing/>technical marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/technique/>technique</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/test/>test</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/testing/>testing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/timer/>timer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/timings/>timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tips/>tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tools/>tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracker/>tracker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracker-object/>tracker object</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracking-protections/>tracking protections</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/training/>training</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/transformations/>transformations</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/trigger/>trigger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/trigger-groups/>trigger groups</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/triggers/>triggers</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/troubleshoot/>troubleshoot</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/undefined/>undefined</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/universal-analytics/>universal analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-id/>user id</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-interface/>user interface</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-permissions/>user permissions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-timings/>user timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/v2/>v2</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variable/>variable</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variable-templates/>variable templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variables/>variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/videos/>videos</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/visibility/>visibility</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/wcag/>wcag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/weather/>weather</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/web-design/>web design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/web-development/>web development</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/webkit/>webkit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/website-redesign/>website redesign</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/workflow/>workflow</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/workspaces/>workspaces</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/youtube/>youtube</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/zones/>zones</a></li></div></section></amp-accordion></ul></amp-sidebar><div class=site-wrapper><header class="main-header post-head no-cover"><nav class="main-nav clearfix"><a class=menu-button on=tap:sidebar.toggle role=button><i class="fa fa-bars" aria-hidden=true></i><span class=menu-button-label>Menu</span></a></nav></header><main class=content role=main><article class="post type-post"><header class=post-header><h1 class=post-title>Improve Google Analytics Bot Detection With ReCAPTCHA</h1><small>Build your own reCAPTCHA v3 verification mechanism and send the results to Google Analytics for improved bot detection.</small><section class=post-meta><amp-img class=author-thumb src=https://www.simoahava.com/images/simo.png layout=fixed width=24 height=24 alt="Author image"></amp-img>Simo Ahava
in
<a href=https://www.simoahava.com/amp/categories/analytics>Analytics</a>
on
<a href=https://www.simoahava.com/amp/tags/google-tag-manager>#google tag manager</a>
, <a href=https://www.simoahava.com/amp/tags/google-analytics>#google analytics</a>
, <a href=https://www.simoahava.com/amp/tags/php>#php</a>
, <a href=https://www.simoahava.com/amp/tags/node.js>#node.js</a>
, <a href=https://www.simoahava.com/amp/tags/recaptcha>#recaptcha</a>
<time class=post-date datetime=2019-10-23T09:00:00+03:00>23 October 2019
</time><span class=post-date><a href=https://www.simoahava.com/analytics/improve-google-analytics-bot-detection-with-recaptcha/>Non-AMP version</a></span></section></header><section class=post-content><p>There are thousands upon thousands of bots, crawlers, spiders, and other creepy-crawlies out there doing nothing but crawling through websites and harvesting the content within for whatever purposes they have been fine-tuned to. While <a href=https://analytics.google.com/>Google Analytics</a> provides <a href="https://support.google.com/analytics/answer/1010249?hl=en">a bot filtering feature</a> to filter out &ldquo;spam&rdquo; and &ldquo;bot traffic&rdquo; from views, this is far from comprehensive enough to tackle all instances of bot traffic that might enter the site.</p><a href=https://www.simoahava.com/amp/images/2019/09/bot-traffic-in-ga.jpg title="Bot traffic in GA"><amp-img src=https://www.simoahava.com/amp/images/2019/09/bot-traffic-in-ga.jpg layout=responsive alt="Bot traffic in GA" height=502 width=1634></amp-img></a><p>You might have noticed bot traffic in your data even if you have bot filtering toggled on. For instance, such traffic could be characterized as follows:</p><ul><li>Traffic without a discernible source/medium</li><li>Average Session Duration under &lt;00:00:01</li><li>Same / outdated user agent</li><li>Non-converting traffic / high bounce rate</li><li>Network location a known cloud host (e.g. AWS)</li></ul><p>Luckily, there are better ways to identify this traffic than looking at noisy Google Analytics data. Google has introduced <a href=https://developers.google.com/recaptcha/docs/v3>reCAPTCHA v3</a> which lets you verify traffic without any user interaction required. This is done with a simple JavaScript API combined with a server-side verification endpoint.</p><a href=https://www.simoahava.com/amp/images/2019/10/recaptcha-bot-traffic.jpg title="reCAPTCHA bot traffic"><amp-img src=https://www.simoahava.com/amp/images/2019/10/recaptcha-bot-traffic.jpg layout=responsive alt="reCAPTCHA bot traffic" height=752 width=980></amp-img></a><p>In this article, <strong>Sebastian Pospischil</strong> and <strong>Philipp Schneider</strong> from <a href=https://www.resolutionmedia.com/>Resolution Media</a> will share the solution with you. They&rsquo;ll show you how to build a simple PHP API on your Apache web server to handle the requests from reCAPTCHA.</p><a href=https://www.simoahava.com/amp/images/2019/10/phil-sebastian.jpg title="Philipp Schneider and Sebastian Pospischil"><amp-img src=https://www.simoahava.com/amp/images/2019/10/phil-sebastian.jpg layout=responsive alt="Philipp Schneider and Sebastian Pospischil" height=629 width=1249></amp-img></a><p>I&rsquo;ll contribute by building the same thing with <strong>Node.js</strong>. Remember that you can have both (Apache and Node.js) running in <a href=https://cloud.google.com/>Google Cloud</a> using e.g. the <a href=https://cloud.google.com/appengine/docs/standard/runtimes>App Engine</a> standard environment. This is helpful if you do not have the resources or capabilities to run something like this on your own web servers.</p><p>Huge thanks to Philipp and Sebastian for sharing this nugget of wisdom with this blog!</p><article class="post type-simmer"><header class=post-header><h2 class=post-title><a href=https://www.simoahava.com/amp/newsletter/>The Simmer Newsletter</a></h2></header><section class=post-excerpt><p>Follow <a href=https://www.teamsimmer.com/newsletter/>this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href=https://www.teamsimmer.com/>Simmer online course platform</a>.</p></section></article><h2 id=getting-started>Getting started</h2><p>To start with, you&rsquo;ll need to generate a (free) <strong>site key</strong> and a (free) <strong>secret key</strong> for your reCAPTCHA API use. Head on over to <a href=https://www.google.com/recaptcha/admin/create>https://www.google.com/recaptcha/admin/create</a>, and register a new site to use with reCAPTCHA v3. Make sure you enter all the domains from which these verification requests will be sent.</p><a href=https://www.simoahava.com/amp/images/2019/09/enable-recaptcha.jpg title="Enable reCAPTCHA"><amp-img src=https://www.simoahava.com/amp/images/2019/09/enable-recaptcha.jpg layout=responsive alt="Enable reCAPTCHA" height=707 width=765></amp-img></a><p>Once you&rsquo;ve added everything and checked all the necessary boxes, click <strong>SUBMIT</strong> to get your keys.</p><a href=https://www.simoahava.com/amp/images/2019/09/register-keys.jpg title="register keys"><amp-img src=https://www.simoahava.com/amp/images/2019/09/register-keys.jpg layout=responsive alt="register keys" height=535 width=791></amp-img></a><p>Copy the keys, as you&rsquo;ll need them soon when configuring the Custom HTML tag in <a href=https://tagmanager.google.com/>Google Tag Manager</a> as well as the server-side endpoint.</p><h2 id=php-endpoint>PHP endpoint</h2><p>In this chapter, Philipp and Sebastian will walk you through the steps of creating a PHP endpoint for verifying the reCAPTCHA requests. They&rsquo;ll also show you how to create the Custom HTML tag in Google Tag Manager for loading the reCAPTCHA JavaScript API and ascertaining the &ldquo;bot-ness&rdquo; of the user.</p><h3 id=custom-html-tag>Custom HTML tag</h3><p>First things first - let&rsquo;s setup Google Tag Manager. In GTM, create a new <strong>Custom HTML Tag</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>/* hides the recaptcha badge */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>grecaptcha-badge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>visibility</span><span class=p>:</span> <span class=kc>hidden</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://www.google.com/recaptcha/api.js?render=_reCAPTCHA_site_key_&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>grecaptcha</span><span class=p>.</span><span class=nx>ready</span><span class=p>(</span><span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>grecaptcha</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span><span class=s1>&#39;_reCAPTCHA_site_key_&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>action</span><span class=o>:</span> <span class=s1>&#39;homepage&#39;</span>
</span></span><span class=line><span class=cl>    <span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=kd>var</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=nx>xhr</span><span class=p>.</span><span class=nx>onload</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>xhr</span><span class=p>.</span><span class=nx>response</span> <span class=o>!==</span> <span class=s1>&#39;noChange&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kd>var</span> <span class=nx>greResult</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>xhr</span><span class=p>.</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>            <span class=nx>event</span><span class=o>:</span> <span class=s1>&#39;recaptcha&#39;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>            <span class=nx>recaptchaAnswer</span><span class=o>:</span> <span class=nx>greResult</span><span class=p>.</span><span class=nx>success</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>recaptchaScore</span><span class=o>:</span> <span class=nx>greResult</span><span class=p>.</span><span class=nx>score</span>
</span></span><span class=line><span class=cl>          <span class=p>});</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>};</span>
</span></span><span class=line><span class=cl>      <span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s1>&#39;POST&#39;</span><span class=p>,</span> <span class=s1>&#39;/gtm/recaptcha.php&#39;</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span> <span class=c1>//replace this with URL to your PHP fil
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>xhr</span><span class=p>.</span><span class=nx>setRequestHeader</span><span class=p>(</span><span class=s1>&#39;Content-type&#39;</span><span class=p>,</span> <span class=s1>&#39;application/x-www-form-urlencoded&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>xhr</span><span class=p>.</span><span class=nx>send</span><span class=p>(</span><span class=s1>&#39;token=&#39;</span> <span class=o>+</span> <span class=nx>token</span> <span class=o>+</span> <span class=s1>&#39;&amp;action=homepage&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>You can set this tag to fire on whatever trigger you wish, though a trigger that fires when the page loads (e.g. All Pages, DOM Ready, or Window Loaded) is recommended.</p><p>Make sure you edit the following:</p><ul><li>The <code>_reCAPTCHA_site_key</code> string on lines 7 and 10 with the actual <strong>site key</strong> you copied from the reCAPTCHA admin console in the previous chapter.</li><li>The URL of your PHP endpoint on line 24.</li></ul><p>This block of code runs the reCAPTCHA JavaScript API in the user&rsquo;s browser, and sends the tokenized result to the PHP endpoint you&rsquo;ll configure in the next chapter. When it gets a response, the score and success state are pushed into <code>dataLayer</code>.</p><a href=https://www.simoahava.com/amp/images/2019/09/recaptcha-badge.jpg title="reCAPTCHA badge"><amp-img src=https://www.simoahava.com/amp/images/2019/09/recaptcha-badge.jpg layout=responsive alt="reCAPTCHA badge" height=96 width=280></amp-img></a><p>The very first code block in the tag hides the reCAPTCHA badge from showing up on the site. <a href=https://developers.google.com/recaptcha/docs/faq#id-like-to-hide-the-recaptcha-badge.-what-is-allowed>Remember to read this part of the FAQ</a> to learn how to modify your site to allow the hiding of the badge.</p><h3 id=php-file-for-your-server>PHP file for your server</h3><p>Create a file <code>recaptcha.php</code> with the following code, and upload it to all the domains you wish to validate reCAPTCHA requests on. Place it in a subdirectory named <code>/gtm/</code>.</p><blockquote><p><strong>NOTE!</strong> You can use whatever path and filename you want for the PHP file - just remember to update the Custom HTML tag&rsquo;s HTTP request endpoint URL accordingly.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl>	<span class=c1>// reCaptcha info
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nv>$url</span> <span class=o>=</span> <span class=s1>&#39;https://www.google.com/recaptcha/api/siteverify&#39;</span><span class=p>;</span>        
</span></span><span class=line><span class=cl>    <span class=nv>$secret</span> <span class=o>=</span> <span class=s2>&#34;_reCAPTCHA_secret_key_&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nv>$remoteip</span> <span class=o>=</span> <span class=nv>$_SERVER</span><span class=p>[</span><span class=s1>&#39;REMOTE_ADDR&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Form info
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nv>$action</span> <span class=o>=</span> <span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;action&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=nv>$response</span> <span class=o>=</span> <span class=nv>$_POST</span><span class=p>[</span><span class=s1>&#39;token&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Botscore
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nv>$botscore</span> <span class=o>=</span> <span class=nv>$_COOKIE</span><span class=p>[</span><span class=s1>&#39;_rbs&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Curl Request
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nv>$curl</span> <span class=o>=</span> <span class=nx>curl_init</span><span class=p>();</span>
</span></span><span class=line><span class=cl>	<span class=nx>curl_setopt</span><span class=p>(</span><span class=nv>$curl</span><span class=p>,</span> <span class=nx>CURLOPT_URL</span><span class=p>,</span> <span class=nv>$url</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>curl_setopt</span><span class=p>(</span><span class=nv>$curl</span><span class=p>,</span> <span class=nx>CURLOPT_POST</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>curl_setopt</span><span class=p>(</span><span class=nv>$curl</span><span class=p>,</span> <span class=nx>CURLOPT_RETURNTRANSFER</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>curl_setopt</span><span class=p>(</span><span class=nv>$curl</span><span class=p>,</span> <span class=nx>CURLOPT_POSTFIELDS</span><span class=p>,</span> <span class=k>array</span><span class=p>(</span>
</span></span><span class=line><span class=cl>		<span class=s1>&#39;secret&#39;</span> <span class=o>=&gt;</span> <span class=nv>$secret</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s1>&#39;remoteip&#39;</span> <span class=o>=&gt;</span> <span class=nv>$remoteip</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=s1>&#39;action&#39;</span> <span class=o>=&gt;</span> <span class=nv>$action</span><span class=p>,</span>		
</span></span><span class=line><span class=cl>		<span class=s1>&#39;response&#39;</span> <span class=o>=&gt;</span> <span class=nv>$response</span>
</span></span><span class=line><span class=cl>	<span class=p>));</span>
</span></span><span class=line><span class=cl>	<span class=nv>$curlData</span> <span class=o>=</span> <span class=nx>curl_exec</span><span class=p>(</span><span class=nv>$curl</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nx>curl_close</span><span class=p>(</span><span class=nv>$curl</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nv>$curlJson</span> <span class=o>=</span> <span class=nx>json_decode</span><span class=p>(</span><span class=nv>$curlData</span><span class=p>,</span> <span class=k>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>//defining the answer
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nv>$answer</span> <span class=o>=</span> <span class=nv>$curlData</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>//refresh the cookie
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>setcookie</span><span class=p>(</span><span class=s1>&#39;_rbs&#39;</span><span class=p>,</span> <span class=nv>$curlJson</span><span class=p>[</span><span class=s1>&#39;score&#39;</span><span class=p>],</span> <span class=nx>time</span><span class=p>()</span><span class=o>+</span><span class=mi>1800</span><span class=p>,</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span> 
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>// only fire $answer if botscore cookie is not set or different from acutal score
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=p>(</span><span class=nv>$botscore</span> <span class=o>!=</span> <span class=nv>$curlJson</span><span class=p>[</span><span class=s1>&#39;score&#39;</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>echo</span> <span class=nv>$answer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>echo</span> <span class=s2>&#34;noChange&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=cp>?&gt;</span><span class=err>
</span></span></span></code></pre></div><p>Again, make sure you replace the <code>_reCAPTCHA_secret_key</code> on line 4 with the <strong>secret key</strong> you got from the admin console.</p><p>This PHP code takes the response sent by Google Tag Manager, validates it against the reCAPTCHA verification API, and then sends the result object in the response, which will, in turn, be pushed into <code>dataLayer</code> for your tags to use.</p><p>The code also writes a cookie in the HTTP response. This cookie is named <code>_rbs</code> and contains the score of the reCAPTCHA action. The results are only returned if the reCAPTCHA score has changed in the last 30 minutes. If the results have not changed, the response will be <code>"noChange"</code>, which blocks the <code>dataLayer.push()</code> from taking place.</p><h2 id=nodejs-endpoint>Node.js endpoint</h2><p>In this chapter, Simo will show you how to do the same as above by using a <a href=https://www.nodejs.org/>Node.js</a> application instead.</p><h3 id=custom-html-tag-1>Custom HTML tag</h3><p>The main difference (apart from the tech stack) to the PHP solution is that we&rsquo;ll log errors as well. They are sent as the value of the <code>recaptchaScore</code> key in <code>dataLayer</code>, so in your report you&rsquo;ll end up with a mix of valid scores and error texts, but this should be easy to filter in your tables.</p><p>This is what the Custom HTML tag looks like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>/* hides the recaptcha badge */</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>grecaptcha-badge</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>visibility</span><span class=p>:</span> <span class=kc>hidden</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://www.google.com/recaptcha/api.js?render=_reCAPTCHA_site_key&amp;onload=__recaptchaCallback&#34;</span> <span class=na>async</span> <span class=na>defer</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nb>window</span><span class=p>.</span><span class=nx>__recaptchaCallback</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nb>window</span><span class=p>.</span><span class=nx>grecaptcha</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nb>window</span><span class=p>.</span><span class=nx>grecaptcha</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span><span class=s1>&#39;_reCAPTCHA_site_key&#39;</span><span class=p>,</span> <span class=p>{</span><span class=nx>action</span><span class=o>:</span> <span class=s1>&#39;homepage&#39;</span><span class=p>}).</span><span class=nx>then</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>token</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>url</span> <span class=o>=</span> <span class=s1>&#39;https://mydomain.com:3000/recaptcha/&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>xhr</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>XMLHttpRequest</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=nx>xhr</span><span class=p>.</span><span class=nx>open</span><span class=p>(</span><span class=s1>&#39;GET&#39;</span><span class=p>,</span> <span class=nx>url</span> <span class=o>+</span> <span class=s1>&#39;?g-recaptcha-response=&#39;</span> <span class=o>+</span> <span class=nx>token</span><span class=p>,</span> <span class=kc>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=nx>xhr</span><span class=p>.</span><span class=nx>onreadystatechange</span> <span class=o>=</span> <span class=kd>function</span><span class=p>(</span><span class=nx>data</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>readyState</span> <span class=o>===</span> <span class=nx>XMLHttpRequest</span><span class=p>.</span><span class=nx>DONE</span> <span class=o>&amp;&amp;</span> <span class=k>this</span><span class=p>.</span><span class=nx>status</span> <span class=o>===</span> <span class=mi>200</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=nx>responseJson</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=nx>xhr</span><span class=p>.</span><span class=nx>response</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>              <span class=nx>event</span><span class=o>:</span> <span class=s1>&#39;recaptcha&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>recaptchaAnswer</span><span class=o>:</span> <span class=nx>responseJson</span><span class=p>.</span><span class=nx>status</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>recaptchaScore</span><span class=o>:</span> <span class=nx>responseJson</span><span class=p>.</span><span class=nx>recaptcha</span><span class=p>.</span><span class=nx>score</span>
</span></span><span class=line><span class=cl>            <span class=p>});</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=nx>xhr</span><span class=p>.</span><span class=nx>send</span><span class=p>();</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>Remember to change the <code>_reCAPTCHA_site_key</code> on lines 7 and 11.</p><p>The <code>url</code> variable on line 12 needs to point to your Node.js application.</p><p>This setup is different from the PHP request. Here, we use a GET request, and we parse the response, pushing both the success and error into <code>dataLayer</code> using a success callback for the HTTP request.</p><p>Also, since we load the JavaScript API asynchronously, we create a global callback method <code>__recaptchaCallback</code>, whose name we pass in the script loader as a parameter (<code>&amp;onload</code>).</p><p>The end result is the same as with the PHP endpoint - a <code>dataLayer.push()</code> event with the reCAPTCHA status and score.</p><h3 id=nodejs-application>Node.js application</h3><p>The <strong>Node.js</strong> application example here is the simplest possible thing you can build. For it to work, you need to have <a href=https://nodejs.org/en/download/>Node.js installed</a> on in the environment where you want to run the endpoint (for example, a web server running on your site or in the cloud).</p><p>Create an empty directory, and initialize a new <code>npm</code> project with <code>npm init</code>. After following through the setup steps, run:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>$ npm install express express-recaptcha cookie-parser --save</span></span></code></pre></div><p>This installs the required dependencies to run a simple <strong>express.js</strong> web server as well as the files required to run the reCAPTCHA middleware and some cookie parsing logic.</p><p>Then, create a file named <strong>server.js</strong>, open it for editing, and add the following code within:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>express</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>cookieParser</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;cookie-parser&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>Recaptcha</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;express-recaptcha&#39;</span><span class=p>).</span><span class=nx>RecaptchaV3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>app</span> <span class=o>=</span> <span class=nx>express</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>cookieParser</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>siteKey</span> <span class=o>=</span> <span class=s1>&#39;_reCAPTCHA_site_key&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>secretKey</span> <span class=o>=</span> <span class=s1>&#39;_reCAPTCHA_secret_key&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>recaptcha</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Recaptcha</span><span class=p>(</span><span class=nx>siteKey</span><span class=p>,</span> <span class=nx>secretKey</span><span class=p>,</span> <span class=p>{</span><span class=nx>action</span><span class=o>:</span> <span class=s1>&#39;homepage&#39;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/recaptcha/&#39;</span><span class=p>,</span> <span class=nx>recaptcha</span><span class=p>.</span><span class=nx>middleware</span><span class=p>.</span><span class=nx>verify</span><span class=p>,</span> <span class=p>(</span><span class=nx>req</span><span class=p>,</span> <span class=nx>res</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>botCookie</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>cookies</span><span class=p>.</span><span class=nx>_rbs</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>res</span><span class=p>.</span><span class=nx>header</span><span class=p>(</span><span class=s1>&#39;Access-Control-Allow-Origin&#39;</span><span class=p>,</span> <span class=s1>&#39;*&#39;</span><span class=p>);</span> <span class=c1>// Set this to the actual domain that will be sending the requests
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>req</span><span class=p>.</span><span class=nx>recaptcha</span><span class=p>.</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>recaptcha</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>recaptcha</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>score</span> <span class=o>=</span> <span class=nx>recaptcha</span><span class=p>.</span><span class=nx>score</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>cookie</span><span class=p>(</span><span class=s1>&#39;_rbs&#39;</span><span class=p>,</span> <span class=nx>score</span><span class=p>,</span> <span class=p>{</span><span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>30</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Only send response if cookie does not exist or does not match the latest score
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=nx>botCookie</span> <span class=o>!==</span> <span class=nx>score</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span><span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;1&#39;</span><span class=p>,</span> <span class=nx>recaptcha</span><span class=o>:</span> <span class=nx>req</span><span class=p>.</span><span class=nx>recaptcha</span><span class=p>.</span><span class=nx>data</span><span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>score</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>recaptcha</span><span class=p>.</span><span class=nx>error</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>cookie</span><span class=p>(</span><span class=s1>&#39;_rbs&#39;</span><span class=p>,</span> <span class=nx>score</span><span class=p>,</span> <span class=p>{</span><span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;/&#39;</span><span class=p>,</span> <span class=nx>maxAge</span><span class=o>:</span> <span class=mi>30</span> <span class=o>*</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>1000</span><span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>res</span><span class=p>.</span><span class=nx>send</span><span class=p>({</span><span class=nx>status</span><span class=o>:</span> <span class=s1>&#39;0&#39;</span><span class=p>,</span> <span class=nx>recaptcha</span><span class=o>:</span> <span class=p>{</span><span class=nx>score</span><span class=o>:</span> <span class=nx>score</span><span class=p>}});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>app</span><span class=p>.</span><span class=nx>listen</span><span class=p>(</span><span class=mi>3000</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;App listening on port 3000!&#39;</span><span class=p>));</span></span></span></code></pre></div><p>Edit lines 8 and 9 with the actual <strong>site key</strong> and <strong>secret key</strong>, respectively.</p><p>Edit line 15 to allow requests only from your site (so if your site is running on <code>https://mydomain.com</code>, that&rsquo;s what you would add as a valid origin instead of <code>*</code>).</p><p>This application runs on port <code>3000</code> of whatever hostname is configured for your web server. It creates a simple GET request endpoint to <code>/recaptcha/</code>, where a piece of <strong>middleware</strong> will inspect the incoming request for a reCAPTCHA token.</p><p>If the token is encountered, it is validated and the <code>recaptcha</code> results are written to <code>dataLayer</code> as well as a cookie named <code>_rbs</code>.</p><p>If the validation fails, the &ldquo;score&rdquo; will be the error message instead of the actual score.</p><h2 id=rest-of-the-setup>Rest of the setup</h2><h3 id=google-analytics-custom-dimensions>Google Analytics Custom Dimensions</h3><p>In Google Analytics, create <strong>two</strong> new Custom Dimensions:</p><ul><li><strong>reCAPTCHA score</strong> (session scope)</li><li><strong>reCAPTCHA answer</strong> (session scope)</li></ul><a href=https://www.simoahava.com/amp/images/2019/09/create-custom-dimension.jpg title="Create custom dimension"><amp-img src=https://www.simoahava.com/amp/images/2019/09/create-custom-dimension.jpg layout=responsive alt="Create custom dimension" height=672 width=806></amp-img></a><p>These two Custom Dimensions allow us to permanently filter out bot traffic from our Google Analytics production views.</p><a href=https://www.simoahava.com/amp/images/2019/09/new-custom-dimensions.jpg title="New custom dimensions"><amp-img src=https://www.simoahava.com/amp/images/2019/09/new-custom-dimensions.jpg layout=responsive alt="New custom dimensions" height=472 width=1652></amp-img></a><p>Note that the Google Analytics tags are only fired if the score changes (or if the score was previously an error). That way you won&rsquo;t constantly send the same reCAPTCHA score to Google Analytics while the session is active.</p><p>The Custom Dimensions are sent with an <strong>event tag</strong>.</p><h3 id=google-tag-manager-setup>Google Tag Manager setup</h3><p>First, let&rsquo;s create two new Data Layer variables.</p><h4 id=data-layer-variables>Data Layer Variables</h4><p>The first variable is named <strong>dl_recaptchaAnswer</strong>, and should have its Data Layer Variable Name field pointing to <code>recaptchaAnswer</code>.</p><p>The second variable is named <strong>dl_recaptchaScore</strong>, and should have its Data Layer Variable Name field pointing to <code>recaptchaScore</code>.</p><p>Here&rsquo;s what the latter would look like:</p><a href=https://www.simoahava.com/amp/images/2019/09/data-layer-variable.jpg title="Data Layer variable"><amp-img src=https://www.simoahava.com/amp/images/2019/09/data-layer-variable.jpg layout=responsive alt="Data Layer variable" height=582 width=537></amp-img></a><h4 id=trigger>Trigger</h4><p>The trigger is a simple Custom Event trigger that looks like this:</p><a href=https://www.simoahava.com/amp/images/2019/09/custom-event-trigger.jpg title="Custom event trigger"><amp-img src=https://www.simoahava.com/amp/images/2019/09/custom-event-trigger.jpg layout=responsive alt="Custom event trigger" height=468 width=730></amp-img></a><h4 id=event-tag>Event tag</h4><p>The main function of the event tag is to send the Custom Dimensions. You can arrange the other fields however you like. This is what a sample Universal Analytics event tag might look like:</p><a href=https://www.simoahava.com/amp/images/2019/09/ga-event-tag-1.jpg title="GA Event tag 1"><amp-img src=https://www.simoahava.com/amp/images/2019/09/ga-event-tag-1.jpg layout=responsive alt="GA Event tag 1" height=686 width=918></amp-img></a><a href=https://www.simoahava.com/amp/images/2019/09/ga-event-tag-2.jpg title="GA Event tag 2"><amp-img src=https://www.simoahava.com/amp/images/2019/09/ga-event-tag-2.jpg layout=responsive alt="GA Event tag 2" height=538 width=897></amp-img></a><p>Just make sure you have the Custom Dimension index and value settings correct per what you configured in Google Analytics admin earlier.</p><blockquote><p><strong>NOTE</strong>! One enhancement would be to set the Custom Dimensions <em>only</em> if <code>recaptchaAnswer</code> is <code>1</code> (success), so that you don&rsquo;t end up overwriting a valid score for the session with an errant error message.</p></blockquote><h2 id=analyze-the-results>Analyze the results</h2><p>When you set the whole thing up, all users on your page will be vetted in the background for their probability to be a bot. The script fires if the user hasn&rsquo;t been validated with a proper score within 30 minutes since the last validation. This ensures that you don&rsquo;t flood Google Analytics unnecessarily with events that just have the same score sent with each one.</p><a href=https://www.simoahava.com/amp/images/2019/10/recaptcha-bot-traffic.jpg title="reCAPTCHA bot traffic"><amp-img src=https://www.simoahava.com/amp/images/2019/10/recaptcha-bot-traffic.jpg layout=responsive alt="reCAPTCHA bot traffic" height=752 width=980></amp-img></a><p>Here&rsquo;s what the custom dimensions will end up populated with:</p><table><thead><tr><th>Key</th><th>Google Analytics fields</th><th>Explanation</th><th>Sample value</th></tr></thead><tbody><tr><td><code>recaptchaAnswer</code></td><td>Event Action, Custom Dimension</td><td>Whether or not the validation worked. <code>1</code> for success, <code>0</code> for failure.</td><td><code>1</code></td></tr><tr><td><code>recaptchaScore</code></td><td>Event Label, Custom Dimension</td><td>Score between <code>0.0</code> and <code>1.0</code> (where <code>1.0</code> is most likely to be human and <code>0.0</code> most likely to be bot). If the validation fails, the error message is sent instead.</td><td><code>0.9</code>, or <code>invalid-input-response</code></td></tr></tbody></table><p>You can drill down to the <code>0.1</code> score to identify idiosyncrasies in this low-score traffic.</p><a href=https://www.simoahava.com/amp/images/2019/10/recaptcha-providers.jpg title="reCAPTCHA providers"><amp-img src=https://www.simoahava.com/amp/images/2019/10/recaptcha-providers.jpg layout=responsive alt="reCAPTCHA providers" height=987 width=980></amp-img></a><p>To get a better understanding of the amount of bot traffic, create segments based on <strong>reCAPTCHA score</strong>. After a few weeks, you’ll have enough data in order to:</p><ul><li>Determine the ratio of bot traffic on your site.</li><li>Decide whether you should permanently filter out flagged bot traffic from you Google Analytics production views.</li></ul><h2 id=summary>Summary</h2><p>Thank you so much to Philipp and Sebastian for sharing their amazing idea here. Since reCAPTCHA v3 calculates the score based on user interactions on the site, it&rsquo;s a perfect candidate for measuring with Google Analytics, since we can surreptitiously collect the &ldquo;bot-ness&rdquo; of the visitor and leverage GA&rsquo;s custom dimensions to collect the data.</p><p>It&rsquo;s not trivial to implement, as it requires a web service to poll for the reCAPTCHA score. Perhaps someone could do the world a service and create a free, public API for polling this information? Until then, you&rsquo;re stuck with an on-premise solution or, better yet, leveraging the cloud for setting up the API endpoint.</p><p>This solution should serve well to uncover the complexity of bot traffic on any given website. Bots and crawlers come in different shapes and sizes - there are malicious agents as well as services that aim to do good. Regardless, bot traffic is most likely <em>not</em> your target traffic when building your website, so being able to segment it out in Google Analytics is a major win for data quality indeed.</p><p>Let us know in the comments what you think of this solution, and whether you have ideas for improving it!</p></section><footer class=post-footer><figure class=author-image><a class=img href=https://www.simoahava.com/amp/></a></figure><section class=author><h4>Simo Ahava</h4><p>Husband | Father | Analytics developer</p><div class=author-meta><span class="author-location icon-location">Espoo, Finland</span>
<span class="author-link icon-link"><a href=https://www.simoahava.com/>https://www.simoahava.com/</a></span></div></section><div class=social><amp-social-share type=twitter width=60 height=44></amp-social-share><amp-social-share type=linkedin width=60 height=44></amp-social-share><amp-social-share type=facebook width=60 height=44></amp-social-share></div></footer></article></main></div></body></html>