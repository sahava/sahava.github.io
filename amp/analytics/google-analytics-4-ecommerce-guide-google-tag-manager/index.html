

  
    
  


  

<!doctype html>



<html âš¡ lang="en-us" class="no-js">
    <head>

      <meta charset="utf-8">
        <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script><script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>

<script async src="https://cdn.ampproject.org/v0.js"></script>


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>
  .type-simmer {
      padding: 8px;
      background: rgba(179,138,197,0.2);
      box-shadow: 2px 2px 1px #ccc;
      border-radius: 5px;
  }
    /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{position:relative;z-index:10;min-height:100%;background:#fff;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{height:100%;max-height:100%}body{font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.8rem;line-height:1.75em;color:#3a4145;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;color:#2e2e2e;line-height:1.15em;margin:0 0 .4em;font-family:Open Sans,sans-serif;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;-webkit-transition:color .3s ease;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:3.2em 0;padding:0}blockquote{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:.4em solid #4a4a4a}blockquote p{margin:.8em 0;font-style:italic}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;color:#ccc}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{padding:1px 3px;font-size:.85em;white-space:pre-wrap;border:1px solid #e3edf3;border-radius:2px}code,pre,tt{font-family:Inconsolata,monospace,sans-serif;background:#f7fafb}pre{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 1.75em;border:1px solid #e3edf3;width:100%;padding:10px;font-size:.9em;white-space:pre;overflow:auto;border-radius:3px}pre code,pre tt{font-size:inherit;white-space:pre-wrap;background:transparent;border:none;padding:0}kbd{display:inline-block;margin-bottom:.4em;padding:1px 8px;border:1px solid #ccc;color:#666;text-shadow:#fff 0 1px 0;font-size:.9em;font-weight:700;background:#f4f4f4;border-radius:4px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 1px 0 0 #fff inset;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 1px 0 0 #fff}table{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0;width:100%;max-width:100%;background-color:transparent}table td,table th{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #efefef}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:transparent}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{position:relative;display:table;width:100%;height:100vh;margin-bottom:5rem;text-align:center;background:#222 no-repeat 50%;background-size:cover;overflow:hidden}.main-header.cover{background-image:url("https://www.simoahava.com/images/maisema.jpg")}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{position:relative;padding:35px 40px;margin:0 0 30px}.main-nav a{text-decoration:none;font-family:Open Sans,sans-serif}.scroll-down{display:block;position:absolute;z-index:100;bottom:45px;left:50%;font-size:1.5em;text-align:center;-webkit-animation:bounce 4s 2s infinite;animation:bounce 4s 2s infinite}.scroll-down:hover{color:#fff;-webkit-animation:none;animation:none}.home-template .main-header:after{display:block;content:" ";width:150px;height:130px;border-radius:100%;position:absolute;bottom:0;left:50%;margin-left:-75px;background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%)}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover.main-header:after,.no-cover .scroll-down{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{-webkit-box-sizing:border-box;box-sizing:border-box;height:38px}.menu-button{display:inline-block;float:right;padding:0 15px;border:1px solid #bfc8cd;opacity:1;color:#9eabb3;text-align:center;font-size:12px;text-transform:uppercase;line-height:35px;white-space:nowrap;border-radius:3px;background:rgba(0,0,0,.1);-webkit-transition:all .5s ease;transition:all .5s ease}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{position:absolute;top:0;left:0;right:0;height:70px;border:none;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent)}.no-cover .main-nav.overlay,.no-cover .menu-button{background:none}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{color:#222;border-color:#fff;background:#fff}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{margin:10px 0;font-size:5rem;letter-spacing:-1px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff}.page-description{margin:0;font-size:2rem;line-height:1.5em;font-weight:400;font-family:Merriweather,serif;letter-spacing:.01rem;color:hsla(0,0%,100%,.8)}.no-cover.main-header{min-height:160px;max-height:40vh;background:#f5f8fa}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{color:rgba(0,0,0,.4);border-color:rgba(0,0,0,.3)}.main-header-content .page-title{-webkit-animation:fade-in-down .6s;animation:fade-in-down .6s;-webkit-animation-delay:.2s;animation-delay:.2s}.main-header-content .page-description{-webkit-animation:fade-in-down .9s;animation:fade-in-down .9s;-webkit-animation-delay:.1s;animation-delay:.1s}.post{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.post-header{padding-bottom:10px}.post:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{margin:0;font-size:.9em;line-height:1.7em}.read-more{font-size:.8em;text-decoration:none;font-style:italic}.post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3}.author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{position:relative;padding:.3rem 40px 0 100px;min-height:77px}.post-date{display:inline-block;margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;text-transform:uppercase;font-size:1.3rem;white-space:nowrap}.user-image{position:absolute;top:0;left:0}.user-name{display:block;font-weight:700}.user-bio{display:block;max-width:440px;font-size:1.4rem;line-height:1.5em}.publish-meta{position:absolute;top:0;right:0;padding:4.3rem 0 4rem;text-align:right}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{text-align:center;font-size:.8em}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{content:"";position:absolute;z-index:-2;bottom:10px;width:50%;height:20%;max-width:480px;-webkit-box-shadow:0 15px 10px rgba(0,0,0,.7);box-shadow:0 15px 10px rgba(0,0,0,.7)}figure.polaroid:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}figure.polaroid{width:450px;position:relative;padding:15px;border:none;background:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.3),0 0 40px rgba(0,0,0,.1) inset;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);border-radius:4px;margin-bottom:1.5em;max-width:100%}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;outline:1px solid #ccc;padding:0;margin:0}figure.polaroid figcaption{font-size:1.3em;font-weight:400;font-family:Kaushan Script,cursive;text-align:right;padding:.8em .5em .4em}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{font-size:.8em;font-style:italic;text-align:center;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;margin-top:.5em;padding:.2em}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{text-decoration:none;font-size:2em}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{text-decoration:none;font-size:2em;color:#a2a2a2}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{padding:0;margin:0;border:none}.post-template .content{overflow:hidden}.post-template .post{margin-top:0;border-bottom:none;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{position:relative;margin:6rem 0 0;padding:6rem 0 0;border-top:1px solid #ebf2f6}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{margin:1rem 0;font-size:1.4rem;line-height:1.75em}.author-meta{padding:0;margin:0;list-style:none;font-size:1.4rem;line-height:1;font-style:italic}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;top:6rem;right:0;width:180px}.post-footer .share a{font-size:1.8rem;display:inline-block;margin:1rem 1.6rem 1.6rem 0;color:#bbc7cc;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{height:85px;min-height:0;margin-bottom:0;background:transparent}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{height:10vh;min-height:100px;background:transparent}.author-profile{padding:0 15px 5rem;border-bottom:1px solid #ebf2f6;text-align:center}.author-profile:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.author-image{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-56px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;background:#fff;z-index:2;-webkit-box-shadow:#e7eef2 0 0 0 1px;box-shadow:0 0 0 1px #e7eef2}.author-image .img{position:relative;display:block;width:100%;height:100%;background-size:cover;background-position:50%;border-radius:100%;background-image:url("https://www.simoahava.com/images/simo.png")}.author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0;-webkit-box-shadow:none;box-shadow:none}.author-title{margin:1.5rem 0 1rem}.author-bio{font-size:1.8rem;line-height:1.5em;font-weight:200;color:#50585d;letter-spacing:0;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{margin:2rem 0;font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.7rem}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@-webkit-keyframes bounce{0%,10%,25%,40%,50%{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}20%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}30%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);text-align:left;overflow-y:auto;font-family:Open Sans,Verdana,sans-serif;font-weight:700;font-size:11px;color:#909090;width:400px}#sidebar .nav-title{position:absolute;top:45px;left:30px;font-size:1.5em;font-weight:100;text-transform:uppercase;color:#fff}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{position:absolute;top:38px;right:25px;width:20px;height:20px;padding:0;font-size:10px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{content:"";position:absolute;top:0;width:20px;height:1px;background:#969696;top:15px;-webkit-transition:background .15s ease;transition:background .15s ease}#sidebar .nav-close:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}#sidebar .nav-close:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{margin:.4em 0 .2em;background:none;border:none;font-size:2rem}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{padding:90px 9% 5%;list-style:none;counter-reset:item}#sidebar li:before{display:block;float:right;padding-right:4%;padding-left:5px;text-align:right;font-size:1.2rem;vertical-align:bottom;color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item}#sidebar li{margin:0}#sidebar li a{text-decoration:none;line-height:1.4;font-size:1.4rem;display:block;padding:.6rem 4%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#sidebar li a:after{display:inline-block;content:" ...............................................................";color:hsla(0,0%,100%,.2);margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{content:" ";border-bottom:1px solid hsla(0,0%,100%,.5);width:100%;height:1px}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;bottom:30px;left:30px;right:30px;height:38px;padding:0 20px;text-align:center;font-size:12px;font-family:Open Sans,sans-serif;text-transform:uppercase;text-decoration:none;line-height:35px;border-radius:3px;background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{position:relative;width:80%;max-width:710px;margin:4rem auto;font-family:Open Sans,sans-serif;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;-webkit-transition:all .2s ease;transition:all .2s ease}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px solid #bfc8cd;text-decoration:none;border-radius:4px;-webkit-transition:border .3s ease;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{color:#889093;border-color:#98a0a4}.extra-pagination{display:none;border-bottom:1px solid #ebf2f6}.extra-pagination:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{position:relative;margin:8rem 0 0;padding:.5rem 15px;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{-webkit-box-sizing:border-box;box-sizing:border-box;height:auto;min-height:240px;height:60vh;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{margin-bottom:15px;height:40vh}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{padding:0 5px;border-radius:0;border-color:transparent;color:#2e2e2e;background:transparent}.menu-button:hover{color:#2e2e2e;border-color:transparent;background:none}body.nav-opened .menu-button{background:none;border:transparent}.main-nav.overlay a:hover{color:#fff;border-color:transparent;background:transparent}.no-cover .main-nav.overlay{background:none}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{width:auto;margin:2rem auto}.post{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{padding-bottom:0;margin-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{margin:0 0 2rem;padding:0 0 1.6rem;border-bottom:1px dashed #ebf2f6}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;margin:0;line-height:1.75em}.author-meta li:before{display:none}.newer-posts,.older-posts{position:static;margin:10px 0}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{max-width:100%;height:auto;border:1px solid #777;-webkit-box-shadow:5px 5px 2px rgba(0,0,0,.4);box-shadow:5px 5px 2px rgba(0,0,0,.4);margin-bottom:20px}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{color:#fff;background-color:#007bff}.badge{display:inline-block;padding:.25em .4em;font-size:80%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:.25rem}
    

</style>

        <link rel="canonical" href="https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

        

        <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <meta name="theme-color" content="#ffffff" />

        
        <title>Google Analytics 4: Ecommerce Guide for Google Tag Manager | Simo Ahava's blog</title>
        



  

<meta property="og:title" content="Google Analytics 4: Ecommerce Guide for Google Tag Manager" />
<meta name="description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager." />
<meta property="og:description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.simoahava.com/amp/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/" />

      <meta name="twitter:image" content="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg">
    


    
        <meta property="article:published_time" content="2020-10-22T04:00:00Z"/>
    
    
        <meta property="article:modified_time" content="2020-10-22T04:00:00Z"/>
    




    


    <meta property="og:site_name" content="Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development." />









    
        
        
            
        
        
        
    
    
    
        
            <meta property="article:section" content="Analytics" />
        
    
    
        
            <meta property="article:tag" content="google tag manager" />
        
            <meta property="article:tag" content="app&#43;web" />
        
            <meta property="article:tag" content="google analytics 4" />
        
            <meta property="article:tag" content="ecommerce" />
        
    







    
        <meta name="twitter:card" content="summary"/>
    

    
        
        
            
        
        
        
    



<meta itemprop="name" content="Google Analytics 4: Ecommerce Guide For Google Tag Manager">
<meta itemprop="description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.">
<meta itemprop="datePublished" content="2020-10-22T07:00:00&#43;03:00" />
<meta itemprop="dateModified" content="2020-10-22T07:00:00&#43;03:00" />
<meta itemprop="wordCount" content="7829">



<meta itemprop="keywords" content="google tag manager,app&#43;web,google analytics 4,ecommerce," />
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.",
    
    "url": "https:\/\/www.simoahava.com\/amp\/"
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Google Analytics 4: Ecommerce Guide For Google Tag Manager | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2020\/10\/app-web-ecommerce.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/amp\/analytics\/google-analytics-4-ecommerce-guide-google-tag-manager\/",
  "datePublished": "2020-10-22T07:00:00\u002b03:00",
  "dateModified": "2020-10-22T07:00:00\u002b03:00",
  "description": "Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>












    </head>
<body>

<amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
  <amp-sidebar id="sidebar" layout="nodisplay" side="right">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close" on="tap:sidebar.close" role="button" tabindex="1">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/categories/gtm-tips/">GTM Tips</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/about-simo-ahava/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/tools/">Tools</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/blog-statistics/">Blog Statistics</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/upcoming-talks/">Upcoming Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/custom-templates/">Templates</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/newsletter/">Newsletter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/">Full (non-AMP) site</a>
            </li>
        
        <amp-accordion>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Categories
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/gtm-tips/">gtm-tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-development/">web-development</a></li>
                
                </div>
            </section>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Tags
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ab-testing/">ab-testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/accelerated-mobile-pages/">accelerated-mobile-pages</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adblocker/">adblocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/add-on/">add-on</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adwords/">adwords</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/agile/">agile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amazon/">amazon</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amp/">amp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/android/">android</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/api/">api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app/">app</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app&#43;web/">app&#43;web</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app-engine/">app-engine</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/approval/">approval</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps/">apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps-script/">apps-script</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/array/">array</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/attribution/">attribution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audience-design/">audience-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audit/">audit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-event-tracking/">auto-event-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-link-domains/">auto-link-domains</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/aws/">aws</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/basketball/">basketball</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/beforeunload/">beforeunload</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/best-practices/">best-practices</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/big-data/">big-data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bigquery/">bigquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/blogger/">blogger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bounce-rate/">bounce-rate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/built-in-variables/">built-in-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/calculated-metrics/">calculated-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/callback/">callback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/campaign-tracking/">campaign-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/celebration/">celebration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/change-history/">change-history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome/">chrome</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome-extension/">chrome-extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-tracking/">click-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-variables/">click-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clickstream/">clickstream</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-id/">client-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clientid/">clientid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cloud-functions/">cloud-functions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cms/">cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cname/">cname</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conferences/">conferences</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent/">consent</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent-mode/">consent-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container/">container</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-export/">container-export</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-snippet/">container-snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content/">content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-blocker/">content-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-engagement/">content-engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-grouping/">content-grouping</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management-system/">content-management-system</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-security-policy/">content-security-policy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-strategy/">content-strategy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/context/">context</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversion/">conversion</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookie/">cookie</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookiedomain/">cookiedomain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookies/">cookies</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/creative/">creative</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain/">cross-domain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain-tracking/">cross-domain-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/csp/">csp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css/">css</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css-selectors/">css-selectors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom/">custom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimension/">custom-dimension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimensions/">custom-dimensions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html/">custom-html</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tag/">custom-html-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tags/">custom-html-tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-javascript/">custom-javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-metrics/">custom-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-templates/">custom-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/customtask/">customtask</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dan-wilkerson/">dan-wilkerson</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dashboard/">dashboard</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-collection/">data-collection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer/">data-layer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer-variable/">data-layer-variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-model/">data-model</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-quality/">data-quality</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/datalayer/">datalayer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debug/">debug</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debugging/">debugging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/definition-of-success/">definition-of-success</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer/">developer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/development/">development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/document.write/">document.write</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dom/">dom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/duplicate/">duplicate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dynamic-content/">dynamic-content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/easter-egg/">easter-egg</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ecommerce/">ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/education/">education</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/element-visibility/">element-visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/engagement/">engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/enhanced-ecommerce/">enhanced-ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/environments/">environments</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/errors/">errors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event/">event</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listener/">event-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listeners/">event-listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/eventcallback/">eventcallback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/events/">events</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/excel/">excel</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exceptions/">exceptions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/experimentation/">experimentation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exploit/">exploit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/extension/">extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/facebook/">facebook</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/false/">false</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fields-to-set/">fields-to-set</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firebase/">firebase</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firing-rules/">firing-rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/folders/">folders</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form/">form</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form-tracking/">form-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/format-value/">format-value</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/forms/">forms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga-spy/">ga-spy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga4/">ga4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gcp/">gcp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gdpr/">gdpr</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google/">google</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics/">google-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-4/">google-analytics-4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-settings/">google-analytics-settings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud-platform/">google-cloud-platform</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-optimize/">google-optimize</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-sheets/">google-sheets</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag-manager/">google-tag-manager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-trends/">google-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/googletagmanager/">googletagmanager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/governance/">governance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag/">gtag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag.js/">gtag.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-sonar/">gtm-sonar</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-tools/">gtm-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm360/">gtm360</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtmtips/">gtmtips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guest-post/">guest-post</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guide/">guide</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hack/">hack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history/">history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-change-trigger/">history-change-trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-listener/">history-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hugo/">hugo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/iframe/">iframe</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/">intelligent-tracking-prevention</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/internal-traffic/">internal-traffic</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ios/">ios</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ip/">ip</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/it-department/">it-department</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/itp/">itp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/javascript/">javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/jquery/">jquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/klipfolio/">klipfolio</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/learning/">learning</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lighthouse/">lighthouse</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/links/">links</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/listeners/">listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/local/">local</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/localstorage/">localstorage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lookup-table/">lookup-table</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/macros/">macros</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketer/">marketer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketing/">marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/measurement-protocol/">measurement-protocol</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/meta-description/">meta-description</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/metrics/">metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/migration/">migration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mixcloud/">mixcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mobile/">mobile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modern-cms/">modern-cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modular-architecture/">modular-architecture</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/monitor/">monitor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/navigation/">navigation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/netbooster/">netbooster</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/new-ui/">new-ui</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/node.js/">node.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/nodejs/">nodejs</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/non-technical/">non-technical</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/open-source/">open-source</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/opt-out/">opt-out</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/owasp/">owasp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-load-time/">page-load-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-timings/">page-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/parameter-reporting/">parameter-reporting</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/penguin/">penguin</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/performance/">performance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/permissions/">permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/persistence/">persistence</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal-experience/">personal-experience</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/php/">php</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pii/">pii</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pitch/">pitch</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/plugins/">plugins</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/poetry/">poetry</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/postmessage/">postmessage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ppc/">ppc</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview/">preview</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview-mode/">preview-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/process/">process</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/public-speaking/">public-speaking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/query-string/">query-string</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/queue-time/">queue-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/r/">r</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/race-condition/">race-condition</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/reaktor/">reaktor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/recaptcha/">recaptcha</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/referral/">referral</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/regular-expression/">regular-expression</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/release/">release</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/resources/">resources</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/rules/">rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/safari/">safari</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sales/">sales</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/samesite/">samesite</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/schema/">schema</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/score-card/">score-card</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/scroll-depth/">scroll-depth</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search/">search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-api/">search-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-engine-optimization/">search-engine-optimization</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-trends/">search-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/security/">security</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/selection/">selection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo-report/">seo-report</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/serp/">serp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/server-side-tagging/">server-side-tagging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/session/">session</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sessions/">sessions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/single-page-apps/">single-page-apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-search/">site-search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-speed/">site-speed</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/slack/">slack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snippet/">snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snowplow/">snowplow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/social-interactions/">social-interactions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/soundcloud/">soundcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/spa/">spa</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/splash-page/">splash-page</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/static-site/">static-site</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/still-running/">still-running</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/storage/">storage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/support/">support</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/swift/">swift</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/syntax-highlight/">syntax-highlight</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solution/">tag-management-solution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solutions/">tag-management-solutions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-sequencing/">tag-sequencing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-templates/">tag-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tags/">tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tasks/">tasks</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/technique/">technique</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/test/">test</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/testing/">testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timer/">timer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timings/">timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tips/">tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tools/">tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker/">tracker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker-object/">tracker-object</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/training/">training</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger/">trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger-groups/">trigger-groups</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/triggers/">triggers</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/troubleshoot/">troubleshoot</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/undefined/">undefined</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/universal-analytics/">universal-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-id/">user-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-interface/">user-interface</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-permissions/">user-permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-timings/">user-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/v2/">v2</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable/">variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable-templates/">variable-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variables/">variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/videos/">videos</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/visibility/">visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/wcag/">wcag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/weather/">weather</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-development/">web-development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/webkit/">webkit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/website-redesign/">website-redesign</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workflow/">workflow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workspaces/">workspaces</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/youtube/">youtube</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/zones/">zones</a></li>
                
                </div>
            </section>
        
        </amp-accordion>
    </ul>
</amp-sidebar>

<div class="site-wrapper">



    <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">


    <a class="menu-button" on="tap:sidebar.toggle" role="button"><i class="fa fa-bars" aria-hidden="true"></i><span class="menu-button-label">Menu</span></a>


  </nav>
</header>



<main class="content" role="main">

  <article class="post type-post">

    <header class="post-header">
        <h1 class="post-title">Google Analytics 4: Ecommerce Guide for Google Tag Manager</h1>
        <small>Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.</small>

        <section class="post-meta">
            


    




    <amp-img class="author-thumb" src="https://www.simoahava.com/images/simo.png" layout="fixed" width="24" height="24" alt="Author image"></amp-img>

Simo Ahava

in
    
        <a href="https://www.simoahava.com/amp/categories/analytics">Analytics</a>
    


on
    
        <a href="https://www.simoahava.com/amp/tags/google-tag-manager">#google tag manager</a>
    
        , <a href="https://www.simoahava.com/amp/tags/app&#43;web">#app&#43;web</a>
    
        , <a href="https://www.simoahava.com/amp/tags/google-analytics-4">#google analytics 4</a>
    
        , <a href="https://www.simoahava.com/amp/tags/ecommerce">#ecommerce</a>
    


<time class="post-date" datetime="2020-10-22T07:00:00&#43;03:00">
    22 October 2020
</time>



        </section>
    </header>

    <section class="post-content">
      
        
        
          <p>This is an <strong>implementation guide</strong> for <a href="https://developers.google.com/analytics/devguides/collection/app-web/tag-guide">Google Analytics 4</a>. The guide is aimed at <a href="https://tagmanager.google.com/">Google Tag Manager</a> users and has been designed to complement the <a href="https://developers.google.com/tag-manager/ecommerce-appweb">official documentation</a>.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/app-web-ecommerce.jpg" title="Google Analytics 4 ecommerce">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/app-web-ecommerce.jpg" layout="responsive" alt="Google Analytics 4 ecommerce" height="922" width="1796"></amp-img>
  
    </a>
  

<p>A thing to keep in mind is that Google Analytics 4 (GA4) is <strong>still very new</strong>. The Google Tag Manager integration is still in its infancy, and implementation places a lot of responsibility on accurate tagging and proper <code>dataLayer</code> instrumentation.</p>
<p>In this guide, I&rsquo;ll explain the new data model from an implementation perspective, and walk you through the nuts and bolts on how to get the different parts of GA4&rsquo;s Ecommerce machine to work in unison.</p>
<!-- raw HTML omitted -->
<p>Make sure you follow the official documentation as well:</p>
<ul>
<li><a href="https://developers.google.com/analytics/devguides/collection/app-web/ecommerce">Google Analytics 4 data schema</a></li>
<li><a href="https://developers.google.com/tag-manager/ecommerce-appweb">Google Analytics 4 instructions for Google Tag Manager implementation</a></li>
</ul>


    <a href="https://www.simoahava.com/amp/images/2020/10/ecom-report.jpg" title="Ecommerce report - App &#43; Web">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/ecom-report.jpg" layout="responsive" alt="Ecommerce report - App &#43; Web" height="368" width="2332"></amp-img>
  
    </a>
  

<p>For help with analysis and what to do once the data hits the reports, make sure to follow <a href="https://www.kristaseiden.com/">Krista Seiden&rsquo;s blog</a>, where she&rsquo;s already added a <a href="https://www.kristaseiden.com/new-ecommerce-setup-and-reporting-in-google-analytics-appweb/">walkthrough of the Ecommerce reports in Google Analytics 4</a>.</p>
<p>Other great resources include <a href="https://www.charlesfarina.com/">Charles Farina&rsquo;s blog</a> and <a href="https://ken-williams.com/">Ken William&rsquo;s Google Analytics 4 resource</a>.</p>

        
        <article class="post type-simmer">
    <header class="post-header">
        <h2 class="post-title"><a href="https://www.simoahava.com/amp/newsletter/">The Simmer Newsletter</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
	Follow <a href="https://www.teamsimmer.com/newsletter/">this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href="https://www.teamsimmer.com/">Simmer online course platform</a>.
      </p>
      </section>
</article>

        
          <h2 id="universal-analytics-vs-google-analytics-4">Universal Analytics vs. Google Analytics 4</h2>
<p>It&rsquo;s only fair to start with a comparison between Universal Analytics&rsquo; <a href="https://www.simoahava.com/amp/analytics/enhanced-ecommerce-guide-for-google-tag-manager/">Enhanced Ecommerce</a> data model and the one put forth by GA4. They&rsquo;re similar in many places, but also have some key differences that will be covered here.</p>
<h3 id="available-actions">Available actions</h3>
<p>Let&rsquo;s begin with the types of <strong>events</strong> you can collect. They represent the discrete <strong>funnel steps</strong> that the data model uses to reflect the funnels in your website.</p>
<p>The <strong>GA4 action</strong> in the table below represents the <strong>Event name</strong> you need to configure in your site&rsquo;s code or Google Tag Manager tags when building the respective Ecommerce hit to GA4.</p>
<p>The <strong>Corresponding Enhanced Ecommerce action</strong> column refers to what the analogy in Enhanced Ecommerce would be. It&rsquo;s not just an analogy, though, as there&rsquo;s a <a href="#migrating-from-enhanced-ecommerce">migration path</a> available when upgrading from Google Analytics Enhanced Ecommerce to GA4 Ecommerce.</p>
<table>
<thead>
<tr>
<th>GA4 action</th>
<th>Corresponding Enhanced Ecommerce action</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>view_promotion</code></td>
<td><code>promoView</code></td>
<td>View of promotions.</td>
</tr>
<tr>
<td><code>select_promotion</code></td>
<td><code>promoClick</code></td>
<td>Click on a promotion.</td>
</tr>
<tr>
<td><code>view_item_list</code></td>
<td><code>impressions</code></td>
<td>View of item impressions in a list.</td>
</tr>
<tr>
<td><code>select_item</code></td>
<td><code>click</code></td>
<td>Click on an item in a list.</td>
</tr>
<tr>
<td><code>view_item</code></td>
<td><code>detail</code></td>
<td>View item details.</td>
</tr>
<tr>
<td><code>add_to_cart</code></td>
<td><code>add</code></td>
<td>Add item(s) to cart.</td>
</tr>
<tr>
<td><code>add_to_wishlist</code></td>
<td>N/A</td>
<td>Add item(s) to a wishlist.</td>
</tr>
<tr>
<td><code>remove_from_cart</code></td>
<td><code>remove</code></td>
<td>Remove item(s) from the cart.</td>
</tr>
<tr>
<td><code>view_cart</code></td>
<td>N/A</td>
<td>View the contents of the shopping cart.</td>
</tr>
<tr>
<td><code>begin_checkout</code></td>
<td><code>checkout</code>*</td>
<td>Initiate the checkout process.</td>
</tr>
<tr>
<td><code>add_shipping_info</code></td>
<td><code>checkout_option</code>*</td>
<td>Add shipping info during the checkout flow.</td>
</tr>
<tr>
<td><code>add_payment_info</code></td>
<td><code>checkout_option</code>*</td>
<td>Add payment info during the checkout flow.</td>
</tr>
<tr>
<td><code>purchase</code></td>
<td><code>purchase</code></td>
<td>Purchase items that were checked out.</td>
</tr>
<tr>
<td><code>refund</code></td>
<td><code>refund</code></td>
<td>Refund one or more items.</td>
</tr>
</tbody>
</table>
<p><code>*</code> The <strong>checkout funnel</strong> is collected a bit differently with Google Analytics 4. There are no <em>steps</em> anymore - rather, GA4 offers you the (presumably) most popular checkout steps of adding shipping and payment info to the purchase.</p>
<p>The data model includes some welcome additions that were missing from Universal Analytics, namely <code>add_to_wishlist</code> and <code>view_cart</code>.</p>
<h3 id="product-data">Product data</h3>
<p>The data model for <strong>products</strong> has changed somewhat as well. The concept of a <strong>product list</strong> has been widened to include a list identifier, and multi-level <strong>product categories</strong> have been expanded to their individual parameters.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item_id</code></td>
<td><code>id</code></td>
<td>ID / SKU of the product.</td>
</tr>
<tr>
<td><code>item_name</code></td>
<td><code>name</code></td>
<td>Name of the product.</td>
</tr>
<tr>
<td><code>item_list_name</code></td>
<td><code>list</code></td>
<td>Product list name.</td>
</tr>
<tr>
<td><code>item_list_id</code></td>
<td>N/A</td>
<td>Product list identifier.</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>position</code></td>
<td>Product position in the list.</td>
</tr>
<tr>
<td><code>item_brand</code></td>
<td><code>brand</code></td>
<td>Product brand.</td>
</tr>
<tr>
<td><code>item_category</code></td>
<td><code>category</code></td>
<td>Product category top-level.</td>
</tr>
<tr>
<td><code>item_category2</code></td>
<td><code>category</code></td>
<td>Product category 2nd level (or alternative).</td>
</tr>
<tr>
<td><code>item_category3</code></td>
<td><code>category</code></td>
<td>Product category 3rd level (or alternative).</td>
</tr>
<tr>
<td><code>item_category4</code></td>
<td><code>category</code></td>
<td>Product category 4th level (or alternative).</td>
</tr>
<tr>
<td><code>item_category5</code></td>
<td><code>category</code></td>
<td>Product category 5th level (or alternative).</td>
</tr>
<tr>
<td><code>item_variant</code></td>
<td><code>variant</code></td>
<td>Item variant name or description.</td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td>N/A</td>
<td>The store affiliation for this event.</td>
</tr>
<tr>
<td><code>discount</code></td>
<td>N/A</td>
<td>Any discount associated with this product.</td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>coupon</code></td>
<td>Coupon associated with this product.</td>
</tr>
<tr>
<td><code>price</code></td>
<td><code>price</code></td>
<td>Price of this product.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>N/A</td>
<td>Currency of the price that is collected.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td><code>quantity</code></td>
<td>Quantity of the item. <strong>Must be an integer</strong>.</td>
</tr>
</tbody>
</table>
<p>As with Enhanced Ecommerce, <strong>either</strong> the <code>item_id</code> <strong>or</strong> <code>item_name</code> is always required when products are dealt with. The other parameters might have varying levels of importance, but those two are the only ones that are required.</p>
<p>Some parameters such as <code>affiliation</code> and <code>currency</code> are brought from the <strong>action-level</strong> in Enhanced Ecommerce to <strong>product-level</strong> in Google Analytics 4. It&rsquo;s an interesting choice, as it might not reflect reality to specify these on a product-by-product basis, but it&rsquo;s never a bad thing to have as many parameters as possible available.</p>
<h3 id="promotion-data">Promotion data</h3>
<p>With GA4, it&rsquo;s still possible to collect information about <strong>promotions</strong>. As with Enhanced Ecommerce, they&rsquo;re a bit of an odd duck when it comes to the data model, as they describe <strong>banners</strong> and <strong>other promotions</strong> that might not be actually related to any specific products.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>promotion_id</code></td>
<td><code>id</code></td>
<td>ID of the promotion.</td>
</tr>
<tr>
<td><code>promotion_name</code></td>
<td><code>name</code></td>
<td>Name of the promotion.</td>
</tr>
<tr>
<td><code>creative_name</code></td>
<td><code>creative</code></td>
<td>Name of the creative associated with the promotion.</td>
</tr>
<tr>
<td><code>creative_slot</code></td>
<td><code>position</code></td>
<td>Name of the slot where the creative was shown.</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>N/A</td>
<td>Where the promotion was <em>located</em> on the page when it was shown.</td>
</tr>
</tbody>
</table>
<p>As with Enhanced Ecommerce, <strong>either</strong> the <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code> is always required when promotions are sent.</p>
<h3 id="action-data">Action data</h3>
<p>The importance of different action parameters varies greatly by whatever action is being measured. Broadly speaking, <strong>action data</strong> refers to parameters the describe the action itself rather than the products within.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>transaction_id</code></td>
<td><code>id</code></td>
<td>Unique ID for the transaction. <strong>Required</strong> for <code>purchase</code> and <code>refund</code> events.</td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td><code>affiliation</code></td>
<td>The store or affiliation where the purchase occurred.</td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>revenue</code></td>
<td>The value associated with the event.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td><code>currencyCode</code></td>
<td>Local currency of the collected price. <strong>Required</strong> for <code>purchase</code> events.</td>
</tr>
<tr>
<td><code>tax</code></td>
<td><code>tax</code></td>
<td>How much tax is included in the total revenue of the purchase.</td>
</tr>
<tr>
<td><code>shipping</code></td>
<td><code>shipping</code></td>
<td>Shipping costs included in the total revenue of the purchase.</td>
</tr>
<tr>
<td><code>items</code></td>
<td><code>products</code>/<code>impressions</code>/<code>promotions</code></td>
<td>Products associated with the event.</td>
</tr>
<tr>
<td><code>shipping_tier</code></td>
<td><code>option</code></td>
<td>The shipping tier used with <code>add_shipping_info</code>.</td>
</tr>
<tr>
<td><code>payment_type</code></td>
<td><code>option</code></td>
<td>The payment method sent with <code>add_payment_info</code>.</td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>coupon</code></td>
<td>Coupon associated with the event.</td>
</tr>
<tr>
<td><code>promotion_id</code></td>
<td>N/A</td>
<td>ID of a promotion associated with the event.</td>
</tr>
<tr>
<td><code>promotion_name</code></td>
<td>N/A</td>
<td>Name of a promotion associated with the event.</td>
</tr>
<tr>
<td><code>creative_name</code></td>
<td>N/A</td>
<td>Name of a promotion creative associated with the event.</td>
</tr>
<tr>
<td><code>creative_slot</code></td>
<td>N/A</td>
<td>Name of the creative slot associated with the event.</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>N/A</td>
<td>ID of the creative location on the page.</td>
</tr>
<tr>
<td><code>item_list_name</code></td>
<td>N/A</td>
<td>Name of the list associated with the event.</td>
</tr>
<tr>
<td><code>item_list_id</code></td>
<td>N/A</td>
<td>ID of the list associated with the event.</td>
</tr>
</tbody>
</table>
<h3 id="parity-issues">Parity issues</h3>
<p>It looks like there are certain aspects of Enhanced Ecommerce that have not been transported to GA4 yet.</p>
<p>These are things that I hope (and expect) to see in the product before long, at which point I will naturally update this article accordingly.</p>
<h4 id="product-list-attribution">Product List Attribution</h4>
<p><strong>Product list attribution</strong> is a <a href="https://www.simoahava.com/amp/analytics/attribution-enhanced-ecommerce-reports/">staple of Enhanced Ecommerce</a>. It&rsquo;s extremely useful, as it lets you build the <code>dataLayer</code> so that product list information <strong>does not</strong> need to be persisted from action to action.</p>
<p>There&rsquo;s no evidence that a similar attribution setup works with GA4 right now. Granted, attribution is part of a data model that might simply not be exposed in GA4 Ecommerce reports yet, so this is something that is likely to be fixed in the near future. It would be odd to have <em>product lists</em> as a data type without them actually having any functionality.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/product-list-attribution.jpg" title="Product list attribution">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/product-list-attribution.jpg" layout="responsive" alt="Product list attribution" height="484" width="2344"></amp-img>
  
    </a>
  

<p>Note that the GA4 data model allows you to send things like <code>item_list_name</code> and <code>promotion_id</code> in <strong>any</strong> Ecommerce object to GA4. You can add them into an <code>items</code> array to indicate that specific items are in this current action due to an interaction with a list or promotion earlier in the session. Or you can add them as regular parameters to the event tag itself, in case the current Ecommerce action took place in a specific item list or within some promotion context.</p>
<h4 id="product-scoped-custom-dimensions-and-metrics">Product-scoped Custom Dimensions and Metrics</h4>
<p>Universal Analytics lets us add <strong>additional metadata</strong> to each product using <a href="https://www.simoahava.com/amp/gtm-tips/product-scoped-custom-dimensions-and-metrics/">product-scoped custom dimensions and metrics</a>. This is a <strong>vital</strong> part of dimension widening that any modern online store desperately needs.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/custom-item-parameters.jpg" title="Custom item parameters, where k0 is the parameter name prefix, and v0 is the value prefix.">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/custom-item-parameters.jpg" layout="responsive" alt="Custom item parameters, where k0 is the parameter name prefix, and v0 is the value prefix." height="136" width="1236"></amp-img>
  
    </a>
  

<p>In GA4, you can add any parameters you wish into the <code>items</code> array, and they will be transported to GA4, but even if you <a href="https://support.google.com/analytics/answer/10075209?hl=en&amp;ref_topic=9756175">register these as custom definitions</a> it doesn&rsquo;t seem like they&rsquo;re available in the Ecommerce reports themselves.</p>
<h4 id="checkout-measurement">Checkout measurement</h4>
<p>As mentioned <a href="#available-actions">above</a>, checkout tracking has certainly changed between Enhanced Ecommerce and GA4.</p>
<p>Where Enhanced Ecommerce introduces a combination of <strong>funnel steps</strong> (e.g. view cart, shipping, payment) and <strong>checkout options</strong> (e.g. shipping method, payment method), GA4 only has the <code>begin_checkout</code> event for establishing entrance into the checkout flow.</p>
<p>There are no additional <em>steps</em>. Rather, you can use <strong>actions</strong> such as <code>view_cart</code>, <code>add_shipping_info</code>, and <code>add_payment_info</code> to flesh out the funnel.</p>
<p>It would be cool to be able to specify a more complete funnel in whatever way I want, and it would also be amazing if we could have multiple different checkout funnels in the data schema.</p>
<p>But on the other hand, I don&rsquo;t think this is a very big omission currently. I wouldn&rsquo;t be too surprised if this <em>isn&rsquo;t</em> expanded to have full parity with Enhanced Ecommerce.</p>

        
          <h2 id="implementation-with-google-tag-manager">Implementation with Google Tag Manager</h2>
<p>When implementing GA4 Ecommerce using Google Tag Manager, the <em>beta</em>-ness of the feature really strikes you hard. The only available event tag type is a generic chassis used for sending any type of event. There&rsquo;s no built-in Ecommerce integration, as you&rsquo;ll need to populate the parameters manually.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/tag-example.jpg" title="Tag example">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/tag-example.jpg" layout="responsive" alt="Tag example" height="542" width="1774"></amp-img>
  
    </a>
  

<p>It would be <em>so</em> much simpler to just have a single tag for Ecommerce events, which automatically collects the action parameters and items from the <code>dataLayer</code>, depending on which event name is included in the <code>dataLayer</code> object.</p>
<p>I&rsquo;m sure we&rsquo;ll see something like this before the tags are out of beta, though.</p>
<p>An additional hiccup is the <a href="https://www.simoahava.com/amp/analytics/enhanced-ecommerce-guide-for-google-tag-manager/#send-the-data-to-google-analytics-using-a-custom-javascript-variable">Custom JavaScript variable</a> (or custom template) option, which we&rsquo;ve been spoiled with when using Enhanced Ecommerce.</p>
<p>Even though you can use a Custom JavaScript variable (or a <a href="https://www.simoahava.com/amp/analytics/custom-templates-guide-for-google-tag-manager/">custom template</a>) to map the <code>items</code> array however you wish, you&rsquo;re still forced to add all the other parameters as individual fields into the tag.</p>
<p>I hope we get an option similar to Enhanced Ecommerce, where the <strong>entire</strong> event payload could be fetched from a variable. That way we could have a really dynamic setup and minimize the number of tags we&rsquo;re using. Not just for Ecommerce but for <strong>all</strong> GA4 data collection!</p>
<h3 id="migrating-from-enhanced-ecommerce">Migrating from Enhanced Ecommerce</h3>
<p>Before you start rewriting your <code>dataLayer</code> objects, do note that Google Analytics 4 Ecommerce <strong>does support the Enhanced Ecommerce data model</strong> - at least to some extent.</p>
<p>The main path of migration is that you <strong>do not have to provide an <code>items</code> object</strong> in GA4 syntax. Instead, you can set the value of the <code>items</code> parameter in the tag to an <code>impressions</code> or <code>promotions</code> or <code>products</code> variable in your Enhanced Ecommerce object. GA4 will be able to map the parameter names in the Enhanced Ecommerce <code>products</code> object to their corresponding parameters in the Google Analytics 4 schema.</p>
<p>If you read through the comparison chapters above, you&rsquo;ll remember that there are some distinct differences between these data models. For example, there is no <code>item_list_id</code> analogy in Enhanced Ecommerce, and the product category is split into five different levels rather than the slash-separated single parameter in Enhanced Ecommerce.</p>
<blockquote>
<p><strong>Note!</strong> You do not <strong>have</strong> to follow the migration path. Considering all the new things that GA4 data model enables, it might make sense to upgrade from Enhanced Ecommerce to GA4 and not resort to using the &ldquo;old&rdquo; data schema in your setup.</p>
</blockquote>
<p>I&rsquo;ve built a <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> that you can also use to map an Enhanced Ecommerce <code>products</code> (or <code>impressions</code> or <code>promotions</code>) object to its GA4 counterpart. It has some additional bells and whistles, such as automatic parsing of a multi-level product category into the five separate <code>item_category</code> parameters, and a table that lets you map Enhanced Ecommerce&rsquo;s product-scoped custom dimensions to custom item parameters in the GA4 <code>items</code> objects.</p>
<h3 id="event-names">Event names</h3>
<p>One of the key features of Google Analytics 4 is how it utilizes the <strong>event name</strong> to carry quite a bit of semantic weight. To see the list of event names associated with Ecommerce collection, see the chapter <a href="#available-actions">Available actions</a> above.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/checkout-event.jpg" title="Checkout event">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/checkout-event.jpg" layout="responsive" alt="Checkout event" height="720" width="1780"></amp-img>
  
    </a>
  

<p>When building the tags to send the Ecommerce data to GA4, you need to make sure that the <strong>Event name</strong> field is always set to the correct value. A typo or a mismatch between the event name and the parameter map will lead to data quality issues that are impossible to fix retroactively.</p>
<h3 id="setting-the-fields">Setting the fields</h3>
<p>To create an Ecommerce tag in Google Tag Manager, you need to create a new <strong>Google Analytics 4 Event</strong> tag.</p>
<p>The first thing you need to establish is what its <strong>Configuration tag</strong> is. For more information about this see <a href="https://support.google.com/tagmanager/answer/9442095?hl=en">this article</a>.</p>
<p>Next, you need to set the <strong>Event name</strong>. Whether you use a variable for this field or hard-code it, you need to be mindful of what the reserved event names for GA4 are. As you go through the <a href="#action-reference">chapters below</a>, each sub-chapter devoted to an Ecommerce action will include details on what the event name should be for that particular action.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/purchase-hit-example.jpg" title="Purchase hit example">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/purchase-hit-example.jpg" layout="responsive" alt="Purchase hit example" height="1032" width="1774"></amp-img>
  
    </a>
  

<p>Individual parameters are set by adding them to the <strong>Event Parameters</strong> table. For the most part, you&rsquo;ll only need to add the <code>items</code> parameter, but some actions (such as <a href="#purchase"><strong>purchase</strong></a>) require additional fields to be set.</p>
<blockquote>
<p>If you use a Data Layer variable to pull in an <code>items</code> array, for example, do be mindful of <strong>recursive merge</strong>. You might want to engineer the setup so that you always use <a href="https://www.simoahava.com/amp/gtm-tips/data-layer-variable-versions-explained/">Version 1</a> of the Data Layer variable to avoid values &ldquo;leaking&rdquo; from one object to another.</p>
</blockquote>
<h3 id="trigger">Trigger</h3>
<p>As before, make sure you use a <strong>trigger</strong> on the tag that fires when the relevant Ecommerce object is pushed into <code>dataLayer</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/custom-event-trigger.jpg" title="custom event trigger">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/custom-event-trigger.jpg" layout="responsive" alt="custom event trigger" height="766" width="1844"></amp-img>
  
    </a>
  

<p>This means that you&rsquo;ll want to engineer the <code>dataLayer</code> so that each Ecommerce event is its own, distinct push, and each <a href="https://www.simoahava.com/amp/gtm-tips/add-the-event-key-to-datalayer-pushes/">object has the <code>event</code> key</a>. This way you can create a *<em>Custom Event trigger</em> for this <code>event</code> value in order to fire the tag at the exact right moment.</p>
<h3 id="tips-for-server-side-tagging">Tips for server-side tagging</h3>
<p>One possible path of migration from Enhanced Ecommerce to GA4 is to handle the logic in your <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging setup</a>.</p>
<p>Obviously, it&rsquo;s not a suitable option for everyone (as there are costs involved), but it would provide a pretty sleek path to having the single Universal Analytics stream sent to the server-side container be fanned out to not just the Universal Analytics endpoint but also to GA4.</p>
<p>When you send a Universal Analytics Enhanced Ecommerce event to a server container, the built-in Universal Analytics <strong>client</strong> chops it up and outputs an <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/#event-model">event data object</a> like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/event-data-server-side.jpg" title="Event data server-side">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/event-data-server-side.jpg" layout="responsive" alt="Event data server-side" height="2050" width="1726"></amp-img>
  
    </a>
  

<p>As you can see, the model chops up the Enhanced Ecommerce payload in the Measurement Protocol request and outputs the values into standard event parameters. Notably, product-scoped custom dimensions <strong>are not</strong> mapped to the <code>items</code> array.</p>
<p>You could thus fire a GA4 tag in the server container with the Universal Analytics client, and it will send a well-formed event to GA4. You&rsquo;d just need to edit the <code>event_name</code> first, as <code>page_view</code> would not be the correct name for a purchase. You&rsquo;ll also need to add the correct <strong>Measurement ID</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/ga4-purchase-tag.jpg" title="GA4 Purchase Tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/ga4-purchase-tag.jpg" layout="responsive" alt="GA4 Purchase Tag" height="1088" width="1824"></amp-img>
  
    </a>
  

<p>The challenge is, again, creating a custom mapping of the <code>items</code> array, as the Server container does not currently let you run JavaScript variables.</p>
<p>You <em>could</em> build a <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/#custom-templates">custom tag template</a> in server-side tagging, but it might be better to just wait for Google to improve the migration path.</p>

        
          <h2 id="action-reference">Action reference</h2>
<p>The following chapters outline how to instrument the <code>dataLayer</code> and the Google Tag Manager tags to measure Ecommerce actions in GA4.</p>
<p>Included with each action chapter is an example of how a <strong>migration</strong> setup from Universal Analytics to GA4 might work.</p>
<blockquote>
<p>I want to reiterate that instead of using the Universal Analytics <code>dataLayer</code>, you should either engineer or <em>plan</em> to engineer the <code>dataLayer</code> so it&rsquo;s compatible with the new actions and item parameters that GA4 offers.</p>
</blockquote>
<h3 id="view_promotion">view_promotion</h3>
<p>A <code>view_promotion</code> event is sent when the user sees one or more <strong>promotion</strong> items on the page. Promotions are a different data model from the rest of GA4 Ecommerce, as they do not necessarily involve products at all, but rather banners, campaigns, and such.</p>
<h4 id="data-layer-composition">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_promotion</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_promotion_viewsimpressions">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;view_promotion&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">promotion_id</span><span class="o">:</span> <span class="s1">&#39;sc2021&#39;</span><span class="p">,</span>
      <span class="nx">promotion_name</span><span class="o">:</span> <span class="s1">&#39;summer_campaign_2021&#39;</span><span class="p">,</span>
      <span class="nx">creative_name</span><span class="o">:</span> <span class="s1">&#39;family_in_bathing_suits_1&#39;</span><span class="p">,</span>
      <span class="nx">creative_slot</span><span class="o">:</span> <span class="s1">&#39;featured_items&#39;</span><span class="p">,</span>
      <span class="nx">location_id</span><span class="o">:</span> <span class="s1">&#39;hero_banner&#39;</span>
    <span class="p">},{</span>
      <span class="nx">promotion_id</span><span class="o">:</span> <span class="s1">&#39;wc2020&#39;</span><span class="p">,</span>
      <span class="nx">promotion_name</span><span class="o">:</span> <span class="s1">&#39;winter_campaign_2020&#39;</span><span class="p">,</span>
      <span class="nx">creative_name</span><span class="o">:</span> <span class="s1">&#39;family_in_winter_clothes_1&#39;</span><span class="p">,</span>
      <span class="nx">creative_slot</span><span class="o">:</span> <span class="s1">&#39;featured_items_2&#39;</span><span class="p">,</span>
      <span class="nx">location_id</span><span class="o">:</span> <span class="s1">&#39;hero_banner&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code>.</p>
<blockquote>
<p>The example in the documentation shows also <code>item</code> parameters set in the promotion view object. This is something you might consider adding if the promotion is clearly related to an item or a specific set of items. The current suite of Ecommerce reports doesn&rsquo;t seem to have any options for viewing items in a promotion, but the export to BigQuery would include this information.</p>
</blockquote>
<h4 id="migration-from-enhanced-ecommerce">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>promotions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.promoView.promotions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_promotion</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>promotions</code> object automatically to the format required by <code>view_promotion</code>.</p>
</blockquote>
<h4 id="tag-configuration">Tag configuration</h4>
<p>The tag for <code>view_promotion</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/view-promotion-tag.jpg" title="view_promotion tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/view-promotion-tag.jpg" layout="responsive" alt="view_promotion tag" height="1208" width="1802"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>view_promotion</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition">here</a>.</li>
<li><code>ecommerce.promoView.promotions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition">above</a>, it would be <code>view_promotion</code>).</p>
<h3 id="select_promotion">select_promotion</h3>
<p>The <code>select_promotion</code> event is sent when the user <strong>clicks</strong> or <strong>selects</strong> one of the promotions they viewed.</p>
<h4 id="data-layer-composition-1">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>select_promotion</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_promotion_clicks">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;select_promotion&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">promotion_id</span><span class="o">:</span> <span class="s1">&#39;sc2021&#39;</span><span class="p">,</span>
      <span class="nx">promotion_name</span><span class="o">:</span> <span class="s1">&#39;summer_campaign_2021&#39;</span><span class="p">,</span>
      <span class="nx">creative_name</span><span class="o">:</span> <span class="s1">&#39;family_in_bathing_suits_1&#39;</span><span class="p">,</span>
      <span class="nx">creative_slot</span><span class="o">:</span> <span class="s1">&#39;featured_items&#39;</span><span class="p">,</span>
      <span class="nx">location_id</span><span class="o">:</span> <span class="s1">&#39;hero_banner&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code>.</p>
<h4 id="migration-from-enhanced-ecommerce-1">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>promotions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.promoClick.promotions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>select_promotion</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>promotions</code> object automatically to the format required by <code>select_promotion</code>.</p>
</blockquote>
<h4 id="tag-configuration-1">Tag configuration</h4>
<p>The tag for <code>select_promotion</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/select-promotion-tag.jpg" title="Select promotion tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/select-promotion-tag.jpg" layout="responsive" alt="Select promotion tag" height="1206" width="1806"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>select_promotion</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-1">here</a>.</li>
<li><code>ecommerce.promoClick.promotions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-1">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-1">above</a>, it would be <code>select_promotion</code>).</p>
<h3 id="view_item_list">view_item_list</h3>
<p>The <code>view_item_list</code> event is sent when the user sees a list of items in a dedicated product list. A product list could be something like search results, featured items, upsell items, and so forth.</p>
<h4 id="data-layer-composition-2">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_item_list</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_productitem_list_viewsimpressions">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;view_item_list&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">item_list_name</span><span class="o">:</span> <span class="s1">&#39;Featured items&#39;</span><span class="p">,</span>
      <span class="nx">item_list_id</span><span class="o">:</span> <span class="s1">&#39;FI1&#39;</span><span class="p">,</span>
      <span class="nx">index</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Swedish regular parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;sp2323&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;92.00&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Black&#39;</span><span class="p">,</span>
      <span class="nx">item_list_name</span><span class="o">:</span> <span class="s1">&#39;Featured items&#39;</span><span class="p">,</span>
      <span class="nx">item_list_id</span><span class="o">:</span> <span class="s1">&#39;FI1&#39;</span><span class="p">,</span>
      <span class="nx">index</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Note that you should always try to populate the <code>item_list_name</code> field so that you know which list was viewed.</p>
<h4 id="migration-from-enhanced-ecommerce-2">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>impressions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.impressions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_item_list</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>impressions</code> object automatically to the format required by <code>view_item_list</code>.</p>
</blockquote>
<p><strong>Note!</strong> If you&rsquo;re bundling <code>impressions</code> with some other Enhanced Ecommerce action (as you might commonly do), the custom variable template will not really work, as it always looks for the <code>products</code> array first.</p>
<h4 id="tag-configuration-2">Tag configuration</h4>
<p>The tag for <code>view_item_list</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/view-item-list-tag.jpg" title="View item list">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/view-item-list-tag.jpg" layout="responsive" alt="View item list" height="1310" width="1796"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>view_item_list</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-2">here</a>.</li>
<li><code>ecommerce.impressions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-2">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-2">above</a>, it would be <code>view_item_list</code>).</p>
<h3 id="select_item">select_item</h3>
<p>The <code>select_item</code> event is sent when the user actually <strong>clicks</strong> or <strong>selects</strong> an item after viewing the item&rsquo;s impression(s) in a list.</p>
<h4 id="data-layer-composition-3">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>select_item</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_productitem_list_clicks">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;select_item&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">item_list_name</span><span class="o">:</span> <span class="s1">&#39;Featured items&#39;</span><span class="p">,</span>
      <span class="nx">item_list_id</span><span class="o">:</span> <span class="s1">&#39;FI1&#39;</span><span class="p">,</span>
      <span class="nx">index</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Note that you should always try to populate the <code>item_list_name</code> field so that you know which list was the target of the click.</p>
<h4 id="migration-from-enhanced-ecommerce-3">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.click.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>select_item</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>select_item</code>.</p>
</blockquote>
<h4 id="tag-configuration-3">Tag configuration</h4>
<p>The tag for <code>select_item</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/select-item-tag.jpg" title="Select itemt ag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/select-item-tag.jpg" layout="responsive" alt="Select itemt ag" height="1226" width="1800"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>select_item</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-3">here</a>.</li>
<li><code>ecommerce.click.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-3">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-3">above</a>, it would be <code>select_item</code>).</p>
<h3 id="view_item">view_item</h3>
<p>The <code>view_item</code> event is sent when the user views the <strong>details</strong> of any given product.</p>
<h4 id="data-layer-composition-4">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_item</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_viewsimpressions_of_productitem_details">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;view_item&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-4">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.detail.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_item</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>view_item</code>.</p>
</blockquote>
<h4 id="tag-configuration-4">Tag configuration</h4>
<p>The tag for <code>view_item</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/view-item-tag.jpg" title="view_item tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/view-item-tag.jpg" layout="responsive" alt="view_item tag" height="1216" width="1800"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>view_item</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-4">here</a>.</li>
<li><code>ecommerce.detail.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-4">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-4">above</a>, it would be <code>view_item</code>).</p>
<h3 id="add_to_cart">add_to_cart</h3>
<p>The <code>add_to_cart</code> event is sent when the user <strong>adds</strong> a product to the cart, either by adding a new product to the cart or by increasing the quantity of an existing item in the cart.</p>
<h4 id="data-layer-composition-5">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_to_cart</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_additions_or_removals_from_a_shopping_cart">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;add_to_cart&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Set <code>quantity</code> to reflect the number of items <em>added</em> to the cart in this action.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-5">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.add.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>add_to_cart</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>add_to_cart</code>.</p>
</blockquote>
<h4 id="tag-configuration-5">Tag configuration</h4>
<p>The tag for <code>add_to_cart</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/add-to-cart-tag.jpg" title="add_to_cart tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/add-to-cart-tag.jpg" layout="responsive" alt="add_to_cart tag" height="1214" width="1798"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>add_to_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-5">here</a>.</li>
<li><code>ecommerce.add.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-5">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-5">above</a>, it would be <code>add_to_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_to_wishlist">add_to_wishlist</h3>
<p>The <code>add_to_wishlist</code> event is sent when the user adds a product to a <strong>wishlist</strong>.</p>
<blockquote>
<p>This does <strong>not</strong> have an analogy in Enhanced Ecommerce. It&rsquo;s a completely new Ecommerce event type.</p>
</blockquote>
<h4 id="data-layer-composition-6">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_to_wishlist</code> event could look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;add_to_wishlist&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="tag-configuration-6">Tag configuration</h4>
<p>The tag for <code>add_to_wishlist</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/add-to-wishlist-tag.jpg" title="Add to wishlist">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/add-to-wishlist-tag.jpg" layout="responsive" alt="Add to wishlist" height="1224" width="1802"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>add_to_wishlist</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be <code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-6">here</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-6">above</a>, it would be <code>add_to_wishlist</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="remove_from_cart">remove_from_cart</h3>
<p>The <code>remove_from_cart</code> event is sent when the user <em>removes</em> something from the cart or <em>decreases the quantity</em> of an item in the cart.</p>
<h4 id="data-layer-composition-7">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>remove_from_cart</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#remove_a_product_from_a_shopping_cart">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;remove_from_cart&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-6">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.remove.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>remove_from_cart</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>remove_from_cart</code>.</p>
</blockquote>
<h4 id="tag-configuration-7">Tag configuration</h4>
<p>The tag for <code>remove_from_cart</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/remove-from-cart-tag.jpg" title="remove_from_cart tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/remove-from-cart-tag.jpg" layout="responsive" alt="remove_from_cart tag" height="1210" width="1798"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>remove_from_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-7">here</a>.</li>
<li><code>ecommerce.remove.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-7">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-7">above</a>, it would be <code>remove_from_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="view_cart">view_cart</h3>
<p>The <code>view_cart</code> event is sent when the user views the cart contents.</p>
<blockquote>
<p>This does <strong>not</strong> have an analogy in Enhanced Ecommerce. It&rsquo;s a completely new Ecommerce event type.</p>
</blockquote>
<h4 id="data-layer-composition-8">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_cart</code> event could look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;view_cart&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Parka stain removal&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;psr1332&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;5.99&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Utility&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Care product&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="tag-configuration-8">Tag configuration</h4>
<p>The tag for <code>view_cart</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/view-cart-tag.jpg" title="view_cart tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/view-cart-tag.jpg" layout="responsive" alt="view_cart tag" height="1208" width="1794"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>view_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be <code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-8">here</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-8">above</a>, it would be <code>view_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="begin_checkout">begin_checkout</h3>
<p>The <code>begin_checkout</code> event is sent when the user starts the <strong>checkout flow</strong>.</p>
<h4 id="data-layer-composition-9">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>begin_checkout</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_a_checkout">official documentation</a>):</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;begin_checkout&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Parka stain removal&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;psr1332&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;5.99&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Utility&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Care product&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-7">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>begin_checkout</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>begin_checkout</code>.</p>
</blockquote>
<h4 id="tag-configuration-9">Tag configuration</h4>
<p>The tag for <code>begin_checkout</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/begin-checkout-tag.jpg" title="begin_checkout tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/begin-checkout-tag.jpg" layout="responsive" alt="begin_checkout tag" height="1222" width="1804"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>begin_checkout</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-9">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-9">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-9">above</a>, it would be <code>begin_checkout</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_shipping_info">add_shipping_info</h3>
<p>The <code>add_shipping_info</code> event is sent when the user has selected a shipping method.</p>
<blockquote>
<p>While Enhanced Ecommerce doesn&rsquo;t have a direct analogy to <code>add_shipping_info</code>, most implementations have shipping method selection encoded in a <code>checkout_option</code> object.</p>
</blockquote>
<h4 id="data-layer-composition-10">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_shipping_info</code> event could look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;add_shipping_info&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">shipping_tier</span><span class="o">:</span> <span class="s1">&#39;FedEx&#39;</span><span class="p">,</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Parka stain removal&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;psr1332&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;5.99&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Utility&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Care product&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameter is just <code>shipping_tier</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-8">Migration from Enhanced Ecommerce</h4>
<p>You can migrate from Enhanced Ecommerce by grabbing the shipping method from the <code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> Data Layer variables, depending on how you&rsquo;ve setup shipping method selection.</p>
<p>You&rsquo;ll need to make sure that the trigger that fires this GA4 tag corresponds with the correct <code>option</code> item pushed into <code>dataLayer</code>, so that you don&rsquo;t inadvertently fire this tag when the payment method was selected, for example.</p>
<p>If you want to send the <code>items</code> array as well (recommended), you can use a Data Layer variable like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<h4 id="tag-configuration-10">Tag configuration</h4>
<p>The tag for <code>add_shipping_info</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/add-shipping-info-tag.jpg" title="add_shipping_info tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/add-shipping-info-tag.jpg" layout="responsive" alt="add_shipping_info tag" height="1256" width="1800"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>add_shipping_info</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-10">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-10">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point the <code>shipping_tier</code> parameter to a Data Layer variable that contains the <code>shipping_tier</code> value. This would be:</p>
<ul>
<li><code>ecommerce.shipping_tier</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-10">here</a>.</li>
<li><code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-10">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-10">above</a>, it would be <code>add_shipping_info</code>). If you&rsquo;re migrating from Enhanced Ecommerce, make sure the trigger fires when the <strong>shipping method</strong> has been selected, and not for any other checkout option you might have.</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_payment_info">add_payment_info</h3>
<p>The <code>add_payment_info</code> event is sent when the user has selected a payment method.</p>
<blockquote>
<p>While Enhanced Ecommerce doesn&rsquo;t have a direct analogy to <code>add_payment_info</code>, most implementations have payment method selection encoded in a <code>checkout_option</code> object.</p>
</blockquote>
<h4 id="data-layer-composition-11">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_payment_info</code> event could look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;add_payment_info&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">payment_type</span><span class="o">:</span> <span class="s1">&#39;COD&#39;</span><span class="p">,</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Parka stain removal&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;psr1332&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;5.99&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Utility&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Care product&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameter is just <code>payment_type</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-9">Migration from Enhanced Ecommerce</h4>
<p>You can migrate from Enhanced Ecommerce by grabbing the payment method from the <code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> Data Layer variables, depending on how you&rsquo;ve setup payment method selection.</p>
<p>You&rsquo;ll need to make sure that the trigger that fires this GA4 tag corresponds with the correct <code>option</code> item pushed into <code>dataLayer</code>, so that you don&rsquo;t inadvertently fire this tag when the shipping method was selected, for example.</p>
<p>If you want to send the <code>items</code> array as well (recommended), you can use a Data Layer variable like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<h4 id="tag-configuration-11">Tag configuration</h4>
<p>The tag for <code>add_payment_info</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/add-payment-info.jpg" title="add_payment_info tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/add-payment-info.jpg" layout="responsive" alt="add_payment_info tag" height="1268" width="1800"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>add_payment_info</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-11">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-11">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point the <code>payment_type</code> parameter to a Data Layer variable that contains the <code>payment_tpye</code> value. This would be:</p>
<ul>
<li><code>ecommerce.payment_type</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-11">here</a>.</li>
<li><code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-11">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-11">above</a>, it would be <code>add_payment_info</code>). If you&rsquo;re migrating from Enhanced Ecommerce, make sure the trigger fires when the <strong>payment method</strong> has been selected, and not for any other checkout option you might have.</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="purchase">purchase</h3>
<p>The <code>purchase</code> event is sent when the user makes a purchase on the site.</p>
<blockquote>
<p>Make sure you configure your website so that the purchase data is <strong>only collected once</strong>. The best way to do this is to invalidate the thank you page once the user has visited it so that they can&rsquo;t revisit it by reloading the page, using the browser history, or hitting the back button after moving to some other page. <strong>Duplicate transactions</strong> are things you need to avoid at all costs.</p>
</blockquote>
<h4 id="data-layer-composition-12">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>purchase</code> event could look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;purchase&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">currency</span><span class="o">:</span> <span class="s1">&#39;EUR&#39;</span><span class="p">,</span>
    <span class="nx">value</span><span class="o">:</span> <span class="mf">109.29</span><span class="p">,</span>
    <span class="nx">tax</span><span class="o">:</span> <span class="mf">7.18</span><span class="p">,</span>
    <span class="nx">shipping</span><span class="o">:</span> <span class="mf">10.00</span><span class="p">,</span>
    <span class="nx">affiliation</span><span class="o">:</span> <span class="s1">&#39;My Parka Store&#39;</span><span class="p">,</span>
    <span class="nx">transaction_id</span><span class="o">:</span> <span class="s1">&#39;p115-20202000&#39;</span><span class="p">,</span>
    <span class="nx">coupon</span><span class="o">:</span> <span class="s1">&#39;free_back_rub&#39;</span><span class="p">,</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span>
    <span class="p">},{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Parka stain removal&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;psr1332&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;5.99&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Utility&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Care product&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
      <span class="nx">item_coupon</span><span class="o">:</span> <span class="s1">&#39;cheap_stain_removal&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <code>transaction_id</code> and <code>currency</code>.</p>
<blockquote>
<p>Make sure <code>quantity</code> is passed as an integer. A floating point value will cause <strong>item revenue</strong> to be incorrectly reported in the Monetization reports!</p>
</blockquote>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-10">Migration from Enhanced Ecommerce</h4>
<p>You can grab all the required parameters from the Enhanced Ecommerce <code>purchase</code> event. You need to create <strong>Data Layer Variables</strong> (Version 2) for each. Here are the <strong>Data Layer Variable Names</strong> you need to configure in the variables:</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Data Layer Variable Name in EEC</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>currency</code></td>
<td><code>ecommerce.currencyCode</code></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>ecommerce.purchase.actionField.revenue</code></td>
</tr>
<tr>
<td><code>tax</code></td>
<td><code>ecommerce.purchase.actionField.tax</code></td>
</tr>
<tr>
<td><code>shipping</code></td>
<td><code>ecommerce.purchase.actionField.shipping</code></td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td><code>ecommerce.purchase.actionField.affiliation</code></td>
</tr>
<tr>
<td><code>transaction_id</code></td>
<td><code>ecommerce.purchase.actionField.id</code></td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>ecommerce.purchase.actionField.coupon</code></td>
</tr>
<tr>
<td><code>items</code></td>
<td><code>ecommerce.purchase.products</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>purchase</code>.</p>
</blockquote>
<h4 id="tag-configuration-12">Tag configuration</h4>
<p>The tag for <code>purchase</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/purchase-tag.jpg" title="purchase tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/purchase-tag.jpg" layout="responsive" alt="purchase tag" height="1556" width="1806"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>purchase</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-12">here</a>.</li>
<li><code>ecommerce.purchase.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-12">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point all the other parameters to their counterparts in the <code>ecommerce</code> array. If you&rsquo;re migrating from Enhanced Ecommerce you&rsquo;d need to set them <a href="#migration-from-enhanced-ecommerce-12">accordingly</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-12">above</a>, it would be <code>purchase</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="refund">refund</h3>
<p>There are two types of <code>refund</code> events you can send: <strong>full refund</strong> (the entire transaction is refunded) and <strong>partial refund</strong> (only some items were refunded).</p>
<h4 id="data-layer-composition-13">Data Layer composition</h4>
<p>For a <strong>full refund</strong>, this is what a sample <code>dataLayer</code> object would look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;refund&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">transaction_id</span><span class="o">:</span> <span class="s1">&#39;p115-20202000&#39;</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameter is <code>transaction_id</code>.</p>
<p>For a <strong>partial refund</strong>, this is what a sample <code>dataLayer</code> object would look like:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
  <span class="nx">event</span><span class="o">:</span> <span class="s1">&#39;refund&#39;</span><span class="p">,</span>
  <span class="nx">ecommerce</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">transaction_id</span><span class="o">:</span> <span class="s1">&#39;p115-20202000&#39;</span><span class="p">,</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[{</span>
      <span class="nx">item_name</span><span class="o">:</span> <span class="s1">&#39;Finnish magical parka&#39;</span><span class="p">,</span>
      <span class="nx">item_id</span><span class="o">:</span> <span class="s1">&#39;mp1122&#39;</span><span class="p">,</span>
      <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;31.10&#39;</span><span class="p">,</span>
      <span class="nx">item_brand</span><span class="o">:</span> <span class="s1">&#39;PARKA4LIFE&#39;</span><span class="p">,</span>
      <span class="nx">item_category</span><span class="o">:</span> <span class="s1">&#39;Apparel&#39;</span><span class="p">,</span>
      <span class="nx">item_category2</span><span class="o">:</span> <span class="s1">&#39;Coats&#39;</span><span class="p">,</span>
      <span class="nx">item_category3</span><span class="o">:</span> <span class="s1">&#39;Parkas&#39;</span><span class="p">,</span>
      <span class="nx">item_category4</span><span class="o">:</span> <span class="s1">&#39;Unisex&#39;</span><span class="p">,</span>
      <span class="nx">item_variant</span><span class="o">:</span> <span class="s1">&#39;Navy blue&#39;</span><span class="p">,</span>
      <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span>
    <span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p><strong>Required</strong> parameters are <code>transaction_id</code>, and for each item that is refunded, <code>item_id</code> and <code>quantity</code> refunded.</p>
<h4 id="migration-from-enhanced-ecommerce-11">Migration from Enhanced Ecommerce</h4>
<p>To migrate from an Enhanced Ecommerce setup, you&rsquo;d need to create a Data Layer variable for the transaction ID and another one for the products that were refunded.</p>
<p>The Data Layer variable for <strong>transaction ID</strong> looks like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.refund.actionField.id</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>The Data Layer variable for the refunded <strong>products</strong> looks like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.refund.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/amp/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>refund</code>.</p>
</blockquote>
<h4 id="tag-configuration-13">Tag configuration</h4>
<p>The tag for <code>refund</code> would look like this:</p>


    <a href="https://www.simoahava.com/amp/images/2020/10/refund-tag.jpg" title="refund tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2020/10/refund-tag.jpg" layout="responsive" alt="refund tag" height="1266" width="1796"></amp-img>
  
    </a>
  

<p>Make sure you set the <strong>Event Name</strong> field to <code>refund</code>.</p>
<p>If you&rsquo;re sending a <strong>full</strong> refund, you only need to configure the <code>transaction_id</code> field. It should point to either <code>ecommerce.transaction_id</code> or, if you&rsquo;re <a href="#migration-from-enhanced-ecommerce-13">migrating from Enhanced Ecommerce</a>, to <code>ecommerce.refund.actionField.id</code>.</p>
<p>If you&rsquo;re sending a <strong>partial</strong> refund, you&rsquo;ll also need to configure the <code>items</code> field to point to either the <code>ecommerce.items</code> variable or the <code>ecommerce.refund.products</code> variable, with the latter used in case you&rsquo;re migrating from Enhanced Ecommerce.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-12">above</a>, it would be <code>refund</code>).</p>

        
          <h2 id="summary">Summary</h2>
<p>We all knew that Google Analytics 4 properties would include Ecommerce capabilities. I think we were all surprised by how <em>beta</em> they still were by the time GA4 was released <em>out of beta</em>.</p>
<p>It doesn&rsquo;t really help that the Google Tag Manager tags are still lagging behind in development. There&rsquo;s a <strong>lot</strong> of manual work involved in building an Ecommerce setup, and while we&rsquo;ve been treated with a migration option from Universal Analytics&rsquo; Enhanced Ecommerce, it doesn&rsquo;t necessarily make sense to use.</p>
<p>The new, <strong>gtag.js</strong>-based format is where all the cool new stuff will be introduced. If you choose complacency over the effort of properly moving to the new setup, you might end up with a suboptimal Ecommerce setup for future iterations of GA4&rsquo;s Ecommerce reports.</p>
<p>Having said that, it makes sense to <strong>implement</strong> GA4 Ecommerce as soon as possible. You don&rsquo;t have to abandon your Universal Analytics setup, but do proceed with either a migration or a completely new <code>dataLayer</code> setup for GA4 as well.</p>
<p>You&rsquo;ll want to start collecting that GA4 data as soon as possible to prepare for the eventual shift from Universal Analytics to Google Analytics 4. At that point, the more historical data you have, the better you&rsquo;ll know how the new paradigm works for your organization.</p>
<p>I know absolute use case parity with Enhanced Ecommerce isn&rsquo;t something GA4 Ecommerce should even pursue, but we&rsquo;re still missing things like <strong>item-scoped custom dimensions</strong> and <strong>easily managed item list and promotion attribution</strong> from the mix.</p>
<p>The Google Tag Manager tags are also missing a few key pieces, such as an option to pull in all Ecommerce data directly from the <code>dataLayer</code> or even from a Custom JavaScript variable (or custom template).</p>
<p>Until we have these things, it&rsquo;s best to treat GA4 Ecommerce as being in <strong>rough beta</strong>, even if that label has officially been dropped.</p>
<p>What are you most looking forward to about the GA4&rsquo;s Ecommerce reports? What do you expect the Google Tag Manager integration to look like?</p>

        
      
    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.simoahava.com/amp/"></a>
    </figure>
    

    
    
    
        
    
    

    <section class="author">
      <h4>Simo Ahava</h4>
      
        <p>Husband | Father | Analytics developer</p>
      
      <div class="author-meta">
        <span class="author-location icon-location">Espoo, Finland</span>
        <span class="author-link icon-link"><a href="https://www.simoahava.com/">https://www.simoahava.com/</a></span>
      </div>
    </section>


    
    <div class="social">

<amp-social-share type="twitter"
  width="60"
  height="44"> </amp-social-share>





<amp-social-share type="linkedin"
                  width="60"
                  height="44"></amp-social-share>


    <amp-social-share type="facebook"
                      width="60"
                      height="44"></amp-social-share>

</div>


    
  </footer>
</article>

</main>
</div>

</body>
</html>

