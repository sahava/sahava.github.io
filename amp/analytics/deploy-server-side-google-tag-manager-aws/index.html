

  
    
  


  

<!doctype html>



<html âš¡ lang="en-us" class="no-js">
    <head>

      <meta charset="utf-8">
        <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script><script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>

<script async src="https://cdn.ampproject.org/v0.js"></script>


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>
  .type-simmer {
      padding: 8px;
      background: rgba(179,138,197,0.2);
      box-shadow: 2px 2px 1px #ccc;
      border-radius: 5px;
  }
    /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{position:relative;z-index:10;min-height:100%;background:#fff;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{height:100%;max-height:100%}body{font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.8rem;line-height:1.75em;color:#3a4145;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;color:#2e2e2e;line-height:1.15em;margin:0 0 .4em;font-family:Open Sans,sans-serif;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;-webkit-transition:color .3s ease;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:3.2em 0;padding:0}blockquote{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:.4em solid #4a4a4a}blockquote p{margin:.8em 0;font-style:italic}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;color:#ccc}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{padding:1px 3px;font-size:.85em;white-space:pre-wrap;border:1px solid #e3edf3;border-radius:2px}code,pre,tt{font-family:Inconsolata,monospace,sans-serif;background:#f7fafb}pre{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 1.75em;border:1px solid #e3edf3;width:100%;padding:10px;font-size:.9em;white-space:pre;overflow:auto;border-radius:3px}pre code,pre tt{font-size:inherit;white-space:pre-wrap;background:transparent;border:none;padding:0}kbd{display:inline-block;margin-bottom:.4em;padding:1px 8px;border:1px solid #ccc;color:#666;text-shadow:#fff 0 1px 0;font-size:.9em;font-weight:700;background:#f4f4f4;border-radius:4px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 1px 0 0 #fff inset;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 1px 0 0 #fff}table{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0;width:100%;max-width:100%;background-color:transparent}table td,table th{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #efefef}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:transparent}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{position:relative;display:table;width:100%;height:100vh;margin-bottom:5rem;text-align:center;background:#222 no-repeat 50%;background-size:cover;overflow:hidden}.main-header.cover{background-image:url("https://www.simoahava.com/images/maisema.jpg")}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{position:relative;padding:35px 40px;margin:0 0 30px}.main-nav a{text-decoration:none;font-family:Open Sans,sans-serif}.scroll-down{display:block;position:absolute;z-index:100;bottom:45px;left:50%;font-size:1.5em;text-align:center;-webkit-animation:bounce 4s 2s infinite;animation:bounce 4s 2s infinite}.scroll-down:hover{color:#fff;-webkit-animation:none;animation:none}.home-template .main-header:after{display:block;content:" ";width:150px;height:130px;border-radius:100%;position:absolute;bottom:0;left:50%;margin-left:-75px;background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%)}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover.main-header:after,.no-cover .scroll-down{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{-webkit-box-sizing:border-box;box-sizing:border-box;height:38px}.menu-button{display:inline-block;float:right;padding:0 15px;border:1px solid #bfc8cd;opacity:1;color:#9eabb3;text-align:center;font-size:12px;text-transform:uppercase;line-height:35px;white-space:nowrap;border-radius:3px;background:rgba(0,0,0,.1);-webkit-transition:all .5s ease;transition:all .5s ease}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{position:absolute;top:0;left:0;right:0;height:70px;border:none;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent)}.no-cover .main-nav.overlay,.no-cover .menu-button{background:none}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{color:#222;border-color:#fff;background:#fff}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{margin:10px 0;font-size:5rem;letter-spacing:-1px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff}.page-description{margin:0;font-size:2rem;line-height:1.5em;font-weight:400;font-family:Merriweather,serif;letter-spacing:.01rem;color:hsla(0,0%,100%,.8)}.no-cover.main-header{min-height:160px;max-height:40vh;background:#f5f8fa}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{color:rgba(0,0,0,.4);border-color:rgba(0,0,0,.3)}.main-header-content .page-title{-webkit-animation:fade-in-down .6s;animation:fade-in-down .6s;-webkit-animation-delay:.2s;animation-delay:.2s}.main-header-content .page-description{-webkit-animation:fade-in-down .9s;animation:fade-in-down .9s;-webkit-animation-delay:.1s;animation-delay:.1s}.post{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.post-header{padding-bottom:10px}.post:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{margin:0;font-size:.9em;line-height:1.7em}.read-more{font-size:.8em;text-decoration:none;font-style:italic}.post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3}.author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{position:relative;padding:.3rem 40px 0 100px;min-height:77px}.post-date{display:inline-block;margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;text-transform:uppercase;font-size:1.3rem;white-space:nowrap}.user-image{position:absolute;top:0;left:0}.user-name{display:block;font-weight:700}.user-bio{display:block;max-width:440px;font-size:1.4rem;line-height:1.5em}.publish-meta{position:absolute;top:0;right:0;padding:4.3rem 0 4rem;text-align:right}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{text-align:center;font-size:.8em}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{content:"";position:absolute;z-index:-2;bottom:10px;width:50%;height:20%;max-width:480px;-webkit-box-shadow:0 15px 10px rgba(0,0,0,.7);box-shadow:0 15px 10px rgba(0,0,0,.7)}figure.polaroid:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}figure.polaroid{width:450px;position:relative;padding:15px;border:none;background:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.3),0 0 40px rgba(0,0,0,.1) inset;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);border-radius:4px;margin-bottom:1.5em;max-width:100%}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;outline:1px solid #ccc;padding:0;margin:0}figure.polaroid figcaption{font-size:1.3em;font-weight:400;font-family:Kaushan Script,cursive;text-align:right;padding:.8em .5em .4em}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{font-size:.8em;font-style:italic;text-align:center;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;margin-top:.5em;padding:.2em}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{text-decoration:none;font-size:2em}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{text-decoration:none;font-size:2em;color:#a2a2a2}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{padding:0;margin:0;border:none}.post-template .content{overflow:hidden}.post-template .post{margin-top:0;border-bottom:none;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{position:relative;margin:6rem 0 0;padding:6rem 0 0;border-top:1px solid #ebf2f6}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{margin:1rem 0;font-size:1.4rem;line-height:1.75em}.author-meta{padding:0;margin:0;list-style:none;font-size:1.4rem;line-height:1;font-style:italic}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;top:6rem;right:0;width:180px}.post-footer .share a{font-size:1.8rem;display:inline-block;margin:1rem 1.6rem 1.6rem 0;color:#bbc7cc;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{height:85px;min-height:0;margin-bottom:0;background:transparent}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{height:10vh;min-height:100px;background:transparent}.author-profile{padding:0 15px 5rem;border-bottom:1px solid #ebf2f6;text-align:center}.author-profile:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.author-image{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-56px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;background:#fff;z-index:2;-webkit-box-shadow:#e7eef2 0 0 0 1px;box-shadow:0 0 0 1px #e7eef2}.author-image .img{position:relative;display:block;width:100%;height:100%;background-size:cover;background-position:50%;border-radius:100%;background-image:url("https://www.simoahava.com/images/simo.png")}.author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0;-webkit-box-shadow:none;box-shadow:none}.author-title{margin:1.5rem 0 1rem}.author-bio{font-size:1.8rem;line-height:1.5em;font-weight:200;color:#50585d;letter-spacing:0;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{margin:2rem 0;font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.7rem}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@-webkit-keyframes bounce{0%,10%,25%,40%,50%{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}20%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}30%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);text-align:left;overflow-y:auto;font-family:Open Sans,Verdana,sans-serif;font-weight:700;font-size:11px;color:#909090;width:400px}#sidebar .nav-title{position:absolute;top:45px;left:30px;font-size:1.5em;font-weight:100;text-transform:uppercase;color:#fff}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{position:absolute;top:38px;right:25px;width:20px;height:20px;padding:0;font-size:10px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{content:"";position:absolute;top:0;width:20px;height:1px;background:#969696;top:15px;-webkit-transition:background .15s ease;transition:background .15s ease}#sidebar .nav-close:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}#sidebar .nav-close:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{margin:.4em 0 .2em;background:none;border:none;font-size:2rem}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{padding:90px 9% 5%;list-style:none;counter-reset:item}#sidebar li:before{display:block;float:right;padding-right:4%;padding-left:5px;text-align:right;font-size:1.2rem;vertical-align:bottom;color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item}#sidebar li{margin:0}#sidebar li a{text-decoration:none;line-height:1.4;font-size:1.4rem;display:block;padding:.6rem 4%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#sidebar li a:after{display:inline-block;content:" ...............................................................";color:hsla(0,0%,100%,.2);margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{content:" ";border-bottom:1px solid hsla(0,0%,100%,.5);width:100%;height:1px}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;bottom:30px;left:30px;right:30px;height:38px;padding:0 20px;text-align:center;font-size:12px;font-family:Open Sans,sans-serif;text-transform:uppercase;text-decoration:none;line-height:35px;border-radius:3px;background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{position:relative;width:80%;max-width:710px;margin:4rem auto;font-family:Open Sans,sans-serif;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;-webkit-transition:all .2s ease;transition:all .2s ease}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px solid #bfc8cd;text-decoration:none;border-radius:4px;-webkit-transition:border .3s ease;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{color:#889093;border-color:#98a0a4}.extra-pagination{display:none;border-bottom:1px solid #ebf2f6}.extra-pagination:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{position:relative;margin:8rem 0 0;padding:.5rem 15px;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{-webkit-box-sizing:border-box;box-sizing:border-box;height:auto;min-height:240px;height:60vh;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{margin-bottom:15px;height:40vh}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{padding:0 5px;border-radius:0;border-color:transparent;color:#2e2e2e;background:transparent}.menu-button:hover{color:#2e2e2e;border-color:transparent;background:none}body.nav-opened .menu-button{background:none;border:transparent}.main-nav.overlay a:hover{color:#fff;border-color:transparent;background:transparent}.no-cover .main-nav.overlay{background:none}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{width:auto;margin:2rem auto}.post{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{padding-bottom:0;margin-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{margin:0 0 2rem;padding:0 0 1.6rem;border-bottom:1px dashed #ebf2f6}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;margin:0;line-height:1.75em}.author-meta li:before{display:none}.newer-posts,.older-posts{position:static;margin:10px 0}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{max-width:100%;height:auto;border:1px solid #777;-webkit-box-shadow:5px 5px 2px rgba(0,0,0,.4);box-shadow:5px 5px 2px rgba(0,0,0,.4);margin-bottom:20px}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{color:#fff;background-color:#007bff}.badge{display:inline-block;padding:.25em .4em;font-size:80%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:.25rem}
    

</style>

        <link rel="canonical" href="https://www.simoahava.com/analytics/deploy-server-side-google-tag-manager-aws/">
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

        

        <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <meta name="theme-color" content="#ffffff" />

        
        <title>Deploy Server-Side Google Tag Manager in AWS | Simo Ahava's blog</title>
        



  

<meta property="og:title" content="Deploy Server-Side Google Tag Manager in AWS" />
<meta name="description" content="How to deploy a Google Tag Manager server-side tagging environment in Amazon&#39;s AWS cloud using Elastic Beanstalk." />
<meta property="og:description" content="How to deploy a Google Tag Manager server-side tagging environment in Amazon&#39;s AWS cloud using Elastic Beanstalk." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.simoahava.com/amp/analytics/deploy-server-side-google-tag-manager-aws/" />

	  <meta property="og:image" content="https://www.simoahava.com/images/2021/06/deploy-server-side-gtm-in-aws.jpg">
      <meta name="twitter:image" content="https://www.simoahava.com/images/2021/06/deploy-server-side-gtm-in-aws.jpg">
    


    
        <meta property="article:published_time" content="2021-06-02T04:00:00Z"/>
    
    
        <meta property="article:modified_time" content="2021-06-02T04:00:00Z"/>
    




    


    <meta property="og:site_name" content="Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development." />









    
        
        
            
        
        
        
    
    
    
        
            <meta property="article:section" content="Analytics" />
        
    
    
        
            <meta property="article:tag" content="google tag manager" />
        
            <meta property="article:tag" content="server-side tagging" />
        
            <meta property="article:tag" content="aws" />
        
    







    
        <meta name="twitter:card" content="summary"/>
    

    
        
        
            
        
        
        
    



<meta itemprop="name" content="Deploy Server-side Google Tag Manager In AWS">
<meta itemprop="description" content="How to deploy a Google Tag Manager server-side tagging environment in Amazon&#39;s AWS cloud using Elastic Beanstalk.">
<meta itemprop="datePublished" content="2021-06-02T07:00:00&#43;03:00" />
<meta itemprop="dateModified" content="2021-06-02T07:00:00&#43;03:00" />
<meta itemprop="wordCount" content="3473">



<meta itemprop="keywords" content="google tag manager,server-side tagging,aws," />
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.",
    
    "url": "https:\/\/www.simoahava.com\/amp\/"
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Deploy Server-side Google Tag Manager In AWS | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2021\/06\/aws-gtm-server.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/amp\/analytics\/deploy-server-side-google-tag-manager-aws\/",
  "datePublished": "2021-06-02T07:00:00\u002b03:00",
  "dateModified": "2021-06-02T07:00:00\u002b03:00",
  "description": "How to deploy a Google Tag Manager server-side tagging environment in Amazon\u0027s AWS cloud using Elastic Beanstalk.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>












    </head>
<body>

<amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
  <amp-sidebar id="sidebar" layout="nodisplay" side="right">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close" on="tap:sidebar.close" role="button" tabindex="1">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/categories/gtm-tips/">GTM Tips</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/about-simo-ahava/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/tools/">Tools</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/blog-statistics/">Blog Statistics</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/upcoming-talks/">Upcoming Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/custom-templates/">Templates</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/newsletter/">Newsletter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/">Full (non-AMP) site</a>
            </li>
        
        <amp-accordion>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Categories
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/gtm-tips/">gtm-tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-development/">web-development</a></li>
                
                </div>
            </section>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Tags
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ab-testing/">ab-testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/accelerated-mobile-pages/">accelerated-mobile-pages</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adblocker/">adblocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/add-on/">add-on</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adwords/">adwords</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/agile/">agile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amazon/">amazon</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amp/">amp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/android/">android</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/api/">api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app/">app</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app&#43;web/">app&#43;web</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app-engine/">app-engine</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/approval/">approval</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps/">apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps-script/">apps-script</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/array/">array</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/attribution/">attribution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audience-design/">audience-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audit/">audit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-event-tracking/">auto-event-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-link-domains/">auto-link-domains</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/aws/">aws</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/basketball/">basketball</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/beforeunload/">beforeunload</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/best-practices/">best-practices</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/big-data/">big-data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bigquery/">bigquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/blogger/">blogger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bounce-rate/">bounce-rate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/built-in-variables/">built-in-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/calculated-metrics/">calculated-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/callback/">callback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/campaign-tracking/">campaign-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/celebration/">celebration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/change-history/">change-history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome/">chrome</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome-extension/">chrome-extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-tracking/">click-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-variables/">click-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clickstream/">clickstream</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-id/">client-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-template/">client-template</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clientid/">clientid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cloud-functions/">cloud-functions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cms/">cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cname/">cname</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conferences/">conferences</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent/">consent</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent-mode/">consent-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container/">container</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-export/">container-export</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-snippet/">container-snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content/">content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-blocker/">content-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-engagement/">content-engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-grouping/">content-grouping</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management-system/">content-management-system</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-security-policy/">content-security-policy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-strategy/">content-strategy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/context/">context</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversion/">conversion</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversions-api/">conversions-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookie/">cookie</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookiedomain/">cookiedomain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookies/">cookies</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/core-web-vitals/">core-web-vitals</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/creative/">creative</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain/">cross-domain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain-tracking/">cross-domain-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/csp/">csp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css/">css</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css-selectors/">css-selectors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom/">custom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimension/">custom-dimension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimensions/">custom-dimensions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html/">custom-html</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tag/">custom-html-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tags/">custom-html-tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-javascript/">custom-javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-metrics/">custom-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-templates/">custom-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/customtask/">customtask</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dan-wilkerson/">dan-wilkerson</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dashboard/">dashboard</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-collection/">data-collection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer/">data-layer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer-variable/">data-layer-variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-model/">data-model</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-quality/">data-quality</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/datalayer/">datalayer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debug/">debug</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debugging/">debugging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/definition-of-success/">definition-of-success</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer/">developer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/development/">development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/document.write/">document.write</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dom/">dom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/duplicate/">duplicate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dynamic-content/">dynamic-content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/easter-egg/">easter-egg</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ecommerce/">ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/education/">education</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/element-visibility/">element-visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/engagement/">engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/enhanced-ecommerce/">enhanced-ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/environments/">environments</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/errors/">errors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event/">event</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listener/">event-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listeners/">event-listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/eventcallback/">eventcallback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/events/">events</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/excel/">excel</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exceptions/">exceptions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/experimentation/">experimentation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exploit/">exploit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/extension/">extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/facebook/">facebook</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/false/">false</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fields-to-set/">fields-to-set</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firebase/">firebase</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firing-rules/">firing-rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/folders/">folders</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form/">form</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form-tracking/">form-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/format-value/">format-value</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/forms/">forms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga-spy/">ga-spy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga4/">ga4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gcp/">gcp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gdpr/">gdpr</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google/">google</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics/">google-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-4/">google-analytics-4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-settings/">google-analytics-settings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud-platform/">google-cloud-platform</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-optimize/">google-optimize</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-sheets/">google-sheets</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag-manager/">google-tag-manager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-trends/">google-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/googletagmanager/">googletagmanager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/governance/">governance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag/">gtag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag.js/">gtag.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-sonar/">gtm-sonar</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-tools/">gtm-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm360/">gtm360</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtmtips/">gtmtips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guest-post/">guest-post</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guide/">guide</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hack/">hack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history/">history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-change-trigger/">history-change-trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-listener/">history-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hugo/">hugo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/iframe/">iframe</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/">intelligent-tracking-prevention</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/internal-traffic/">internal-traffic</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ios/">ios</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ip/">ip</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/it-department/">it-department</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/itp/">itp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/javascript/">javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/jquery/">jquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/klipfolio/">klipfolio</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/learning/">learning</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lighthouse/">lighthouse</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/links/">links</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/listeners/">listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/local/">local</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/localstorage/">localstorage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lookup-table/">lookup-table</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/macros/">macros</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketer/">marketer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketing/">marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/measurement-protocol/">measurement-protocol</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/meta-description/">meta-description</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/metrics/">metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/migration/">migration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mixcloud/">mixcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mobile/">mobile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modern-cms/">modern-cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modular-architecture/">modular-architecture</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/monitor/">monitor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/navigation/">navigation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/netbooster/">netbooster</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/new-ui/">new-ui</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/node.js/">node.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/nodejs/">nodejs</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/non-technical/">non-technical</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/open-source/">open-source</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/opt-out/">opt-out</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/owasp/">owasp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-load-time/">page-load-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-timings/">page-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/parameter-reporting/">parameter-reporting</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/penguin/">penguin</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/performance/">performance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/permissions/">permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/persistence/">persistence</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal-experience/">personal-experience</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/php/">php</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pii/">pii</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pitch/">pitch</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/plugins/">plugins</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/poetry/">poetry</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/postmessage/">postmessage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ppc/">ppc</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview/">preview</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview-mode/">preview-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/process/">process</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/proxy/">proxy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/public-speaking/">public-speaking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/query-string/">query-string</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/queue-time/">queue-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/r/">r</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/race-condition/">race-condition</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/reaktor/">reaktor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/recaptcha/">recaptcha</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/referral/">referral</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/regular-expression/">regular-expression</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/release/">release</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/resources/">resources</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/rules/">rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/safari/">safari</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sales/">sales</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/samesite/">samesite</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/schema/">schema</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/score-card/">score-card</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/scroll-depth/">scroll-depth</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search/">search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-api/">search-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-engine-optimization/">search-engine-optimization</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-trends/">search-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/security/">security</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/selection/">selection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo-report/">seo-report</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/serp/">serp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/server-side-tagging/">server-side-tagging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/session/">session</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sessions/">sessions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/simmer/">simmer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/single-page-apps/">single-page-apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-search/">site-search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-speed/">site-speed</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/slack/">slack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snippet/">snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snowplow/">snowplow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/social-interactions/">social-interactions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/soundcloud/">soundcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/spa/">spa</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/splash-page/">splash-page</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/static-site/">static-site</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/still-running/">still-running</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/storage/">storage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/support/">support</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/swift/">swift</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/syntax-highlight/">syntax-highlight</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solution/">tag-management-solution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solutions/">tag-management-solutions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-sequencing/">tag-sequencing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-templates/">tag-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tags/">tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tasks/">tasks</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/technique/">technique</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/test/">test</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/testing/">testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timer/">timer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timings/">timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tips/">tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tools/">tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker/">tracker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker-object/">tracker-object</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/training/">training</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger/">trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger-groups/">trigger-groups</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/triggers/">triggers</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/troubleshoot/">troubleshoot</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/undefined/">undefined</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/universal-analytics/">universal-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-id/">user-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-interface/">user-interface</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-permissions/">user-permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-timings/">user-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/v2/">v2</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable/">variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable-templates/">variable-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variables/">variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/videos/">videos</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/visibility/">visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/wcag/">wcag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/weather/">weather</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-development/">web-development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/webkit/">webkit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/website-redesign/">website-redesign</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workflow/">workflow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workspaces/">workspaces</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/youtube/">youtube</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/zones/">zones</a></li>
                
                </div>
            </section>
        
        </amp-accordion>
    </ul>
</amp-sidebar>

<div class="site-wrapper">



    <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">


    <a class="menu-button" on="tap:sidebar.toggle" role="button"><i class="fa fa-bars" aria-hidden="true"></i><span class="menu-button-label">Menu</span></a>


  </nav>
</header>



<main class="content" role="main">

  <article class="post type-post">

    <header class="post-header">
        <h1 class="post-title">Deploy Server-Side Google Tag Manager in AWS</h1>
        <small>How to deploy a Google Tag Manager server-side tagging environment in Amazon&#39;s AWS cloud using Elastic Beanstalk.</small>

        <section class="post-meta">
            


    




    <amp-img class="author-thumb" src="https://www.simoahava.com/images/simo.png" layout="fixed" width="24" height="24" alt="Author image"></amp-img>

Simo Ahava

in
    
        <a href="https://www.simoahava.com/amp/categories/analytics">Analytics</a>
    


on
    
        <a href="https://www.simoahava.com/amp/tags/google-tag-manager">#google tag manager</a>
    
        , <a href="https://www.simoahava.com/amp/tags/server-side-tagging">#server-side tagging</a>
    
        , <a href="https://www.simoahava.com/amp/tags/aws">#aws</a>
    


<time class="post-date" datetime="2021-06-02T07:00:00&#43;03:00">
    2 June 2021
</time>



        </section>
    </header>

    <section class="post-content">
      
        
        
          <p>Since Google Tag Manager released the <a href="https://developers.google.com/tag-manager/serverside/manual-setup-guide">manual setup guide</a> for <a href="server-side-tagging-google-tag-manager">server-side tagging</a>, my mind has been spinning with the idea of walking through the deployment into Amazon&rsquo;s <a href="https://aws.amazon.com/">AWS</a>.</p>
<p>I personally prefer <a href="https://cloud.google.com/">Google Cloud Platform</a> over AWS, because I think it&rsquo;s so much more user-friendly. Even though in this guide we&rsquo;ll be utilizing one of the simplest AWS services, <a href="https://aws.amazon.com/elasticbeanstalk/">Elastic Beanstalk</a>, the deployment is still <em>much</em> more complex than if you were to use GCP&rsquo;s <a href="https://cloud.google.com/appengine">App Engine</a>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/aws-gtm-server.jpg" title="GTM server on AWS">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/aws-gtm-server.jpg" layout="responsive" alt="GTM server on AWS" height="584" width="2806"></amp-img>
  
    </a>
  

<p>In this guide, I&rsquo;ll show you how to deploy the server-side tagging application into AWS.</p>
<p>It won&rsquo;t be a <strong>complete</strong> approach, as I won&rsquo;t go into the weeds of showing you how to <a href="https://developers.google.com/tag-manager/serverside/manual-setup-guide#optional_include_bigquery_credentials">add the credentials to get the BigQuery API to work</a> (there&rsquo;s going to be other guides for this).</p>
<p>We&rsquo;ll use <strong>Elastic Beanstalk</strong>, which is the closest analogy to Google App Engine that AWS has to offer. It&rsquo;s a very simple, almost turnkey way of deploying web applications, and it&rsquo;s <em>perfect</em> for our needs. If you want to get down and dirty with the setup, you can use the <a href="https://aws.amazon.com/ecs/">Elastic Container Service</a>, but we will not be covering ECS in this guide.</p>
<p>You&rsquo;ll be able to do everything through the AWS console, so there&rsquo;s no need to install any new software on your computer.</p>
<!-- raw HTML omitted -->
<p>This will <strong>not</strong> be an AWS guide. I&rsquo;m only going to show you how to get things running, and hopefully you&rsquo;ll understand how the server container application works. But tweaking the instances and making it work in your overall AWS infrastructure is up to you.</p>

        
        <article class="post type-simmer">
    <header class="post-header">
        <h2 class="post-title"><a href="https://www.simoahava.com/amp/newsletter/">The Simmer Newsletter</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
	Follow <a href="https://www.teamsimmer.com/newsletter/">this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href="https://www.teamsimmer.com/">Simmer online course platform</a>.
      </p>
      </section>
</article>

        
          <h2 id="what-you-will-need">What you will need</h2>
<p>If you don&rsquo;t already have an AWS account, go ahead <a href="https://portal.aws.amazon.com/billing/signup">and create one</a>. You&rsquo;ll need to provide a credit card for billing as well.</p>
<p>Once you&rsquo;ve created the account (or signed in), make sure you select a <strong>region</strong> you want to work in. All the services you enable should run within the same region for the purposes of this exercise. If you are unsure which region to select, choose one that is geographically closest to you.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/aws-region.jpg" title="I&#39;m working in the eu-central-1 region (Frankfurt)">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/aws-region.jpg" layout="responsive" alt="I&#39;m working in the eu-central-1 region (Frankfurt)" height="596" width="1638"></amp-img>
  
    </a>
  

<p>The final <strong>mandatory</strong> thing you&rsquo;ll need is access to a <strong>custom domain</strong> and the rights to modify its <strong>DNS records</strong>. In this exercise, you&rsquo;ll be mapping <strong>two</strong> domains:</p>
<ul>
<li>The main tagging server domain (e.g. <code>tagging.domain.com</code>)</li>
<li>The preview server domain, which should be a subdomain of the main tagging server domain (e.g. <code>debug.tagging.domain.com</code>)</li>
</ul>
<blockquote>
<p>Important! If you don&rsquo;t know how to update DNS records, <strong>work with someone who does</strong>. Also, make sure you are working with a domain namespace that is <strong>not being used for something else</strong>. In the example above, I might be using <code>domain.com</code> for my main site, so that&rsquo;s why I&rsquo;ve reserved the <code>tagging.domain.com</code> for my tagging server. The tagging server and the website sending data to the tagging server <strong>should</strong> share the main (naked) domain name, though.</p>
</blockquote>
<p>Unlike with GCP App Engine, it&rsquo;s <strong>not possible</strong> to setup the server container application without HTTPS-protected custom domains.</p>

        
          <h2 id="the-outline">The outline</h2>
<p>You are going to create an <strong>Elastic Beanstalk</strong> application, which runs on <strong>two environments</strong>. One environment will be for your auto-scaling <strong>tagging server</strong>, and one for your single-instance <strong>preview server</strong>.</p>
<p>Both environments are created with a <strong>Docker container image</strong> provided by Google. This Docker container is configured with some <strong>environment variables</strong> â€“ mainly the link to your actual Google Tag Manager container and details about the preview server setup.</p>
<p>Once everything is done, your <strong>tagging server</strong> will be able to process incoming HTTP requests just like a regular Google Tag Manager server container. Requests sent while in preview mode will be automatically processed by the <strong>preview server</strong> (this logic is handled by the servers themselves â€“Â you don&rsquo;t have to write any routing rules).</p>
<p>The actual steps we&rsquo;ll take are:</p>
<ol>
<li>Create the SSL certificates for the domains you&rsquo;ll need using Certificate Manager (you&rsquo;ll need to make <strong>DNS changes</strong>)</li>
<li>Create a hosted zone for the custom domains using Route53 (you&rsquo;ll need to make <strong>DNS changes</strong>)</li>
<li>Create the Elastic Beanstalk <strong>application</strong></li>
<li>Create the <strong>environment</strong> for the <strong>preview server</strong></li>
<li>Map a custom domain to the preview server</li>
<li>Create the <strong>environment</strong> for the <strong>tagging server</strong></li>
<li>Map a custom domain to the tagging server</li>
<li>Finish up with some configuring</li>
</ol>
<p>Yes, it&rsquo;s a lot to cover, and yes, it&rsquo;s somewhat complicated. However, the steps to create the two servers are almost identical. Once you actually start working through the process, it should all make some sense.</p>
<h3 id="1-create-the-ssl-certificates">1. Create the SSL certificates</h3>
<p>The first thing you&rsquo;ll need to do is request an SSL certificate from Amazon so that the traffic to both your tagging server and your preview server will be behind HTTPS.</p>
<p>While this is optional (but highly recommended) for the tagging server, it&rsquo;s <strong>required</strong> for the preview server. If the preview server is not behind HTTPS, the deployment will not work.</p>
<p>Unlike App Engine, the default URL provided by Elastic Beanstalk can <strong>not</strong> be protected by HTTPS, which is why we need to map the custom domains before we can even test our setup properly.</p>
<p>To get started, go to <a href="https://eu-central-1.console.aws.amazon.com/acm/home">AWS Certificate Manager</a> and choose to provision / request a new certificate. Select the <strong>public certificate</strong> option.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/public-certificate.jpg" title="request a public certificate">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/public-certificate.jpg" layout="responsive" alt="request a public certificate" height="586" width="2338"></amp-img>
  
    </a>
  

<p>In the next screen, add both of the domains you want to register for your servers. As mentioned before, make sure the <strong>preview</strong> server is a subdomain of the <strong>tagging</strong> server. For example, this is the configuration I chose for this demo:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/certificate-domains.jpg" title="choose domains for the certificate">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/certificate-domains.jpg" layout="responsive" alt="choose domains for the certificate" height="658" width="1510"></amp-img>
  
    </a>
  

<p>In the next view, select the <strong>DNS validation</strong> option and proceed.</p>
<p>Skip through the <strong>Add tags</strong> and <strong>Review</strong> screens, and click <strong>Confirm and request</strong> to start the process.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/confirm-and-request.jpg" title="Confirm and request">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/confirm-and-request.jpg" layout="responsive" alt="Confirm and request" height="1124" width="2876"></amp-img>
  
    </a>
  

<p>In the <strong>Validation</strong> view, expand both of the domains.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/dns-records.jpg" title="DNS records">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/dns-records.jpg" layout="responsive" alt="DNS records" height="1110" width="2854"></amp-img>
  
    </a>
  

<p>You&rsquo;ll need to create <strong>CNAME records</strong> for both of these domains in your DNS settings. For example, as the DNS records for my <code>teamsimmer.com</code> domain are managed through <a href="https://www.godaddy.com/">GoDaddy</a>, I need to create the two records like this:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/godaddy-records.jpg" title="GoDaddy records">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/godaddy-records.jpg" layout="responsive" alt="GoDaddy records" height="236" width="1986"></amp-img>
  
    </a>
  

<p>Once done, you can click <strong>Continue</strong> to complete the certificate request in AWS Certificate Manager.</p>
<p>If your certificates aren&rsquo;t immediately validated, it means that the DNS changes haven&rsquo;t propagated yet. It might take anything from a few seconds to some hours, depending on if the domain names are being reused. You can click the <strong>refresh</strong> button to update the validation status.</p>
<p>However, you can actually continue with the setup even if the validation isn&rsquo;t complete, so proceed to the next step when ready!</p>

        
          <h2 id="2-create-a-hosted-zone-for-the-custom-domains">2. Create a hosted zone for the custom domains</h2>
<p>The final DNS update you need to do is to <strong>register a hosted zone</strong> in AWS Route53.</p>
<p>A hosted zone is where you basically point the <strong>name servers</strong> of your custom domains to AWS. This way you delegate AWS with full control over the DNS of these domains. This is pretty much mandatory if you want to map custom domains to the Beanstalk environments you&rsquo;ll be creating soon.</p>
<p>Head on over to <a href="https://console.aws.amazon.com/route53/v2/home">Route53</a> and click <strong>Create hosted zone</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/route53-create-hosted-zone.jpg" title="Create hosted zone">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/route53-create-hosted-zone.jpg" layout="responsive" alt="Create hosted zone" height="612" width="1630"></amp-img>
  
    </a>
  

<p>In the <strong>Hosted zone configuration</strong>, add the domain of your <strong>tagging server</strong> (e.g. <code>tagging.teamsimmer.com</code>) into the <strong>Domain name</strong> field, keep the default settings, and click <strong>Create hosted zone</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/create-hosted-zone.jpg" title="Hosted zone configuration">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/create-hosted-zone.jpg" layout="responsive" alt="Hosted zone configuration" height="1706" width="1666"></amp-img>
  
    </a>
  

<p>Once done, you need to make some <strong>DNS record updates</strong> again. In your DNS provider, add the four <strong>NS</strong> records to your tagging server domain.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/add-ns-records.jpg" title="Add NS records">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/add-ns-records.jpg" layout="responsive" alt="Add NS records" height="690" width="2316"></amp-img>
  
    </a>
  

<p>In GoDaddy, this is what the records from the example above look like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/ns-records-in-godaddy.jpg" title="NS records in GoDaddy">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/ns-records-in-godaddy.jpg" layout="responsive" alt="NS records in GoDaddy" height="450" width="1992"></amp-img>
  
    </a>
  

<p>Once you&rsquo;ve done these changes, we&rsquo;re ready to create the Beanstalk environments. We&rsquo;ll return to Route53 once we need to make the actual tagging and preview server domain mappings, but these can be done through Route53 and you won&rsquo;t need to make any more DNS changes outside AWS.</p>

        
          <h2 id="3-create-the-elastic-beanstalk-application">3. Create the Elastic Beanstalk application</h2>
<p>Our setup will be a <strong>single</strong> Elastic Beanstalk application running an <em>environment</em> for the <strong>preview server</strong> and another <em>environment</em> for the <strong>tagging server</strong>.</p>
<p>So the first thing you&rsquo;ll need to do is head on over to <a href="https://eu-central-1.console.aws.amazon.com/elasticbeanstalk/home">Elastic Beanstalk</a> and create a new application.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/create-beanstalk-application.jpg" title="Create Beanstalk application">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/create-beanstalk-application.jpg" layout="responsive" alt="Create Beanstalk application" height="604" width="2054"></amp-img>
  
    </a>
  

<p>Give the application a name.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/application-name.jpg" title="Application name">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/application-name.jpg" layout="responsive" alt="Application name" height="646" width="1856"></amp-img>
  
    </a>
  

<p>Under <strong>Platform</strong>, choose <strong>Docker</strong> and keep the default settings.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/docker-platform.jpg" title="Docker platform">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/docker-platform.jpg" layout="responsive" alt="Docker platform" height="608" width="1818"></amp-img>
  
    </a>
  

<p>At this point, we&rsquo;ll just want to create the application and <em>not</em> worry about the environments, so scroll all the way down and click <strong>Configure more options</strong>. This creates the application.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/application-configure-more-options.jpg" title="Configure more options">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/application-configure-more-options.jpg" layout="responsive" alt="Configure more options" height="544" width="1868"></amp-img>
  
    </a>
  

<p>In this next screen, scroll all the way down and click <strong>Cancel</strong> â€“Â we want to create the environment manually.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/click-cancel.jpg" title="Click cancel">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/click-cancel.jpg" layout="responsive" alt="Click cancel" height="638" width="1900"></amp-img>
  
    </a>
  

<p>If you now go to <a href="https://eu-central-1.console.aws.amazon.com/elasticbeanstalk/home#/applications">Applications</a>, you should see your new Beanstalk application. Nice work!</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/beanstalk-applications.jpg" title="Beanstalk applications">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/beanstalk-applications.jpg" layout="responsive" alt="Beanstalk applications" height="542" width="2844"></amp-img>
  
    </a>
  

<p>It might take some time for the application to appear, so be patient.</p>

        
          <h2 id="4-create-the-preview-server-environment">4. Create the Preview server environment</h2>
<p>The first thing we&rsquo;ll do is create an environment for the <strong>Preview server</strong>.</p>
<p>It has just a single <em>gotcha</em>: it needs a <strong>Load Balancer</strong> (so that you can map a custom domain to it), but it <strong>must not</strong> scale beyond one instance.</p>
<p>Click your application name in the list of Beanstalk applications to enter the application&rsquo;s environment list. The list should be empty, so click <strong>Create a new environment</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/create-preview-server-environment.jpg" title="Create preview server environment">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/create-preview-server-environment.jpg" layout="responsive" alt="Create preview server environment" height="540" width="2824"></amp-img>
  
    </a>
  

<p>Choose <strong>Web server environment</strong> and click <strong>Select</strong>.</p>
<p>Set the <strong>Environment name</strong> to something useful, such as <code>tagging-server-gtm-debug</code>. You don&rsquo;t need to change the <strong>Domain</strong> setting as we&rsquo;ll be using a custom domain anyway.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/environment-name.jpg" title="Environment name">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/environment-name.jpg" layout="responsive" alt="Environment name" height="778" width="1336"></amp-img>
  
    </a>
  

<p>Under <strong>Platform</strong>, choose <strong>Docker</strong> and keep the default settings.</p>
<h3 id="download-the-dockerrunawsjson-file">Download the Dockerrun.aws.json file</h3>
<p>Before proceeding, follow <a href="https://gist.githubusercontent.com/sahava/f3d1baedf7d775dccf52feb57fa64416/raw/8126571d8c45bacb8bfacda391cad3faa77cf484/Dockerrun.aws.json">this link</a> and download the file as <code>Dockerrun.aws.json</code> somewhere on your computer.</p>
<p>This file describes the <strong>Docker container</strong> for the GTM tagging server and how to fetch it from Google&rsquo;s public Docker repository. We&rsquo;ll be using this file to actually deploy the Google Tag Manager container into the environment.</p>
<h3 id="upload-the-json">Upload the JSON</h3>
<p>Once downloaded, back in the AWS Console, select <strong>Upload your code</strong> in the <strong>Application Code</strong> Settings. Click <strong>Choose file</strong> and locate the <code>Dockerrun.aws.json</code> to upload it to the environment.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/dockerrun-uploaded.jpg" title="Dockerrun uploaded">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/dockerrun-uploaded.jpg" layout="responsive" alt="Dockerrun uploaded" height="1234" width="1828"></amp-img>
  
    </a>
  

<p>Next, click <strong>Configure more options</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/configure-debug-options.jpg" title="Configure debug options">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/configure-debug-options.jpg" layout="responsive" alt="Configure debug options" height="306" width="1798"></amp-img>
  
    </a>
  

<h3 id="modify-software-settings">Modify Software settings</h3>
<p>Click <strong>Edit</strong> in the Software box.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/edit-software.jpg" title="Edit software">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/edit-software.jpg" layout="responsive" alt="Edit software" height="518" width="926"></amp-img>
  
    </a>
  

<p>Scroll down to <strong>Environment properties</strong>. These are environment variables passed to the Docker deployment.</p>
<p>You need to set <strong>two</strong> properties:</p>
<table>
<thead>
<tr>
<th>Property name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>RUN_AS_PREVIEW_SERVER</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>CONTAINER_CONFIG</code></td>
<td>The container configuration string from Google Tag Manager Container Settings.</td>
</tr>
</tbody>
</table>
<p>The first is easy enough to set, but for the <code>CONTAINER_CONFIG</code> you need to head on over to the Google Tag Manager Server container (or create one if you haven&rsquo;t yet done so), and then copy the <strong>Container Configuration</strong> string from the container settings (Admin -&gt; Container Settings).</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/container-settings.jpg" title="Container configuration">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/container-settings.jpg" layout="responsive" alt="Container configuration" height="1476" width="1858"></amp-img>
  
    </a>
  

<p>This is what my Software settings look like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/environment-properties.jpg" title="Environment properties">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/environment-properties.jpg" layout="responsive" alt="Environment properties" height="712" width="1836"></amp-img>
  
    </a>
  

<p>Click <strong>Save</strong> when done.</p>
<h3 id="modify-capacity-settings">Modify Capacity settings</h3>
<p>Next, click <strong>Edit</strong> in the Capacity box.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/edit-capacity.jpg" title="Edit capacity">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/edit-capacity.jpg" layout="responsive" alt="Edit capacity" height="520" width="932"></amp-img>
  
    </a>
  

<p>Choose <strong>Load balanced</strong> as the <strong>Environment type</strong>, and set both <strong>Min</strong> and <strong>Max</strong> instances to <code>1</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/load-balanced-environment.jpg" title="Load balanced environment">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/load-balanced-environment.jpg" layout="responsive" alt="Load balanced environment" height="530" width="838"></amp-img>
  
    </a>
  

<p>Scroll all the way down and click <strong>Save</strong>.</p>
<h3 id="modify-load-balancer-settings">Modify Load balancer settings</h3>
<p>Now, click <strong>Edit</strong> in the Load balancer box.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/edit-load-balancer.jpg" title="Edit load balancer">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/edit-load-balancer.jpg" layout="responsive" alt="Edit load balancer" height="424" width="886"></amp-img>
  
    </a>
  

<p>In the <strong>Listeners</strong> section click <strong>+ Add Listener</strong>.</p>
<p>Set <strong>Port</strong> to <code>443</code>, <strong>Protocol</strong> to <code>HTTPS</code>, and choose the <strong>SSL certificate</strong> you provisioned earlier from the respective menu. Click <strong>Add</strong> when done.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/https-listener-debug.jpg" title="HTTPS Listener settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/https-listener-debug.jpg" layout="responsive" alt="HTTPS Listener settings" height="1138" width="1190"></amp-img>
  
    </a>
  

<p>Under <strong>Processes</strong>, select the <code>default</code> process and click <strong>Edit</strong> in the Actions menu.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/edit-default-process.jpg" title="Edit default process">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/edit-default-process.jpg" layout="responsive" alt="Edit default process" height="460" width="1748"></amp-img>
  
    </a>
  

<p>Set <code>200</code> as the value of the <strong>HTTP code</strong> for the health check, and set the path to <code>/healthz</code>. Click <strong>Save</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/health-check-options-process.jpg" title="Health check options">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/health-check-options-process.jpg" layout="responsive" alt="Health check options" height="1104" width="1162"></amp-img>
  
    </a>
  

<p>Next, click <strong>+ Add process</strong> to add a new process.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/add-new-process.jpg" title="Add new process">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/add-new-process.jpg" layout="responsive" alt="Add new process" height="494" width="1776"></amp-img>
  
    </a>
  

<p>Set <strong>Name</strong> to <code>https</code>. Set <strong>Port</strong> to <code>443</code>. Set <strong>Protocol</strong> to <code>HTTPS</code>.</p>
<p>Then, set <strong>Path</strong> to <code>/healthz</code> (under <strong>Health check</strong>), and click <strong>Add</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/new-https-process.jpg" title="New https process">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/new-https-process.jpg" layout="responsive" alt="New https process" height="1616" width="1196"></amp-img>
  
    </a>
  

<p>Finally, click <strong>Save</strong> at the bottom of the <strong>Modify load balancer</strong> page.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/save-load-balancer-settings.jpg" title="Save load balancer settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/save-load-balancer-settings.jpg" layout="responsive" alt="Save load balancer settings" height="460" width="1862"></amp-img>
  
    </a>
  

<h3 id="create-the-environment">Create the environment</h3>
<p>Once you&rsquo;ve modified the <strong>Software</strong>, <strong>Capacity</strong>, and <strong>Load balancer</strong> settings, you are ready to create the environment, so click the <strong>Create environment</strong> button in the bottom right corner.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/create-the-debug-env.jpg" title="Create the debug environment">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/create-the-debug-env.jpg" layout="responsive" alt="Create the debug environment" height="646" width="1876"></amp-img>
  
    </a>
  

<p>You&rsquo;ll end up on a screen that shows a running log of the environment creation process. You&rsquo;ll need to wait some minutes for the environment to start. When finished, this is what you should see:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/debug-server-done.jpg" title="Debug server done">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/debug-server-done.jpg" layout="responsive" alt="Debug server done" height="778" width="2808"></amp-img>
  
    </a>
  

<h3 id="test-the-environment">Test the environment</h3>
<p>Once the debug environment is created, you can visit the environment URL (the one automatically generated by Elastic Beanstalk) and add the path <code>/healthz</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/tagging-server-url-test.jpg" title="Test the tagging server URL">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/tagging-server-url-test.jpg" layout="responsive" alt="Test the tagging server URL" height="316" width="1206"></amp-img>
  
    </a>
  

<p>By visiting the path <code>/healthz</code>, you should see a response <code>ok</code> in the page body.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/test-healthz.jpg" title="Test /healthz">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/test-healthz.jpg" layout="responsive" alt="Test /healthz" height="196" width="1602"></amp-img>
  
    </a>
  

<p>You can also test the <code>https</code> URL, but as the endpoint is not secured by an SSL certificate, you&rsquo;ll need to click through the warnings that appear.</p>
<p>Well done, the <strong>debug</strong> server has been created! Now you just need to map a custom domain to it.</p>

        
          <h2 id="5-map-a-domain-to-the-preview-server">5. Map a domain to the preview server</h2>
<p>Luckily, once the Hosted Zone has been created (see <a href="#2-create-a-hosted-zone-for-the-custom-domains">chapter 2</a>), mapping a custom domain to the preview server is very easy to do.</p>
<p>Head on over to <a href="https://console.aws.amazon.com/route53/v2/hostedzones">Route53</a> and select the Hosted Zone you created earlier.</p>
<p>Here, click to <strong>Create</strong> a new record.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/create-debug-server-record.jpg" title="Create Debug Server record">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/create-debug-server-record.jpg" layout="responsive" alt="Create Debug Server record" height="468" width="1368"></amp-img>
  
    </a>
  

<p>Set the <strong>Record name</strong> to the subdomain name of the preview server. In my example, this would be <code>debug</code>, as the hosted zone has been created for <code>tagging.teamsimmer.com</code>. This means that the fully qualified domain name of the preview server becomes <code>debug.tagging.teamsimmer.com</code>.</p>
<p>Keep <strong>Record type</strong> as <code>A</code>, and toggle the <strong>Alias</strong> toggle on.</p>
<p>In the <strong>Route traffic to</strong> drop-down that appears, select <strong>Alias to Elastic Beanstalk environment</strong>.</p>
<p>In the <strong>Choose Region</strong> drop-down, select the region where the Elastic Beanstalk application was created (<code>eu-central-1</code> in my case).</p>
<p>Finally, in the Choose Environment field, select the preview server environment you created in the previous chapter.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/quick-create-debug-a-record.jpg" title="Create A record for debug server">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/quick-create-debug-a-record.jpg" layout="responsive" alt="Create A record for debug server" height="854" width="2192"></amp-img>
  
    </a>
  

<p>Click <strong>Create records</strong> when done.</p>
<h3 id="test-the-domain">Test the domain</h3>
<p>Now browse to the <strong>HTTPS</strong> URL of the domain whose name you just registered in the DNS record, and add the path <code>/healthz</code>. You should be able to visit this domain without an SSL warning (because the certificate was applied to the load balancer of the environment).</p>
<p>This is what I see when I visit <code>https://debug.tagging.teamsimmer.com/healthz</code>:</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/mapped-debug-domain-works.jpg" title="Mapped debug domain works">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/mapped-debug-domain-works.jpg" layout="responsive" alt="Mapped debug domain works" height="174" width="906"></amp-img>
  
    </a>
  

<p>Congratulations, you have now created the <strong>preview server</strong> for your server-side tagging environment!</p>
<p>It&rsquo;s time to create the actual <strong>tagging server</strong>. Luckily the steps are almost exactly the same, with just a few modifications here and there.</p>

        
          <h2 id="6-create-the-tagging-server-environment">6. Create the tagging server environment</h2>
<p>Go to the <a href="https://eu-central-1.console.aws.amazon.com/elasticbeanstalk/home#/applications">Applications page</a> of Elastic Beanstalk, and select the GTM server application.</p>
<p>Here, click <strong>Create a new environment</strong>.</p>
<p>Keep <strong>Web server environment</strong> selected and click <strong>Select</strong>.</p>
<p>Give the environment a name. I followed the naming schema of the preview server and ended up with <code>tagging-server-gtm-prod</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/tagging-server-gtm-prod.jpg" title="Tagging server production">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/tagging-server-gtm-prod.jpg" layout="responsive" alt="Tagging server production" height="290" width="1322"></amp-img>
  
    </a>
  

<p>For <strong>Platform</strong>, choose <strong>Docker</strong> and keep the other platform settings with their default values.</p>
<p>Under <strong>Application code</strong>, Select <strong>Existing version</strong> and choose the source file you used for the preview server. You can reuse this because the container image is exactly the same for both the preview server and the tagging server.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/application-code-existing-version.jpg" title="Application code existing version">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/application-code-existing-version.jpg" layout="responsive" alt="Application code existing version" height="602" width="1468"></amp-img>
  
    </a>
  

<p>Next, click <strong>Configure more options</strong>.</p>
<h3 id="configure-software-settings">Configure Software settings</h3>
<p>In the <strong>Software</strong> box, click <strong>Edit</strong>.</p>
<p>You need to add two <strong>Environment properties</strong>.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CONTAINER_CONFIG</code></td>
<td>Set to the container configuration string from the Google Tag Manager Container settings.</td>
</tr>
<tr>
<td><code>PREVIEW_SERVER_URL</code></td>
<td>Set to the HTTPS URL to the preview server.</td>
</tr>
</tbody>
</table>
<p>The <code>CONTAINER_CONFIG</code> is retrieved the same way you fetched it for the preview server. Go to the Container Settings in your Google Tag Manager Server container, and copy the Container Configuration string from there.</p>
<p>The <code>PREVIEW_SERVER_URL</code> needs to be set to the <strong>origin</strong> of your preview server, which is the protocol (https) and the full hostname. As my preview server runs on <code>debug.tagging.teamsimmer.com</code>, the value of <code>PREVIEW_SERVER_URL</code> would be <code>https://debug.tagging.teamsimmer.com</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/preview-server-url-settings.jpg" title="Preview server URL">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/preview-server-url-settings.jpg" layout="responsive" alt="Preview server URL" height="620" width="1756"></amp-img>
  
    </a>
  

<p>Click <strong>Save</strong> when done.</p>
<h3 id="configure-capacity-settings">Configure Capacity settings</h3>
<p>Next, click <strong>Edit</strong> in the <strong>Capacity</strong> box.</p>
<p>Choose <strong>Load balancing</strong> from the <strong>Environment type</strong>.</p>
<p>The rest is really up to you! You can choose how the environment should auto-scale by setting the minimum and maximum number of instances.</p>
<p>You can also choose how much &ldquo;firepower&rdquo; the environment has by selecting the instance type from the list.</p>
<p>I wanted to go with a very simple, quite flimsy setup for demo purposes, and chose a min-max of 1â€“3 instances, and kept the default instance type of <code>t2.micro</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/instance-setup-demo.jpg" title="Instance setup example">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/instance-setup-demo.jpg" layout="responsive" alt="Instance setup example" height="1384" width="1762"></amp-img>
  
    </a>
  

<p>Once you&rsquo;ve decided what to go with (you can always update the environment configuration later), click <strong>Save</strong>.</p>
<h3 id="configure-load-balancer-settings">Configure Load balancer settings</h3>
<p>Now, click <strong>Edit</strong> in the <strong>Load balancer</strong> box.</p>
<p>First, click <strong>+ Add listener</strong> in the <strong>Listeners</strong> section.</p>
<p>Set <strong>Port</strong> to <code>443</code>, <strong>Protocol</strong> to <code>HTTPS</code>, and choose the <strong>SSL Certificate</strong> you provisioned earlier from the drop-down list. Click <strong>Add</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/add-load-balancer-listener-prod.jpg" title="Add load balancer listener to prod">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/add-load-balancer-listener-prod.jpg" layout="responsive" alt="Add load balancer listener to prod" height="1130" width="1182"></amp-img>
  
    </a>
  

<p>Next, in <strong>Processes</strong>, select the <code>default</code> process, and click <strong>Edit</strong> from the <strong>Actions</strong> menu.</p>
<p>Set the Health Check <strong>HTTP code</strong> to <code>200</code> and the <strong>Path</strong> to <code>/healthz</code>. Click <strong>Save</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/health-check-healthz.jpg" title="Health check healthz">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/health-check-healthz.jpg" layout="responsive" alt="Health check healthz" height="1032" width="1150"></amp-img>
  
    </a>
  

<p>Click <strong>+ Add process</strong> to add a new process.</p>
<p>Set <strong>Name</strong> to <code>https</code>, <strong>Port</strong> to <code>443</code>, and <strong>Protocol</strong> to <code>HTTPS</code>. Change <strong>Path</strong> to <code>/healthz</code> and click <strong>Add</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/add-https-process-prod.jpg" title="Add https process to prod">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/add-https-process-prod.jpg" layout="responsive" alt="Add https process to prod" height="1684" width="1166"></amp-img>
  
    </a>
  

<p>Finally, click <strong>Save</strong> to close the Load balancer settings.</p>
<h3 id="create-the-environment-1">Create the environment</h3>
<p>Click <strong>Create environment</strong> to have AWS deploy the Docker container to your new tagging server environment. Again, this will take some minutes to complete. Once it&rsquo;s done, you should find yourself in the Environment dashboard with a healthy environment created for you.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/prod-environment-created.jpg" title="Production environment created">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/prod-environment-created.jpg" layout="responsive" alt="Production environment created" height="758" width="2814"></amp-img>
  
    </a>
  

<h3 id="test-the-environment-1">Test the environment</h3>
<p>Test the tagging server the same way you tested the preview server. Copy the automatically generated <code>*.elasticbeanstalk.com</code> URL and add <code>/healthz</code> as the path. You should see the <code>ok</code> message.</p>
<p>You can also test with HTTPS, but you need to click through the SSL warnings.</p>
<p>If everything works, you&rsquo;re ready to map the tagging server domain to this environment.</p>

        
          <h2 id="7-map-a-domain-to-the-tagging-server">7. Map a domain to the tagging server</h2>
<p>Go to your <a href="https://console.aws.amazon.com/route53/v2/hostedzones">Hosted Zones</a> in Route53 and click the domain name you&rsquo;ve created the Hosted Zone for.</p>
<p>Click <strong>Create record</strong>.</p>
<p>Assuming the tagging server will be the same domain you configured the zone for, leave the <strong>Record name</strong> field empty. In my case, this means that the mapped domain will be <code>tagging.teamsimmer.com</code>.</p>
<p>Keep <code>A</code> as the <strong>Record type</strong>, and toggle the <strong>Alias</strong> switch on.</p>
<p>Set the endpoint to <strong>Alias to Elastic Beanstalk environment</strong>.</p>
<p>Set the region to the region where your Elastic Beanstalk application is running.</p>
<p>Select the <strong>tagging server</strong> as the target environment.</p>
<p>Click <strong>Create records</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/tagging-server-dns-record.jpg" title="Tagging server DNS record">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/tagging-server-dns-record.jpg" layout="responsive" alt="Tagging server DNS record" height="696" width="2148"></amp-img>
  
    </a>
  

<h3 id="test-the-domain-1">Test the domain</h3>
<p>Now, browse to your <strong>tagging server</strong> domain using HTTPS, and add the path <code>/healthz</code>. Do you see the <code>ok</code> message? If so, <strong>well done</strong>!</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/tagging-server-healthy.jpg" title="Tagging server healthy">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/tagging-server-healthy.jpg" layout="responsive" alt="Tagging server healthy" height="174" width="770"></amp-img>
  
    </a>
  


        
          <h2 id="8-final-steps">8. Final steps</h2>
<p>There are some final steps you need to do before everything starts working together.</p>
<h3 id="update-auto-scaling-groups-health-checks">Update auto-scaling groups&rsquo; health checks</h3>
<p>First, you need to go to the <a href="https://eu-central-1.console.aws.amazon.com/ec2autoscaling/home">Auto-scaling Groups configuration in EC2</a>.</p>
<p>Elastic Beanstalk actually uses EC2 virtual machines to run the instances. These <strong>auto-scaling groups</strong> need to be updated so that <em>unhealthy</em> servers are redeployed with the latest changes in the server runtime.</p>
<p>One after the other, click open the two groups assigned to your server-side GTM application (one group for the preview server and one for the tagging server). If you have more groups here than just the two, you&rsquo;ll need to do some digging to identify the ones that correspond with your setup.</p>
<p>In the <strong>Health checks</strong> box of both groups, click <strong>Edit</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/health-checks-auto-scaling-groups.jpg" title="Health checks for auto-scaling groups">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/health-checks-auto-scaling-groups.jpg" layout="responsive" alt="Health checks for auto-scaling groups" height="316" width="1318"></amp-img>
  
    </a>
  

<p>Check the <strong>ELB</strong> checkbox and click <strong>Update</strong>.</p>
<blockquote>
<p>Remember, this needs to be done for <strong>both</strong> groups used by your application.</p>
</blockquote>
<h3 id="update-google-tag-manager-container-settings">Update Google Tag Manager container settings</h3>
<p>Finally, you can edit the Server container settings for your Google Tag Manager container, and add your new <strong>tagging server URL</strong>.</p>
<p>Go to <strong>Container Settings</strong> in the <strong>Admin</strong> section of your Server container in the Google Tag Manager UI, and add the URL to your tagging server in the respective field.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/tagging-server-url.jpg" title="Tagging server URL">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/tagging-server-url.jpg" layout="responsive" alt="Tagging server URL" height="638" width="1136"></amp-img>
  
    </a>
  

<p>You can test that everything works by clicking the <strong>Preview</strong> button.</p>
<p>Debug mode should open, and you should see your tagging server URL in the address bar.</p>


    <a href="https://www.simoahava.com/amp/images/2021/06/gtm-preview-mode-works.jpg" title="GTM preview mode works">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/06/gtm-preview-mode-works.jpg" layout="responsive" alt="GTM preview mode works" height="610" width="1936"></amp-img>
  
    </a>
  


        
          <h2 id="summary">Summary</h2>
<p>If you&rsquo;re an AWS pro, setting up the server application in Elastic Beanstalk should be quite easy to do. After all, it runs on a very straightforward Docker container image with hardly any customizations necessary.</p>
<p>If you&rsquo;re an AWS novice, then hopefully after this guide you&rsquo;ll understand a bit better how the different components play together. It&rsquo;s quite a world apart from the user experience of the Google Cloud Platform, isn&rsquo;t it?</p>
<p>In any case, this guide should have given you enough information to keep configuring the setup by yourself. You might want to tweak the environment configuration for your tagging server, in case you need more instances or more computation power.</p>
<p>You might also want to setup some request logging (you can configure this in the environment settings, too).</p>
<p>To get the BigQuery API to work, you&rsquo;ll basically need to add two new environment variables: <code>GOOGLE_APPLICATION_CREDENTIALS</code>, which needs to point to a file in the environment file system, and <code>GOOGLE_CLOUD_PROJECT</code> which is set to the project ID of the Google Cloud project where BigQuery is running.</p>
<p>The easiest way to do this is to create a new <code>Dockerfile</code> with the service account credentials added to the image, and then deploy both the credentials and the image from the command-line into the Elastic Beanstalk environment. This will be the subject of a new guide, or if someone else does the documentation for how to deploy the GTM server using the command-line interface, I&rsquo;ll link to it here.</p>
<p>Hopefully we&rsquo;ll see more guides for deploying the GTM server to other environments than Google&rsquo;s App Engine. <a href="https://www.twitter.com/holomarked">Mark Edmondson</a> has already released a walkthrough for <a href="https://code.markedmondson.me/gtm-serverside-cloudrun/">deploying to Google Cloud Run</a>, so that&rsquo;s something you might want to take a look at as well!</p>

        
      
    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.simoahava.com/amp/"></a>
    </figure>
    

    
    
    
        
    
    

    <section class="author">
      <h4>Simo Ahava</h4>
      
        <p>Husband | Father | Analytics developer</p>
      
      <div class="author-meta">
        <span class="author-location icon-location">Espoo, Finland</span>
        <span class="author-link icon-link"><a href="https://www.simoahava.com/">https://www.simoahava.com/</a></span>
      </div>
    </section>


    
    <div class="social">

<amp-social-share type="twitter"
  width="60"
  height="44"> </amp-social-share>





<amp-social-share type="linkedin"
                  width="60"
                  height="44"></amp-social-share>


    <amp-social-share type="facebook"
                      width="60"
                      height="44"></amp-social-share>

</div>


    
  </footer>
</article>

</main>
</div>

</body>
</html>

