

  
    
  


  

<!doctype html>



<html âš¡ lang="en-us" class="no-js">
    <head>

      <meta charset="utf-8">
        <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script><script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>

<script async src="https://cdn.ampproject.org/v0.js"></script>


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>
  .type-simmer {
      padding: 8px;
      background: rgba(179,138,197,0.2);
      box-shadow: 2px 2px 1px #ccc;
      border-radius: 5px;
  }
    /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{position:relative;z-index:10;min-height:100%;background:#fff;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{height:100%;max-height:100%}body{font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.8rem;line-height:1.75em;color:#3a4145;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;color:#2e2e2e;line-height:1.15em;margin:0 0 .4em;font-family:Open Sans,sans-serif;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;-webkit-transition:color .3s ease;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:3.2em 0;padding:0}blockquote{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:.4em solid #4a4a4a}blockquote p{margin:.8em 0;font-style:italic}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;color:#ccc}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{padding:1px 3px;font-size:.85em;white-space:pre-wrap;border:1px solid #e3edf3;border-radius:2px}code,pre,tt{font-family:Inconsolata,monospace,sans-serif;background:#f7fafb}pre{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 1.75em;border:1px solid #e3edf3;width:100%;padding:10px;font-size:.9em;white-space:pre;overflow:auto;border-radius:3px}pre code,pre tt{font-size:inherit;white-space:pre-wrap;background:transparent;border:none;padding:0}kbd{display:inline-block;margin-bottom:.4em;padding:1px 8px;border:1px solid #ccc;color:#666;text-shadow:#fff 0 1px 0;font-size:.9em;font-weight:700;background:#f4f4f4;border-radius:4px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 1px 0 0 #fff inset;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 1px 0 0 #fff}table{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0;width:100%;max-width:100%;background-color:transparent}table td,table th{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #efefef}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:transparent}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{position:relative;display:table;width:100%;height:100vh;margin-bottom:5rem;text-align:center;background:#222 no-repeat 50%;background-size:cover;overflow:hidden}.main-header.cover{background-image:url("https://www.simoahava.com/images/maisema.jpg")}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{position:relative;padding:35px 40px;margin:0 0 30px}.main-nav a{text-decoration:none;font-family:Open Sans,sans-serif}.scroll-down{display:block;position:absolute;z-index:100;bottom:45px;left:50%;font-size:1.5em;text-align:center;-webkit-animation:bounce 4s 2s infinite;animation:bounce 4s 2s infinite}.scroll-down:hover{color:#fff;-webkit-animation:none;animation:none}.home-template .main-header:after{display:block;content:" ";width:150px;height:130px;border-radius:100%;position:absolute;bottom:0;left:50%;margin-left:-75px;background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%)}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover.main-header:after,.no-cover .scroll-down{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{-webkit-box-sizing:border-box;box-sizing:border-box;height:38px}.menu-button{display:inline-block;float:right;padding:0 15px;border:1px solid #bfc8cd;opacity:1;color:#9eabb3;text-align:center;font-size:12px;text-transform:uppercase;line-height:35px;white-space:nowrap;border-radius:3px;background:rgba(0,0,0,.1);-webkit-transition:all .5s ease;transition:all .5s ease}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{position:absolute;top:0;left:0;right:0;height:70px;border:none;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent)}.no-cover .main-nav.overlay,.no-cover .menu-button{background:none}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{color:#222;border-color:#fff;background:#fff}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{margin:10px 0;font-size:5rem;letter-spacing:-1px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff}.page-description{margin:0;font-size:2rem;line-height:1.5em;font-weight:400;font-family:Merriweather,serif;letter-spacing:.01rem;color:hsla(0,0%,100%,.8)}.no-cover.main-header{min-height:160px;max-height:40vh;background:#f5f8fa}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{color:rgba(0,0,0,.4);border-color:rgba(0,0,0,.3)}.main-header-content .page-title{-webkit-animation:fade-in-down .6s;animation:fade-in-down .6s;-webkit-animation-delay:.2s;animation-delay:.2s}.main-header-content .page-description{-webkit-animation:fade-in-down .9s;animation:fade-in-down .9s;-webkit-animation-delay:.1s;animation-delay:.1s}.post{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.post-header{padding-bottom:10px}.post:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{margin:0;font-size:.9em;line-height:1.7em}.read-more{font-size:.8em;text-decoration:none;font-style:italic}.post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3}.author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{position:relative;padding:.3rem 40px 0 100px;min-height:77px}.post-date{display:inline-block;margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;text-transform:uppercase;font-size:1.3rem;white-space:nowrap}.user-image{position:absolute;top:0;left:0}.user-name{display:block;font-weight:700}.user-bio{display:block;max-width:440px;font-size:1.4rem;line-height:1.5em}.publish-meta{position:absolute;top:0;right:0;padding:4.3rem 0 4rem;text-align:right}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{text-align:center;font-size:.8em}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{content:"";position:absolute;z-index:-2;bottom:10px;width:50%;height:20%;max-width:480px;-webkit-box-shadow:0 15px 10px rgba(0,0,0,.7);box-shadow:0 15px 10px rgba(0,0,0,.7)}figure.polaroid:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}figure.polaroid{width:450px;position:relative;padding:15px;border:none;background:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.3),0 0 40px rgba(0,0,0,.1) inset;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);border-radius:4px;margin-bottom:1.5em;max-width:100%}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;outline:1px solid #ccc;padding:0;margin:0}figure.polaroid figcaption{font-size:1.3em;font-weight:400;font-family:Kaushan Script,cursive;text-align:right;padding:.8em .5em .4em}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{font-size:.8em;font-style:italic;text-align:center;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;margin-top:.5em;padding:.2em}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{text-decoration:none;font-size:2em}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{text-decoration:none;font-size:2em;color:#a2a2a2}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{padding:0;margin:0;border:none}.post-template .content{overflow:hidden}.post-template .post{margin-top:0;border-bottom:none;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{position:relative;margin:6rem 0 0;padding:6rem 0 0;border-top:1px solid #ebf2f6}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{margin:1rem 0;font-size:1.4rem;line-height:1.75em}.author-meta{padding:0;margin:0;list-style:none;font-size:1.4rem;line-height:1;font-style:italic}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;top:6rem;right:0;width:180px}.post-footer .share a{font-size:1.8rem;display:inline-block;margin:1rem 1.6rem 1.6rem 0;color:#bbc7cc;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{height:85px;min-height:0;margin-bottom:0;background:transparent}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{height:10vh;min-height:100px;background:transparent}.author-profile{padding:0 15px 5rem;border-bottom:1px solid #ebf2f6;text-align:center}.author-profile:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.author-image{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-56px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;background:#fff;z-index:2;-webkit-box-shadow:#e7eef2 0 0 0 1px;box-shadow:0 0 0 1px #e7eef2}.author-image .img{position:relative;display:block;width:100%;height:100%;background-size:cover;background-position:50%;border-radius:100%;background-image:url("https://www.simoahava.com/images/simo.png")}.author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0;-webkit-box-shadow:none;box-shadow:none}.author-title{margin:1.5rem 0 1rem}.author-bio{font-size:1.8rem;line-height:1.5em;font-weight:200;color:#50585d;letter-spacing:0;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{margin:2rem 0;font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.7rem}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@-webkit-keyframes bounce{0%,10%,25%,40%,50%{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}20%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}30%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);text-align:left;overflow-y:auto;font-family:Open Sans,Verdana,sans-serif;font-weight:700;font-size:11px;color:#909090;width:400px}#sidebar .nav-title{position:absolute;top:45px;left:30px;font-size:1.5em;font-weight:100;text-transform:uppercase;color:#fff}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{position:absolute;top:38px;right:25px;width:20px;height:20px;padding:0;font-size:10px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{content:"";position:absolute;top:0;width:20px;height:1px;background:#969696;top:15px;-webkit-transition:background .15s ease;transition:background .15s ease}#sidebar .nav-close:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}#sidebar .nav-close:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{margin:.4em 0 .2em;background:none;border:none;font-size:2rem}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{padding:90px 9% 5%;list-style:none;counter-reset:item}#sidebar li:before{display:block;float:right;padding-right:4%;padding-left:5px;text-align:right;font-size:1.2rem;vertical-align:bottom;color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item}#sidebar li{margin:0}#sidebar li a{text-decoration:none;line-height:1.4;font-size:1.4rem;display:block;padding:.6rem 4%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#sidebar li a:after{display:inline-block;content:" ...............................................................";color:hsla(0,0%,100%,.2);margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{content:" ";border-bottom:1px solid hsla(0,0%,100%,.5);width:100%;height:1px}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;bottom:30px;left:30px;right:30px;height:38px;padding:0 20px;text-align:center;font-size:12px;font-family:Open Sans,sans-serif;text-transform:uppercase;text-decoration:none;line-height:35px;border-radius:3px;background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{position:relative;width:80%;max-width:710px;margin:4rem auto;font-family:Open Sans,sans-serif;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;-webkit-transition:all .2s ease;transition:all .2s ease}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px solid #bfc8cd;text-decoration:none;border-radius:4px;-webkit-transition:border .3s ease;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{color:#889093;border-color:#98a0a4}.extra-pagination{display:none;border-bottom:1px solid #ebf2f6}.extra-pagination:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{position:relative;margin:8rem 0 0;padding:.5rem 15px;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{-webkit-box-sizing:border-box;box-sizing:border-box;height:auto;min-height:240px;height:60vh;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{margin-bottom:15px;height:40vh}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{padding:0 5px;border-radius:0;border-color:transparent;color:#2e2e2e;background:transparent}.menu-button:hover{color:#2e2e2e;border-color:transparent;background:none}body.nav-opened .menu-button{background:none;border:transparent}.main-nav.overlay a:hover{color:#fff;border-color:transparent;background:transparent}.no-cover .main-nav.overlay{background:none}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{width:auto;margin:2rem auto}.post{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{padding-bottom:0;margin-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{margin:0 0 2rem;padding:0 0 1.6rem;border-bottom:1px dashed #ebf2f6}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;margin:0;line-height:1.75em}.author-meta li:before{display:none}.newer-posts,.older-posts{position:static;margin:10px 0}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{max-width:100%;height:auto;border:1px solid #777;-webkit-box-shadow:5px 5px 2px rgba(0,0,0,.4);box-shadow:5px 5px 2px rgba(0,0,0,.4);margin-bottom:20px}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{color:#fff;background-color:#007bff}.badge{display:inline-block;padding:.25em .4em;font-size:80%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:.25rem}
    

</style>

        <link rel="canonical" href="https://www.simoahava.com/analytics/server-side-tagging-azure-app-service/">
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

        

        <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <meta name="theme-color" content="#ffffff" />

        
        <title>Server-Side Tagging With Azure App Service | Simo Ahava's blog</title>
        



  

<meta property="og:title" content="Server-Side Tagging With Azure App Service" />
<meta name="description" content="A guide for setting up Google Tag Manager server-side tagging in an Azure environment. The container is setup with Azure&#39;s App Service." />
<meta property="og:description" content="A guide for setting up Google Tag Manager server-side tagging in an Azure environment. The container is setup with Azure&#39;s App Service." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.simoahava.com/amp/analytics/server-side-tagging-azure-app-service/" />

	  <meta property="og:image" content="https://www.simoahava.com/images/2021/11/server-side-tagging-with-azure-app-service.jpg">
      <meta name="twitter:image" content="https://www.simoahava.com/images/2021/11/server-side-tagging-with-azure-app-service.jpg">
    


    
        <meta property="article:published_time" content="2021-11-26T05:00:00Z"/>
    
    
        <meta property="article:modified_time" content="2021-11-26T05:00:00Z"/>
    




    


    <meta property="og:site_name" content="Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development." />









    
        
        
            
        
        
        
    
    
    
        
            <meta property="article:section" content="Analytics" />
        
    
    
        
            <meta property="article:tag" content="google tag manager" />
        
            <meta property="article:tag" content="server-side tagging" />
        
            <meta property="article:tag" content="azure" />
        
    







    
        <meta name="twitter:card" content="summary"/>
    

    
        
        
            
        
        
        
    



<meta itemprop="name" content="Server-side Tagging With Azure App Service">
<meta itemprop="description" content="A guide for setting up Google Tag Manager server-side tagging in an Azure environment. The container is setup with Azure&#39;s App Service.">
<meta itemprop="datePublished" content="2021-11-26T07:00:00&#43;02:00" />
<meta itemprop="dateModified" content="2021-11-26T07:00:00&#43;02:00" />
<meta itemprop="wordCount" content="3937">



<meta itemprop="keywords" content="google tag manager,server-side tagging,azure," />
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.",
    
    "url": "https:\/\/www.simoahava.com\/amp\/"
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Server-side Tagging With Azure App Service | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2021\/11\/server-side-gtm-azure.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/amp\/analytics\/server-side-tagging-azure-app-service\/",
  "datePublished": "2021-11-26T07:00:00\u002b02:00",
  "dateModified": "2021-11-26T07:00:00\u002b02:00",
  "description": "A guide for setting up Google Tag Manager server-side tagging in an Azure environment. The container is setup with Azure\u0027s App Service.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>












    </head>
<body>

<amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
  <amp-sidebar id="sidebar" layout="nodisplay" side="right">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close" on="tap:sidebar.close" role="button" tabindex="1">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/categories/gtm-tips/">GTM Tips</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/about-simo-ahava/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/tools/">Tools</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/blog-statistics/">Blog Statistics</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/upcoming-talks/">Upcoming Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/custom-templates/">Templates</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/newsletter/">Newsletter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/">Full (non-AMP) site</a>
            </li>
        
        <amp-accordion>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Categories
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/gtm-tips/">gtm-tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-development/">web-development</a></li>
                
                </div>
            </section>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Tags
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ab-testing/">ab-testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/accelerated-mobile-pages/">accelerated-mobile-pages</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ad-blocker/">ad-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adblocker/">adblocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/add-on/">add-on</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adwords/">adwords</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/agile/">agile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amazon/">amazon</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amp/">amp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/android/">android</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/api/">api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app/">app</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app&#43;web/">app&#43;web</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app-engine/">app-engine</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/approval/">approval</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps/">apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps-script/">apps-script</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/array/">array</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/attribution/">attribution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audience-design/">audience-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audit/">audit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-event-tracking/">auto-event-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-link-domains/">auto-link-domains</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/aws/">aws</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/azure/">azure</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/basketball/">basketball</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/beforeunload/">beforeunload</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/best-practices/">best-practices</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/big-data/">big-data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bigquery/">bigquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/blogger/">blogger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bounce-rate/">bounce-rate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/built-in-variables/">built-in-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/calculated-metrics/">calculated-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/callback/">callback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/campaign-tracking/">campaign-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/celebration/">celebration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/change-history/">change-history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome/">chrome</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome-extension/">chrome-extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-tracking/">click-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-variables/">click-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clickstream/">clickstream</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-id/">client-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-template/">client-template</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clientid/">clientid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cloud-functions/">cloud-functions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cloud-run/">cloud-run</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cms/">cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cname/">cname</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conferences/">conferences</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent/">consent</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent-mode/">consent-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container/">container</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-export/">container-export</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-snippet/">container-snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content/">content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-blocker/">content-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-engagement/">content-engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-grouping/">content-grouping</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management-system/">content-management-system</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-security-policy/">content-security-policy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-strategy/">content-strategy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/context/">context</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversion/">conversion</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversions-api/">conversions-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookie/">cookie</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookiedomain/">cookiedomain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookies/">cookies</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/core-web-vitals/">core-web-vitals</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/creative/">creative</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain/">cross-domain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain-tracking/">cross-domain-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/csp/">csp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css/">css</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css-selectors/">css-selectors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom/">custom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimension/">custom-dimension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimensions/">custom-dimensions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html/">custom-html</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tag/">custom-html-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tags/">custom-html-tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-javascript/">custom-javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-metrics/">custom-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-templates/">custom-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/customtask/">customtask</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dan-wilkerson/">dan-wilkerson</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dashboard/">dashboard</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data/">data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-collection/">data-collection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer/">data-layer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer-variable/">data-layer-variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-model/">data-model</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-quality/">data-quality</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/datalayer/">datalayer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debug/">debug</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debugging/">debugging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/definition-of-success/">definition-of-success</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer/">developer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer-tools/">developer-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/development/">development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/document.write/">document.write</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dom/">dom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/duplicate/">duplicate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dynamic-content/">dynamic-content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/easter-egg/">easter-egg</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ecommerce/">ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/education/">education</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/element-visibility/">element-visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/engagement/">engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/enhanced-ecommerce/">enhanced-ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/environments/">environments</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/errors/">errors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event/">event</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listener/">event-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listeners/">event-listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/eventcallback/">eventcallback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/events/">events</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/excel/">excel</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exceptions/">exceptions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/experimentation/">experimentation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exploit/">exploit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/extension/">extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/facebook/">facebook</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/false/">false</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fields-to-set/">fields-to-set</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firebase/">firebase</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firestore/">firestore</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firing-rules/">firing-rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/folders/">folders</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form/">form</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form-tracking/">form-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/format-value/">format-value</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/forms/">forms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fpid/">fpid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga-spy/">ga-spy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga4/">ga4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gcp/">gcp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gdpr/">gdpr</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google/">google</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-ads/">google-ads</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics/">google-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-4/">google-analytics-4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-settings/">google-analytics-settings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud-platform/">google-cloud-platform</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-optimize/">google-optimize</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-sheets/">google-sheets</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag/">google-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag-manager/">google-tag-manager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-trends/">google-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/googletagmanager/">googletagmanager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/governance/">governance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag/">gtag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag.js/">gtag.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-sonar/">gtm-sonar</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-tools/">gtm-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm360/">gtm360</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtmtips/">gtmtips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guest-post/">guest-post</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guide/">guide</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hack/">hack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history/">history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-change-trigger/">history-change-trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-listener/">history-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hugo/">hugo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/iframe/">iframe</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/">intelligent-tracking-prevention</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/internal-traffic/">internal-traffic</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ios/">ios</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ip/">ip</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/it-department/">it-department</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/itp/">itp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/javascript/">javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/jquery/">jquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/klipfolio/">klipfolio</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/learning/">learning</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lighthouse/">lighthouse</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/links/">links</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/listeners/">listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/local/">local</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/localstorage/">localstorage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lookup-table/">lookup-table</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/macros/">macros</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketer/">marketer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketing/">marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/measurement-protocol/">measurement-protocol</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/meta-description/">meta-description</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/metrics/">metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/migration/">migration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mixcloud/">mixcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mobile/">mobile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modern-cms/">modern-cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modular-architecture/">modular-architecture</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/monitor/">monitor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/navigation/">navigation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/netbooster/">netbooster</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/new-ui/">new-ui</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/node.js/">node.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/nodejs/">nodejs</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/non-technical/">non-technical</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/open-source/">open-source</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/opt-out/">opt-out</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/owasp/">owasp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-load-time/">page-load-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-timings/">page-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/parameter-reporting/">parameter-reporting</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/penguin/">penguin</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/performance/">performance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/permissions/">permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/persistence/">persistence</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal-experience/">personal-experience</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/php/">php</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pii/">pii</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pitch/">pitch</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/plugins/">plugins</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/poetry/">poetry</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/postmessage/">postmessage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ppc/">ppc</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview/">preview</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview-mode/">preview-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/process/">process</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/proxy/">proxy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/public-speaking/">public-speaking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/query-string/">query-string</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/queue-time/">queue-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/r/">r</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/race-condition/">race-condition</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/reaktor/">reaktor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/recaptcha/">recaptcha</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/referral/">referral</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/regular-expression/">regular-expression</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/release/">release</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/resources/">resources</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/rules/">rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/safari/">safari</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sales/">sales</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/samesite/">samesite</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/schema/">schema</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/score-card/">score-card</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/scroll-depth/">scroll-depth</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search/">search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-api/">search-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-engine-optimization/">search-engine-optimization</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-trends/">search-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/security/">security</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/selection/">selection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo-report/">seo-report</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/serp/">serp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/server-side-tagging/">server-side-tagging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/session/">session</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sessions/">sessions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/simmer/">simmer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/single-page-apps/">single-page-apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-search/">site-search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-speed/">site-speed</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/slack/">slack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snippet/">snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snowplow/">snowplow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/social-interactions/">social-interactions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/soundcloud/">soundcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/spa/">spa</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/splash-page/">splash-page</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/static-site/">static-site</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/still-running/">still-running</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/storage/">storage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/support/">support</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/swift/">swift</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/syntax-highlight/">syntax-highlight</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solution/">tag-management-solution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solutions/">tag-management-solutions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-sequencing/">tag-sequencing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-templates/">tag-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tags/">tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tasks/">tasks</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/technique/">technique</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/test/">test</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/testing/">testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timer/">timer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timings/">timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tips/">tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tools/">tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker/">tracker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker-object/">tracker-object</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/training/">training</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger/">trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger-groups/">trigger-groups</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/triggers/">triggers</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/troubleshoot/">troubleshoot</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/undefined/">undefined</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/universal-analytics/">universal-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-id/">user-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-interface/">user-interface</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-permissions/">user-permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-timings/">user-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/v2/">v2</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable/">variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable-templates/">variable-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variables/">variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/videos/">videos</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/visibility/">visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/wcag/">wcag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/weather/">weather</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-development/">web-development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/webkit/">webkit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/website-redesign/">website-redesign</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workflow/">workflow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workspaces/">workspaces</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/youtube/">youtube</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/zones/">zones</a></li>
                
                </div>
            </section>
        
        </amp-accordion>
    </ul>
</amp-sidebar>

<div class="site-wrapper">



    <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">


    <a class="menu-button" on="tap:sidebar.toggle" role="button"><i class="fa fa-bars" aria-hidden="true"></i><span class="menu-button-label">Menu</span></a>


  </nav>
</header>



<main class="content" role="main">

  <article class="post type-post">

    <header class="post-header">
        <h1 class="post-title">Server-Side Tagging With Azure App Service</h1>
        <small>A guide for setting up Google Tag Manager server-side tagging in an Azure environment. The container is setup with Azure&#39;s App Service.</small>

        <section class="post-meta">
            


    




    <amp-img class="author-thumb" src="https://www.simoahava.com/images/simo.png" layout="fixed" width="24" height="24" alt="Author image"></amp-img>

Simo Ahava

in
    
        <a href="https://www.simoahava.com/amp/categories/analytics">Analytics</a>
    


on
    
        <a href="https://www.simoahava.com/amp/tags/google-tag-manager">#google tag manager</a>
    
        , <a href="https://www.simoahava.com/amp/tags/server-side-tagging">#server-side tagging</a>
    
        , <a href="https://www.simoahava.com/amp/tags/azure">#azure</a>
    


<time class="post-date" datetime="2021-11-26T07:00:00&#43;02:00">
    26 November 2021
</time>


<span class="post-date"><a href="https://www.simoahava.com/analytics/server-side-tagging-azure-app-service/">Non-AMP version</a></span>


        </section>
    </header>

    <section class="post-content">
      
        
        
          <p>To continue my extensive collection of <a href="https://tagmanager.google.com/">Google Tag Manager&rsquo;s</a> <a href="https://www.simoahava.com/amp/tags/server-side-tagging/">server-side tagging articles</a>, in this guide I&rsquo;ll walk you through how to set up a Server container in <a href="https://azure.microsoft.com/en-us/services/app-service/">Microsoft Azure&rsquo;s App Service</a> platform.</p>
<p>For my previous guides on manually provisioning a Server container, follow these links:</p>
<ul>
<li>Amazon AWS (Elastic Beanstalk): <a href="https://www.simoahava.com/amp/analytics/deploy-server-side-google-tag-manager-aws/">Deploy Server-side Google Tag Manager In AWS</a></li>
<li>Google Cloud (App Engine): <a href="https://www.simoahava.com/amp/analytics/provision-server-side-tagging-application-manually/">Provision Server-side Tagging Application Manually</a></li>
</ul>
<p>Azure&rsquo;s App Service is similar to AWS Elastic Beanstalk and GCP App Engine, in that it lets you create a web application from scratch with minimal effort.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/server-side-gtm-azure.jpg" title="Server-side Google Tag Manager for Azure">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/server-side-gtm-azure.jpg" layout="responsive" alt="Server-side Google Tag Manager for Azure" height="612" width="1856"></amp-img>
  
    </a>
  

<p>Out of these three competitors, I found Azure&rsquo;s setup to be the smoothest and the fastest. It&rsquo;s probably not <strong>the cheapest</strong>, and there are some roadblocks related to securing your tagging domains behind <strong>HTTPS</strong> (more on this later), but other than that it&rsquo;s a very pleasant ride.</p>
<!-- raw HTML omitted -->

        
        <article class="post type-simmer">
    <header class="post-header">
        <h2 class="post-title"><a href="https://www.simoahava.com/amp/newsletter/">The Simmer Newsletter</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
	Follow <a href="https://www.teamsimmer.com/newsletter/">this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href="https://www.teamsimmer.com/">Simmer online course platform</a>.
      </p>
      </section>
</article>

        
          <h2 id="what-youll-need">What you&rsquo;ll need</h2>
<p>The prerequisites are similar to the other cloud stacks:</p>
<ul>
<li>A <strong>credit card</strong> to set up billing (if you&rsquo;re a first-time user, you&rsquo;ll get <a href="https://azure.microsoft.com/en-us/free/">USD200 trial credit</a>).</li>
<li>A <strong>custom domain name</strong> to map the endpoint to (optional but strongly recommended).</li>
<li>Some way of securing the custom domain name behind <strong>HTTPS</strong>.</li>
<li>A <strong>Google Tag Manager Server container</strong>, created through the regular GTM container creation flow.</li>
</ul>
<p>If you recall from previous guides, a Google Tag Manager server-side tagging setup comprises <strong>two</strong> servers:</p>
<ul>
<li>The <strong>Preview server</strong>, which <em>must</em> be behind HTTPS, but doesn&rsquo;t need to be running on a custom domain.</li>
<li>The <strong>Tagging server</strong>, which <em>should</em> be behind HTTPS, and <em>should</em> run on a custom (sub)domain.</li>
</ul>
<p>I will <em>not</em> be instructing you on how to integrate the <a href="https://developers.google.com/tag-platform/tag-manager/server-side/api#bigquery">BigQuery API</a> â€“Â you can follow the <a href="https://developers.google.com/tag-platform/tag-manager/server-side/manual-setup-guide">official documentation</a> for details on how to add service account credentials to your Azure service.</p>
<p>In this guide, I&rsquo;ll walk you through the setup as a completely new user, so that you can follow the flow if you&rsquo;ve never tried Azure before. If you already <em>are</em> an established Azure user, you can skip to the beginning of the actual setup.</p>

        
          <h2 id="step-1-create-a-new-azure-account">Step 1: Create a new Azure account</h2>
<p>Browse to <a href="https://portal.azure.com/"><strong>https://portal.azure.com/</strong></a>. You need to log in with a <strong>Microsoft</strong> account.</p>
<p>If necessary, follow the prompts to create a new Microsoft account with the email address of your choice.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/sign-in-azure.jpg" title="Sign in to Azure">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/sign-in-azure.jpg" layout="responsive" alt="Sign in to Azure" height="586" width="503"></amp-img>
  
    </a>
  

<p>If you&rsquo;re a new Azure user, you can start with the free trial, which gives you <strong>$200</strong> credit to your billing.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/azure-free-trial.jpg" title="Azure free trial">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/azure-free-trial.jpg" layout="responsive" alt="Azure free trial" height="433" width="1061"></amp-img>
  
    </a>
  

<p>When you click through to the free trial, you need to input some information to create your new Azure account.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/free-trial.jpg" title="Sign up for free account">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/free-trial.jpg" layout="responsive" alt="Sign up for free account" height="934" width="1281"></amp-img>
  
    </a>
  

<p>After the credit runs out or you use the services paste the first <strong>30 days</strong>, Azure will prompt you if you want to continue with <strong>pay-as-you-go</strong>, so that you&rsquo;ll only pay for the actual services you use (beyond the free tiers).</p>
<p>You&rsquo;ll need to also provide your <strong>credit card information</strong> for identity verification. Azure will also use this card for billing you for services when necessary.</p>
<p>Once you&rsquo;re done inputting the credit card information, click <strong>Sign up</strong> to finally create the account.</p>

        
          <h2 id="azure-hierarchy">Azure hierarchy</h2>
<p>In Azure, the hierarchy of management is this:</p>
<ul>
<li>
<p><strong>Management groups</strong> let you group together <strong>subscriptions</strong> to manage access, policy, and compliance across subscriptions. In this guide, we&rsquo;ll use the default <strong>Root</strong> management group.</p>
</li>
<li>
<p><strong>Subscriptions</strong> associate users with the <strong>resources</strong> they create. With subscriptions, you can set budgets and policies that cover the resources you create in the subscription. A subscription should have been automatically created for you when you set up your Azure account.</p>
</li>
<li>
<p><strong>Resource groups</strong> group <strong>resources</strong> (d&rsquo;oh) that have a similar purpose. In this guide, we&rsquo;ll create a single resource group to contain all the resources we create for the server-side tagging setup.</p>
</li>
<li>
<p><strong>Resources</strong> are the individual cloud components you work with while in Azure. We&rsquo;re going to create a bunch of resources as we walk through the steps of this guide.</p>
</li>
</ul>
<p>When you created the Azure account, a new subscription was automatically created for you, typically named <code>Azure subscription 1</code>.</p>
<p>To find it, type <code>subscriptions</code> into the search bar in the top, and click the link to <strong>Subscriptions</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/subscriptions.jpg" title="Subscriptions">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/subscriptions.jpg" layout="responsive" alt="Subscriptions" height="390" width="952"></amp-img>
  
    </a>
  

<p>You might need to uncheck the &ldquo;Show only subscriptions selected in the global subscriptions filter&rdquo; option to see your subscription listed.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/azure-subscription-1.jpg" title="Azure subscription 1">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/azure-subscription-1.jpg" layout="responsive" alt="Azure subscription 1" height="382" width="1659"></amp-img>
  
    </a>
  

<p>If you don&rsquo;t have any subscriptions listed, you can click <strong>+ Add</strong> to create a new one. Just follow the prompts and you&rsquo;ll be fine.</p>
<p>If you click to open the subscription in the list, you can rename it, check its billing, and/or set cost alerts and budgets!</p>

        
          <h2 id="step-2-create-a-new-resource-group">Step 2: Create a new Resource Group</h2>
<blockquote>
<p>Note! You <em>could</em> simply go ahead and directly create a new <strong>App Service</strong> resource and a resource group would be automatically generated for you. But I like a more methodological approach, which is why I want to create all the assets manually.</p>
</blockquote>
<p>Type <code>resource groups</code> in the search bar and click the corresponding icon to open the <strong>Resource groups</strong> dashboard.</p>
<p>Here, click the <strong>+ Create</strong> button to start creating a new resource group.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/create-resource-group.jpg" title="Create resource group">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/create-resource-group.jpg" layout="responsive" alt="Create resource group" height="289" width="493"></amp-img>
  
    </a>
  

<p>In the creation process, the three selections you need to make are:</p>
<ul>
<li><strong>Subscription</strong> â€“Â Select the <code>Azure subscription 1</code> or whatever subscription you want to use.</li>
<li><strong>Resource group</strong> â€“Â Give the resource group a name (e.g. <code>gtm-server-side-tagging</code>).</li>
<li><strong>Region</strong> â€“Â Choose the Azure region that&rsquo;s best for your use case.</li>
</ul>
<p>For more details about region selection, see <a href="https://azure.microsoft.com/en-us/global-infrastructure/geographies/">this page</a>.</p>
<p>Here&rsquo;s what I selected:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/resource-group-options.jpg" title="Resource group options">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/resource-group-options.jpg" layout="responsive" alt="Resource group options" height="333" width="738"></amp-img>
  
    </a>
  

<p>Once finished configuring, click <strong>Review + create</strong> in the bottom bar.</p>
<p>Once validation passes, click <strong>Create</strong> in the bottom bar.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/create-group.jpg" title="Create resource group">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/create-group.jpg" layout="responsive" alt="Create resource group" height="533" width="675"></amp-img>
  
    </a>
  

<p>You should see your new resource group listed in the dashboard:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/resource-group-done.jpg" title="Resource group created">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/resource-group-done.jpg" layout="responsive" alt="Resource group created" height="293" width="608"></amp-img>
  
    </a>
  


        
          <h2 id="step-3-create-the-preview-server">Step 3: Create the Preview server</h2>
<p>The first thing we&rsquo;ll create is the <strong>Preview</strong> server.</p>
<p>This is an HTTP endpoint to which the <em>tagging</em> server forwards all requests that need to be exposed in preview mode. The main requirement is that it&rsquo;s behind <strong>HTTPS</strong>. It does <em>not</em> need to reside on a custom domain, and you can just use the default domain that Azure provides (which is, conveniently, automatically accessible through HTTPS).</p>
<h3 id="create-the-app-service">Create the App Service</h3>
<p>To create the server, type <code>app services</code> into the search bar and click the <strong>App Services</strong> link.</p>
<p>In the dashboard, click <strong>+ Create</strong> to create a new App Service.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/create-app-service.jpg" title="Create App Service">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/create-app-service.jpg" layout="responsive" alt="Create App Service" height="291" width="439"></amp-img>
  
    </a>
  

<h3 id="configure-the-instance">Configure the instance</h3>
<p>The first thing to do in the creation flow is to select your <strong>subscription</strong> and <strong>resource group</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/select-subscription-and-resource-group.jpg" title="Select subscription and resource group">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/select-subscription-and-resource-group.jpg" layout="responsive" alt="Select subscription and resource group" height="197" width="729"></amp-img>
  
    </a>
  

<p>Next, give the Preview server a <strong>name</strong>. This will become the subdomain under <code>azurewebsites.net</code> you&rsquo;ll use to access the server.</p>
<p>Select <strong>Docker Container</strong> as the publish option. Keep <strong>Linux</strong> checked for the operating system.</p>
<p>Select the App Service <strong>region</strong> you want to use â€“Â might make sense to select the same one you configured for the resource group earlier.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/instance-details.jpg" title="Instance details">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/instance-details.jpg" layout="responsive" alt="Instance details" height="264" width="715"></amp-img>
  
    </a>
  

<p>Finally, click <strong>Create new</strong> for the <strong>Linux Plan</strong> option. Give the plan a name â€“Â you can just use the same name you gave to the instance previously.</p>
<p>For <strong>Sku and size</strong>, click <strong>Change size</strong>. Under <strong>Dev / Test</strong>, choose <strong>B1</strong> (one of the lowest specs).</p>
<blockquote>
<p>We can choose a flimsy spec like this because the Preview server is only used occasionally and does not need to be that responsive. <strong>F1</strong> might be tempting, but the lack of compute minutes will really make it difficult to use Preview mode for longer stretches.</p>
</blockquote>


    <a href="https://www.simoahava.com/amp/images/2021/11/select-b1.jpg" title="Select B1">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/select-b1.jpg" layout="responsive" alt="Select B1" height="552" width="1364"></amp-img>
  
    </a>
  

<p>This is what <strong>App Service Plan</strong> should look like now:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/app-service-plan.jpg" title="App Service Plan">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/app-service-plan.jpg" layout="responsive" alt="App Service Plan" height="488" width="1454"></amp-img>
  
    </a>
  

<p>When happy, click the <strong>Next : Docker &gt;</strong> button in the bottom bar to open the Docker tab.</p>
<h3 id="configure-the-docker-container">Configure the Docker container</h3>
<p>Docker is a technology that uses <em>containers</em> to provide all-inclusive application setups. For example, the entire Google Tag Manager server-side tagging infrastructure is handily available in a public Docker container, which you can configure with just a few environment variables (more on these in a bit).</p>
<p>In the Docker tab, keep <strong>Options</strong> as it is (&ldquo;Single Container&rdquo;), but choose <strong>Docker Hub</strong> as the Image source.</p>
<p>Keep <strong>Access Type</strong> as Public, and past the following container URI into the <strong>Image and tag</strong> field:</p>
<p><code>gcr.io/cloud-tagging-10302018/gtm-cloud-image:stable</code></p>
<p>This is the public URL to the server-side GTM Docker container.</p>
<p>Here&rsquo;s what your settings should look like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/docker-tab.jpg" title="Docker tab">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/docker-tab.jpg" layout="responsive" alt="Docker tab" height="354" width="728"></amp-img>
  
    </a>
  

<p>Now, you can click the <strong>Review + create</strong> button in the bottom bar. Review your configuration, and then click <strong>Create</strong> in the bottom bar to create the Preview server!</p>
<h3 id="configure-application-settings">Configure Application Settings</h3>
<p>It will take a while for the service to deploy. Once it&rsquo;s done, the dashboard should have a button <strong>Go to resource</strong>, so click that.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/go-to-resource.jpg" title="Go to resource">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/go-to-resource.jpg" layout="responsive" alt="Go to resource" height="417" width="847"></amp-img>
  
    </a>
  

<blockquote>
<p>If, for some reason, you can&rsquo;t see this button or you close the tab, you can always find your server by typing <code>app services</code> in the Azure search bar, clicking over to App Services, and then selecting the Preview server service from the list.</p>
</blockquote>
<p>The next thing we need to do is configure some <em>environment variables</em>, known as <strong>Application settings</strong> in Azure. These establish certain conditions for the Docker container.</p>
<p>Click <strong>Configuration</strong> in the navigation.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/preview-configuration.jpg" title="Preview server configuration">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/preview-configuration.jpg" layout="responsive" alt="Preview server configuration" height="282" width="435"></amp-img>
  
    </a>
  

<p>You&rsquo;re going to be adding <strong>two</strong> new Application settings here. The first instructs the service that this particular server is the <strong>Preview server</strong>. The second instructs the service to which <strong>Google Tag Manager server container</strong> this server should be linked.</p>
<p>Click <strong>+ New application setting</strong>.</p>
<p>For <strong>Name</strong>, type <code>RUN_AS_PREVIEW_SERVER</code>. For <strong>Value</strong>, type <code>true</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/run-as-preview-server.jpg" title="Run as preview server">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/run-as-preview-server.jpg" layout="responsive" alt="Run as preview server" height="210" width="421"></amp-img>
  
    </a>
  

<p>Click <strong>OK</strong>.</p>
<p>Click <strong>+ New application setting</strong> to add another environment variable.</p>
<p>For <strong>Name</strong>, type <code>CONTAINER_CONFIG</code>.</p>
<p>For <strong>Value</strong>, open the <strong>Server container</strong> you&rsquo;ve created in the <a href="https://tagmanager.google.com/"><strong>Google Tag Manager</strong> user interface</a>.</p>
<p>Click the Container ID in the top bar to open the container information overlay.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/container-id.jpg" title="Container ID">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/container-id.jpg" layout="responsive" alt="Container ID" height="960" width="2450"></amp-img>
  
    </a>
  

<p>If you&rsquo;re prompted about how to install Google Tag Manager, choose <strong>Manually provision tagging server</strong>.</p>
<p>In any case, what you&rsquo;re looking for is the <strong>Container Config</strong> string. Copy it to the clipboard once you find it.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/copy-container-config.jpg" title="Copy container config">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/copy-container-config.jpg" layout="responsive" alt="Copy container config" height="392" width="1024"></amp-img>
  
    </a>
  

<p>Back in Azure, set this Container Config string as the <strong>Value</strong> of the <code>CONTAINER_CONFIG</code> application setting. Click <strong>OK</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/container-config-setting.jpg" title="Container Config Setting">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/container-config-setting.jpg" layout="responsive" alt="Container Config Setting" height="392" width="1564"></amp-img>
  
    </a>
  

<p>Finally, click <strong>Save</strong> in the top bar to save the new settings and force a redeployment of the Preview server.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/save-application-settings.jpg" title="Save application settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/save-application-settings.jpg" layout="responsive" alt="Save application settings" height="492" width="942"></amp-img>
  
    </a>
  

<h3 id="configure-health-check">Configure Health check</h3>
<p>The last thing you need to do before being able to test your setup is to configure the <strong>Health check</strong>.</p>
<p>Azure can periodically ping a specific endpoint in your service to make sure that the service is up and running. If the service doesn&rsquo;t respond with a valid status, Azure flags it as <em>unhealthy</em>, forcing a scale-down and redeployment of the instance.</p>
<p>This is <em>very</em> important, because Google Tag Manager also uses this mechanism to get your service to fetch the latest version of the server-side tagging software from Google server.</p>
<p>In your Preview server service, scroll down the menu until you find the <strong>Health check</strong> option. Click it.</p>
<p>Click <strong>Enable</strong> to activate the health check and type <code>/healthz</code> as the <strong>Path</strong>.</p>
<p>Finally, click <strong>Save</strong> to save the changes and force yet another redeployment of the service.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/configure-health-check.jpg" title="Configure health check">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/configure-health-check.jpg" layout="responsive" alt="Configure health check" height="1320" width="1616"></amp-img>
  
    </a>
  

<h3 id="test-the-preview-server">Test the Preview server</h3>
<p>You&rsquo;re finally ready to test the server!</p>
<p>Browse to the <strong>Overview</strong> dashboard of your App Service.</p>
<p>Here, keep hitting the <strong>Refresh</strong> button in the top bar of the dashboard until the <strong>Health Check</strong> response is good. It might take a while!</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/health-check-ok.jpg" title="Health check OK">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/health-check-ok.jpg" layout="responsive" alt="Health check OK" height="674" width="2072"></amp-img>
  
    </a>
  

<p>The health check might even indicate that there&rsquo;s a <strong>Degraded</strong> instance, but keep hitting Refresh. If you&rsquo;ve followed these steps it <em>will</em> show <strong>Healthy</strong> soon.</p>
<p>Finally, click the <strong>URL</strong> to open the <code>.azurewebsites.net</code> URL for your Preview server in a new tab. You should see a <code>Not Found</code> message on the page.</p>
<p>Add the path <code>/healthy</code> to the end of the URL and load the page. Now you should see <code>ok</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/healthy-ok.jpg" title="Healthy OK">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/healthy-ok.jpg" layout="responsive" alt="Healthy OK" height="256" width="1604"></amp-img>
  
    </a>
  

<p>Congratulations! You&rsquo;ve created the Preview server. Now it&rsquo;s just the <strong>Tagging server</strong> left â€“Â luckily it&rsquo;s <em>almost</em> exactly the same steps, so it should be easy to do.</p>

        
          <h2 id="step-4-create-the-tagging-server">Step 4: Create the Tagging server</h2>
<p>The Tagging server becomes the actual endpoint with which you&rsquo;ll be communicating.</p>
<p>This means that <em>ideally</em>, you&rsquo;d map one or more <strong>custom domains</strong> to this server, each of which is a subdomain of whatever website is sending data to your container. This is to ensure the data stream happens in a <em>first-party HTTP request-response context</em>.</p>
<p>But let&rsquo;s not get ahead of ourselves.</p>
<p>Setting up the Tagging server is remarkably similar to setting up the Preview server.</p>
<h3 id="create-the-app-service-1">Create the App Service</h3>
<p>Type <code>app services</code> into the search bar, and click the <strong>App Services</strong> option.</p>
<p>As before, click <strong>+ Create</strong> to create a new service.</p>
<h3 id="configure-the-instance-1">Configure the instance</h3>
<p>Under <strong>Project Details</strong>, choose the <strong>Subscription</strong> you used before, and choose the <strong>Resource Group</strong> you used for the Preview server, too.</p>
<p>Under <strong>Instance Details</strong>, give the server a descriptive name. It&rsquo;s a good idea to mirror the name you gave to the Preview server, so in my case the name would be <code>sgtm-ahava-tagging-server</code>.</p>
<p>Choose <strong>Docker Container</strong> as the Publish type, keep <strong>Linux</strong> as the OS, and select the same region from the <strong>Region</strong> selector that you configured for the Preview server.</p>
<p>This is what the setup should look like thus far:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/tagging-server-details.jpg" title="Tagging server details">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/tagging-server-details.jpg" layout="responsive" alt="Tagging server details" height="1268" width="1472"></amp-img>
  
    </a>
  

<p>For <strong>App Service Plan</strong>, click <strong>Create new</strong>. Give it a descriptive name, such as the same one you set for the service instance. In my case, I set the name to <code>gtm-ahava-tagging-server</code>.</p>
<p>Click <strong>Change size</strong> under <strong>Sku and size</strong> to choose the instance profile.</p>
<p>For this example, I chose the <strong>S1</strong> instance type, which is the smallest instance type for <strong>Production</strong> setups.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/instance-s1.jpg" title="Instance S1">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/instance-s1.jpg" layout="responsive" alt="Instance S1" height="1222" width="1582"></amp-img>
  
    </a>
  

<p>Whatever you choose, make sure it supports <strong>Custom domains</strong> and <strong>Auto scale</strong>.</p>
<p>Click <strong>Apply</strong> when you&rsquo;ve selected the instance type.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/app-service-plan-tagging-server.jpg" title="Tagging server app service plan">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/app-service-plan-tagging-server.jpg" layout="responsive" alt="Tagging server app service plan" height="462" width="1472"></amp-img>
  
    </a>
  

<p>Click the <strong>Next : Docker &gt;</strong> button in the bottom bar when ready.</p>
<h3 id="configure-the-docker-container-1">Configure the Docker container</h3>
<p>Here, set the exact same settings as with the Preview server.</p>
<p>Remember to set <code>gcr.io/cloud-tagging-10302018/gtm-cloud-image:stable</code> as the value of the <strong>Image and tag</strong> field.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/docker-settings-tagging.jpg" title="Docker settings tagging">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/docker-settings-tagging.jpg" layout="responsive" alt="Docker settings tagging" height="678" width="1442"></amp-img>
  
    </a>
  

<p>Finally, click <strong>Review + create</strong> in the bottom bar. Click <strong>Create</strong> if you&rsquo;re happy with your configuration overview.</p>
<p>Once the instance has been deployed, click <strong>Go to resource</strong> on the deployment overview page.</p>
<h3 id="configure-the-application-settings">Configure the Application settings</h3>
<p>It&rsquo;s time to add the environment variables again.</p>
<p>Choose <strong>Configuration</strong> from the service navigation.</p>
<p>Click <strong>+ New application setting</strong>.</p>
<p>As the <strong>Name</strong>, set <code>PREVIEW_SERVER_URL</code>.</p>
<p>As the value, add the <strong>origin URL</strong> of your Preview server. That is, everything up to the first <code>/</code> path divider. This is what my setting looks like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/preview-server-url-setting.jpg" title="Preview server URL setting">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/preview-server-url-setting.jpg" layout="responsive" alt="Preview server URL setting" height="400" width="1134"></amp-img>
  
    </a>
  

<p>Then, click <strong>+ New application setting</strong> to add a second setting.</p>
<p>This is <code>CONTAINER_CONFIG</code> again, so copy-paste the Container Config string from the Google Tag Manager user interface as you did before.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/container-config-setting.jpg" title="Container config setting">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/container-config-setting.jpg" layout="responsive" alt="Container config setting" height="392" width="1564"></amp-img>
  
    </a>
  

<p>Click <strong>Save</strong> to apply the settings.</p>
<h3 id="configure-the-health-check">Configure the Health Check</h3>
<p>Next, browse to the <strong>Health check</strong> settings in the service navigation.</p>
<p>Configure this exactly as you did before. Here&rsquo;s a reminder of what it should look like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/configure-health-check.jpg" title="Configure health check">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/configure-health-check.jpg" layout="responsive" alt="Configure health check" height="1320" width="1616"></amp-img>
  
    </a>
  

<p>Click <strong>Save</strong> to apply the settings.</p>
<h3 id="configure-autoscaling">Configure autoscaling</h3>
<p><strong>Autoscaling</strong> means that the number of instances your app uses should scale <strong>out</strong> when the need for more instances arises (e.g. CPU utilization passes a threshold), and scale <strong>in</strong> when it&rsquo;s OK to decrease the number of instances.</p>
<p>You don&rsquo;t <em>have</em> to configure autoscaling. You could use just the single instance you started with if it&rsquo;s powerful enough to handle your traffic.</p>
<p>However, having <em>at least one instance</em> for redundancy is a good idea, especially if there are resource availability issues in your Azure region.</p>
<p>Autoscaling is also a good idea to adjust to potential traffic peaks that you need to quickly react to with enough capacity to make sure that your endpoint doesn&rsquo;t become unresponsive.</p>
<p>To configure autoscaling, choose <strong>Scale out (App Service plan)</strong> from the Tagging server navigation.</p>
<blockquote>
<p>Autoscaling needs to be done <em>only</em> to the Tagging server. Your Preview server is always going to have minimal utilization, so it does not need the type of power that your Tagging server requires.</p>
</blockquote>
<p>Here, choose <strong>Custom autoscale</strong> to configure autoscaling settings.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/set-custom-autoscale.jpg" title="Set custom autoscale">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/set-custom-autoscale.jpg" layout="responsive" alt="Set custom autoscale" height="1252" width="1644"></amp-img>
  
    </a>
  

<p>You need to add <strong>two rules</strong>: a Scale Out rule and a Scale In rule. Click <strong>+ Add a rule</strong> to begin.</p>
<p>How you configure these rules is really a matter of experience and preference. You can add more than one Scale Out rule, for example, to account for larger increases in utilization (i.e. larger traffic spikes), adding multiple instances in one go.</p>
<p>I&rsquo;m just going to use a very simple setup here. When CPU utilization is greater than or equal to <strong>60%</strong>, I want to scale out to one additional instance. This is what the configuration looks like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/scale-out.jpg" title="Scale Out">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/scale-out.jpg" layout="responsive" alt="Scale Out" height="644" width="1124"></amp-img>
  
    </a>
  

<p>Click <strong>Add</strong> when ready.</p>
<p>Click <strong>+ Add a rule</strong> to add a second rule.</p>
<p>Here, the rule is the converse of what I added for the Scale Out. This time, if the CPU threshold is <strong>below 60%</strong>, I want to <strong>decrease instance count by 1</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/scale-in.jpg" title="Scale In">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/scale-in.jpg" layout="responsive" alt="Scale In" height="648" width="1136"></amp-img>
  
    </a>
  

<p>Click <strong>Add</strong> when ready.</p>
<p>Finally, set the <strong>Minimum</strong>, <strong>Maximum</strong>, and <strong>Default</strong> limits for your instances. The minimum is the lowest your setup will scale in to, the maximum is the highest number of instances to scale out to, and default is what App Service will attempt to scale to if autoscaling doesn&rsquo;t work, for whatever reason.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/instance-limits.jpg" title="Instance limits">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/instance-limits.jpg" layout="responsive" alt="Instance limits" height="154" width="1674"></amp-img>
  
    </a>
  

<p>Once you&rsquo;re happy, click <strong>Save</strong> to save and redeploy.</p>
<blockquote>
<p>Be careful with autoscaling! You can easily ramp up a huge bill if you set the thresholds too low or if you&rsquo;re too cavalier with the default instance limits. It&rsquo;s a good idea to configure your <strong>Subscription</strong> with some budgets and cost limits!</p>
</blockquote>
<p>If you see a <code>MissingSubscriptionRegistration</code> error when trying to save the settings, you need to browse to your <strong>Subscription</strong> in the Azure portal, click through to <strong>Resource providers</strong>, and <strong>Register</strong> <code>microsoft.insights</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/register-microsoft-insights.jpg" title="Register microsoft insights">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/register-microsoft-insights.jpg" layout="responsive" alt="Register microsoft insights" height="648" width="1920"></amp-img>
  
    </a>
  

<h3 id="test-the-server">Test the server</h3>
<p>Finally, go to the <strong>Overview</strong> leaf of the App Service.</p>
<p>Here, click <strong>Refresh</strong> until you see as many <strong>Healthy</strong> instances as you configured the minimum for your autoscaling setup.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/healthy-tagging-server.jpg" title="Healthy tagging server">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/healthy-tagging-server.jpg" layout="responsive" alt="Healthy tagging server" height="498" width="1826"></amp-img>
  
    </a>
  

<p>Next, click the <strong>URL</strong> in the Overview dashboard to open the Tagging server URL in a new tab. You should see the <code>Not found</code> message again.</p>
<p>And, again, add the <code>/healthy</code> path to the end of the URL and you should see the <code>ok</code> message.</p>
<p>If you want to take testing a step further, you can copy the URL to your Tagging server and add it to your <strong>Server container settings</strong> in the Google Tag Manager UI, like so:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/container-settings.jpg" title="Container Settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/container-settings.jpg" layout="responsive" alt="Container Settings" height="628" width="1142"></amp-img>
  
    </a>
  

<p>Click <strong>Save</strong> to save the settings.</p>
<p>Now, you can click the <strong>Preview</strong> button in the GTM UI to open a Preview mode window to your server-side tagging environment.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/preview-container.jpg" title="Preview container">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/preview-container.jpg" layout="responsive" alt="Preview container" height="436" width="1034"></amp-img>
  
    </a>
  

<p>Then, in a new tab, browse to your Tagging server URL again. If you want, you can add a custom path to the request, such as <code>/test</code>. When you browse to that URL, you should see an <strong>HTTP Error 400</strong> page.</p>
<p>If you do, then <strong>everything is working fine!</strong>. A 400 error is returned by your Server container when there are no <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/#clients-and-tags">Clients to claim the request</a>.</p>
<p>If you now open the Preview mode tab, you should see the request for the URL you visited.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/test-request.jpg" title="Test request">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/test-request.jpg" layout="responsive" alt="Test request" height="1132" width="1522"></amp-img>
  
    </a>
  

<p>Well done! You now have a fully functioning server-side tagging setup running on Azure.</p>

        
          <h2 id="optional-configure-a-custom-domain">(Optional) Configure a custom domain</h2>
<p>This is where it gets tricky with Azure, unfortunately.</p>
<p>With <a href="https://www.simoahava.com/amp/analytics/deploy-server-side-google-tag-manager-aws/">Amazon AWS</a> and <a href="https://www.simoahava.com/amp/analytics/provision-server-side-tagging-application-manually/">Google Cloud Platform</a>, mapping a custom domain <em>and</em> provisioning a (free) SSL certificate for it is super easy.</p>
<p>With Azure, it&rsquo;s definitely easy to map a custom domain, and it&rsquo;s also quite easy to assign a free, managed SSL certificate to it. However, you can only add the <em>managed</em> SSL certificate to a <strong>subdomain</strong> if that subdomain is mapped with a <strong>CNAME DNS record</strong>. If the domain is mapped with an A record, you can only assign the managed certificate to an <strong>apex domain</strong> (i.e. naked domain name).</p>
<p>This is a bummer, because you <em>want</em> to map your server-side GTM endpoint as a <strong>subdomain</strong> (so not an apex domain), and <em>specifically</em> with A records. Why? Because <a href="https://www.cookiestatus.com/safari/#cname-cloaking">Safari / WebKit browsers shorten the lifetime of first-party cookies</a> set with HTTP responses from domains mapped with CNAME records!</p>
<p>This is a considerable limitation of first-party data collection, which is why you should <em>always</em> use A records to map the subdomains you&rsquo;ll use with server-side tagging.</p>
<p>Because of this, I won&rsquo;t go into the details of how to actually secure the domain name behind HTTPS. There are many options for you:</p>
<ul>
<li>
<p>You can delegate the subdomain name servers to something like <a href="https://www.cloudflare.com/">Cloudflare</a>, and use <a href="https://developers.cloudflare.com/ssl/origin-configuration/ssl-modes">Cloudflare&rsquo;s end-to-end SSL</a> to secure the traffic.</p>
</li>
<li>
<p>You can <a href="https://docs.microsoft.com/en-us/azure/app-service/configure-ssl-certificate#import-an-app-service-certificate">purchase an SSL certificate</a> through Azure.</p>
</li>
<li>
<p>You can use a free service like <a href="https://dev.to/ope/securing-your-azure-web-app-with-let-s-encrypt-4g99">Let&rsquo;s Encrypt</a>.</p>
</li>
</ul>
<blockquote>
<p>I recommend taking a look at <strong>Let&rsquo;s Encrypt</strong>! It&rsquo;s very easy to apply the LE certificate to your service. Just follow the guide behind the link above and you&rsquo;ll be set in Azure. The only downside is that the certificate <strong>won&rsquo;t auto-renew</strong>, so you&rsquo;ll need to manually renew it whenever it&rsquo;s about to expire.</p>
</blockquote>
<p>There are many ways to skin the cat, and I leave it up to you to figure out which works best in your environment.</p>
<p>To map the custom domain itself, you need to open your <strong>Tagging server</strong> App Service again.</p>
<blockquote>
<p>Remember, the custom domain only needs to be mapped for the <em>Tagging server</em> â€“Â the Preview server can use the <code>*.azurewebsites.net</code> URL.</p>
</blockquote>
<p>Here, choose <strong>Custom domains</strong> in the navigation.</p>
<p>Next, toggle <strong>HTTPS Only</strong> <em>on</em>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/toggle-https-on.jpg" title="Toggle HTTPS on">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/toggle-https-on.jpg" layout="responsive" alt="Toggle HTTPS on" height="1110" width="1590"></amp-img>
  
    </a>
  

<p>Now, copy the <strong>IP address</strong> string. In your <strong>DNS hosting service</strong>, add a new <strong>A record</strong> for the subdomain you want to map, and make that point to the IP address.</p>
<p>This is what my subdomain mapping looks like in GoDaddy. I&rsquo;ve chosen <code>sgtm-demo.teamsimmer.com</code> as one of the custom domains I&rsquo;ll map to this service.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/ip-a-record.jpg" title="IP A record">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/ip-a-record.jpg" layout="responsive" alt="IP A record" height="376" width="1744"></amp-img>
  
    </a>
  

<p>Next, copy the <strong>Custom Domain Verification ID</strong> from the Azure App Service page. Create a new <strong>TXT record</strong> with that value, and set the host to your subdomain name <strong>prefixed with <code>asuid.</code></strong>. For example, this is what my TXT record looks like:</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/txt-record.jpg" title="TXT record">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/txt-record.jpg" layout="responsive" alt="TXT record" height="462" width="2142"></amp-img>
  
    </a>
  

<p>When done, return to the Azure App Service page and click <strong>+ Add custom domain</strong>. Type the full name of your custom domain. In my case it was <code>sgtm-demo.teamsimmer.com</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/add-custom-domain.jpg" title="Add custom domain">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/add-custom-domain.jpg" layout="responsive" alt="Add custom domain" height="382" width="588"></amp-img>
  
    </a>
  

<p>Click <strong>Validate</strong>, wait for the green checkmarks, and then click <strong>Add custom domain</strong>.</p>
<blockquote>
<p>You might have to wait a while for DNS to propagate, so don&rsquo;t lose hope if validation doesn&rsquo;t pass immediately.</p>
</blockquote>
<p>Now that you&rsquo;ve added the custom domain, you&rsquo;ll need to configure SSL for it. I&rsquo;ll let you figure out how to do this, following the tips I added at the beginning of this chapter.</p>
<p>Here&rsquo;s what the setup looks like after configuring SSL properly. I used <a href="https://dev.to/ope/securing-your-azure-web-app-with-let-s-encrypt-4g99">Let&rsquo;s Encrypt</a> to assign a free certificate for the domain.</p>


    <a href="https://www.simoahava.com/amp/images/2021/11/ssl-domain.jpg" title="SSL domain">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/11/ssl-domain.jpg" layout="responsive" alt="SSL domain" height="364" width="1542"></amp-img>
  
    </a>
  

<p>Once you&rsquo;ve configured the domain, you can add it to your Google Tag Manager Server <strong>container settings</strong> as the Server Container URL.</p>
<p>After that, you can communicate with the server-side tagging endpoint using your custom domain!</p>
<p>That&rsquo;s it â€“Â we&rsquo;re all set.</p>

        
          <h2 id="summary">Summary</h2>
<p>I hope the length of this guide didn&rsquo;t fool you â€“ setting up the server-side tagging environment in Microsoft Azure is a <em>breeze</em>.</p>
<p>I really like working in Azure. It gets far less love than AWS and GCP, for no good reason. The accessibility is almost on par with Google Cloud Platform, the documentation is <em>excellent</em>, and the costs are competitive.</p>
<p>The only downside I could think of in this particular setup was the lack of a <strong>managed SSL certificate</strong> option for subdomains. However, I imagine it&rsquo;s on the roadmap, as provisioning the managed certificate for apex domains set with A records was introduced only a short while ago.</p>
<p>With server-side tagging, it&rsquo;s important to <em>shop around</em>. Setting it up with the default, automatically provisioned Google App Engine service is very easy and very fast, but the lack of customization options and the fixed cost might be a turn-off for some.</p>
<p>I wish someone out there would write an article comparing the realistic costs of different cloud infrastructure options for server-side tagging. It would be interesting to see how different cloud stacks balance between computation and cost in a way that still lets you collect data without too much compromise.</p>
<p>I hope you found this guide useful! Please let me know in the comments if you have any questions.</p>

        
      
    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.simoahava.com/amp/"></a>
    </figure>
    

    
    
    
        
    
    

    <section class="author">
      <h4>Simo Ahava</h4>
      
        <p>Husband | Father | Analytics developer</p>
      
      <div class="author-meta">
        <span class="author-location icon-location">Espoo, Finland</span>
        <span class="author-link icon-link"><a href="https://www.simoahava.com/">https://www.simoahava.com/</a></span>
      </div>
    </section>


    
    <div class="social">

<amp-social-share type="twitter"
  width="60"
  height="44"> </amp-social-share>





<amp-social-share type="linkedin"
                  width="60"
                  height="44"></amp-social-share>


    <amp-social-share type="facebook"
                      width="60"
                      height="44"></amp-social-share>

</div>


    
  </footer>
</article>

</main>
</div>

</body>
</html>

