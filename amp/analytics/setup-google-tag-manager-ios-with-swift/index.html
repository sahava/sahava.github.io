

  
    
  


  

<!doctype html>



<html âš¡ lang="en-us" class="no-js">
    <head>

      <meta charset="utf-8">
        <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script><script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>

<script async src="https://cdn.ampproject.org/v0.js"></script>


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>
    /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{position:relative;z-index:10;min-height:100%;background:#fff;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease}html{font-size:62.5%;-webkit-tap-highlight-color:transparent}body,html{height:100%;max-height:100%}body{font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.8rem;line-height:1.75em;color:#3a4145;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;color:#2e2e2e;line-height:1.15em;margin:0 0 .4em;font-family:Open Sans,sans-serif;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;-webkit-transition:color .3s ease;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:3.2em 0;padding:0}blockquote{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:.4em solid #4a4a4a}blockquote p{margin:.8em 0;font-style:italic}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;color:#ccc}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{padding:1px 3px;font-size:.85em;white-space:pre-wrap;border:1px solid #e3edf3;border-radius:2px}code,pre,tt{font-family:Inconsolata,monospace,sans-serif;background:#f7fafb}pre{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 1.75em;border:1px solid #e3edf3;width:100%;padding:10px;font-size:.9em;white-space:pre;overflow:auto;border-radius:3px}pre code,pre tt{font-size:inherit;white-space:pre-wrap;background:transparent;border:none;padding:0}kbd{display:inline-block;margin-bottom:.4em;padding:1px 8px;border:1px solid #ccc;color:#666;text-shadow:#fff 0 1px 0;font-size:.9em;font-weight:700;background:#f4f4f4;border-radius:4px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 1px 0 0 #fff inset;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 1px 0 0 #fff}table{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0;width:100%;max-width:100%;background-color:transparent}table td,table th{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #efefef}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:transparent}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{position:relative;display:table;width:100%;height:100vh;margin-bottom:5rem;text-align:center;background:#222 no-repeat 50%;background-size:cover;overflow:hidden}.main-header.cover{background-image:url("https://www.simoahava.com/images/maisema.jpg")}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{position:relative;padding:35px 40px;margin:0 0 30px}.main-nav a{text-decoration:none;font-family:Open Sans,sans-serif}.scroll-down{display:block;position:absolute;z-index:100;bottom:45px;left:50%;font-size:1.5em;text-align:center;-webkit-animation:b 4s 2s infinite;animation:b 4s 2s infinite}.scroll-down:hover{color:#fff;-webkit-animation:none;animation:none}.home-template .main-header:after{display:block;content:" ";width:150px;height:130px;border-radius:100%;position:absolute;bottom:0;left:50%;margin-left:-75px;background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%)}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover.main-header:after,.no-cover .scroll-down{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{-webkit-box-sizing:border-box;box-sizing:border-box;height:38px}.menu-button{display:inline-block;float:right;padding:0 15px;border:1px solid #bfc8cd;opacity:1;color:#9eabb3;text-align:center;font-size:12px;text-transform:uppercase;line-height:35px;white-space:nowrap;border-radius:3px;background:rgba(0,0,0,.1);-webkit-transition:all .5s ease;transition:all .5s ease}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{position:absolute;top:0;left:0;right:0;height:70px;border:none;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent)}.no-cover .main-nav.overlay,.no-cover .menu-button{background:none}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{color:#222;border-color:#fff;background:#fff}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{margin:10px 0;font-size:5rem;letter-spacing:-1px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff}.page-description{margin:0;font-size:2rem;line-height:1.5em;font-weight:400;font-family:Merriweather,serif;letter-spacing:.01rem;color:hsla(0,0%,100%,.8)}.no-cover.main-header{min-height:160px;max-height:40vh;background:#f5f8fa}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{color:rgba(0,0,0,.4);border-color:rgba(0,0,0,.3)}.main-header-content .page-title{-webkit-animation:a .6s;animation:a .6s;-webkit-animation-delay:.2s;animation-delay:.2s}.main-header-content .page-description{-webkit-animation:a .9s;animation:a .9s;-webkit-animation-delay:.1s;animation-delay:.1s}.post{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.post-header{padding-bottom:10px}.post:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{margin:0;font-size:.9em;line-height:1.7em}.read-more{font-size:.8em;text-decoration:none;font-style:italic}.post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3}.author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{position:relative;padding:.3rem 40px 0 100px;min-height:77px}.post-date{display:inline-block;margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;text-transform:uppercase;font-size:1.3rem;white-space:nowrap}.user-image{position:absolute;top:0;left:0}.user-name{display:block;font-weight:700}.user-bio{display:block;max-width:440px;font-size:1.4rem;line-height:1.5em}.publish-meta{position:absolute;top:0;right:0;padding:4.3rem 0 4rem;text-align:right}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{text-align:center;font-size:.8em}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{content:"";position:absolute;z-index:-2;bottom:10px;width:50%;height:20%;max-width:480px;-webkit-box-shadow:0 15px 10px rgba(0,0,0,.7);box-shadow:0 15px 10px rgba(0,0,0,.7)}figure.polaroid:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}figure.polaroid{width:450px;position:relative;padding:15px;border:none;background:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.3),0 0 40px rgba(0,0,0,.1) inset;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);border-radius:4px;margin-bottom:1.5em;max-width:100%}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;outline:1px solid #ccc;padding:0;margin:0}figure.polaroid figcaption{font-size:1.3em;font-weight:400;font-family:Kaushan Script,cursive;text-align:right;padding:.8em .5em .4em}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{font-size:.8em;font-style:italic;text-align:center;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;margin-top:.5em;padding:.2em}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{text-decoration:none;font-size:2em}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{text-decoration:none;font-size:2em;color:#a2a2a2}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{padding:0;margin:0;border:none}.post-template .content{overflow:hidden}.post-template .post{margin-top:0;border-bottom:none;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{position:relative;margin:6rem 0 0;padding:6rem 0 0;border-top:1px solid #ebf2f6}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{margin:1rem 0;font-size:1.4rem;line-height:1.75em}.author-meta{padding:0;margin:0;list-style:none;font-size:1.4rem;line-height:1;font-style:italic}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;top:6rem;right:0;width:180px}.post-footer .share a{font-size:1.8rem;display:inline-block;margin:1rem 1.6rem 1.6rem 0;color:#bbc7cc;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{height:85px;min-height:0;margin-bottom:0;background:transparent}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{height:10vh;min-height:100px;background:transparent}.author-profile{padding:0 15px 5rem;border-bottom:1px solid #ebf2f6;text-align:center}.author-profile:after{content:"";width:7px;height:7px;border:1px solid #e7eef2;bottom:-5px;margin-left:-5px;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.author-image,.author-profile:after{display:block;position:absolute;left:50%;background:#fff}.author-image{-webkit-box-sizing:border-box;box-sizing:border-box;top:-56px;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;z-index:2;-webkit-box-shadow:#e7eef2 0 0 0 1px;box-shadow:0 0 0 1px #e7eef2}.author-image .img{position:relative;display:block;width:100%;height:100%;background-size:cover;background-position:50%;border-radius:100%;background-image:url("https://www.simoahava.com/images/simo.png")}.author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0;-webkit-box-shadow:none;box-shadow:none}.author-title{margin:1.5rem 0 1rem}.author-bio{font-size:1.8rem;line-height:1.5em;font-weight:200;color:#50585d;letter-spacing:0;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{margin:2rem 0;font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.7rem}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@-webkit-keyframes a{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes a{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@-webkit-keyframes b{0%,10%,25%,40%,50%{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}20%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}30%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}@keyframes b{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);text-align:left;overflow-y:auto;font-family:Open Sans,Verdana,sans-serif;font-weight:700;font-size:11px;color:#909090;width:400px}#sidebar .nav-title{position:absolute;top:45px;left:30px;font-size:1.5em;font-weight:100;text-transform:uppercase;color:#fff}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{position:absolute;top:38px;right:25px;width:20px;height:20px;padding:0;font-size:10px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{content:"";position:absolute;top:0;width:20px;height:1px;background:#969696;top:15px;-webkit-transition:background .15s ease;transition:background .15s ease}#sidebar .nav-close:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}#sidebar .nav-close:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{margin:.4em 0 .2em;background:none;border:none;font-size:2rem}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open,#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{padding:90px 9% 5%;list-style:none;counter-reset:a}#sidebar li:before{display:block;float:right;padding-right:4%;padding-left:5px;text-align:right;font-size:1.2rem;vertical-align:bottom;color:#b8b8b8;content:counter(a,lower-roman);counter-increment:a}#sidebar li{margin:0}#sidebar li a{text-decoration:none;line-height:1.4;font-size:1.4rem;display:block;padding:.6rem 4%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#sidebar li a:after{display:inline-block;content:" ...............................................................";color:hsla(0,0%,100%,.2);margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{content:" ";border-bottom:1px solid hsla(0,0%,100%,.5);width:100%;height:1px}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;bottom:30px;left:30px;right:30px;height:38px;padding:0 20px;text-align:center;font-size:12px;font-family:Open Sans,sans-serif;text-transform:uppercase;text-decoration:none;line-height:35px;border-radius:3px;background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{position:relative;width:80%;max-width:710px;margin:4rem auto;font-family:Open Sans,sans-serif;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;-webkit-transition:all .2s ease;transition:all .2s ease}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px solid #bfc8cd;text-decoration:none;border-radius:4px;-webkit-transition:border .3s ease;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{color:#889093;border-color:#98a0a4}.extra-pagination{display:none;border-bottom:1px solid #ebf2f6}.extra-pagination:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{position:relative;margin:8rem 0 0;padding:.5rem 15px;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{-webkit-box-sizing:border-box;box-sizing:border-box;height:auto;min-height:240px;height:60vh;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{margin-bottom:15px;height:40vh}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{padding:0 5px;border-radius:0;background:transparent}.menu-button,.menu-button:hover{border-color:transparent;color:#2e2e2e}.menu-button:hover{background:none}body.nav-opened .menu-button{background:none;border:transparent}.main-nav.overlay a:hover{color:#fff;border-color:transparent;background:transparent}.no-cover .main-nav.overlay{background:none}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{width:auto;margin:2rem auto}.post{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{padding-bottom:0;margin-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{margin:0 0 2rem;padding:0 0 1.6rem;border-bottom:1px dashed #ebf2f6}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;margin:0;line-height:1.75em}.author-meta li:before{display:none}.newer-posts,.older-posts{position:static;margin:10px 0}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{max-width:100%;height:auto;border:1px solid #777;-webkit-box-shadow:5px 5px 2px rgba(0,0,0,.4);box-shadow:5px 5px 2px rgba(0,0,0,.4);margin-bottom:20px}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}
    

</style>

        <link rel="canonical" href="https://www.simoahava.com/analytics/setup-google-tag-manager-ios-with-swift/">
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

        

        <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <meta name="theme-color" content="#ffffff" />

        
        <title>Setup Google Tag Manager IOS With Swift | Simo Ahava's blog</title>
        <meta property="og:title" content="Setup Google Tag Manager IOS With Swift" />
<meta name="description" content="Guide for setting up Google Tag Manager tracking in your iOS app using Swift and the legacy SDK." />
<meta property="og:description" content="Guide for setting up Google Tag Manager tracking in your iOS app using Swift and the legacy SDK." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.simoahava.com/amp/analytics/setup-google-tag-manager-ios-with-swift/" />

    
        
    



    
        <meta property="article:published_time" content="2015-10-20T12:16:27Z"/>
    
    
        <meta property="article:modified_time" content="2015-10-20T12:16:27Z"/>
    




    


    <meta property="og:site_name" content="Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development." />









    
        
        
            
        
        
        
    
    
    
        
            <meta property="article:section" content="Analytics" />
        
    
    
        
            <meta property="article:tag" content="apps" />
        
            <meta property="article:tag" content="google analytics" />
        
            <meta property="article:tag" content="Google Tag Manager" />
        
            <meta property="article:tag" content="Guide" />
        
            <meta property="article:tag" content="ios" />
        
            <meta property="article:tag" content="mobile" />
        
    







    
        <meta name="twitter:card" content="summary"/>
    

    
        
        
            
        
        
        
    




<meta itemprop="name" content="Setup Google Tag Manager iOS With Swift">
<meta itemprop="description" content="Guide for setting up Google Tag Manager tracking in your iOS app using Swift and the legacy SDK.">


<meta itemprop="datePublished" content="2015-10-20T12:16:27&#43;00:00" />
<meta itemprop="dateModified" content="2015-10-20T12:16:27&#43;00:00" />
<meta itemprop="wordCount" content="4062">



<meta itemprop="keywords" content="apps,google analytics,Google Tag Manager,Guide,ios,mobile,swift," />

<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.",
    
    "url": "https://www.simoahava.com/amp/"
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Setup Google Tag Manager iOS With Swift | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2015/10/swift-xcode.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/amp/analytics/setup-google-tag-manager-ios-with-swift/",
  "datePublished": "2015-10-20T12:16:27+00:00",
  "dateModified": "2015-10-20T12:16:27+00:00",
  "description": "Guide for setting up Google Tag Manager tracking in your iOS app using Swift and the legacy SDK.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>












    </head>
<body>

<amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
  <amp-sidebar id="sidebar" layout="nodisplay" side="right">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close" on="tap:sidebar.close" role="button" tabindex="1">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/categories/gtm-tips/">GTM Tips</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/about-simo-ahava/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/tools/">Tools</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/blog-statistics/">Blog Statistics</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/upcoming-talks/">Upcoming Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/">Full (non-AMP) site</a>
            </li>
        
        <amp-accordion>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Categories
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/gtm-tips/">gtm-tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-development/">web-development</a></li>
                
                </div>
            </section>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Tags
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/accelerated-mobile-pages/">accelerated-mobile-pages</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adblocker/">adblocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/add-on/">add-on</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/agile/">agile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amazon/">amazon</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amp/">amp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/api/">api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app-engine/">app-engine</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/approval/">approval</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps/">apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps-script/">apps-script</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/array/">array</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/attribution/">attribution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audience-design/">audience-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audit/">audit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-event-tracking/">auto-event-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-link-domains/">auto-link-domains</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/aws/">aws</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/basketball/">basketball</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/best-practices/">best-practices</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/big-data/">big-data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/blogger/">blogger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bounce-rate/">bounce-rate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/calculated-metrics/">calculated-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/callback/">callback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/campaign-tracking/">campaign-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/celebration/">celebration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/change-history/">change-history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome/">chrome</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome-extension/">chrome-extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clickstream/">clickstream</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-id/">client-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cms/">cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container/">container</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-snippet/">container-snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content/">content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-blocker/">content-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-engagement/">content-engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-grouping/">content-grouping</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management-system/">content-management-system</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-strategy/">content-strategy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/context/">context</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversion/">conversion</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookie/">cookie</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookiedomain/">cookiedomain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookies/">cookies</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/creative/">creative</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain-tracking/">cross-domain-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css/">css</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css-selectors/">css-selectors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom/">custom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimension/">custom-dimension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimensions/">custom-dimensions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html/">custom-html</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tag/">custom-html-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-javascript/">custom-javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-metrics/">custom-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/customtask/">customtask</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dan-wilkerson/">dan-wilkerson</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dashboard/">dashboard</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-collection/">data-collection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer/">data-layer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-model/">data-model</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-quality/">data-quality</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/datalayer/">datalayer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debug/">debug</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debugging/">debugging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/definition-of-success/">definition-of-success</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer/">developer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/development/">development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/document.write/">document.write</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dom/">dom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/duplicate/">duplicate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dynamic-content/">dynamic-content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/easter-egg/">easter-egg</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ecommerce/">ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/education/">education</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/engagement/">engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/enhanced-ecommerce/">enhanced-ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/environments/">environments</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/errors/">errors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event/">event</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listener/">event-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listeners/">event-listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/eventcallback/">eventcallback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/events/">events</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/excel/">excel</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exceptions/">exceptions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/extension/">extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/facebook/">facebook</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fields-to-set/">fields-to-set</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firing-rules/">firing-rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/folders/">folders</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form/">form</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form-tracking/">form-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/forms/">forms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga-spy/">ga-spy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gdpr/">gdpr</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google/">google</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics/">google-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-settings/">google-analytics-settings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-optimize/">google-optimize</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-sheets/">google-sheets</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag-manager/">google-tag-manager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-trends/">google-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/googletagmanager/">googletagmanager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/governance/">governance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag/">gtag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-sonar/">gtm-sonar</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-tools/">gtm-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm360/">gtm360</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtmtips/">gtmtips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guide/">guide</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hack/">hack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history/">history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-change-trigger/">history-change-trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-listener/">history-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hugo/">hugo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/iframe/">iframe</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/internal-traffic/">internal-traffic</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ios/">ios</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ip/">ip</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/it-department/">it-department</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/javascript/">javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/klipfolio/">klipfolio</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/learning/">learning</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/links/">links</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/listeners/">listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/local/">local</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/localstorage/">localstorage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lookup-table/">lookup-table</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/macros/">macros</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketer/">marketer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketing/">marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/measurement-protocol/">measurement-protocol</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/meta-description/">meta-description</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/metrics/">metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/migration/">migration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mixcloud/">mixcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mobile/">mobile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modern-cms/">modern-cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modular-architecture/">modular-architecture</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/navigation/">navigation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/netbooster/">netbooster</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/new-ui/">new-ui</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/nodejs/">nodejs</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/non-technical/">non-technical</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/open-source/">open-source</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/opt-out/">opt-out</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/owasp/">owasp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-load-time/">page-load-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-timings/">page-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/penguin/">penguin</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/performance/">performance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/permissions/">permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/persistence/">persistence</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/php/">php</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pii/">pii</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pitch/">pitch</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/plugins/">plugins</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/poetry/">poetry</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ppc/">ppc</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/process/">process</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/query-string/">query-string</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/race-condition/">race-condition</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/reaktor/">reaktor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/referral/">referral</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/regular-expression/">regular-expression</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/release/">release</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/resources/">resources</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/rules/">rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sales/">sales</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/schema/">schema</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/score-card/">score-card</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/scroll-depth/">scroll-depth</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search/">search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-api/">search-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-engine-optimization/">search-engine-optimization</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-trends/">search-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/security/">security</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/selection/">selection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo-report/">seo-report</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/serp/">serp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sessions/">sessions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-search/">site-search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-speed/">site-speed</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snippet/">snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snowplow/">snowplow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/social-interactions/">social-interactions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/soundcloud/">soundcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/spa/">spa</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/splash-page/">splash-page</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/static-site/">static-site</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/storage/">storage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/support/">support</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/swift/">swift</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/syntax-highlight/">syntax-highlight</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solution/">tag-management-solution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solutions/">tag-management-solutions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-sequencing/">tag-sequencing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tags/">tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tasks/">tasks</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/technique/">technique</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/test/">test</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/testing/">testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timer/">timer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timings/">timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tips/">tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tools/">tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker/">tracker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker-object/">tracker-object</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger/">trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/triggers/">triggers</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/troubleshoot/">troubleshoot</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/undefined/">undefined</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/universal-analytics/">universal-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-id/">user-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-interface/">user-interface</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-permissions/">user-permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-timings/">user-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/v2/">v2</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable/">variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variables/">variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/videos/">videos</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/visibility/">visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/wcag/">wcag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/weather/">weather</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-development/">web-development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/website-redesign/">website-redesign</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workflow/">workflow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workspaces/">workspaces</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/youtube/">youtube</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/zones/">zones</a></li>
                
                </div>
            </section>
        
        </amp-accordion>
    </ul>
</amp-sidebar>

<div class="site-wrapper">



    <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">


    <a class="menu-button" on="tap:sidebar.toggle" role="button" href="#"><i class="fa fa-bars" aria-hidden="true"></i><span class="menu-button-label">Menu</span></a>


  </nav>
</header>



<main class="content" role="main">

  <article class="post type-post">

    <header class="post-header">
        <h1 class="post-title">Setup Google Tag Manager IOS With Swift</h1>
        <small>Guide for setting up Google Tag Manager tracking in your iOS app using Swift and the legacy SDK.</small>

        <section class="post-meta">
            


    




    <amp-img class="author-thumb" src="https://www.simoahava.com/images/simo.png" layout="fixed" width="24" height="24" alt="Author image"></amp-img>

Simo Ahava

in
    
        <a href="https://www.simoahava.com/amp/categories/analytics">Analytics</a>
    


on
    
        <a href="https://www.simoahava.com/amp/tags/apps">#apps</a>
    
        , <a href="https://www.simoahava.com/amp/tags/google-analytics">#google analytics</a>
    
        , <a href="https://www.simoahava.com/amp/tags/google-tag-manager">#Google Tag Manager</a>
    
        , <a href="https://www.simoahava.com/amp/tags/guide">#Guide</a>
    
        , <a href="https://www.simoahava.com/amp/tags/ios">#ios</a>
    
        , <a href="https://www.simoahava.com/amp/tags/mobile">#mobile</a>
    
        , <a href="https://www.simoahava.com/amp/tags/swift">#swift</a>
    

<time class="post-date" datetime="2015-10-20T12:16:27Z">
    20 October 2015
</time>


        </section>
    </header>

    <section class="post-content">
      

<p>I&rsquo;ve been meaning to write about <a href="https://tagmanager.google.com/">Google Tag Manager</a> for <strong>mobile apps</strong> for such a long time. Finally, I have some great use cases to share, as well as some useful examples for implementing <a href="https://developers.google.com/tag-manager/ios/v3/">GTM for iOS</a>. That&rsquo;s right, this is an <strong>iOS</strong> guide, and, to be more specific, geared towards a successful <strong>Swift</strong> implementation.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/swift-xcode.png" title="Google Tag Manager iOS with Swift">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/swift-xcode.png" layout="responsive" alt="Google Tag Manager iOS with Swift" height="822" width="2878"></amp-img>
  
    </a>
  


<p>If you didn&rsquo;t know, <a href="https://developer.apple.com/swift/">Swift</a> is a relatively new programming language, developed by Apple for iOS and OS X programming. It&rsquo;s got some nice synergies with existing Objective-C implementations, which means you can either gradually migrate to Swift, or just start writing new apps with it instantly.</p>

<!-- toc -->

<p>In this article, we&rsquo;ll walk through a simple Swift implementation of Google Tag Manager and Google Analytics. I&rsquo;ll very briefly review the GTM SDK in the Comments chapter, but this is a how-to article, not a why-should-I writeup. I&rsquo;m going to be expanding on this theme of mobile GTM in future texts, so this will stand out as a starting point for understanding how the SDK plays together with your application.</p>

<p>Many thanks to my colleague, Sampsa Kuronen, for exposing me to the dark arts of Xcode and Swift.</p>

<h2 id="getting-started">Getting started</h2>

<p>This guide is written with the assumption that you&rsquo;re using the latest version of <a href="https://developer.apple.com/xcode/">Xcode</a> as your IDE of choice. It&rsquo;s not the best IDE (by far) out there, but it has been created with iOS and OS X programming in mind, meaning there are certain benefits from using it.</p>

<p>Another, quite obvious, assumption is that you have access to your project source. You will be <strong>adding new files</strong>, <strong>importing headers</strong> and <strong>modifying project source code</strong>. It&rsquo;s a good idea to run everything you&rsquo;re doing by your team, as you don&rsquo;t want to merge unverified source code into your project.</p>

<p>Here&rsquo;s something you might not yet fully realize:</p>

<p><strong>GTM for mobile apps <em>is not the same</em> as GTM for the web!</strong></p>

<p>The level of freedom you have when working with the latter simply does not exist in the mobile app world. We&rsquo;re working with <strong>projects</strong> and <strong>applications</strong>, so you need to have a solid understanding of how to do software development in a proper and consistent manner, abiding to any design patterns you have found successful.</p>

<h2 id="1-google-tag-manager-setup">1. Google Tag Manager setup</h2>

<p>To get things rolling, let&rsquo;s setup Google Tag Manager first. In this tutorial, we&rsquo;ll create a simple Screen View Tag to test the implementation with. In later chapters, we&rsquo;ll go over the event payload as well, but it&rsquo;s up to you to create the Tag for it.</p>

<p>In GTM, create a new Container under some Account. Choose <strong>iOS</strong> as the container type, and give it a descriptive name.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/create-container.png" title="Google Tag Manager container">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/create-container.png" layout="responsive" alt="Google Tag Manager container" height="750" width="1218"></amp-img>
  
    </a>
  


<p>Next, you&rsquo;ll be whisked to the Container Overview, and you&rsquo;ll see a small popup saying your container is ready to use. You can close that.</p>

<p>As you can see, it looks pretty much like GTM for web.</p>

<p>Next, go to <strong>Tags</strong>, and click <strong>New</strong>.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/tags-new.png" title="New Tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/tags-new.png" layout="responsive" alt="New Tag" height="462" width="1978"></amp-img>
  
    </a>
  


<p>Wow, that&rsquo;s <strong>way fewer</strong> Tags than in GTM for web. Let&rsquo;s hope we&rsquo;ll get more soon! Also, make note that there is no <strong>Custom HTML Tag</strong>. It makes perfect sense, since you&rsquo;re not working with HTML, but I thought I should point it out nevertheless.</p>

<p>We&rsquo;ll be creating a simple <strong>Google Analytics</strong> Tag , which sends an <strong>App View</strong> (also known as a Screen View) to Google Analytics when the first <strong>View</strong> of the app loads (don&rsquo;t worry, it will all be clear soon). So, create the Google Analytics Tag, and add the <strong>Tracking ID</strong>.</p>

<p>Make sure that <strong>App View</strong> is selected as the Track Type, and expand <strong>More Settings</strong> -&gt; <strong>Fields to Set</strong>.</p>

<p>Click <code>+ Add Field</code>, and add <strong>screenName</strong> as the Field Name. In Value, click the &ldquo;Variable&rdquo; button and choose <strong>New Variable&hellip;</strong>.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/new-variable.png" title="new-variable">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/new-variable.png" layout="responsive" alt="new-variable" height="882" width="1732"></amp-img>
  
    </a>
  


<p>We need to create a Variable, which picks up the desired Screen Name from the Data Layer (<em>Screen Name</em> is to an app what <em>Page</em> is to a website). So, after marvelling the list of Variables that&rsquo;s <a href="https://support.google.com/tagmanager/answer/6106899?hl=en#mobile">completely different</a> from GTM for web, choose <strong>Data Layer Variable</strong>.</p>

<p>Give it a descriptive name, e.g. <strong>DLV - screenName</strong>, and set the Variable Name field to <strong>screenName</strong>. Save the new Variable.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/data-layer-variable-screenName.png" title="data layer variable screenName">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/data-layer-variable-screenName.png" layout="responsive" alt="data layer variable screenName" height="502" width="612"></amp-img>
  
    </a>
  


<p>Next, in the Tag screen, click <strong>Continue</strong> and proceed to the <strong>Fire On</strong> step.</p>

<p>In this step, click <strong>Custom</strong>, as you want to create a new Trigger for the Tag. So, in the popup that appears, click <strong>New</strong>.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/new-trigger.png" title="Create new Custom Trigger">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/new-trigger.png" layout="responsive" alt="Create new Custom Trigger" height="578" width="1154"></amp-img>
  
    </a>
  


<p>Give the Trigger a descriptive name, e.g. <strong>Event - screenView</strong>, and set the condition as in the screenshot below.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/custom-trigger.png" title="Custom Event Trigger">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/custom-trigger.png" layout="responsive" alt="Custom Event Trigger" height="750" width="1928"></amp-img>
  
    </a>
  


<p>Save the Trigger, and then click &ldquo;Create Tag&rdquo; to, well, create the Tag.</p>

<p>Phew, almost done here! We&rsquo;ll go with just this one Tag, as this is a simple setup guide.</p>

<p>Next, go to the <strong>Versions</strong> page of your GTM container, and click open the <strong>Actions</strong> menu for the only container version you&rsquo;ll see (the initial draft). Click <strong>Publish</strong> and follow the prompts to publish your container.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/publish-container.png" title="Publish container">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/publish-container.png" layout="responsive" alt="Publish container" height="920" width="1962"></amp-img>
  
    </a>
  


<p>There, GTM is <strong>almost</strong> ready, hungry to process the Data Layer commands you dispatch from your app.</p>

<p>Just one more thing to do. You&rsquo;ll need to download the container version <strong>binary</strong>, as GTM for apps is a bit different in how it processes containers. Basically, you can&rsquo;t trust that the app will have access to a container downloaded over the network, so you&rsquo;ll always want to provide a local container binary file for the app as well. Read more about this in chapter 5.1.</p>

<p>So, click open the <strong>Actions</strong> menu for the <strong>Live</strong> container version, and choose Download. Make sure you download it somewhere you can easily find it from.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/gtm-download-container.png" title="Download GTM container version">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/gtm-download-container.png" layout="responsive" alt="Download GTM container version" height="764" width="1720"></amp-img>
  
    </a>
  


<p>That&rsquo;s it! We&rsquo;re done with the GTM setup. All that&rsquo;s left is the minor task of upgrading your App to use the Google Tag Manager (and Google Analytics) SDK!</p>

<p>Congratulate yourself with a power bar and some coffee.</p>

<p>I&rsquo;ll wait. Maybe get some coffee myself, and boogie silently to your profound success in setting up GTM!</p>

<h2 id="2-create-a-new-xcode-workspace">(2. Create a new Xcode workspace)</h2>

<p>I won&rsquo;t linger here, as I&rsquo;m actually assuming you already have an <a href="https://itunes.apple.com/en/app/xcode/id497799835?mt=12">Xcode</a> project and workspace to work with. If you need something to get started with, take a look at <a href="http://www.raywenderlich.com/115279/swift-2-tutorial-part-2-a-simple-ios-app">this tutorial</a> by Ray Wenderlich. If you pay close attention to the screenshots in the article you&rsquo;re reading right now, you might notice that I&rsquo;m actually using Ray&rsquo;s Tip Calculator as the basis for this article.</p>

<p>If you only have a project setup and no workspace, keep reading. When you add the required dependencies to your project using Cocoapods (see below), a workspace is automatically generated for you.</p>

<h2 id="3-download-the-sdks-using-cocoapods">3. Download the SDKs using Cocoapods</h2>

<p>In order for Google Tag Manager to work with your app, you will need to download the SDKs for both Google Tag Manager and Google Analytics. To do that we&rsquo;ll use <a href="https://cocoapods.org/">Cocoapods</a>, which is an open-source dependency manager for your iOS and OS X projects. As you might have guessed, both Google Analytics and Google Tag Manager SDKs are also distributed as Pods.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/cocoapods.png" title="Cocoapods">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/cocoapods.png" layout="responsive" alt="Cocoapods" height="641" width="1907"></amp-img>
  
    </a>
  


<p>After you&rsquo;ve installed Cocoapods (if you need help, check e.g. <a href="https://developers.google.com/ios/cocoapods">this guide</a>), you need to go to your workspace root directory (the one with your .xcodeproj and .xcworkspace files), and type:</p>

<p><code>pod init</code></p>

<p>This command initializes a simple Podfile for your project.</p>

<p>Open Podfile with your favorite editor.</p>

<p>Between the lines <code>target 'YourProject' do</code> and <code>end</code>, you need to add the Pod references you want to download and install for your project, so add the following construct into the file:</p>

<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">target <span class="s1">&#39;YourProject&#39;</span> <span class="k">do</span>
  pod <span class="s1">&#39;GoogleTagManager&#39;</span>
  pod <span class="s1">&#39;Google/Analytics&#39;</span>
end</code></pre></div>

<p>Once you&rsquo;ve done this, you can run the command <code>pod install</code>, which will automatically install and import all the files to your Xcode project. Neat, huh?</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/pod-install.png" title="Install Google Analytics and google Tag Manager dependencies">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/pod-install.png" layout="responsive" alt="Install Google Analytics and google Tag Manager dependencies" height="680" width="1042"></amp-img>
  
    </a>
  


<p>Now that you&rsquo;ve installed the Pods, the next thing you need to do is import them into your project.</p>

<p>It&rsquo;s not exactly straightforward, as Google Tag Manager source code is in Objective-C, which means you can&rsquo;t just directly import it to your Swift project. Instead, you need to use something called a <strong>Bridging Header</strong>.</p>

<h2 id="4-create-and-edit-the-bridging-header-file">4. Create and edit the Bridging Header file</h2>

<p>A <em>bridging header</em> is key to creating projects where the codebase includes code from multiple languages - Objective-C and Swift in this case. Basically, you use a bridging header file to expose Objective-C structures in your Swift files, so that you can, for example, work with the GTM SDK (which is Objective-C at the time of writing) without having to worry about clashes and conflicts that occur when working across languages.</p>

<p>First of all, if you installed the Pods correctly, you should see them in your <strong>Project navigator</strong>.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/tree-view.png" title="Project navigator">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/tree-view.png" layout="responsive" alt="Project navigator" height="360" width="516"></amp-img>
  
    </a>
  


<p>Now, to create the bridging header file, go to <strong>File</strong> -&gt; <strong>New</strong> -&gt; <strong>File</strong>. Under <strong>iOS</strong> / <strong>Source</strong>, you&rsquo;ll find <strong>Header File</strong>, so select that and click <strong>Next</strong>.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/bridging-header-create.png" title="Create new header file">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/bridging-header-create.png" layout="responsive" alt="Create new header file" height="1034" width="1458"></amp-img>
  
    </a>
  


<p>Give the file a name: <code>yourProjectName-Bridging-Header.h</code>, and save it in your project root. Remember to choose a target for the file, so that the header file is properly associated with your project.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/new-header.png" title="New header file settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/new-header.png" layout="responsive" alt="New header file settings" height="656" width="858"></amp-img>
  
    </a>
  


<p>You should see the file open in your editor. Add the following import statements to the file, and then save it:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="p">#</span><span class="kd">import</span> <span class="s">&#34;TAGManager.h&#34;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&#34;TAGContainer.h&#34;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&#34;TAGContainerOpener.h&#34;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&#34;TAGDataLayer.h&#34;</span>
<span class="p">#</span><span class="kd">import</span> <span class="s">&#34;TAGLogger.h&#34;</span>
<span class="p">#</span><span class="kd">import</span> <span class="p">&lt;</span><span class="nc">Google</span><span class="o">/</span><span class="nc">Analytics</span><span class="p">.</span><span class="nc">h</span><span class="o">&gt;</span></code></pre></div>

<p>These headers include all the necessary Google Tag Manager headers, as well as all the Google Analytics SDK headers.</p>

<p>Finally, you need to include the bridging header file in your build settings.</p>

<p>Click your project (the root level node) in your Project navigator. In the settings screen that opens, choose the tag labelled <strong>Build Settings</strong>, and scroll all the way down to <strong>Swift Compiler - Code Generation</strong>.</p>

<p>Edit the field next to <strong>Objective-C Bridging Header</strong>, and type in the file name of the bridging header file you just created.</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/build-settings.png" title="build-settings">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/build-settings.png" layout="responsive" alt="build-settings" height="1022" width="2878"></amp-img>
  
    </a>
  


<p>Now, build your project and make sure everything checks out right.</p>

<p>Next up, setting up Google Tag Manager in the project!</p>

<h2 id="5-load-google-tag-manager-in-the-project">5. Load Google Tag Manager in the project</h2>

<p>My, how far we&rsquo;ve come!</p>

<p>If you look at how the <a href="https://developers.google.com/tag-manager/ios/v3/">developer guide kicks off</a>, you&rsquo;ll notice the rather limited capabilities of Google Tag Manager for mobile. For now, at least. Basically, you can dispatch Google Analytics hits and run custom functions. Also, you can change configuration values.</p>

<p>In this tutorial, we&rsquo;ll focus on the first use case, so we&rsquo;ll setup a simple interface for tracking screen views and events to Google Analytics.</p>

<h3 id="5-1-add-container-binary-to-project">5.1. Add container binary to project</h3>

<p>Before we do anything, however, we&rsquo;ll need to add the <strong>container version binary</strong> to the project. This is rather important, as even though GTM can load a &ldquo;fresh&rdquo; container over the network, some of the interactions on the site might actually need to be tracked <em>before</em> the asynchronous operation of loading the container is complete. In this case, GTM can fall back to the local container binary, also referred to as the <em>default</em> container.</p>

<p><strong>NOTE!</strong> This also means that you should try to keep the binary in the project as up-to-date as possible, so that batches which use the binary would be as similar as possible to those that use the fresh container. So make it a habit that every time you publish a new container version, you download the version binary, and add it to the project (delete the old binary first).</p>

<p>We&rsquo;ll cover all this very soon, don&rsquo;t worry.</p>

<p>In Xcode, simply drag-and-drop the container binary file to your project. A window should open, where you need to make sure that you add the file to your target (so check the relevant box).</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/add-file.png" title="Add container binary to project">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/add-file.png" layout="responsive" alt="Add container binary to project" height="862" width="1458"></amp-img>
  
    </a>
  


<p>If you don&rsquo;t have a <strong>Supporting Files</strong> group under your project, now&rsquo;s a good time to create one. Right-click on the container binary, and choose <strong>New Group from Selection</strong>. Name the group Supporting Files. Your navigator should look like this:</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/supporting-files.png" title="Supporting files group">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/supporting-files.png" layout="responsive" alt="Supporting files group" height="194" width="514"></amp-img>
  
    </a>
  


<p>If you already do have a Supporting Files group, just move the binary into that folder.</p>

<p>Next up, <em>source code and stuff</em>.</p>

<h3 id="5-2-modify-appdelegate">5.2. Modify AppDelegate</h3>

<p>The <strong>AppDelegate.swift</strong> file is where you control states of your app. For example, when the app loads, AppDelegate, well, <em>delegates</em> operations to different parts of your application. Similarly, when your phone rings and interrupts the application, you&rsquo;d control this process through AppDelegate.</p>

<p>Since Google Tag Manager is something you want to load as the application loads, you&rsquo;ll need to make changes to AppDelegate.swift. So, proceed to open the file in your editor.</p>

<p>We want to modify the function which is called once the application is loaded. Aptly, there&rsquo;s one that looks like this:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">application</span><span class="p">(</span><span class="n">application</span><span class="p">:</span> <span class="n">UIApplication</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="n">launchOptions</span><span class="p">:</span> <span class="p">[</span><span class="n">NSObject</span><span class="p">:</span> <span class="nb">AnyObject</span><span class="p">]?)</span> <span class="p">-&gt;</span> <span class="nb">Bool</span> <span class="p">{</span>
    <span class="c1">// Override point for customization after application launch.</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="kc">true</span>
<span class="p">}</span></code></pre></div>

<p>That&rsquo;s the callback we&rsquo;ll open the container in. Here, &ldquo;open the container&rdquo; means we&rsquo;ll make it available for dispatching hits using the available interfaces. On top of that, having a container available is a prerequisite for interacting with the <code>TAGDataLayer</code> interface. This is a slight departure, again, for how things work with GTM for web, where you could create a <code>dataLayer</code> object before the container loading began.</p>

<p>Add the following lines into the function:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">let</span> <span class="nv">tagManager</span> <span class="p">=</span> <span class="n">TAGManager</span><span class="p">.</span><span class="n">instance</span><span class="p">()</span>
<span class="n">TAGContainerOpener</span><span class="p">.</span><span class="n">openContainerWithId</span><span class="p">(</span>
    <span class="s">&#34;GTM-XXXXXX&#34;</span><span class="p">,</span>
    <span class="n">tagManager</span><span class="p">:</span> <span class="n">tagManager</span><span class="p">,</span>
    <span class="n">openType</span><span class="p">:</span> <span class="n">kTAGOpenTypePreferFresh</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="n">notifier</span><span class="p">:</span> <span class="kc">self</span><span class="p">)</span>
<span class="c1">// if DEBUG</span>
<span class="n">tagManager</span><span class="p">.</span><span class="n">logger</span><span class="p">.</span><span class="n">setLogLevel</span><span class="p">(</span><span class="n">kTAGLoggerLogLevelVerbose</span><span class="p">)</span></code></pre></div>

<p>Line-by-line, here&rsquo;s what happens. First, you initialize an immutable variable named <code>tagManager</code> as a singleton instance of the <code>TAGManager</code> class.</p>

<p>Next, you use the <code>TAGContainerOpener</code> interface to signal that you want to fetch a container to work with. Remember to change the <strong>&ldquo;GTM-XXXXXX&rdquo;</strong> to whatever the container ID you&rsquo;re using is.</p>

<p>This next bit is a bit more complicated.</p>

<p>When you download the container binary into the Supporting Files of your project, it&rsquo;s called a <em>default container</em>. This is what GTM uses until a saved container is found, or if this saved container is not fresh (&gt; 12 hours old), a new, fresh one is loaded over the network. This is why it&rsquo;s imperative that the saved binary is usable. The first screen view of the app might well be ready to dispatch before a non-default container has loaded, which means you want the default container to be as accurate as possible.</p>

<p>When choosing the <code>openType</code> value, I suggest you use either <code>kTAGOpenTypePreferNonDefault</code> or <code>kTAGOpenTypePreferFresh</code>.</p>

<p><code>kTAGOpenTypePreferNonDefault</code> attempts to load a saved container (i.e. one that was previously loaded over the network), regardless of whether it&rsquo;s stale or not. Stale means it&rsquo;s over 12 hours old. This means that you&rsquo;ll have a container to work with sooner. If the container is stale, Google Tag Manager starts an asynchronous request for a fresh container over the network.</p>

<p><code>kTAGOpenTypePreferFresh</code> only loads a saved container if it&rsquo;s fresh. If it isn&rsquo;t, it loads a new, fresh container over the network.</p>

<p>Both revert to the default container if a saved container couldn&rsquo;t be loaded or if there was a network error.</p>

<p>Next, you can enable logging. I&rsquo;ve commented <strong>if DEBUG</strong> because it might be a good idea to verbosely log only if you&rsquo;re debugging the app, since it produces a <em>lot</em> of console output, which is unnecessary overhead in the live app.</p>

<p>You might have noticed that I skipped over the <code>notifier: self</code> key-value pair in the <code>TAGContainerOpener</code> call. That&rsquo;s because it requires a bit more attention.</p>

<p>The <code>notifier</code> parameter is basically a setting, where I instruct GTM to notify my app when a container becomes available. Once a container is available, our methods and functions can create an instance of the <code>AppDelegate</code> class to access the loaded container. You can use <code>container</code> to <a href="https://developers.google.com/tag-manager/ios/v3/#get-values">update your app&rsquo;s configuration values</a> through GTM, for example.</p>

<p>Because you&rsquo;re invoking <code>self</code> as the parameter value, it means that the class you&rsquo;re currently in (<code>AppDelegate</code>) needs to implement the <code>TAGContainerNotifier</code> protocol, as <code>self</code> is bound to an instance of the current class.</p>

<p>Scroll up to the beginning of AppDelegate, and change the class declaration to:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">class</span> <span class="nc">AppDelegate</span><span class="p">:</span> <span class="n">UIResponder</span><span class="p">,</span> <span class="n">UIApplicationDelegate</span><span class="p">,</span> <span class="n">TAGContainerOpenerNotifier</span> <span class="p">{</span>
    <span class="p">...</span>
    <span class="kd">var</span> <span class="nv">container</span><span class="p">:</span> <span class="n">TAGContainer</span><span class="p">?</span></code></pre></div>

<p>In other words, you add the <code>TAGContainerOpenerNotifier</code> to the declaration line, and in the beginning of the class (so <em>not</em> in a <code>func</code>), you create a new variable <code>container</code>, which refers to a <code>TAGContainer</code> optional.</p>

<p>Phew! Almost there.</p>

<p>In the end of the class, after all the other <code>func</code> declarations, add a new one:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="nf">containerAvailable</span><span class="p">(</span><span class="n">container</span><span class="p">:</span> <span class="n">TAGContainer</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="nb">Void</span> <span class="p">{</span>
    <span class="n">dispatch_async</span><span class="p">(</span><span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">container</span> <span class="p">=</span> <span class="n">container</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span></code></pre></div>

<p>And now things should start aligning in your mind.</p>

<p><code>containerAvailable</code> is the callback that <code>TAGContainerOpener</code> invokes once a container becomes available. The container is passed as a parameter to this function.</p>

<p>Next, we initialize <code>self.container</code> with the retrieved container. This way your app can use the loaded container through an instance of the <code>AppDelegate</code> class.</p>

<p>By the way, here&rsquo;s a nifty trick. If you want to <strong>always</strong> load a fresh container over the network, you can add the following line to the <code>dispatch_async</code> callback:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">container</span><span class="p">.</span><span class="n">refresh</span><span class="p">()</span></code></pre></div>

<p>This forces a fresh container load over the network.</p>

<p>How you want to load the container is completely up to you. Some methods, such as <code>container.refresh()</code>, impose more network requests than others, so it&rsquo;s always a compromise between freshness vs. availability vs. network load.</p>

<p>Much of the container load process is explained <a href="https://developers.google.com/tag-manager/ios/v3/#open-advanced">here</a>, though I have to say it&rsquo;s not very clearly documented at all (and it&rsquo;s in Objective-C).</p>

<p>Now, build the project and make sure no errors pop up. You can run the project, and you should already see some verbose logging:</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/debug-verbose.png" title="Verbose logging">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/debug-verbose.png" layout="responsive" alt="Verbose logging" height="320" width="2312"></amp-img>
  
    </a>
  


<p>You&rsquo;re ready to push stuff to the Data Layer to fire your Tags. Awesome!</p>

<h2 id="6-push-stuff-to-data-layer">6. Push stuff to Data Layer</h2>

<p>This is where Google Tag Manager for apps is very similar to GTM for web. By invoking the <code>push</code> method of the Data Layer instance, GTM will react to the dictionary you push and fire any relevant Tags.</p>

<p>To try it out, open a view controller file in your project. If it&rsquo;s a default project setup, there should be one named <code>ViewController.swift</code>.</p>

<p>Now, to send the screen view, it makes sense to only send it once the view has loaded. So, find the method with the following signature, or create one if it doesn&rsquo;t exist:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewWillAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">:</span> <span class="nb">Bool</span><span class="p">)</span> <span class="p">{</span>
  <span class="kc">super</span><span class="p">.</span><span class="n">viewWillAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">)</span>
<span class="p">}</span></code></pre></div>

<p>Let&rsquo;s create an instance of <code>dataLayer</code> and push the payload to it. So modify the function to look like this:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kr">override</span> <span class="kd">func</span> <span class="nf">viewWillAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">:</span> <span class="nb">Bool</span><span class="p">)</span> <span class="p">{</span>
  <span class="kc">super</span><span class="p">.</span><span class="n">viewWillAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">)</span>
  <span class="kd">let</span> <span class="nv">dataLayer</span> <span class="p">=</span> <span class="n">TAGManager</span><span class="p">.</span><span class="n">instance</span><span class="p">().</span><span class="n">dataLayer</span>
  <span class="n">dataLayer</span><span class="p">.</span><span class="n">push</span><span class="p">([</span><span class="s">&#34;event&#34;</span> <span class="p">:</span> <span class="s">&#34;screenView&#34;</span><span class="p">,</span> <span class="s">&#34;screenName&#34;</span> <span class="p">:</span> <span class="s">&#34;Home&#34;</span><span class="p">])</span>
<span class="p">}</span></code></pre></div>

<p>First you create an immutable variable <code>dataLayer</code>, which is a reference pointing to the <code>dataLayer</code> interface of a <code>TAGManager</code> instance.</p>

<p>Next, you do the <code>dataLayer.push()</code>, sending a dictionary with key-value pairs. As with GTM for web, the <code>'event'</code> is what makes things tick, and the other variables can (and will) be utilized if that&rsquo;s how you&rsquo;ve set the Tags up.</p>

<p>Since we already have a Tag which uses the <code>'screenName'</code> variable, this code should work, sending a screen view with <strong>Home</strong> as the screen name.</p>

<p>Go ahead, build the project and run your app. You should see something like this in the debugger:</p>



    <a href="https://www.simoahava.com/amp/images/2015/10/debugger-sent-hit.png" title="Debugging sent hits">
  
    <amp-img src="https://www.simoahava.com/amp/images/2015/10/debugger-sent-hit.png" layout="responsive" alt="Debugging sent hits" height="784" width="2352"></amp-img>
  
    </a>
  


<p>As you can see, the <strong>&cd;</strong> (for screen name) and <strong>&t;</strong> parameters are right there, meaning the payload is OK. Then, there&rsquo;s the GET request to the Google Analytics endpoint, signalling that the payload has been dispatched.</p>

<p>And that&rsquo;s it! You&rsquo;ve got a functioning Google Tag Manager installation in your hands.</p>

<h2 id="bonus-simple-interface-for-interacting-with-the-data-layer">BONUS: Simple interface for interacting with the Data Layer</h2>

<p>Since we want to be slightly more ambitious, we can actually create an interface (or module) for interacting with the Data Layer. This way you can create elegant code in your app, simplifying some of the complex interactions and mitigating the risk of human error (e.g. typos).</p>

<p>Create a new file called <strong>Analytics.swift</strong>. Add the following code within:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="kd">import</span> <span class="nc">Foundation</span>

<span class="kd">class</span> <span class="nc">Analytics</span> <span class="p">{</span>
    
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">let</span> <span class="nv">dataLayer</span> <span class="p">=</span> <span class="n">TAGManager</span><span class="p">.</span><span class="n">instance</span><span class="p">().</span><span class="n">dataLayer</span>
    
    <span class="kd">private</span> <span class="kd">struct</span> <span class="nc">DataLayerMessage</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">event</span><span class="p">:</span> <span class="nb">String</span>
        <span class="kd">let</span> <span class="nv">ScreenName</span><span class="p">:</span> <span class="nb">String</span>

        <span class="kd">func</span> <span class="nf">getPayload</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="p">[</span><span class="nb">String</span><span class="p">:</span><span class="nb">AnyObject</span><span class="p">]</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[</span><span class="s">&#34;event&#34;</span> <span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">event</span><span class="p">,</span> <span class="s">&#34;screenName&#34;</span> <span class="p">:</span> <span class="kc">self</span><span class="p">.</span><span class="n">screenName</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
 
    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">pushScreen</span><span class="p">(</span><span class="n">screenName</span><span class="p">:</span> <span class="nb">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nv">screenViewData</span> <span class="p">=</span> <span class="n">DataLayerMessage</span><span class="p">(</span><span class="n">event</span><span class="p">:</span> <span class="s">&#34;screenView&#34;</span><span class="p">,</span> <span class="n">screenName</span><span class="p">:</span> <span class="n">screenName</span><span class="p">)</span>
        <span class="n">dataLayer</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">screenViewData</span><span class="p">.</span><span class="n">getPayload</span><span class="p">())</span>
    <span class="p">}</span>

<span class="p">}</span></code></pre></div>

<p>Here, you create a new class called <code>Analytics</code>. Within, you define some variables, structs and methods that can be used by other parts of your app.</p>

<p>You can expand the <code>DataLayerMessage</code> struct and the <code>pushScreen</code> method to include more extensive payloads, such as event objects (with category, action, label, and value), custom definitions, content groups and so forth.</p>

<p>To send a screen view with this interface, all you need is the following command:</p>

<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="n">Analytics</span><span class="p">.</span><span class="n">pushScreen</span><span class="p">(</span><span class="s">&#34;Some screen name&#34;</span><span class="p">)</span></code></pre></div>

<p>The class will take care of the rest.</p>

<p>It might seem complex, but it actually reduces a lot of overhead, since everything is neatly encapsulated in this single Analytics module.</p>

<p>In later articles we&rsquo;ll use a similar structure in all the GTM interactions, so that things will stay nice and functional.</p>

<h2 id="comments-on-google-tag-manager-for-ios">Comments on Google Tag Manager for iOS</h2>

<p>It&rsquo;s not perfect, I&rsquo;ll give you that. You might wonder what the actual benefit is to just using the Google Analytics SDK, and you&rsquo;re right to feel a bit confused.</p>

<p>However, as with GTM for web, the main benefit is with the Data Layer. Using the Data Layer interface lets you collect arbitrary semantic information from the app, and push it into the message queue without having to consider platform-specific implications. Instead, you can trust that whatever app uses the Data Layer will be able to transform the data to the form required by whatever endpoint it communicates with.</p>

<p>And that&rsquo;s exactly why we spent some time to create a custom interface for interacting with Google Tag Manager. We want to <strong>decouple</strong> semantic information from actual app logic, only sending generic strings and dictionaries through the interface.</p>

<p>This way, when GTM for apps hopefully expands and becomes richer and larger, you&rsquo;ll have the general infrastructure in place already, and implementing expansions and additions will happen organically and in a controlled, fluid manner, which leaves your app none the worse for wear.</p>

<h2 id="summary">Summary</h2>

<p>This has been a rather extensive tutorial for something as &ldquo;simple&rdquo; as setting up Google Tag Manager in your mobile app. Well, I hope that bubble has burst. It&rsquo;s not simple. It&rsquo;s not meant to be. You&rsquo;re messing with a <em>software project</em> for goodness sake. You don&rsquo;t want to mess up your chances with App Store review, or the hundreds of thousands of eager users that cringe if even the smallest thing is amiss in your beautiful app.</p>

<p>GTM for mobile is not perfect. Far from it. There&rsquo;s still a lot to be done, and I hope the developers come up with some solid selling points for the platform, before people dismiss it entirely in favor of the pretty robust Google Analytics SDKs.</p>

<p>To me, one of the biggest issues is, funnily enough, the terminology used. GTM for mobile <em>is so far removed</em> from GTM for web that it&rsquo;s weird they even share the same name. There are no &ldquo;tags&rdquo; in mobile development. It&rsquo;s just variables, classes, structs, dictionaries, functions, objects, etc.</p>

<p>It&rsquo;s not &ldquo;tag management&rdquo;, it&rsquo;s app management, and as such it carries with it far greater risks than anything you could unleash on your website.</p>

<p>And the risks are the main reason I want to stay far away from the value collection methods and the whole idea of updating configuration values of the app through GTM. A mobile app, being a software project, should be governed by the code base, and not some outside dependency.</p>

<p>I don&rsquo;t understand why you&rsquo;d want to delegate app operations to a web-based control panel, when all it takes is a single failed network request and a slightly outdated default container to screw up the experience for the user. And I&rsquo;m sure that app users are less forgiving than web visitors, especially if the app costs money.</p>

<p>Things like <strong>automatic screen tracking</strong> or <strong>automatic exception handling</strong> are not things I particularly miss, as creating the Analytics.swift module pretty much gives you a one-liner to track all your screenviews with (and events, if you extend it a little). Thus, ultimately it&rsquo;s the same effort as setting a <code>self.screenName</code> property or something.</p>

<p>Other than the above, setting GTM for apps up is a breeze once you understand the logic. I love how I can use the Data Layer to decouple semantic information stored in the app from the app logic itself. I also love how I don&rsquo;t have to write analytics-specific syntax, and I can just use a generic Data Layer syntax instead. Perfection!</p>

<p>I&rsquo;m looking forward to writing more about GTM for mobile soon. There are many ways you can improve the analytics tracking, and the SDK still has many tricks up its sleeve that you can use to facilitate your app tracking even further.</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.simoahava.com/amp/"></a>
    </figure>
    

    
    
    
        
    
    

    <section class="author">
      <h4>Simo Ahava</h4>
      
        <p>Husband | Father | Analytics developer</p>
      
      <div class="author-meta">
        <span class="author-location icon-location">Espoo, Finland</span>
        <span class="author-link icon-link"><a href="https://www.simoahava.com/">https://www.simoahava.com/</a></span>
      </div>
    </section>


    
    <div class="social">

<amp-social-share type="twitter"
  width="60"
  height="44"> </amp-social-share>


    <amp-social-share type="gplus"
                      width="60"
                      height="44"></amp-social-share>




<amp-social-share type="linkedin"
                  width="60"
                  height="44"></amp-social-share>


    <amp-social-share type="facebook"
                      width="60"
                      height="44"></amp-social-share>

</div>


    
  </footer>
</article>

</main>
</div>

</body>
</html>

