<!doctype html><html ⚡ lang=en-us class=no-js><head><meta charset=utf-8><script async custom-element=amp-youtube src=https://cdn.ampproject.org/v0/amp-youtube-0.1.js></script><script async custom-element=amp-accordion src=https://cdn.ampproject.org/v0/amp-accordion-0.1.js></script><script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script><script async custom-element=amp-sidebar src=https://cdn.ampproject.org/v0/amp-sidebar-0.1.js></script><script async custom-element=amp-social-share src=https://cdn.ampproject.org/v0/amp-social-share-0.1.js></script><script async custom-element=amp-twitter src=https://cdn.ampproject.org/v0/amp-twitter-0.1.js></script><script async custom-element=amp-iframe src=https://cdn.ampproject.org/v0/amp-iframe-0.1.js></script><script async src=https://cdn.ampproject.org/v0.js></script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom>.type-simmer{padding:8px;background:rgba(179,138,197,.2);box-shadow:2px 2px 1px #ccc;border-radius:5px}/*!normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css*/html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{display:none;text-indent:-9999px;visibility:hidden}.inner{margin:0 auto;max-width:710px;position:relative;width:80%}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{background:#fff;min-height:100%;position:relative;transition:transform .5s ease;z-index:10}html{font-size:62.5%;-webkit-tap-highlight-color:transparent}body,html{height:100%;max-height:100%}body{color:#3a4145;font-family:Merriweather,serif;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-size:1.8rem;letter-spacing:.01rem;line-height:1.75em;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{color:#2e2e2e;font-family:Open Sans,sans-serif;-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;line-height:1.15em;margin:0 0 .4em;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{clear:left;float:left;font-weight:700;overflow:hidden;text-align:right;text-overflow:ellipsis;white-space:nowrap;width:180px}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{border:0;border-top:1px solid #efefef;display:block;height:1px;margin:3.2em 0;padding:0}blockquote{border-left:.4em solid #4a4a4a;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em}blockquote p{font-style:italic;margin:.8em 0}blockquote small{color:#ccc;display:inline-block;font-size:.9em;margin:.8em 0 .8em 1.5em}blockquote small:before{content:"— "}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{border:1px solid #e3edf3;border-radius:2px;font-size:.85em;padding:1px 3px;white-space:pre-wrap}code,pre,tt{background:#f7fafb;font-family:Inconsolata,monospace,sans-serif}pre{border:1px solid #e3edf3;border-radius:3px;box-sizing:border-box;font-size:.9em;margin:0 0 1.75em;overflow:auto;padding:10px;white-space:pre;width:100%}pre code,pre tt{background:0 0;border:none;font-size:inherit;padding:0;white-space:pre-wrap}kbd{background:#f4f4f4;border:1px solid #ccc;border-radius:4px;box-shadow:0 1px rgba(0,0,0,.2),inset 0 1px #fff;color:#666;display:inline-block;font-size:.9em;font-weight:700;margin-bottom:.4em;padding:1px 8px;text-shadow:#fff 0 1px 0}table{background-color:transparent;box-sizing:border-box;margin:1.75em 0;max-width:100%;width:100%}table td,table th{border-top:1px solid #efefef;line-height:20px;padding:8px;text-align:left;vertical-align:top}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:0 0}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{background:#222 no-repeat 50%;background-size:cover;display:table;height:100vh;margin-bottom:5rem;overflow:hidden;position:relative;text-align:center;width:100%}.main-header.cover{background-image:url(https://www.simoahava.com/images/maisema.jpg)}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{margin:0 0 30px;padding:35px 40px;position:relative}.main-nav a{font-family:Open Sans,sans-serif;text-decoration:none}.scroll-down{animation:bounce 4s 2s infinite;bottom:45px;display:block;font-size:1.5em;left:50%;position:absolute;text-align:center;z-index:100}.scroll-down:hover{animation:none;color:#fff}.home-template .main-header:after{background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%);border-radius:100%;bottom:0;content:" ";display:block;height:130px;left:50%;margin-left:-75px;position:absolute;width:150px}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover .scroll-down,.no-cover.main-header:after{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{box-sizing:border-box;height:38px}.menu-button{background:rgba(0,0,0,.1);border:1px solid #bfc8cd;border-radius:3px;color:#9eabb3;display:inline-block;float:right;font-size:12px;line-height:35px;opacity:1;padding:0 15px;text-align:center;text-transform:uppercase;transition:all .5s ease;white-space:nowrap}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent);border:none;height:70px;left:0;position:absolute;right:0;top:0}.no-cover .main-nav.overlay,.no-cover .menu-button{background:0 0}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{background:#fff;border-color:#fff;color:#222}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{color:#fff;font-family:Open Sans,sans-serif;font-size:5rem;font-weight:700;letter-spacing:-1px;margin:10px 0}.page-description{color:hsla(0,0%,100%,.8);font-family:Merriweather,serif;font-size:2rem;font-weight:400;letter-spacing:.01rem;line-height:1.5em;margin:0}.no-cover.main-header{background:#f5f8fa;max-height:40vh;min-height:160px}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{border-color:rgba(0,0,0,.3);color:rgba(0,0,0,.4)}.main-header-content .page-title{animation:fade-in-down .6s;animation-delay:.2s}.main-header-content .page-description{animation:fade-in-down .9s;animation-delay:.1s}.post{border-bottom:1px solid #ebf2f6;margin:4rem auto;max-width:710px;padding-bottom:4rem;position:relative;width:80%;word-wrap:break-word;hyphens:auto}.post-header{padding-bottom:10px}.post:after{background:#fff;border:1px solid #e7eef2;border-radius:100%;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";display:block;height:7px;left:50%;margin-left:-5px;position:absolute;width:7px}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{font-size:.9em;line-height:1.7em;margin:0}.read-more{font-size:.8em;font-style:italic;text-decoration:none}.post-meta{color:#9eabb3;display:block;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;margin:1.75rem 0 0}.author-thumb{border-radius:100%;float:left;height:24px;margin-right:9px;width:24px}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{min-height:77px;padding:.3rem 40px 0 100px;position:relative}.post-date{border-left:1px solid #d5dbde;display:inline-block;font-size:1.3rem;margin-left:8px;padding-left:12px;text-transform:uppercase;white-space:nowrap}.user-image{left:0;position:absolute;top:0}.user-name{display:block;font-weight:700}.user-bio{display:block;font-size:1.4rem;line-height:1.5em;max-width:440px}.publish-meta{padding:4.3rem 0 4rem;position:absolute;right:0;text-align:right;top:0}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{font-size:.8em;text-align:center}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{bottom:10px;box-shadow:0 15px 10px rgba(0,0,0,.7);content:"";height:20%;max-width:480px;position:absolute;width:50%;z-index:-2}figure.polaroid:after{left:auto;right:10px;transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;transform:rotate(-3deg)}figure.polaroid{background:#fff;border:none;border-radius:4px;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);margin-bottom:1.5em;max-width:100%;padding:15px;position:relative;width:450px}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;margin:0;outline:1px solid #ccc;padding:0}figure.polaroid figcaption{font-family:Kaushan Script,cursive;font-size:1.3em;font-weight:400;padding:.8em .5em .4em;text-align:right}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{border-bottom:1px solid #d3d3d3;border-top:1px solid #d3d3d3;font-size:.8em;font-style:italic;margin-top:.5em;padding:.2em;text-align:center}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{font-size:2em;text-decoration:none}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{color:#a2a2a2;font-size:2em;text-decoration:none}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{border:none;margin:0;padding:0}.post-template .content{overflow:hidden}.post-template .post{border-bottom:none;margin-top:0;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{border-top:1px solid #ebf2f6;margin:6rem 0 0;padding:6rem 0 0;position:relative}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{font-size:1.4rem;line-height:1.75em;margin:1rem 0}.author-meta{font-size:1.4rem;font-style:italic;line-height:1;list-style:none;margin:0;padding:0}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;right:0;top:6rem;width:180px}.post-footer .share a{color:#bbc7cc;display:inline-block;font-size:1.8rem;margin:1rem 1.6rem 1.6rem 0;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{background:0 0;height:85px;margin-bottom:0;min-height:0}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{background:0 0;height:10vh;min-height:100px}.author-profile{border-bottom:1px solid #ebf2f6;padding:0 15px 5rem;text-align:center}.author-profile:after{border:1px solid #e7eef2;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";height:7px;margin-left:-5px;width:7px}.author-image,.author-profile:after{background:#fff;border-radius:100%;display:block;left:50%;position:absolute}.author-image{box-shadow:0 0 0 1px #e7eef2;box-sizing:border-box;height:80px;margin-left:-40px;overflow:hidden;padding:6px;top:-56px;width:80px;z-index:2}.author-image .img{background-image:url(https://www.simoahava.com/images/simo.png);background-position:50%;background-size:cover;border-radius:100%;display:block;height:100%;position:relative;width:100%}.author-profile .author-image{box-shadow:none;height:120px;left:auto;margin:-100px auto 0;padding:3px;position:relative;top:auto;width:120px}.author-title{margin:1.5rem 0 1rem}.author-bio{color:#50585d;font-size:1.8rem;font-weight:200;letter-spacing:0;line-height:1.5em;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{font-family:Merriweather,serif;font-size:1.7rem;letter-spacing:.01rem;margin:2rem 0}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);color:#909090;font-family:Open Sans,Verdana,sans-serif;font-size:11px;font-weight:700;overflow-y:auto;text-align:left;width:400px}#sidebar .nav-title{color:#fff;font-size:1.5em;font-weight:100;left:30px;position:absolute;text-transform:uppercase;top:45px}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{font-size:10px;height:20px;padding:0;position:absolute;right:25px;top:38px;width:20px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{background:#969696;content:"";height:1px;position:absolute;top:0;top:15px;transition:background .15s ease;width:20px}#sidebar .nav-close:before{transform:rotate(45deg)}#sidebar .nav-close:after{transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{background:0 0;border:none;font-size:2rem;margin:.4em 0 .2em}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open,#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{counter-reset:item;list-style:none;padding:90px 9% 5%}#sidebar li:before{color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item;display:block;float:right;font-size:1.2rem;padding-left:5px;padding-right:4%;text-align:right;vertical-align:bottom}#sidebar li{margin:0}#sidebar li a{display:block;font-size:1.4rem;line-height:1.4;overflow:hidden;padding:.6rem 4%;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}#sidebar li a:after{color:hsla(0,0%,100%,.2);content:" ...............................................................";display:inline-block;margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{border-bottom:1px solid hsla(0,0%,100%,.5);content:" ";height:1px;width:100%}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{background:#fff;border-radius:3px;bottom:30px;box-sizing:border-box;display:block;font-family:Open Sans,sans-serif;font-size:12px;height:38px;left:30px;line-height:35px;padding:0 20px;position:absolute;right:30px;text-align:center;text-decoration:none;text-transform:uppercase;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{color:#9eabb3;font-family:Open Sans,sans-serif;font-size:1.3rem;margin:4rem auto;max-width:710px;position:relative;text-align:center;width:80%}.pagination a{color:#9eabb3;transition:all .2s ease}.newer-posts,.older-posts{border:1px solid #bfc8cd;border-radius:4px;display:inline-block;padding:0 15px;position:absolute;text-decoration:none;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;min-width:100px;padding:2px 0}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{border-color:#98a0a4;color:#889093}.extra-pagination{border-bottom:1px solid #ebf2f6;display:none}.extra-pagination:after{background:#fff;border:1px solid #e7eef2;border-radius:100%;bottom:-5px;box-shadow:0 0 0 5px #fff;content:"";display:block;height:7px;left:50%;margin-left:-5px;position:absolute;width:7px}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{color:#bbc7cc;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;margin:8rem 0 0;padding:.5rem 15px;position:relative}.site-footer a{color:#bbc7cc;font-weight:700;text-decoration:none}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{box-sizing:border-box;height:auto;height:60vh;min-height:240px;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{height:40vh;margin-bottom:15px}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{background:0 0;border-radius:0;padding:0 5px}.menu-button,.menu-button:hover{border-color:transparent;color:#2e2e2e}.menu-button:hover{background:0 0}body.nav-opened .menu-button{background:0 0;border:transparent}.main-nav.overlay a:hover{background:0 0;border-color:transparent;color:#fff}.no-cover .main-nav.overlay{background:0 0}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{margin:2rem auto;width:auto}.post{line-height:1.65em;margin:2rem 16px;padding-bottom:2rem;width:auto}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{margin-bottom:0;padding-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{border-bottom:1px dashed #ebf2f6;margin:0 0 2rem;padding:0 0 1.6rem}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;line-height:1.75em;margin:0}.author-meta li:before{display:none}.newer-posts,.older-posts{margin:10px 0;position:static}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{border:1px solid #777;box-shadow:5px 5px 2px rgba(0,0,0,.4);height:auto;margin-bottom:20px;max-width:100%}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{background-color:#007bff;color:#fff}.badge{border-radius:.25rem;display:inline-block;font-size:80%;font-weight:700;line-height:1;padding:.25em .4em;text-align:center;vertical-align:middle;white-space:nowrap}</style><link rel=canonical href=https://www.simoahava.com/analytics/ecommerce-tips-google-tag-manager/><meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1"><link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin=anonymous referrerpolicy=no-referrer><meta name=theme-color content="#ffffff"><title>ECommerce Tips for Google Tag Manager | Simo Ahava's blog</title>
<meta property="og:title" content="ECommerce Tips for Google Tag Manager"><meta name=description content="Tips for setting up Google Analytics Ecommerce and Enhanced Ecommerce tracking via Google Tag Manager."><meta property="og:description" content="Tips for setting up Google Analytics Ecommerce and Enhanced Ecommerce tracking via Google Tag Manager."><meta property="og:type" content="article"><meta property="og:url" content="https://www.simoahava.com/amp/analytics/ecommerce-tips-google-tag-manager/"><meta name=twitter:image content="https://www.simoahava.com/images/2014/09/ecommerce-process.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2014/09/ecommerce-process.jpg"><meta property="article:published_time" content="2014-10-06T07:10:27Z"><meta property="article:modified_time" content="2014-10-06T07:10:27Z"><meta property="og:site_name" content="Simo Ahava's blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development."><meta property="article:section" content="Analytics"><meta property="article:tag" content="ecommerce"><meta property="article:tag" content="enhanced ecommerce"><meta property="article:tag" content="Google Tag Manager"><meta property="article:tag" content="Guide"><meta name=twitter:card content="summary"><meta itemprop=name content="eCommerce Tips For Google Tag Manager"><meta itemprop=description content="Tips for setting up Google Analytics Ecommerce and Enhanced Ecommerce tracking via Google Tag Manager."><meta itemprop=datePublished content="2014-10-06T07:10:27+00:00"><meta itemprop=dateModified content="2014-10-06T07:10:27+00:00"><meta itemprop=wordCount content="2648"><meta itemprop=keywords content="Ecommerce,Enhanced Ecommerce,Google Tag Manager,Guide"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.","url":"https:\/\/www.simoahava.com\/amp\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"eCommerce Tips For Google Tag Manager | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2014\/09\/ecommerce-process.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/amp\/","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/amp\/analytics\/ecommerce-tips-google-tag-manager\/","datePublished":"2014-10-06T07:10:27\u002b00:00","dateModified":"2014-10-06T07:10:27\u002b00:00","description":"Tips for setting up Google Analytics Ecommerce and Enhanced Ecommerce tracking via Google Tag Manager.","author":{"@type":"Person","name":"Simo Ahava"}}</script></head><body><amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials=include></amp-analytics><amp-sidebar id=sidebar layout=nodisplay side=right><h3 class=nav-title>Menu</h3><a href=# class=nav-close on=tap:sidebar.close role=button tabindex=1><span class=hidden>Close</span></a><ul><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/>Home</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/gtm-tips/>GTM Tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/about-simo-ahava/>About</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tools/>Tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/blog-statistics/>Blog Statistics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/upcoming-talks/>Upcoming Talks</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/custom-templates/>Templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/newsletter/>Newsletter</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/>Full (non-AMP) site</a></li><amp-accordion><section><h3 class=nav-section><i class="fa fa-caret-down section-open" aria-hidden=true></i>
<i class="fa fa-caret-right section-close" aria-hidden=true></i>
Categories</h3><div><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/analytics/>analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/content-management/>content management</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/digital-marketing/>digital marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/google-cloud/>google cloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/gtm-tips/>gtm tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/personal/>personal</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/privacy/>privacy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/seo/>seo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/web-design/>web design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/categories/web-development/>web development</a></li></div></section><section><h3 class=nav-section><i class="fa fa-caret-down section-open" aria-hidden=true></i>
<i class="fa fa-caret-right section-close" aria-hidden=true></i>
Tags</h3><div><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ab-testing/>ab testing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/accelerated-mobile-pages/>accelerated mobile pages</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ad-blocker/>ad blocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/adblocker/>adblocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/add-on/>add-on</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/adwords/>adwords</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/agile/>agile</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/amazon/>amazon</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/amp/>amp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/analytics/>analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/android/>android</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/api/>api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app/>app</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app-engine/>app engine</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/app+web/>app+web</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/approval/>approval</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/apps/>apps</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/apps-script/>apps script</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/array/>array</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/attribution/>attribution</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/audience-design/>audience design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/audit/>audit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/auto-event-tracking/>auto-event tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/auto-link-domains/>auto-link domains</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/aws/>aws</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/azure/>azure</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/basketball/>basketball</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/beforeunload/>beforeunload</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/best-practices/>best practices</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/big-data/>big data</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/bigquery/>bigquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/blogger/>blogger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/bounce-rate/>bounce rate</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/built-in-variables/>built-in variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/calculated-metrics/>calculated metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/callback/>callback</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/campaign-tracking/>campaign tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/celebration/>celebration</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/change-history/>change history</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/chrome/>chrome</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/chrome-extension/>chrome extension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/click-tracking/>click tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/click-variables/>click variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/clickstream/>clickstream</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/client-id/>client id</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/client-template/>client template</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/clientid/>clientid</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cloud-functions/>cloud functions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cloud-run/>cloud run</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cms/>cms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cname/>cname</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conferences/>conferences</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/consent/>consent</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/consent-mode/>consent mode</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container/>container</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container-export/>container export</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/container-snippet/>container snippet</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content/>content</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-analysis/>content analysis</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-blocker/>content blocker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-engagement/>content engagement</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-grouping/>content grouping</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-management/>content management</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-management-system/>content management system</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-security-policy/>content security policy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/content-strategy/>content strategy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/context/>context</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conversion/>conversion</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/conversions-api/>conversions api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookie/>cookie</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookiedomain/>cookiedomain</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cookies/>cookies</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/core-web-vitals/>core web vitals</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/creative/>creative</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cross-domain/>cross-domain</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/cross-domain-tracking/>cross-domain tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/csp/>csp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/css/>css</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/css-selectors/>css selectors</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom/>custom</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-dimension/>custom dimension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-dimensions/>custom dimensions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html/>custom html</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html-tag/>custom html tag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-html-tags/>custom html tags</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-javascript/>custom javascript</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-metrics/>custom metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/custom-templates/>custom templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/customtask/>customtask</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dan-wilkerson/>dan wilkerson</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dashboard/>dashboard</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data/>data</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-collection/>data collection</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-engineering/>data engineering</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-layer/>data layer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-layer-variable/>data layer variable</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-model/>data model</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/data-quality/>data quality</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/datalayer/>datalayer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/debug/>debug</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/debugging/>debugging</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/definition-of-success/>definition of success</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/developer/>developer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/developer-tools/>developer tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/development/>development</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/digital-marketing/>digital marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/docker/>docker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/document.write/>document.write</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dom/>dom</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/duplicate/>duplicate</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/dynamic-content/>dynamic content</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/easter-egg/>easter egg</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ecomemrce/>ecomemrce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ecommerce/>ecommerce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/education/>education</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/element-visibility/>element visibility</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/engagement/>engagement</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/enhanced-ecommerce/>enhanced ecommerce</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/enrichment/>enrichment</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/environments/>environments</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/errors/>errors</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event/>event</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event-listener/>event listener</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/event-listeners/>event listeners</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/eventcallback/>eventcallback</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/events/>events</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/excel/>excel</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/exceptions/>exceptions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/experimentation/>experimentation</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/exploit/>exploit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/extension/>extension</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/facebook/>facebook</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/false/>false</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/family/>family</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/fields-to-set/>fields to set</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firebase/>firebase</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firestore/>firestore</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/firing-rules/>firing rules</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/folders/>folders</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/form/>form</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/form-tracking/>form tracking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/format-value/>format value</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/forms/>forms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/fpid/>fpid</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ga-spy/>ga spy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ga4/>ga4</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gcp/>gcp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gdpr/>gdpr</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google/>google</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-ads/>google ads</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics/>google analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics-4/>google analytics 4</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-analytics-settings/>google analytics settings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-bigquery/>google bigquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-cloud/>google cloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-cloud-platform/>google cloud platform</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-sheets/>google sheets</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-tag/>google tag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-tag-manager/>google tag manager</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-trends/>google trends</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/google-optimize/>google-optimize</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/googletagmanager/>googletagmanager</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/governance/>governance</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtag/>gtag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtag.js/>gtag.js</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm/>gtm</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm-sonar/>gtm sonar</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm-tools/>gtm tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtm360/>gtm360</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/gtmtips/>gtmtips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/guest-post/>guest post</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/guide/>guide</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/hack/>hack</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history/>history</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history-change-trigger/>history change trigger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/history-listener/>history listener</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/hugo/>hugo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/iframe/>iframe</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/>intelligent tracking prevention</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/internal-traffic/>internal traffic</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ios/>ios</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ip/>ip</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/it-department/>it department</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/itp/>itp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/javascript/>javascript</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/jquery/>jquery</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/klipfolio/>klipfolio</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/learning/>learning</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/lighthouse/>lighthouse</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/links/>links</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/listeners/>listeners</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/local/>local</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/localstorage/>localstorage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/lookup-table/>lookup table</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/macros/>macros</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/marketer/>marketer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/marketing/>marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/measurement-protocol/>measurement protocol</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/meta-description/>meta description</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/metrics/>metrics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/migration/>migration</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/mixcloud/>mixcloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/mobile/>mobile</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/modern-cms/>modern cms</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/modular-architecture/>modular architecture</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/monitor/>monitor</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/navigation/>navigation</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/netbooster/>netbooster</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/new-ui/>new ui</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/node.js/>node.js</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/nodejs/>nodejs</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/non-technical/>non-technical</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/open-source/>open source</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/opt-out/>opt-out</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/owasp/>owasp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/page-load-time/>page load time</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/page-timings/>page timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/parameter-reporting/>parameter reporting</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/penguin/>penguin</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/performance/>performance</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/permissions/>permissions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/persistence/>persistence</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/personal/>personal</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/personal-experience/>personal experience</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/php/>php</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/pii/>pii</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/pitch/>pitch</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/piwik-pro/>piwik pro</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/plugins/>plugins</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/poetry/>poetry</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/postmessage/>postmessage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/ppc/>ppc</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/preview/>preview</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/preview-mode/>preview mode</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/privacy/>privacy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/process/>process</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/proxy/>proxy</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/public-speaking/>public speaking</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/query-string/>query string</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/queue-time/>queue time</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/r/>r</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/race-condition/>race condition</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/reaktor/>reaktor</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/recaptcha/>recaptcha</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/referral/>referral</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/regular-expression/>regular expression</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/release/>release</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/resources/>resources</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/rules/>rules</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/safari/>safari</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sales/>sales</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/samesite/>samesite</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/schema/>schema</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/score-card/>score card</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/scroll-depth/>scroll depth</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search/>search</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-api/>search api</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-engine-optimization/>search engine optimization</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/search-trends/>search trends</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/security/>security</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/selection/>selection</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/seo/>seo</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/seo-report/>seo report</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/serp/>serp</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/server-side/>server-side</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/server-side-tagging/>server-side tagging</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/session/>session</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sessions/>sessions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/sgtm/>sgtm</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/shopify/>shopify</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/simmer/>simmer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/single-page-apps/>single-page apps</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/site-search/>site search</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/site-speed/>site speed</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/slack/>slack</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/snippet/>snippet</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/snowplow/>snowplow</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/social-interactions/>social interactions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/soundcloud/>soundcloud</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/spa/>spa</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/splash-page/>splash page</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/static-site/>static site</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/still-running/>still running</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/storage/>storage</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/support/>support</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/swift/>swift</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/syntax-highlight/>syntax highlight</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-management-solution/>tag management solution</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-management-solutions/>tag management solutions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-sequencing/>tag sequencing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tag-templates/>tag templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tags/>tags</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tasks/>tasks</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/technical-marketing/>technical marketing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/technique/>technique</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/test/>test</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/testing/>testing</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/timer/>timer</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/timings/>timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tips/>tips</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tools/>tools</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracker/>tracker</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracker-object/>tracker object</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/tracking-protections/>tracking protections</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/training/>training</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/transformations/>transformations</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/trigger/>trigger</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/trigger-groups/>trigger groups</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/triggers/>triggers</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/troubleshoot/>troubleshoot</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/undefined/>undefined</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/universal-analytics/>universal analytics</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-id/>user id</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-interface/>user interface</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-permissions/>user permissions</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/user-timings/>user timings</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/v2/>v2</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variable/>variable</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variable-templates/>variable templates</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/variables/>variables</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/videos/>videos</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/visibility/>visibility</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/wcag/>wcag</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/weather/>weather</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/web-design/>web design</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/web-development/>web development</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/webkit/>webkit</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/website-redesign/>website redesign</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/workflow/>workflow</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/workspaces/>workspaces</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/youtube/>youtube</a></li><li class=nav-opened role=presentation><a href=https://www.simoahava.com/amp/tags/zones/>zones</a></li></div></section></amp-accordion></ul></amp-sidebar><div class=site-wrapper><header class="main-header post-head no-cover"><nav class="main-nav clearfix"><a class=menu-button on=tap:sidebar.toggle role=button><i class="fa fa-bars" aria-hidden=true></i><span class=menu-button-label>Menu</span></a></nav></header><main class=content role=main><article class="post type-post"><header class=post-header><h1 class=post-title>ECommerce Tips for Google Tag Manager</h1><small>Tips for setting up Google Analytics Ecommerce and Enhanced Ecommerce tracking via Google Tag Manager.</small><section class=post-meta><amp-img class=author-thumb src=https://www.simoahava.com/images/simo.png layout=fixed width=24 height=24 alt="Author image"></amp-img>Simo Ahava
in
<a href=https://www.simoahava.com/amp/categories/analytics>Analytics</a>
on
<a href=https://www.simoahava.com/amp/tags/ecommerce>#ecommerce</a>
, <a href=https://www.simoahava.com/amp/tags/enhanced-ecommerce>#enhanced ecommerce</a>
, <a href=https://www.simoahava.com/amp/tags/google-tag-manager>#Google Tag Manager</a>
, <a href=https://www.simoahava.com/amp/tags/guide>#Guide</a>
<time class=post-date datetime=2014-10-06T07:10:27Z>6 October 2014
</time><span class=post-date><a href=https://www.simoahava.com/analytics/ecommerce-tips-google-tag-manager/>Non-AMP version</a></span></section></header><section class=post-content><p>I&rsquo;ve noticed that <a href="https://support.google.com/tagmanager/answer/3002596?hl=en">setting up eCommerce</a> in <a href=http://www.google.com/tagmanager>Google Tag Manager</a> (and now the new <a href=https://developers.google.com/tag-manager/enhanced-ecommerce>Enhanced ecommerce</a>) is very difficult for many. I&rsquo;m sure part of the problem is that eCommerce is for many users the moment that GTM forces you to take steps in to the developer&rsquo;s domain, since it&rsquo;s obvious that you&rsquo;ll need to add some code to the web page.</p><p>This isn&rsquo;t a tutorial on how to do eCommerce in Google Tag Manager. To get started, you&rsquo;ll want to check out the official documentation. Sure, it might be inaccurate in places, and especially the translations are lacking, but <code>dataLayer</code> form and function is nicely described within.</p><p><a href=https://developers.google.com/tag-manager/enhanced-ecommerce>Enhanced Ecommerce (UA) Developer Guide</a>
<a href="https://support.google.com/tagmanager/answer/3002596?hl=en">Google Analytics Ecommerce</a></p><p>This article has tips and answers to some frequently asked questions around eCommerce. Hopefully they will help you understand how eCommerce and Google Tag Manager work together.</p><article class="post type-simmer"><header class=post-header><h2 class=post-title><a href=https://www.simoahava.com/amp/newsletter/>The Simmer Newsletter</a></h2></header><section class=post-excerpt><p>Follow <a href=https://www.teamsimmer.com/newsletter/>this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href=https://www.teamsimmer.com/>Simmer online course platform</a>.</p></section></article><h2 id=the-process-in-a-nutshell>The process in a nutshell</h2><p>Here&rsquo;s how eCommerce and Google Tag Manager conspire to get you the all-important data of your web transactions.</p><ol><li><p>Your <strong>eCommerce platform</strong> and/or your <strong>Content Management Solution (CMS)</strong> render the source code</p></li><li><p>If the page includes transactional information, this source code must include all required details about the transaction in the <code>dataLayer</code> object</p></li><li><p>When the tag which carries the transaction to GA fires, it will look at the <code>dataLayer</code> object</p></li><li><p>If it finds all the required information within, it will send the transaction hit to GA</p></li></ol><a href=https://www.simoahava.com/amp/images/2014/09/ecommerce-process.jpg title="The eCommerce process in Google Tag Manager"><amp-img src=https://www.simoahava.com/amp/images/2014/09/ecommerce-process.jpg layout=responsive alt="The eCommerce process in Google Tag Manager" height=1141 width=1516></amp-img></a><p>Most of the following chapters will shed more light on these points, but the key thing to remember is this:</p><p><strong>Your eCommerce and/or CMS platform do almost all the work in tracking your transactions.</strong></p><p>The backend solution, whether it&rsquo;s your CMS or a dedicated eCommerce platform such as <a href=http://www.magentocommerce.com/magento-connect/google-tag-manager-3.html>Magento</a>, or even a WordPress plugin (such as <a href=http://www.woothemes.com/woocommerce/>WooCommerce</a>), has to do the grunt work of populating the keys in the data layer.</p><p>With a Python-based application, the page template might look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionId&#39;</span> <span class=o>:</span> <span class=s1>&#39;{{ transactionId }}&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>With PHP, it might look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionId&#39;</span> <span class=o>:</span> <span class=s1>&#39;&lt;?php echo $transactionId ?&gt;&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>With QBASIC, it might look like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionId&#39;</span> <span class=o>:</span> <span class=s1>&#39;PRINT T$; GOTO END&#39;</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>OK, the QBASIC script was fictitious, I was trying to be funny. But nostalgia, right? Right?</p><p>So don&rsquo;t expect GTM to come up with values for these variables magically. You will need a developer to help you here, and you will need a cooperative backend platform.</p><p>Now, sometimes you might be tempted to scrape the DOM for eCommerce information. That means that you have some JavaScript in place which retrieves all the necessary transactional data from elements on the page, such as headings, body text, even image ALT texts.</p><p><em>This is not the recommended approach!</em></p><p>There are many, excellent reasons for decoupling semantic information (information with no inherent value to what is rendered in the browser document) from the presentational layer. This is what the data layer was invented for. I strongly suggest you avoid taking the seemingly easy path of scraping on-page elements, especially with business-critical transactional tags.</p><p>Note, however, that some aspects of Enhanced eCommerce as it stands today might actually benefit from a combination of DOM scraping and <code>dataLayer</code> utilization. We&rsquo;ll go over this later in the post.</p><p>Here are the actual tips:</p><ol><li><p>dataLayer before GTM</p></li><li><p>Use a custom event</p></li><li><p>Make sure all the data is there</p></li><li><p>Don&rsquo;t forget your JavaScript</p></li><li><p>Enhanced eCommerce is special</p></li></ol><p>And we&rsquo;ll wrap it up with a neat summary.</p><h2 id=datalayer-before-gtm>dataLayer before GTM</h2><p>This is a very common problem. The tag that carries your transaction information fires <strong>before</strong> the transaction data is in <code>dataLayer</code>. D&rsquo;uh!</p><p>When a tag fires, it has access to the <em>current state</em> of all variables in the global namespace. <code>dataLayer</code> is one of them. If <code>dataLayer</code> doesn&rsquo;t have the required variables on the moment that the transactional tag fires, you won&rsquo;t see data from that hit in GA.</p><p>Here&rsquo;s an example. This is what your normal eCommerce tag looks like:</p><a href=https://www.simoahava.com/amp/images/2014/09/transaction-tag.jpg title=transaction-tag><amp-img src=https://www.simoahava.com/amp/images/2014/09/transaction-tag.jpg layout=responsive alt=transaction-tag height=470 width=749></amp-img></a><p>As you can see, there are VERY few options to work with. You just set Track Type to Transaction, add a rule, and you&rsquo;re good to go.</p><p>The point is that this tag will fire as soon as the container snippet is loaded, i.e. when <a href=https://www.simoahava.com/amp/analytics/container-snippet-gtm-secrets-revealed/>the container snippet</a> pushes <code>'event' : 'gtm.js'</code> into <code>dataLayer</code>. Because the tag looks into <code>dataLayer</code> for the transaction details, they have to be there by the time the tag fires!</p><p>Thus, this will work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span> <span class=o>=</span> <span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span> <span class=o>||</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>  <span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionId&#39;</span><span class=o>:</span> <span class=s1>&#39;1234&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionAffiliation&#39;</span><span class=o>:</span> <span class=s1>&#39;Acme Clothing&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionTotal&#39;</span><span class=o>:</span> <span class=mf>38.26</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionTax&#39;</span><span class=o>:</span> <span class=mf>1.29</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionShipping&#39;</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionProducts&#39;</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;sku&#39;</span><span class=o>:</span> <span class=s1>&#39;DD44&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;T-Shirt&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;category&#39;</span><span class=o>:</span> <span class=s1>&#39;Apparel&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;price&#39;</span><span class=o>:</span> <span class=mf>11.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;quantity&#39;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;sku&#39;</span><span class=o>:</span> <span class=s1>&#39;AA1243544&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;Socks&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;category&#39;</span><span class=o>:</span> <span class=s1>&#39;Apparel&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;price&#39;</span><span class=o>:</span> <span class=mf>9.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;quantity&#39;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- Google Tag Manager --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;&lt;</span><span class=nt>iframe</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;//www.googletagmanager.com/ns.html?id=GTM-P8XR&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>height</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;display:none;visibility:hidden&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>iframe</span><span class=p>&gt;&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=nx>d</span><span class=p>,</span><span class=nx>s</span><span class=p>,</span><span class=nx>l</span><span class=p>,</span><span class=nx>i</span><span class=p>){</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>=</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>||</span><span class=p>[];</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl>  <span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span><span class=nx>event</span><span class=o>:</span><span class=s1>&#39;gtm.js&#39;</span><span class=p>});</span><span class=kd>var</span> <span class=nx>f</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>j</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span><span class=nx>dl</span><span class=o>=</span><span class=nx>l</span><span class=o>!=</span><span class=s1>&#39;dataLayer&#39;</span><span class=o>?</span><span class=s1>&#39;&amp;l=&#39;</span><span class=o>+</span><span class=nx>l</span><span class=o>:</span><span class=s1>&#39;&#39;</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=kr>async</span><span class=o>=</span><span class=kc>true</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=o>=</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;//www.googletagmanager.com/gtm.js?id=&#39;</span><span class=o>+</span><span class=nx>i</span><span class=o>+</span><span class=nx>dl</span><span class=p>;</span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=nx>f</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=nb>document</span><span class=p>,</span><span class=s1>&#39;script&#39;</span><span class=p>,</span><span class=s1>&#39;dataLayer&#39;</span><span class=p>,</span><span class=s1>&#39;GTM-P8XR&#39;</span><span class=p>);&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- End Google Tag Manager --&gt;</span></span></span></code></pre></div><p>As you can see, the data is <strong>before</strong> the container snippet, so the <code>dataLayer</code> object is populated with all the required variables by the time the tag fires.</p><p>However, this will NOT work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- Google Tag Manager --&gt;</span>;
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;&lt;</span><span class=nt>iframe</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;//www.googletagmanager.com/ns.html?id=GTM-P8XR&#34;</span>
</span></span><span class=line><span class=cl><span class=na>height</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;display:none;visibility:hidden&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>iframe</span><span class=p>&gt;&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=nx>d</span><span class=p>,</span><span class=nx>s</span><span class=p>,</span><span class=nx>l</span><span class=p>,</span><span class=nx>i</span><span class=p>){</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>=</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>||</span><span class=p>[];</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span><span class=nx>event</span><span class=o>:</span><span class=s1>&#39;gtm.js&#39;</span><span class=p>});</span><span class=kd>var</span> <span class=nx>f</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=nx>j</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span><span class=nx>dl</span><span class=o>=</span><span class=nx>l</span><span class=o>!=</span><span class=s1>&#39;dataLayer&#39;</span><span class=o>?</span><span class=s1>&#39;&amp;l=&#39;</span><span class=o>+</span><span class=nx>l</span><span class=o>:</span><span class=s1>&#39;&#39;</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=kr>async</span><span class=o>=</span><span class=kc>true</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;//www.googletagmanager.com/gtm.js?id=&#39;</span><span class=o>+</span><span class=nx>i</span><span class=o>+</span><span class=nx>dl</span><span class=p>;</span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=nx>f</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=nb>document</span><span class=p>,</span><span class=s1>&#39;script&#39;</span><span class=p>,</span><span class=s1>&#39;dataLayer&#39;</span><span class=p>,</span><span class=s1>&#39;GTM-P8XR&#39;</span><span class=p>);&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- End Google Tag Manager --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionId&#39;</span><span class=o>:</span> <span class=s1>&#39;1234&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionAffiliation&#39;</span><span class=o>:</span> <span class=s1>&#39;Acme Clothing&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionTotal&#39;</span><span class=o>:</span> <span class=mf>38.26</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionTax&#39;</span><span class=o>:</span> <span class=mf>1.29</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionShipping&#39;</span><span class=o>:</span> <span class=mi>5</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;transactionProducts&#39;</span><span class=o>:</span> <span class=p>[{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;sku&#39;</span><span class=o>:</span> <span class=s1>&#39;DD44&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;T-Shirt&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;category&#39;</span><span class=o>:</span> <span class=s1>&#39;Apparel&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;price&#39;</span><span class=o>:</span> <span class=mf>11.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;quantity&#39;</span><span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>},{</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;sku&#39;</span><span class=o>:</span> <span class=s1>&#39;AA1243544&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;Socks&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;category&#39;</span><span class=o>:</span> <span class=s1>&#39;Apparel&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;price&#39;</span><span class=o>:</span> <span class=mf>9.99</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s1>&#39;quantity&#39;</span><span class=o>:</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>    <span class=p>}]</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>This time, the transaction data is pushed <strong>after</strong> the container snippet has loaded, and there&rsquo;s a very strong possibility that the data is not rendered in <code>dataLayer</code> when the Transaction Tag fires.</p><p>The same applies to any data you might try to move in a Custom HTML Tag. The Custom HTML Tag fires at its earliest with <strong>{{event}} equals gtm.js</strong>, because that&rsquo;s the <a href=https://www.simoahava.com/amp/gtm-tips/gtmtips-rules-nutshell/>earliest possible event</a> to fire your tags on. However, your transaction tag is ALSO firing on that event, meaning there&rsquo;s a possibility that your transaction tag will fire first, and thus won&rsquo;t find the transaction details in <code>dataLayer</code>. You can try to rectify this with Tag Priority, but in this case it would be better to look at the next tip.</p><h2 id=use-a-custom-event>Use a custom event</h2><p>If you can&rsquo;t push your data into <code>dataLayer</code> before <strong>{{event}} equals gtm.js</strong> fires, or if there&rsquo;s even the tiniest possibility that the data won&rsquo;t be rendered in time, you could just as well push a custom event of your own.</p><p>For example, if you&rsquo;re using a Custom HTML Tag to build your eCommerce <code>dataLayer</code>, add an &rsquo;event&rsquo; push in there, which you&rsquo;ll then use as the firing rule for your transactional tags:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=p>...</span> <span class=nx>eCommerce</span> <span class=nx>properties</span> <span class=p>...,</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;event&#39;</span> <span class=o>:</span> <span class=s1>&#39;transactionComplete&#39;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span></span></span></code></pre></div><p>Then your transactional tag needs to fire on <strong>{{event}} equals transactionComplete</strong>. This way you&rsquo;ll be 100 % certain that the data is in <code>dataLayer</code> by the time the tag fires, because the trigger event is pushed at the same times as the transactional data!</p><h2 id=make-sure-all-the-data-is-there>Make sure all the data is there</h2><p>The developer guides tell you exactly what variables are required. In traditional eCommerce, here&rsquo;s what your Transaction Tag will look for:</p><p><strong>Transaction ID</strong> - <code>transactionId</code>
<strong>Transaction Total</strong> - <code>transactionTotal</code>
<strong>Product Name</strong> - <code>name</code>
<strong>Product SKU</strong> - <code>sku</code>
<strong>Product Price</strong> - <code>price</code>
<strong>Product Quantity</strong> - <code>quantity</code></p><p>If any of these fields are missing from <code>dataLayer</code>, the Transaction Tag will not get sent.</p><p>Oh, and also: <code>transactionId</code> and <code>sku</code> need to be unique. If you have multiple transactions with the same ID, or if you have many products with the same SKU, your data will be skewed.</p><p>With Enhanced eCommerce, there are many more fields to observe, so be sure to read both the Google Tag Manager Developer Guide (linked to in the beginning of this post), as well as the general guide for <a href=https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce>Enhanced eCommerce in Google Analytics</a>.</p><h2 id=dont-forget-your-javascript>Don&rsquo;t forget your JavaScript</h2><p>We&rsquo;re in the developers&rsquo; domain here. Don&rsquo;t forget that. Here are some things you should check first if your tags are not firing:</p><p><strong>Each object key requires a value</strong> - If you want to omit a property from the push, either send it with an empty string, or drop it out of the push altogether. Don&rsquo;t send it without a value at all:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;purchase&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;actionField&#39;</span> <span class=o>:</span> <span class=p>,</span> <span class=c1>// WRONG! This key requires a value
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;purchase&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=s1>&#39;actionField&#39;</span> <span class=o>:</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=c1>// BETTER!
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>...</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p><strong>Know when to add a comma to the end of the line</strong> - If the properties are siblings of each other, that is, they have the same parent, then each line must end in a comma <strong>except</strong> the last line. Here&rsquo;s how it should go:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span> <span class=o>:</span> <span class=p>{</span> <span class=c1>// No comma, starts a new hierarchy
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s1>&#39;purchase&#39;</span> <span class=o>:</span> <span class=p>{</span> <span class=c1>// No comma, starts a new hierarchy
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=s1>&#39;actionField&#39;</span> <span class=o>:</span> <span class=p>{</span><span class=s1>&#39;list&#39;</span> <span class=o>:</span> <span class=s1>&#39;Apparel Gallery&#39;</span><span class=p>},</span> <span class=c1>// Comma, followed by a sibling
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=s1>&#39;products&#39;</span> <span class=o>:</span> <span class=p>[{</span> <span class=c1>// No comma, starts a new hierarchy
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s1>&#39;name&#39;</span> <span class=o>:</span> <span class=s1>&#39;product1&#39;</span><span class=p>,</span> <span class=c1>// Comma, followed by a sibling
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s1>&#39;id&#39;</span> <span class=o>:</span> <span class=s1>&#39;12345&#39;</span> <span class=c1>// No comma, last member in current object
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>},{</span> <span class=c1>// Comma, since there are two objects in this &#39;products&#39; Array 
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s1>&#39;name&#39;</span> <span class=o>:</span> <span class=s1>&#39;product2&#39;</span><span class=p>,</span> <span class=c1>// Comma, followed by a sibling
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=s1>&#39;id&#39;</span> <span class=o>:</span> <span class=s1>&#39;23456&#39;</span> <span class=c1>// No comma, last member in current object
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>}]</span> <span class=c1>// No comma, last member in current object
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>  <span class=c1>// No comma, last member in current object
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span> <span class=c1>// Comma, followed by a sibling
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s1>&#39;event&#39;</span> <span class=o>:</span> <span class=s1>&#39;transactionComplete&#39;</span> <span class=c1>// No comma, last member in current object
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>});</span>  
</span></span></code></pre></div><p><strong>Respect the type requirements</strong> - Let&rsquo;s first address the elephant in the room. Always, <em>always</em> remember to use a period as the decimal separator in a number, not a comma. When passing a numeric value, the comma can be horribly misinterpreted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;price&#39;</span> <span class=o>:</span> <span class=mi>33</span><span class=p>,</span><span class=mi>75</span><span class=p>,</span> <span class=c1>// WRONG!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s1>&#39;quantity&#39;</span> <span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>...</span></span></span></code></pre></div><p>Here, the browser interprets the first comma as the property separator, and the <code>75,</code> that follows is not a syntactically valid key-value pair, and will result in an error. Here&rsquo;s how it should look:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>...</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;price&#39;</span> <span class=o>:</span> <span class=mf>33.75</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;quantity&#39;</span> <span class=o>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=p>...</span></span></span></code></pre></div><p>Now the number is actually a number, with a period as the decimal separator.</p><p>With enhanced eCommerce, the type for price and other monetary values is confusingly <strong>Currency</strong>, which is not a JavaScript type, but just use a string with the decimal as the separator, e.g.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;currencyCode&#39;</span><span class=o>:</span> <span class=s1>&#39;EUR&#39;</span><span class=p>,</span> <span class=c1>// Local currency, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=s1>&#39;impressions&#39;</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>     <span class=p>{</span>
</span></span><span class=line><span class=cl>       <span class=s1>&#39;name&#39;</span><span class=o>:</span> <span class=s1>&#39;Triblend Android T-Shirt&#39;</span><span class=p>,</span> <span class=c1>// Name, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;id&#39;</span><span class=o>:</span> <span class=s1>&#39;12345&#39;</span><span class=p>,</span> <span class=c1>// ID, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;price&#39;</span><span class=o>:</span> <span class=s1>&#39;15.25&#39;</span><span class=p>,</span> <span class=c1>// Price, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;brand&#39;</span><span class=o>:</span> <span class=s1>&#39;Google&#39;</span><span class=p>,</span> <span class=c1>// Brand, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;category&#39;</span><span class=o>:</span> <span class=s1>&#39;Apparel&#39;</span><span class=p>,</span> <span class=c1>// Category, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;variant&#39;</span><span class=o>:</span> <span class=s1>&#39;Gray&#39;</span><span class=p>,</span> <span class=c1>// Variant, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;list&#39;</span><span class=o>:</span> <span class=s1>&#39;Search Results&#39;</span><span class=p>,</span> <span class=c1>// List, type string
</span></span></span><span class=line><span class=cl><span class=c1></span>       <span class=s1>&#39;position&#39;</span><span class=o>:</span> <span class=mi>1</span> <span class=c1>// Position, type number
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=p>}]</span>
</span></span><span class=line><span class=cl>     <span class=p>...</span></span></span></code></pre></div><p>So remember: respect the type requirements. A <code>number</code> is written as just the plain number, using a period as the decimal separator: <strong>15.35</strong>. No quotes there. A <code>string</code> is a combination of characters wrapped in single or double quotes: <strong>&lsquo;T-shirt&rsquo;</strong>.</p><h2 id=enhanced-ecommerce-is-special>Enhanced eCommerce is special</h2><p>I&rsquo;ve alluded to Enhanced eCommerce a couple of times already, but now it&rsquo;s time to tackle the beast. If you thought there was a lot of <code>dataLayer</code> this and JavaScript that in the previous tips, you&rsquo;re going to overload with all the development effort that Enhanced eCommerce requires.</p><p>Let&rsquo;s start with the obvious:</p><p><strong>You do not use the Transaction tag type for Enhanced eCommerce</strong>.</p><p>The Transaction tag is for traditional eCommerce, and as the <a href=https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce>Enhanced eCommerce dev guide</a> clearly states:</p><p><em>&ldquo;Important: The Enhanced Ecommerce plug-in should not be used alongside the Ecommerce (ecommerce.js) plug-in for the same property.&rdquo;</em></p><p>So don&rsquo;t confuse the two. Enhanced eCommerce gives you a far more granular and funnel-like look at how visits progress in terms of your purchase funnel.</p><p>The thing is, with Enhanced eCommerce all hits are piggy-backed on top of existing tags, such as Pageview and Event. The key is to remember to set Enhanced eCommerce features on in the settings of your tags, AND to use <code>dataLayer</code> to carry the data through the tag to Google. Again, you will need to make sure that <code>dataLayer</code> is initialized with all the required data before the tags fire.</p><a href=https://www.simoahava.com/amp/images/2014/10/enable-enhanced.jpg title="Enable Enhanced eCommerce"><amp-img src=https://www.simoahava.com/amp/images/2014/10/enable-enhanced.jpg layout=responsive alt="Enable Enhanced eCommerce" height=289 width=575></amp-img></a><p>With Enhanced eCommerce, all the previous tips apply tenfold. That&rsquo;s because there are so many more variables to appreciate, so many more type requirements to observe, so many more ways to get the data flowing to GA.</p><p>Another important thing about the new feature is that any tag which has Enhanced eCommerce enabled will only process whatever was in the <strong>most recent</strong> &rsquo;ecommerce&rsquo; variable push to the <code>dataLayer</code>. So if you have, for example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;impressions&#39;</span> <span class=o>:</span> <span class=p>...</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=s1>&#39;ecommerce&#39;</span> <span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;detail&#39;</span> <span class=o>:</span> <span class=p>...</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>});</span></span></span></code></pre></div><p>Only the latter push will be processed by your tag which fires on <strong>{{event}} equals gtm.js</strong>. This is because the &rsquo;ecommerce&rsquo; object is still processed with &ldquo;version 1&rdquo; of the data layer, where repeated pushes of the same object name are <strong>not</strong> merged. Thus each new push overwrites the previous value of the object. In any case, it&rsquo;s crucial that you take this into account. What it means, in practice, is:</p><p><strong>If you have many Enhanced eCommerce actions / items you need to send in a single tag, you must combine them in a single <code>dataLayer.push()</code>!</strong></p><p>Needless to say, it will be practically impossible to implement eCommerce with the new features <em>without</em> involving your developers. After all, you are combining on-page actions (clicks, impressions) with the information in <code>dataLayer</code>. Even on the best of days, those two don&rsquo;t mix well.</p><p>Here are some general tips for Enhanced eCommerce:</p><ul><li><p><code>dataLayer</code> has a maximum length of 300 items. A search page on a large web store can have hundreds and hundreds of products, especially if you utilize lazy load methods, or something similar. So try to populate <code>dataLayer</code> with as much information pre-load as possible, and refrain from dynamically adding data into the structure.</p></li><li><p>Sometimes the page elements might be dynamic. For example, you might need to account for sorting the items according to different criteria, or the same item might be in different categories, depending on what sort methods the user has chosen. In those cases you might need to scrape Page Category, for example, from the DOM, and push it into the product listing in the data model. Be sure to read <a href=https://www.simoahava.com/amp/analytics/google-tag-manager-data-model/>this guide</a> for information how to update existing products in GTM&rsquo;s data layer.</p></li><li><p>Start small and scale up, if the task seems too big to comprehend. Start with tracking the shopping cart, checkout funnel, and purchases. Next plan and implement the path from product impression, to product click, to product detail view. Finally, work yourself around promotions, campaigns, and refunds, if you wish.</p></li><li><p>If you want to send multiple items using a single Enhanced eCommerce enabled GTM tag, you need to combine the items into a single push. Only the most recent <code>dataLayer.push()</code> with the &rsquo;ecommerce&rsquo; key is processed by your Enhanced eCommerce enabled GTM tag! An even better practice is to always include an &rsquo;event&rsquo; key in your post-container-snippet pushes, and use this &rsquo;event&rsquo; key to fire your tag with every single &rsquo;ecommerce&rsquo; push to <code>dataLayer</code>.</p></li></ul><h2 id=summary>Summary</h2><p>The trouble with eCommerce is that it&rsquo;s so deep in the developers&rsquo; domain, but it involves a tool mainly directed at marketers. Naturally, this demands that communication between the technical and the non-technical stakeholders must flow naturally.</p><p>Biggest problems occur when the developers do not understand eCommerce, its purposes, or how transactional information is passed through <code>dataLayer</code> into the analytics platform. Also, sometimes non-developers want to tackle eCommerce on their own, because they&rsquo;ve had success with the TMS thus far, and soon they&rsquo;ve bitten more than they can chew.</p><p>The truth is that eCommerce requires a lot of knowledge transfer between the people who plan and the people who implement. Otherwise simple problems like failure to appreciate JavaScript type requirements, or what product details need to be represented in <code>dataLayer</code>, will cause errors.</p></section><footer class=post-footer><figure class=author-image><a class=img href=https://www.simoahava.com/amp/></a></figure><section class=author><h4>Simo Ahava</h4><p>Husband | Father | Analytics developer</p><div class=author-meta><span class="author-location icon-location">Espoo, Finland</span>
<span class="author-link icon-link"><a href=https://www.simoahava.com/>https://www.simoahava.com/</a></span></div></section><div class=social><amp-social-share type=twitter width=60 height=44></amp-social-share><amp-social-share type=linkedin width=60 height=44></amp-social-share><amp-social-share type=facebook width=60 height=44></amp-social-share></div></footer></article></main></div></body></html>