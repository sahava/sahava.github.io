

  
    
  


  

<!doctype html>



<html âš¡ lang="en-us" class="no-js">
    <head>

      <meta charset="utf-8">
        <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script><script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>

<script async src="https://cdn.ampproject.org/v0.js"></script>


<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>
  .type-simmer {
      padding: 8px;
      background: rgba(179,138,197,0.2);
      box-shadow: 2px 2px 1px #ccc;
      border-radius: 5px;
  }
    /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}.site-wrapper{position:relative;z-index:10;min-height:100%;background:#fff;-webkit-transition:-webkit-transform .5s ease;transition:-webkit-transform .5s ease;transition:transform .5s ease;transition:transform .5s ease,-webkit-transform .5s ease}html{font-size:62.5%;-webkit-tap-highlight-color:rgba(0,0,0,0)}body,html{height:100%;max-height:100%}body{font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.8rem;line-height:1.75em;color:#3a4145;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;text-rendering:geometricPrecision}::-moz-selection{background:#d6edff}::selection{background:#d6edff}h1,h2,h3,h4,h5,h6{-webkit-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-moz-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;-o-font-feature-settings:"dlig" 1,"liga" 1,"lnum" 1,"kern" 1;color:#2e2e2e;line-height:1.15em;margin:0 0 .4em;font-family:Open Sans,sans-serif;text-rendering:geometricPrecision}h1{font-size:5rem;letter-spacing:-2px;text-indent:-3px}h2{font-size:3.6rem;letter-spacing:-1px}h3{font-size:3rem}h4{font-size:2.5rem}h5,h6{font-size:2rem}a,a:active,a:hover,a:visited{color:#4a4a4a;-webkit-transition:color .3s ease;transition:color .3s ease}a:active,a:hover{color:#111}dl,ol,p,ul{-webkit-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-moz-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;-o-font-feature-settings:"liga" 1,"onum" 1,"kern" 1;margin:0 0 1.75em;text-rendering:geometricPrecision}ol,ul{padding-left:3rem}ol ol,ol ul,ul ol,ul ul{margin:0 0 .4em;padding-left:2em}dl dt{float:left;width:180px;overflow:hidden;clear:left;text-align:right;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd,dl dt{margin-bottom:1em}dl dd{margin-left:200px}li{margin:.4em 0}li li{margin:0}hr{display:block;height:1px;border:0;border-top:1px solid #efefef;margin:3.2em 0;padding:0}blockquote{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0 1.75em -2.2em;padding:0 0 0 1.75em;border-left:.4em solid #4a4a4a}blockquote p{margin:.8em 0;font-style:italic}blockquote small{display:inline-block;margin:.8em 0 .8em 1.5em;font-size:.9em;color:#ccc}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}mark{background-color:#ffc336}code,tt{padding:1px 3px;font-size:.85em;white-space:pre-wrap;border:1px solid #e3edf3;border-radius:2px}code,pre,tt{font-family:Inconsolata,monospace,sans-serif;background:#f7fafb}pre{-webkit-box-sizing:border-box;box-sizing:border-box;margin:0 0 1.75em;border:1px solid #e3edf3;width:100%;padding:10px;font-size:.9em;white-space:pre;overflow:auto;border-radius:3px}pre code,pre tt{font-size:inherit;white-space:pre-wrap;background:transparent;border:none;padding:0}kbd{display:inline-block;margin-bottom:.4em;padding:1px 8px;border:1px solid #ccc;color:#666;text-shadow:#fff 0 1px 0;font-size:.9em;font-weight:700;background:#f4f4f4;border-radius:4px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 1px 0 0 #fff inset;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 1px 0 0 #fff}table{-webkit-box-sizing:border-box;box-sizing:border-box;margin:1.75em 0;width:100%;max-width:100%;background-color:transparent}table td,table th{padding:8px;line-height:20px;text-align:left;vertical-align:top;border-top:1px solid #efefef}table th{color:#000}table caption+thead tr:first-child td,table caption+thead tr:first-child th,table colgroup+thead tr:first-child td,table colgroup+thead tr:first-child th,table thead:first-child tr:first-child td,table thead:first-child tr:first-child th{border-top:0}table tbody+tbody{border-top:2px solid #efefef}table table table{background-color:#fff}table tbody>tr:nth-child(odd)>td,table tbody>tr:nth-child(odd)>th{background-color:#f6f6f6}table.plain tbody>tr:nth-child(odd)>td,table.plain tbody>tr:nth-child(odd)>th{background:transparent}.fluid-width-video-wrapper,iframe{display:block;margin:1.75em 0}.fluid-width-video-wrapper iframe{margin:0}.main-header{position:relative;display:table;width:100%;height:100vh;margin-bottom:5rem;text-align:center;background:#222 no-repeat 50%;background-size:cover;overflow:hidden}.main-header.cover{background-image:url("https://www.simoahava.com/images/maisema.jpg")}.main-header.list-cover{background-image:url("/")}.main-header .inner{width:80%}.main-header a.bloglogo{text-decoration:none}.main-header a.bloglogo .icon-facebook,.main-header a.bloglogo .icon-github,.main-header a.bloglogo .icon-google-plus,.main-header a.bloglogo .icon-instagram,.main-header a.bloglogo .icon-linkedin,.main-header a.bloglogo .icon-pinterest,.main-header a.bloglogo .icon-twitter{color:#fff;font-size:2em}.main-nav{position:relative;padding:35px 40px;margin:0 0 30px}.main-nav a{text-decoration:none;font-family:Open Sans,sans-serif}.scroll-down{display:block;position:absolute;z-index:100;bottom:45px;left:50%;font-size:1.5em;text-align:center;-webkit-animation:bounce 4s 2s infinite;animation:bounce 4s 2s infinite}.scroll-down:hover{color:#fff;-webkit-animation:none;animation:none}.home-template .main-header:after{display:block;content:" ";width:150px;height:130px;border-radius:100%;position:absolute;bottom:0;left:50%;margin-left:-75px;background:radial-gradient(ellipse at center,rgba(0,0,0,.15) 0,transparent 70%,transparent 100%)}.archive-template .main-header:after,.archive-template .scroll-down,.no-cover.main-header:after,.no-cover .scroll-down{display:none}.blog-logo{display:block;float:left}.blog-logo img{display:block;padding:1px 0 5px;width:auto}.blog-logo img,.menu-button{-webkit-box-sizing:border-box;box-sizing:border-box;height:38px}.menu-button{display:inline-block;float:right;padding:0 15px;border:1px solid #bfc8cd;opacity:1;color:#9eabb3;text-align:center;font-size:12px;text-transform:uppercase;line-height:35px;white-space:nowrap;border-radius:3px;background:rgba(0,0,0,.1);-webkit-transition:all .5s ease;transition:all .5s ease}.menu-button:focus{outline:0}.menu-button .fa-bars{font-size:12px;margin-right:6px}.main-nav.overlay{position:absolute;top:0;left:0;right:0;height:70px;border:none;background:-webkit-gradient(linear,left top,left bottom,from(rgba(0,0,0,.2)),to(transparent));background:linear-gradient(180deg,rgba(0,0,0,.2) 0,transparent)}.no-cover .main-nav.overlay,.no-cover .menu-button{background:none}.main-nav.overlay a{color:#fff}.main-nav.overlay .menu-button{border-color:hsla(0,0%,100%,.6)}.cover .main-nav.overlay a.menu-button:hover{color:#222;border-color:#fff;background:#fff}.menu-button:hover,.no-cover .main-nav.overlay .menu-button:hover{border-color:#555;color:#555}.page-title{margin:10px 0;font-size:5rem;letter-spacing:-1px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff}.page-description{margin:0;font-size:2rem;line-height:1.5em;font-weight:400;font-family:Merriweather,serif;letter-spacing:.01rem;color:hsla(0,0%,100%,.8)}.no-cover.main-header{min-height:160px;max-height:40vh;background:#f5f8fa}.no-cover .page-title{color:rgba(0,0,0,.8)}.no-cover .page-description{color:rgba(0,0,0,.5)}.no-cover .main-nav.overlay .menu-button{color:rgba(0,0,0,.4);border-color:rgba(0,0,0,.3)}.main-header-content .page-title{-webkit-animation:fade-in-down .6s;animation:fade-in-down .6s;-webkit-animation-delay:.2s;animation-delay:.2s}.main-header-content .page-description{-webkit-animation:fade-in-down .9s;animation:fade-in-down .9s;-webkit-animation-delay:.1s;animation-delay:.1s}.post{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto}.post-header{padding-bottom:10px}.post:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}body:not(.post-template) .post-title{font-size:3.6rem}.post-title a{text-decoration:none}.post-excerpt p{margin:0;font-size:.9em;line-height:1.7em}.read-more{font-size:.8em;text-decoration:none;font-style:italic}.post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3}.author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%}.post-meta a{color:#9eabb3;text-decoration:none}.post-meta a:hover{text-decoration:underline}.user-meta{position:relative;padding:.3rem 40px 0 100px;min-height:77px}.post-date{display:inline-block;margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;text-transform:uppercase;font-size:1.3rem;white-space:nowrap}.user-image{position:absolute;top:0;left:0}.user-name{display:block;font-weight:700}.user-bio{display:block;max-width:440px;font-size:1.4rem;line-height:1.5em}.publish-meta{position:absolute;top:0;right:0;padding:4.3rem 0 4rem;text-align:right}.publish-heading{display:block;font-weight:700}.publish-date{display:block;font-size:1.4rem;line-height:1.5em}figure.no-margin{margin:0}figure.center{margin-left:auto;margin-right:auto}.amp-image-lightbox-caption{text-align:center;font-size:.8em}@media only screen and (min-width:501px){figure.polaroid:after,figure.polaroid:before{content:"";position:absolute;z-index:-2;bottom:10px;width:50%;height:20%;max-width:480px;-webkit-box-shadow:0 15px 10px rgba(0,0,0,.7);box-shadow:0 15px 10px rgba(0,0,0,.7)}figure.polaroid:after{right:10px;left:auto;-webkit-transform:rotate(3deg);transform:rotate(3deg)}figure.polaroid:before{left:10px;right:auto;-webkit-transform:rotate(-3deg);transform:rotate(-3deg)}figure.polaroid{width:450px;position:relative;padding:15px;border:none;background:#fff;-webkit-box-shadow:0 1px 4px rgba(0,0,0,.3),0 0 40px rgba(0,0,0,.1) inset;box-shadow:0 1px 4px rgba(0,0,0,.3),inset 0 0 40px rgba(0,0,0,.1);border-radius:4px;margin-bottom:1.5em;max-width:100%}figure.polaroid div[fallback]{border:none;margin:0;padding:0}figure.polaroid amp-img{display:block;outline:1px solid #ccc;padding:0;margin:0}figure.polaroid figcaption{font-size:1.3em;font-weight:400;font-family:Kaushan Script,cursive;text-align:right;padding:.8em .5em .4em}}@media only screen and (max-width:501px){figure.polaroid{background:#fff;border-radius:1px;margin-bottom:1em}figure.polaroid figcaption{font-size:.8em;font-style:italic;text-align:center;border-top:1px solid #d3d3d3;border-bottom:1px solid #d3d3d3;margin-top:.5em;padding:.2em}}.main-header.cover .main-header-content .social-link a,.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.main-header.cover .main-header-content .social-link a:visited,.scroll-down a,.scroll-down a:active,.scroll-down a:hover,.scroll-down a:visited{text-decoration:none;font-size:2em}.main-header.cover .main-header-content .social-link a:active,.main-header.cover .main-header-content .social-link a:hover,.scroll-down a:active,.scroll-down a:hover{color:#fff}.main-header.no-cover .main-header-content .social-link a,.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover,.main-header.no-cover .main-header-content .social-link a:visited{text-decoration:none;font-size:2em;color:#a2a2a2}.main-header.no-cover .main-header-content .social-link a:active,.main-header.no-cover .main-header-content .social-link a:hover{color:#000}.post-template .post-header{margin-bottom:3.4rem}.post-template .post-title{margin-bottom:0}.post-template .post-meta{margin:0}.post-template .post-date{padding:0;margin:0;border:none}.post-template .content{overflow:hidden}.post-template .post{margin-top:0;border-bottom:none;padding-bottom:0}.post-template .post:after{display:none}.post-content{text-align:justify}.post-footer{position:relative;margin:6rem 0 0;padding:6rem 0 0;border-top:1px solid #ebf2f6}.post-footer h4{font-size:1.8rem;margin:0}.post-footer p{margin:1rem 0;font-size:1.4rem;line-height:1.75em}.author-meta{padding:0;margin:0;list-style:none;font-size:1.4rem;line-height:1;font-style:italic}.author-meta,.author-meta a{color:#9eabb3}.author-meta a:hover{color:#111}.post-footer .author{margin-right:180px}.post-footer h4 a{color:#2e2e2e;text-decoration:none}.post-footer h4 a:hover{text-decoration:underline}.post-footer .share{position:absolute;top:6rem;right:0;width:180px}.post-footer .share a{font-size:1.8rem;display:inline-block;margin:1rem 1.6rem 1.6rem 0;color:#bbc7cc;text-decoration:none}.post-footer .share a:hover{color:#50585d}.post-head.main-header{height:65vh;min-height:180px}.no-cover.post-head.main-header{height:85px;min-height:0;margin-bottom:0;background:transparent}.author-head.main-header,.tag-head.main-header{height:40vh;min-height:180px}.no-cover.author-head.main-header{height:10vh;min-height:100px;background:transparent}.author-profile{padding:0 15px 5rem;border-bottom:1px solid #ebf2f6;text-align:center}.author-profile:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.author-image{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;top:-56px;left:50%;margin-left:-40px;width:80px;height:80px;border-radius:100%;overflow:hidden;padding:6px;background:#fff;z-index:2;-webkit-box-shadow:#e7eef2 0 0 0 1px;box-shadow:0 0 0 1px #e7eef2}.author-image .img{position:relative;display:block;width:100%;height:100%;background-size:cover;background-position:50%;border-radius:100%;background-image:url("https://www.simoahava.com/images/simo.png")}.author-profile .author-image{position:relative;left:auto;top:auto;width:120px;height:120px;padding:3px;margin:-100px auto 0;-webkit-box-shadow:none;box-shadow:none}.author-title{margin:1.5rem 0 1rem}.author-bio{font-size:1.8rem;line-height:1.5em;font-weight:200;color:#50585d;letter-spacing:0;text-indent:0}.author-meta{margin:1.6rem 0}.author-profile .author-meta{margin:2rem 0;font-family:Merriweather,serif;letter-spacing:.01rem;font-size:1.7rem}.author-meta span{display:inline-block;margin:0 2rem 1rem 0;word-wrap:break-word}.author-meta a{text-decoration:none}.archive-template .author-profile .author-meta{display:none}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}to{opacity:1;transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}}@-webkit-keyframes bounce{0%,10%,25%,40%,50%{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}20%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}30%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}@keyframes bounce{0%,20%,50%,80%,to{transform:translateY(0);-webkit-transform:translateY(0);-ms-transform:translateY(0)}40%{transform:translateY(-10px);-webkit-transform:translateY(-10px);-ms-transform:translateY(-10px)}60%{transform:translateY(-5px);-webkit-transform:translateY(-5px);-ms-transform:translateY(-5px)}}#sidebar{background:rgba(0,0,0,.7);text-align:left;overflow-y:auto;font-family:Open Sans,Verdana,sans-serif;font-weight:700;font-size:11px;color:#909090;width:400px}#sidebar .nav-title{position:absolute;top:45px;left:30px;font-size:1.5em;font-weight:100;text-transform:uppercase;color:#fff}#sidebar .nav-section{color:#d8d8d8}#sidebar .nav-close{position:absolute;top:38px;right:25px;width:20px;height:20px;padding:0;font-size:10px}#sidebar .nav-close:focus{outline:0}#sidebar .nav-close:after,#sidebar .nav-close:before{content:"";position:absolute;top:0;width:20px;height:1px;background:#969696;top:15px;-webkit-transition:background .15s ease;transition:background .15s ease}#sidebar .nav-close:before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}#sidebar .nav-close:after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}#sidebar .nav-close:hover:after,#sidebar .nav-close:hover:before{background:#fff}#sidebar amp-accordion .nav-section{margin:.4em 0 .2em;background:none;border:none;font-size:2rem}#sidebar amp-accordion section[expanded] .nav-section .fa{width:1ch}#sidebar amp-accordion section[expanded] .nav-section .section-open{display:inline-block}#sidebar amp-accordion section[expanded] .nav-section .section-close{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-open{display:none}#sidebar amp-accordion section:not([expanded]) .nav-section .section-close{display:inline-block}#sidebar ul{padding:90px 9% 5%;list-style:none;counter-reset:item}#sidebar li:before{display:block;float:right;padding-right:4%;padding-left:5px;text-align:right;font-size:1.2rem;vertical-align:bottom;color:#b8b8b8;content:counter(item,lower-roman);counter-increment:item}#sidebar li{margin:0}#sidebar li a{text-decoration:none;line-height:1.4;font-size:1.4rem;display:block;padding:.6rem 4%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#sidebar li a:after{display:inline-block;content:" ...............................................................";color:hsla(0,0%,100%,.2);margin-left:5px}#sidebar .nav-current:before{color:#fff}#sidebar .nav-current a:after{content:" ";border-bottom:1px solid hsla(0,0%,100%,.5);width:100%;height:1px}#sidebar a,#sidebar a:active,#sidebar a:hover,#sidebar a:visited{color:#b8b8b8}#sidebar a:active,#sidebar a:hover,#sidebar li.nav-current a{color:#fff}.subscribe-button{-webkit-box-sizing:border-box;box-sizing:border-box;display:block;position:absolute;bottom:30px;left:30px;right:30px;height:38px;padding:0 20px;text-align:center;font-size:12px;font-family:Open Sans,sans-serif;text-transform:uppercase;text-decoration:none;line-height:35px;border-radius:3px;background:#fff;-webkit-transition:all .3s ease;transition:all .3s ease}.subscribe-button:before{font-size:9px;margin-right:6px}.pagination{position:relative;width:80%;max-width:710px;margin:4rem auto;font-family:Open Sans,sans-serif;font-size:1.3rem;color:#9eabb3;text-align:center}.pagination a{color:#9eabb3;-webkit-transition:all .2s ease;transition:all .2s ease}.newer-posts,.older-posts{position:absolute;display:inline-block;padding:0 15px;border:1px solid #bfc8cd;text-decoration:none;border-radius:4px;-webkit-transition:border .3s ease;transition:border .3s ease}.older-posts{right:0}.page-number{display:inline-block;padding:2px 0;min-width:100px}.newer-posts{left:0}.newer-posts:hover,.older-posts:hover{color:#889093;border-color:#98a0a4}.extra-pagination{display:none;border-bottom:1px solid #ebf2f6}.extra-pagination:after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;-webkit-box-shadow:#fff 0 0 0 5px;box-shadow:0 0 0 5px #fff}.extra-pagination .pagination{width:auto}.archive-template .main-header{max-height:30vh}.archive-template .extra-pagination{display:block}.site-footer{position:relative;margin:8rem 0 0;padding:.5rem 15px;font-family:Open Sans,sans-serif;font-size:1rem;line-height:1.75em;color:#bbc7cc}.site-footer a{color:#bbc7cc;text-decoration:none;font-weight:700}.site-footer a:hover{color:#50585d}.poweredby{float:right;text-align:right}.copyright,.poweredby{display:block;width:45%}.copyright{float:left}@media only screen and (max-width:900px){blockquote{margin-left:0}.main-header{-webkit-box-sizing:border-box;box-sizing:border-box;height:auto;min-height:240px;height:60vh;padding:15% 0}.home-template .main-header:after,.scroll-down{display:none}.archive-template .main-header{min-height:180px;padding:10% 0}.blog-logo img{padding:4px 0}.page-title{font-size:4rem;letter-spacing:-1px}.page-description{font-size:1.8rem;line-height:1.5em}.post{font-size:.95em}body:not(.post-template) .post-title{font-size:3.2rem}hr{margin:2.4em 0}ol,ul{padding-left:2em}h1{font-size:4.5rem;text-indent:-2px}h2{font-size:3.6rem}h3{font-size:3.1rem}h4{font-size:2.5rem}h5{font-size:2.2rem}h6{font-size:1.8rem}.author-profile{padding-bottom:4rem}.author-profile .author-bio{font-size:1.6rem}.author-meta span{display:block;margin:1.5rem 0}.author-profile .author-meta span{font-size:1.6rem}.post-head.main-header{height:45vh}.author-head.main-header,.tag-head.main-header{height:30vh}.no-cover.post-head.main-header{height:55px;padding:0}.no-cover.author-head.main-header{padding:0}}@media only screen and (max-width:500px){.main-header{margin-bottom:15px;height:40vh}.no-cover.main-header{height:30vh}.archive-template .main-header{max-height:20vh;min-height:160px;padding:10% 0}.main-nav{margin-bottom:2rem}.blog-logo,.main-nav{padding:5px}.blog-logo img{height:30px}.menu-button{padding:0 5px;border-radius:0;border-color:transparent;color:#2e2e2e;background:transparent}.menu-button:hover{color:#2e2e2e;border-color:transparent;background:none}body.nav-opened .menu-button{background:none;border:transparent}.main-nav.overlay a:hover{color:#fff;border-color:transparent;background:transparent}.no-cover .main-nav.overlay{background:none}.no-cover .main-nav.overlay .menu-button{border:none}.main-nav.overlay .menu-button{border-color:transparent}.nav-title{top:25px}.nav-close{position:absolute;top:18px}.nav ul{padding:60px 9% 5%}.inner,.pagination{width:auto;margin:2rem auto}.post{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em}.post-template .post-header{margin-bottom:2rem}.post-template .post-date{display:inline-block}hr{margin:1.75em 0}dl,ol,p,ul{font-size:.95em;margin:0 0 2.5rem}.page-title{font-size:3rem}.post-excerpt p{font-size:.85em}.page-description{font-size:1.6rem}h1,h2,h3,h4,h5,h6{margin:0 0 .3em}h1{font-size:2.8rem;letter-spacing:-1px}h2{font-size:2.4rem;letter-spacing:0}h3{font-size:2.1rem}h4{font-size:1.9rem}h5,h6{font-size:1.8rem}body:not(.post-template) .post-title{font-size:2.5rem}.post-template .post{padding-bottom:0;margin-bottom:0}.post-template .site-footer{margin-top:0}.post-meta{font-size:1.3rem;margin-top:1rem}.post-footer{padding:5rem 0 3rem;text-align:center}.post-footer .author{margin:0 0 2rem;padding:0 0 1.6rem;border-bottom:1px dashed #ebf2f6}.post-footer .share{position:static;width:auto}.post-footer .share a{margin:1.4rem .8rem 0}.author-meta li{float:none;margin:0;line-height:1.75em}.author-meta li:before{display:none}.newer-posts,.older-posts{position:static;margin:10px 0}.page-number{display:block}.site-footer{margin-top:3rem}.author-profile{padding-bottom:2rem}.post-head.main-header{height:30vh}.author-head.main-header,.tag-head.main-header{height:20vh}.author-profile .author-image{margin-top:-70px}.author-profile .author-meta span{font-size:1.4rem}.archive-template .main-header .page-description{display:none}}header.post-header{line-height:1.1em}.post-content amp-img{max-width:100%;height:auto;border:1px solid #777;-webkit-box-shadow:5px 5px 2px rgba(0,0,0,.4);box-shadow:5px 5px 2px rgba(0,0,0,.4);margin-bottom:20px}.social-link a{color:#dfdfdf}pre.chroma{text-align:left}.badge-primary{color:#fff;background-color:#007bff}.badge{display:inline-block;padding:.25em .4em;font-size:80%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:middle;border-radius:.25rem}
    

</style>

        <link rel="canonical" href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/">
        <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

        

        <link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,700,700i|Open+Sans:400,700|Kaushan+Script" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

        <meta name="theme-color" content="#ffffff" />

        
        <title>Facebook Conversions API Using GA4 Web Tags and a GTM Server | Simo Ahava's blog</title>
        



  

<meta property="og:title" content="Facebook Conversions API Using GA4 Web Tags and a GTM Server" />
<meta name="description" content="A guide for working with the Facebook Conversions API tag template in Google Tag Manager&#39;s Server-side Tagging." />
<meta property="og:description" content="A guide for working with the Facebook Conversions API tag template in Google Tag Manager&#39;s Server-side Tagging." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.simoahava.com/amp/analytics/facebook-conversions-api-gtm-server-side-tagging/" />

	  <meta property="og:image" content="https://www.simoahava.com/images/2021/03/facebook-conversions-api-server-side-tagging.jpg">
      <meta name="twitter:image" content="https://www.simoahava.com/images/2021/03/facebook-conversions-api-server-side-tagging.jpg">
    


    
        <meta property="article:published_time" content="2021-03-19T05:42:34Z"/>
    
    
        <meta property="article:modified_time" content="2021-03-19T05:42:34Z"/>
    




    


    <meta property="og:site_name" content="Simo Ahava&#39;s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development." />









    
        
        
            
        
        
        
    
    
    
        
            <meta property="article:section" content="Analytics" />
        
    
    
        
            <meta property="article:tag" content="google tag manager" />
        
            <meta property="article:tag" content="facebook" />
        
            <meta property="article:tag" content="server-side tagging" />
        
            <meta property="article:tag" content="conversions api" />
        
    







    
        <meta name="twitter:card" content="summary"/>
    

    
        
        
            
        
        
        
    



<meta itemprop="name" content="Facebook Conversions API Using GA4 Web Tags And A GTM Server">
<meta itemprop="description" content="A guide for working with the Facebook Conversions API tag template in Google Tag Manager&#39;s Server-side Tagging.">
<meta itemprop="datePublished" content="2021-03-19T07:42:34&#43;02:00" />
<meta itemprop="dateModified" content="2021-03-19T07:42:34&#43;02:00" />
<meta itemprop="wordCount" content="3607">



<meta itemprop="keywords" content="google tag manager,facebook,server-side tagging,conversions api," />
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Simo Ahava\u0027s blog :: Simo Ahava is a Google Developer Expert for Google Analytics and Google Tag Manager. This is a blog all about web analytics development.",
    
    "url": "https:\/\/www.simoahava.com\/amp\/"
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "Facebook Conversions API Using GA4 Web Tags And A GTM Server | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2021\/03\/facebook-conversions-api-tag.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/amp\/analytics\/facebook-conversions-api-gtm-server-side-tagging\/",
  "datePublished": "2021-03-19T07:42:34\u002b02:00",
  "dateModified": "2021-03-19T07:42:34\u002b02:00",
  "description": "A guide for working with the Facebook Conversions API tag template in Google Tag Manager\u0027s Server-side Tagging.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>












    </head>
<body>

<amp-analytics config="https://www.googletagmanager.com/amp.json?id=GTM-5BH2HM&gtm.url=SOURCE_URL" data-credentials="include"></amp-analytics>
  <amp-sidebar id="sidebar" layout="nodisplay" side="right">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close" on="tap:sidebar.close" role="button" tabindex="1">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/categories/gtm-tips/">GTM Tips</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/about-simo-ahava/">About</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/tools/">Tools</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/blog-statistics/">Blog Statistics</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/upcoming-talks/">Upcoming Talks</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/custom-templates/">Templates</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/amp/newsletter/">Newsletter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
                <a href="https://www.simoahava.com/">Full (non-AMP) site</a>
            </li>
        
        <amp-accordion>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Categories
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/gtm-tips/">gtm-tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/categories/web-development/">web-development</a></li>
                
                </div>
            </section>
        
            <section>
                <h3 class="nav-section">
                    <i class="fa fa-caret-down section-open" aria-hidden="true"></i>
                    <i class="fa fa-caret-right section-close" aria-hidden="true"></i>
                    Tags
                </h3>
                <div>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ab-testing/">ab-testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/accelerated-mobile-pages/">accelerated-mobile-pages</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ad-blocker/">ad-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adblocker/">adblocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/add-on/">add-on</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/adwords/">adwords</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/agile/">agile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amazon/">amazon</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/amp/">amp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/analytics/">analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/android/">android</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/api/">api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app/">app</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app&#43;web/">app&#43;web</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/app-engine/">app-engine</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/approval/">approval</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps/">apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/apps-script/">apps-script</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/array/">array</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/attribution/">attribution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audience-design/">audience-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/audit/">audit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-event-tracking/">auto-event-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/auto-link-domains/">auto-link-domains</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/aws/">aws</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/azure/">azure</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/basketball/">basketball</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/beforeunload/">beforeunload</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/best-practices/">best-practices</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/big-data/">big-data</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bigquery/">bigquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/blogger/">blogger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/bounce-rate/">bounce-rate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/built-in-variables/">built-in-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/calculated-metrics/">calculated-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/callback/">callback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/campaign-tracking/">campaign-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/celebration/">celebration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/change-history/">change-history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome/">chrome</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/chrome-extension/">chrome-extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-tracking/">click-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/click-variables/">click-variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clickstream/">clickstream</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-id/">client-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/client-template/">client-template</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/clientid/">clientid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cloud-functions/">cloud-functions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cms/">cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cname/">cname</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conferences/">conferences</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent/">consent</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/consent-mode/">consent-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container/">container</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-export/">container-export</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/container-snippet/">container-snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content/">content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-blocker/">content-blocker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-engagement/">content-engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-grouping/">content-grouping</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management/">content-management</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-management-system/">content-management-system</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-security-policy/">content-security-policy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/content-strategy/">content-strategy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/context/">context</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversion/">conversion</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/conversions-api/">conversions-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookie/">cookie</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookiedomain/">cookiedomain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cookies/">cookies</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/core-web-vitals/">core-web-vitals</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/creative/">creative</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain/">cross-domain</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/cross-domain-tracking/">cross-domain-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/csp/">csp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css/">css</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/css-selectors/">css-selectors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom/">custom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimension/">custom-dimension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-dimensions/">custom-dimensions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html/">custom-html</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tag/">custom-html-tag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-html-tags/">custom-html-tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-javascript/">custom-javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-metrics/">custom-metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/custom-templates/">custom-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/customtask/">customtask</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dan-wilkerson/">dan-wilkerson</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dashboard/">dashboard</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-collection/">data-collection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer/">data-layer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-layer-variable/">data-layer-variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-model/">data-model</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/data-quality/">data-quality</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/datalayer/">datalayer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debug/">debug</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/debugging/">debugging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/definition-of-success/">definition-of-success</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/developer/">developer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/development/">development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/digital-marketing/">digital-marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/document.write/">document.write</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dom/">dom</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/duplicate/">duplicate</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/dynamic-content/">dynamic-content</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/easter-egg/">easter-egg</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ecommerce/">ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/education/">education</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/element-visibility/">element-visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/engagement/">engagement</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/enhanced-ecommerce/">enhanced-ecommerce</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/environments/">environments</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/errors/">errors</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event/">event</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listener/">event-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/event-listeners/">event-listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/eventcallback/">eventcallback</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/events/">events</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/excel/">excel</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exceptions/">exceptions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/experimentation/">experimentation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/exploit/">exploit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/extension/">extension</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/facebook/">facebook</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/false/">false</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fields-to-set/">fields-to-set</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firebase/">firebase</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/firing-rules/">firing-rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/folders/">folders</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form/">form</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/form-tracking/">form-tracking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/format-value/">format-value</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/forms/">forms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/fpid/">fpid</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga-spy/">ga-spy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ga4/">ga4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gcp/">gcp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gdpr/">gdpr</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google/">google</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-ads/">google-ads</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics/">google-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-4/">google-analytics-4</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-analytics-settings/">google-analytics-settings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud/">google-cloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-cloud-platform/">google-cloud-platform</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-optimize/">google-optimize</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-sheets/">google-sheets</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-tag-manager/">google-tag-manager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/google-trends/">google-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/googletagmanager/">googletagmanager</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/governance/">governance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag/">gtag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtag.js/">gtag.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-sonar/">gtm-sonar</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm-tools/">gtm-tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtm360/">gtm360</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/gtmtips/">gtmtips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guest-post/">guest-post</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/guide/">guide</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hack/">hack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history/">history</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-change-trigger/">history-change-trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/history-listener/">history-listener</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/hugo/">hugo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/iframe/">iframe</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/intelligent-tracking-prevention/">intelligent-tracking-prevention</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/internal-traffic/">internal-traffic</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ios/">ios</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ip/">ip</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/it-department/">it-department</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/itp/">itp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/javascript/">javascript</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/jquery/">jquery</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/klipfolio/">klipfolio</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/learning/">learning</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lighthouse/">lighthouse</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/links/">links</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/listeners/">listeners</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/local/">local</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/localstorage/">localstorage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/lookup-table/">lookup-table</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/macros/">macros</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketer/">marketer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/marketing/">marketing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/measurement-protocol/">measurement-protocol</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/meta-description/">meta-description</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/metrics/">metrics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/migration/">migration</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mixcloud/">mixcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/mobile/">mobile</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modern-cms/">modern-cms</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/modular-architecture/">modular-architecture</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/monitor/">monitor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/navigation/">navigation</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/netbooster/">netbooster</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/new-ui/">new-ui</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/node.js/">node.js</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/nodejs/">nodejs</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/non-technical/">non-technical</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/open-source/">open-source</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/opt-out/">opt-out</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/owasp/">owasp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-load-time/">page-load-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/page-timings/">page-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/parameter-reporting/">parameter-reporting</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/penguin/">penguin</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/performance/">performance</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/permissions/">permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/persistence/">persistence</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal/">personal</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/personal-experience/">personal-experience</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/php/">php</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pii/">pii</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/pitch/">pitch</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/plugins/">plugins</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/poetry/">poetry</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/postmessage/">postmessage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/ppc/">ppc</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview/">preview</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/preview-mode/">preview-mode</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/privacy/">privacy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/process/">process</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/proxy/">proxy</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/public-speaking/">public-speaking</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/query-string/">query-string</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/queue-time/">queue-time</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/r/">r</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/race-condition/">race-condition</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/reaktor/">reaktor</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/recaptcha/">recaptcha</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/referral/">referral</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/regular-expression/">regular-expression</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/release/">release</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/resources/">resources</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/rules/">rules</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/safari/">safari</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sales/">sales</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/samesite/">samesite</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/schema/">schema</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/score-card/">score-card</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/scroll-depth/">scroll-depth</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search/">search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-api/">search-api</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-engine-optimization/">search-engine-optimization</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/search-trends/">search-trends</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/security/">security</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/selection/">selection</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo/">seo</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/seo-report/">seo-report</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/serp/">serp</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/server-side-tagging/">server-side-tagging</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/session/">session</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/sessions/">sessions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/simmer/">simmer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/single-page-apps/">single-page-apps</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-search/">site-search</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/site-speed/">site-speed</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/slack/">slack</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snippet/">snippet</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/snowplow/">snowplow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/social-interactions/">social-interactions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/soundcloud/">soundcloud</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/spa/">spa</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/splash-page/">splash-page</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/static-site/">static-site</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/still-running/">still-running</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/storage/">storage</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/support/">support</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/swift/">swift</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/syntax-highlight/">syntax-highlight</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solution/">tag-management-solution</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-management-solutions/">tag-management-solutions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-sequencing/">tag-sequencing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tag-templates/">tag-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tags/">tags</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tasks/">tasks</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/technique/">technique</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/test/">test</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/testing/">testing</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timer/">timer</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/timings/">timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tips/">tips</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tools/">tools</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker/">tracker</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/tracker-object/">tracker-object</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/training/">training</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger/">trigger</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/trigger-groups/">trigger-groups</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/triggers/">triggers</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/troubleshoot/">troubleshoot</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/undefined/">undefined</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/universal-analytics/">universal-analytics</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-id/">user-id</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-interface/">user-interface</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-permissions/">user-permissions</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/user-timings/">user-timings</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/v2/">v2</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable/">variable</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variable-templates/">variable-templates</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/variables/">variables</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/videos/">videos</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/visibility/">visibility</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/wcag/">wcag</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/weather/">weather</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-design/">web-design</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/web-development/">web-development</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/webkit/">webkit</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/website-redesign/">website-redesign</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workflow/">workflow</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/workspaces/">workspaces</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/youtube/">youtube</a></li>
                
                    <li class="nav-opened" role="presentation"><a href="https://www.simoahava.com/amp/tags/zones/">zones</a></li>
                
                </div>
            </section>
        
        </amp-accordion>
    </ul>
</amp-sidebar>

<div class="site-wrapper">



    <header class="main-header post-head no-cover">
    <nav class="main-nav clearfix">


    <a class="menu-button" on="tap:sidebar.toggle" role="button"><i class="fa fa-bars" aria-hidden="true"></i><span class="menu-button-label">Menu</span></a>


  </nav>
</header>



<main class="content" role="main">

  <article class="post type-post">

    <header class="post-header">
        <h1 class="post-title">Facebook Conversions API Using GA4 Web Tags and a GTM Server</h1>
        <small>A guide for working with the Facebook Conversions API tag template in Google Tag Manager&#39;s Server-side Tagging.</small>

        <section class="post-meta">
            


    




    <amp-img class="author-thumb" src="https://www.simoahava.com/images/simo.png" layout="fixed" width="24" height="24" alt="Author image"></amp-img>

Simo Ahava

in
    
        <a href="https://www.simoahava.com/amp/categories/analytics">Analytics</a>
    


on
    
        <a href="https://www.simoahava.com/amp/tags/google-tag-manager">#google tag manager</a>
    
        , <a href="https://www.simoahava.com/amp/tags/facebook">#facebook</a>
    
        , <a href="https://www.simoahava.com/amp/tags/server-side-tagging">#server-side tagging</a>
    
        , <a href="https://www.simoahava.com/amp/tags/conversions-api">#conversions api</a>
    


<time class="post-date" datetime="2021-03-19T07:42:34&#43;02:00">
    19 March 2021
</time>


<span class="post-date"><a href="https://www.simoahava.com/analytics/facebook-conversions-api-gtm-server-side-tagging/">Non-AMP version</a></span>


        </section>
    </header>

    <section class="post-content">
      
        
        
          <p>Facebook has now <strong>officially</strong> released their <a href="https://www.facebook.com/business/help/702509907046774"><strong>Conversions API tag template</strong></a> for <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/">server-side tagging in Google Tag Manager</a>.</p>
<p>With this tag template, you can create a server-side tag that fires with any <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/#clients-and-tags">Client</a> designed to parse requests into a <a href="https://www.simoahava.com/amp/analytics/server-side-tagging-google-tag-manager/#event-model">unified event model</a>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/facebook-conversions-api-tag.jpg" title="Facebook Conversions API Tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/facebook-conversions-api-tag.jpg" layout="responsive" alt="Facebook Conversions API Tag" height="1192" width="1802"></amp-img>
  
    </a>
  

<p>One such Client already exists, and every single Server container has it built-in: the <strong>GA4 Client</strong>.</p>
<blockquote>
<p>If you haven&rsquo;t yet deployed a Server container, check out <a href="https://youtu.be/6OGbOh216mU">this video walkthrough</a> for more details on how to do it.</p>
</blockquote>
<p>In this guide, I will walk you through the steps you need to take to get Facebook&rsquo;s Conversions API working in unison with a GA4 Client.</p>
<p>This means one simple but powerful thing:</p>
<p><strong>You don&rsquo;t need to run <em>any</em> Facebook JavaScript in the web browser</strong>. The Facebook server-side tag will be able to utilize your existing GA4 data streams, albeit with some small modifications to cater to Facebook&rsquo;s unique requirements for the payload.</p>
<!-- raw HTML omitted -->
<p>If you want to use the <strong>Facebook web pixel</strong> to handle both the web stream <em>and</em> the server-side data dispatch, you will have to wait a while until Facebook officially releases their solution for splitting the web pixel stream into both a Facebook server request and a custom endpoint request (e.g. your server-side endpoint).</p>

        
        <article class="post type-simmer">
    <header class="post-header">
        <h2 class="post-title"><a href="https://www.simoahava.com/amp/newsletter/">The Simmer Newsletter</a></h2>
    </header>
    <section class="post-excerpt">
      <p>
	Follow <a href="https://www.teamsimmer.com/newsletter/">this link</a> to subscribe to the <strong>Simmer Newsletter</strong>! Stay up-to-date with the latest content from Simo Ahava and the <a href="https://www.teamsimmer.com/">Simmer online course platform</a>.
      </p>
      </section>
</article>

        
          <h2 id="how-it-works">How it works</h2>
<p>Here&rsquo;s a brief overview of how the process works.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/facebook-process.jpg" title="Facebook process">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/facebook-process.jpg" layout="responsive" alt="Facebook process" height="2422" width="4986"></amp-img>
  
    </a>
  

<blockquote>
<p>Almost 10 years of blogging and this is still the quality of my process diagrams&hellip;</p>
</blockquote>
<h3 id="the-ga4-web-tag-records-the-event">The GA4 web tag records the event</h3>
<p>Your <strong>GA4 tags</strong> running in the <em>web browser</em> will collect events as they have done until now.</p>
<p>However, instead of sending the events directly to Google Analytics servers, you&rsquo;ll configure the <a href="https://www.simoahava.com/amp/gtm-tips/send-google-analytics-requests-custom-endpoint/"><code>transport_url</code> field</a> in the <strong>GA4 Config tag</strong> (preferably) to dispatch the requests to your Server container instead.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/transport-url.jpg" title="The transport_url field">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/transport-url.jpg" layout="responsive" alt="The transport_url field" height="834" width="1782"></amp-img>
  
    </a>
  

<p>In addition to this, you&rsquo;ll need to add some <strong>new fields</strong> to the GA4 requests, so that the Facebook tag template will be able to access this information. This includes things like <strong>User Data</strong> parameters (used for user matching), and certain <strong>Facebook custom data parameters</strong> you want the server-side tag to collect as well.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ga4-event-parameters.jpg" title="GA4 event parameters">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ga4-event-parameters.jpg" layout="responsive" alt="GA4 event parameters" height="794" width="1442"></amp-img>
  
    </a>
  

<p>You don&rsquo;t have to worry about sending any of this Facebook-specific information to GA4! We&rsquo;ll clean up the payload in the Server container.</p>
<h3 id="the-ga4-client-captures-the-request">The GA4 Client captures the request</h3>
<p>Once you configure the <code>transport_url</code> in your GA4 Config tag, it will be sent to your Server container.</p>
<p>In the Server container, you need a <strong>GA4 Client</strong> with <strong>Default GA4 paths</strong> selected.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ga4-client-ready.jpg" title="GA4 Client ready">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ga4-client-ready.jpg" layout="responsive" alt="GA4 Client ready" height="892" width="1804"></amp-img>
  
    </a>
  

<blockquote>
<p>You can also proxy the gtag.js container by checking the <strong>Default gtag.js paths for specific IDs</strong>, and you can also utilize the Server container&rsquo;s cookie capabilities by expanding <strong>More Settings</strong> and exploring the <a href="https://www.simoahava.com/amp/analytics/fpid-cookie-google-analytics-server-side-tagging/">FPID option</a>.</p>
</blockquote>
<h3 id="the-facebook-tag-takes-the-data-and-forwards-it-to-facebook">The Facebook tag takes the data and forwards it to Facebook</h3>
<p>In the Server container, the GA4 Client parses the incoming HTTP request sent by the GA4 web tag and converts it into an <strong>event data object</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/event-data-object.jpg" title="Event data object">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/event-data-object.jpg" layout="responsive" alt="Event data object" height="1270" width="2740"></amp-img>
  
    </a>
  

<p>This object triggers the <strong>Facebook server-side tag</strong> (the template for which you can find in the <a href="https://tagmanager.google.com/gallery/#/owners/facebookincubator/templates/ConversionsAPI-Tag-for-GoogleTagManager">Community Template Gallery</a>), which reads the event data and finally sends the payload to Facebook.</p>
<p>If you have (as you should) a GA4 tag running in the Server container, dispatching the GA4 Client&rsquo;s output to GA4 servers as well, you might want to clean up some of the parameters reserved for Facebook to prevent them from &ldquo;leaking&rdquo; into your GA4 data.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/clear-facebook-parameters.jpg" title="Clear FB parameters">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/clear-facebook-parameters.jpg" layout="responsive" alt="Clear FB parameters" height="800" width="1394"></amp-img>
  
    </a>
  

<p>And that&rsquo;s it for the overview! Let&rsquo;s jump into each part in more detail.</p>

        
          <h2 id="update-the-ga4-web-tag">Update the GA4 web tag</h2>
<p>Let&rsquo;s start with modifying the GA4 web tag.</p>
<p>If you&rsquo;re just <em>starting</em> to work with Server containers, it might be wise to <em>copy</em> your existing GA4 web tags rather than replace their functionality with the <code>transport_url</code> field.</p>
<p>That way you can &ldquo;parallel track&rdquo; via the web tag AND the Server container. You might want to create a new data stream in GA4 just for your server-side hits.</p>
<p>But this isn&rsquo;t a guide on how to create a GA4 server-side setup. Instead, we&rsquo;ll focus on utilizing the GA4 web tag for <strong>Facebook&rsquo;s purposes</strong>.</p>
<p>The Facebook server-side tag has a limited inventory of parameters it can make use of.</p>
<h3 id="event-name">Event Name</h3>
<p>First, there&rsquo;s the <strong>Event Name</strong> field in the GA4 web tag itself. You can set <em>anything</em> you like into this and it will work with Facebook&rsquo;s endpoint. However, <em>some</em> event names have special functionality, and they are automatically converted to Facebook&rsquo;s standard event name format. Here&rsquo;s the list:</p>
<table>
<thead>
<tr>
<th>Event name in GA4 tag</th>
<th>Event name converted by Facebook&rsquo;s tag</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>add_payment_info</code></td>
<td><code>AddPaymentInfo</code></td>
</tr>
<tr>
<td><code>add_to_cart</code></td>
<td><code>AddToCart</code></td>
</tr>
<tr>
<td><code>add_to_wishlist</code></td>
<td><code>AddToWishlist</code></td>
</tr>
<tr>
<td><code>begin_checkout</code></td>
<td><code>InitiateCheckout</code></td>
</tr>
<tr>
<td><code>generate_lead</code></td>
<td><code>Lead</code></td>
</tr>
<tr>
<td><code>page_view</code></td>
<td><code>PageView</code></td>
</tr>
<tr>
<td><code>purchase</code></td>
<td><code>Purchase</code></td>
</tr>
<tr>
<td><code>search</code></td>
<td><code>Search</code></td>
</tr>
<tr>
<td><code>signup</code></td>
<td><code>CompleteRegistration</code></td>
</tr>
<tr>
<td><code>view_item</code></td>
<td><code>ViewContent</code></td>
</tr>
</tbody>
</table>
<p>So if you use any of the event name values in the <em>left</em> column, Facebook will convert them to the corresponding values in the <em>right</em> column when collecting the data.</p>
<p>Any other event names will be used as-is without modifications when collecting the data to Facebook.</p>
<h3 id="general-parameters">General parameters</h3>
<p>There are a handful of <em>utility</em> parameters that you can set as GA4 event parameters, and they will be handled in a special way by the Facebook tag.</p>
<h4 id="event_time">event_time</h4>


    <a href="https://www.simoahava.com/amp/images/2021/03/event-time-fb.jpg" title="event_time in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/event-time-fb.jpg" layout="responsive" alt="event_time in the GA4 web tag" height="242" width="1746"></amp-img>
  
    </a>
  

<p>The <code>event_time</code> parameter should be set to the moment when the data was collected on the website. The format is <strong>UNIX (epoch) time</strong> <em>in seconds</em>. In other words, to get the current timestamp with a Custom JavaScript variable, for example, you could use this:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that you don&rsquo;t <strong>have</strong> to send this. If it&rsquo;s not part of the GA4 hit, then the Facebook tag will simply set the timestamp to the moment the server-side tag was executed.</p>
<h4 id="event_id">event_id</h4>


    <a href="https://www.simoahava.com/amp/images/2021/03/event-id-facebook.jpg" title="event_id in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/event-id-facebook.jpg" layout="responsive" alt="event_id in the GA4 web tag" height="234" width="1748"></amp-img>
  
    </a>
  

<p><a href="https://developers.facebook.com/docs/marketing-api/conversions-api/deduplicate-pixel-and-server-events"><code>event_id</code> is used for <strong>deduplicating identical events</strong></a> collected from more than one source (e.g. web site and Server container).</p>
<p>This is <strong>only</strong> relevant if you are duplicating data collection between the web pixel and the Server container, for example. If you are only collecting events using one or the other, you do <strong>not</strong> have to use <code>event_id</code>!</p>
<p>The <code>event_id</code> must be unique for all the events that should be deduplicated. Each set of events that needs to be deduplicated must have its own unique event ID, otherwise Facebook will not be able to consistently deduplicate the data.</p>
<p>With Google Tag Manager, creating a consistently unique event ID is a bit difficult, as variables are resolved each time they are invoked. So if you have, for example, the <strong>{{Random Number}}</strong> variable used as Event ID in a web pixel and a server-side call, then it will return a different number for both times the variable is called.</p>
<p>A fairly simple way to create the Event ID would be to generate a random Page ID for every page load, and then concatenate this with a sequence number that is increased by one for each set of Facebook events that needs to be deduplicated. Another option is to push an event to <code>dataLayer</code> for each set of Facebook tags that needs to be deduplicated, and with that event also push the random, unique Event ID. That way all the Facebook hits (that require deduplication) can fire on the event and use the Event ID in the pushed object.</p>
<h4 id="page_location">page_location</h4>


    <a href="https://www.simoahava.com/amp/images/2021/03/page-location-fb.jpg" title="page_location in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/page-location-fb.jpg" layout="responsive" alt="page_location in the GA4 web tag" height="226" width="1742"></amp-img>
  
    </a>
  

<p>Even though <code>page_location</code> is automatically collected from the URL of the page when the GA4 tag fires, you can also override it with a custom value as in the screenshot above.</p>
<p>This is collected as the <code>event_source_url</code> by the Facebook server-side tag.</p>
<h4 id="action_source">action_source</h4>


    <a href="https://www.simoahava.com/amp/images/2021/03/action-source-fb.jpg" title="action_source in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/action-source-fb.jpg" layout="responsive" alt="action_source in the GA4 web tag" height="246" width="1746"></amp-img>
  
    </a>
  

<p>You can set <code>action_source</code> to one of:</p>
<ul>
<li><code>email</code></li>
<li><code>website</code></li>
<li><code>app</code></li>
<li><code>phone_call</code></li>
<li><code>chat</code></li>
<li><code>physical_store</code></li>
<li><code>system_generated</code></li>
<li><code>other</code></li>
</ul>
<p>This field is optional, and it specifies the context of the hit: where did the conversion happen.</p>
<p>You can <em>also</em> configure the Action Source in the server-side Facebook tag. However, if you do send the <code>action_source</code> in the GA4 hit, it overrides the server-side tag setting.</p>
<h3 id="user-data-parameters">User data parameters</h3>
<p>With appropriate consent and/or other legal premise checked, you can also send user data parameters to Facebook to help match the conversion with the user who performed the action.</p>
<blockquote>
<p>Please, please, <strong>please</strong> make sure that you have the legal right to send end users&rsquo; personal data to Facebook. Don&rsquo;t follow the instructions below blindly â€“ make sure you are not breaching the users&rsquo; right to privacy.</p>
</blockquote>
<p>For user data parameters to work in the server-side setup, you <strong>must</strong> add the following field to the event parameters of the GA4 tag sending the user data:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/first-party-collection-facebook.jpg" title="first_party_collection in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/first-party-collection-facebook.jpg" layout="responsive" alt="first_party_collection in the GA4 web tag" height="232" width="1754"></amp-img>
  
    </a>
  

<p>Set the field name to <code>first_party_collection</code> and value to <code>true</code>.</p>
<h4 id="user-ip-address-and-user-agent-string">User IP address and User-Agent string</h4>
<p>If you want, you can <strong>override</strong> the IP address and User-Agent string sent to Facebook using the GA4 web tag as well. This is a nice way of anonymizing the request if you don&rsquo;t want Facebook to use the user&rsquo;s actual IP and User-Agent.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ip-override-user-agent.jpg" title="ip override and user agent">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ip-override-user-agent.jpg" layout="responsive" alt="ip override and user agent" height="468" width="1750"></amp-img>
  
    </a>
  

<p>To override the IP address, set the field <code>ip_override</code>, and to override the User-Agent string, set the field <code>user_agent</code>.</p>
<p>If you don&rsquo;t override these fields, the server-side tag will forward the user&rsquo;s actual IP address and User-Agent to Facebook to help with user matching.</p>
<h4 id="user-data-parameters-in-the-common-event-schema">User data parameters in the common event schema</h4>
<p>You can also explicitly send personal data about the user to Facebook. The server-side tag will <strong>hash</strong> the data, so Facebook will never receive the data in a readable format.</p>
<blockquote>
<p>If the data is already hashed when sent with the GA4 tag, the Facebook tag won&rsquo;t hash it again.</p>
</blockquote>
<p>Here are the parameters you can set:</p>
<ul>
<li><code>user_data.email_address</code></li>
<li><code>user_data.phone_number</code></li>
<li><code>user_data.address.first_name</code></li>
<li><code>user_data.address.last_name</code></li>
<li><code>user_data.address.city</code></li>
<li><code>user_data.address.region</code></li>
<li><code>user_data.address.postal_code</code></li>
<li><code>user_data.address.country</code></li>
</ul>
<p>This is what it might look in the GA4 web tag:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/user-data-schema.jpg" title="User Data parameters following the common event schema">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/user-data-schema.jpg" layout="responsive" alt="User Data parameters following the common event schema" height="574" width="1742"></amp-img>
  
    </a>
  

<h4 id="facebook-specific-parameters">Facebook-specific parameters</h4>
<p>There are also a handful of Facebook-specific parameters you can set. These are <strong>not</strong> hashed automatically.</p>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x-fb-ud-ge</code></td>
<td>User gender. <strong>Hashing is needed</strong>.</td>
</tr>
<tr>
<td><code>x-fb-ud-db</code></td>
<td>User date of birth. <strong>Hashing is needed</strong>.</td>
</tr>
<tr>
<td><code>x-fb-ud-external_id</code></td>
<td><a href="https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/customer-information-parameters#external-id">External ID</a>, e.g. advertiser loyalty ID. <strong>Hashing is recommended</strong>.</td>
</tr>
<tr>
<td><code>x-fb-ud-subscription_id</code></td>
<td><a href="https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/customer-information-parameters#subscription-id">Subscription ID</a>, e.g. a subscription ID for the user in the transaction. This <strong>should not be hashed</strong>.</td>
</tr>
<tr>
<td><code>x-fb-ck-fbp</code></td>
<td>The <code>_fbp</code> cookie value. See below.</td>
</tr>
<tr>
<td><code>x-fb-ck-fbc</code></td>
<td>The <code>_fbc</code> cookie value. See below.</td>
</tr>
</tbody>
</table>
<p>You can send the <code>_fbp</code> and <code>_fbc</code> cookie values with the parameters listed above. If you don&rsquo;t explicitly set them, and the user has those cookies in their browser, and the server-side tagging endpoint is first-party, then the Facebook tag will <em>automatically</em> read the cookie values from the user&rsquo;s cookies.</p>
<blockquote>
<p>Note that currently, the Facebook tag does <strong>not</strong> <em>set</em> the cookies in the response. I&rsquo;ve submitted an Issue about this to Facebook, as I think it would make a lot of sense to have the tag add the <code>Set-Cookie</code> headers in the HTTP response back from the Server container.</p>
</blockquote>
<p>Here&rsquo;s what some of these parameters might look like in the GA4 event tag:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/user-data-special-parameters.jpg" title="Facebook-specific user data parameters in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/user-data-special-parameters.jpg" layout="responsive" alt="Facebook-specific user data parameters in the GA4 web tag" height="452" width="1756"></amp-img>
  
    </a>
  

<h3 id="custom-data-parameters">Custom data parameters</h3>
<p>You can also send <strong>custom data parameters</strong> to Facebook by setting them as fields in the GA4 web tag.</p>
<h4 id="general-parameters-1">General parameters</h4>
<p>There are a handful of general parameters that can be set in the GA4 web tag. The Facebook server-side tag will be able to read these and send them to Facebook.</p>
<table>
<thead>
<tr>
<th>GA4 parameter name</th>
<th>Converted by the Facebook tag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>currency</code></td>
<td><code>currency</code></td>
<td>Currency code of the transaction (or other event with a monetary value).</td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>value</code></td>
<td>Total value of the transaction (or other event with a monetary value).</td>
</tr>
<tr>
<td><code>search_term</code></td>
<td><code>search_string</code></td>
<td>What the user searched for with the site search.</td>
</tr>
<tr>
<td><code>transaction_id</code></td>
<td><code>order_id</code></td>
<td>Unique order / transaction ID.</td>
</tr>
</tbody>
</table>
<p>This is what these parameters would look like in the GA4 event tag:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/general-custom-parameters.jpg" title="Parameters in the GA4 tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/general-custom-parameters.jpg" layout="responsive" alt="Parameters in the GA4 tag" height="584" width="1746"></amp-img>
  
    </a>
  

<h4 id="items">Items</h4>
<p>If you&rsquo;re collecting <a href="https://www.simoahava.com/amp/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">Ecommerce to GA4</a>, you might already have an <code>items</code> array in place.</p>
<p>Well, the server-side Facebook tag can <strong>automatically</strong> take the contents of this <code>items</code> array and turn it into a <code>contents</code> array!</p>
<p>This is how the mapping is done:</p>
<table>
<thead>
<tr>
<th>Key in <code>items</code></th>
<th>Mapped to in <code>contents</code></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item_id</code></td>
<td><code>id</code></td>
<td>Item ID (e.g. SKU).</td>
</tr>
<tr>
<td><code>item_name</code></td>
<td><code>title</code></td>
<td>Item title or name.</td>
</tr>
<tr>
<td><code>price</code></td>
<td><code>item_price</code></td>
<td>Item price.</td>
</tr>
<tr>
<td><code>item_brand</code></td>
<td><code>brand</code></td>
<td>Item brand label.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td><code>quantity</code></td>
<td>Number of items in the event.</td>
</tr>
<tr>
<td><code>item_category</code></td>
<td><code>category</code></td>
<td>Item category label.</td>
</tr>
</tbody>
</table>
<p>This is by far the easiest way to build the <code>contents</code> array.</p>
<p>Naturally, you can also send the <code>contents</code> array with a custom parameter named <code>x-fb-cd-contents</code>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/contents-facebook.jpg" title="x-fb-cd-contents in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/contents-facebook.jpg" layout="responsive" alt="x-fb-cd-contents in the GA4 web tag" height="236" width="1742"></amp-img>
  
    </a>
  

<h4 id="facebook-specific-custom-data-parameters">Facebook-specific custom data parameters</h4>
<p>You can also send a number of Facebook-specific custom data parameters. These are:</p>
<table>
<thead>
<tr>
<th>Parameter name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x-fb-cd-content_category</code></td>
<td>Content category.</td>
</tr>
<tr>
<td><code>x-fb-cd-content_ids</code></td>
<td>Content IDs.</td>
</tr>
<tr>
<td><code>x-fb-cd-content_name</code></td>
<td>Content name.</td>
</tr>
<tr>
<td><code>x-fb-cd-content_type</code></td>
<td>Content type.</td>
</tr>
<tr>
<td><code>x-fb-cd-contents</code></td>
<td>Contents array.</td>
</tr>
<tr>
<td><code>x-fb-cd-num_items</code></td>
<td>Number of items.</td>
</tr>
<tr>
<td><code>x-fb-cd-predicted_ltv</code></td>
<td>Predicted lifetime value.</td>
</tr>
<tr>
<td><code>x-fb-cd-status</code></td>
<td>Status.</td>
</tr>
<tr>
<td><code>x-fb-cd-delivery_category</code></td>
<td>Delivery category.</td>
</tr>
</tbody>
</table>
<p>You can read more about these parameters as well as about their expected formats <a href="https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/custom-data/">behind this link</a>.</p>
<p>Here&rsquo;s an example of what these might look like in the GA4 event tag:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/custom-data-parameters.jpg" title="Custom data parameters in the event tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/custom-data-parameters.jpg" layout="responsive" alt="Custom data parameters in the event tag" height="460" width="1752"></amp-img>
  
    </a>
  

<h3 id="test-event-code">Test event code</h3>
<p>If you&rsquo;re testing the Conversions API endpoint, you can use the <a href="https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/main-body#test_event_code">test event code</a> to collect <strong>mock hits</strong> that will not be counted by the actual pixel endpoint.</p>
<p>You <em>can</em> set the test event code in the GA4 web tag if you wish. All you need to do is set the event parameter <code>test_event_code</code> like this:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/test-event-code.jpg" title="test_event_code in the GA4 web tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/test-event-code.jpg" layout="responsive" alt="test_event_code in the GA4 web tag" height="230" width="1752"></amp-img>
  
    </a>
  

<p>However, it might be easier to configure the test event code in the Facebook server-side tag (see below).</p>

        
          <h2 id="make-sure-the-ga4-client-is-running-in-the-server-container">Make sure the GA4 Client is running in the server container</h2>
<p>When the GA4 web tag has the <code>transport_url</code> field set to point at your server-side endpoint, the endpoint will receive a GA4 request whenever such a tag fires in the website.</p>
<p>If the server-side endpoint <em>doesn&rsquo;t</em> have a GA4 Client configured, the request will fail with a <code>400</code> error.</p>
<p>Make sure that you have a GA4 Client running in the Server container. If not, create one by choosing the <strong>New</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ga4-clients.jpg" title="GA4 Client">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ga4-clients.jpg" layout="responsive" alt="GA4 Client" height="714" width="2514"></amp-img>
  
    </a>
  

<p>Next, open the Client and make sure the <strong>Default GA4 paths</strong> option is checked.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/default-ga4-paths.jpg" title="Default GA4 tags">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/default-ga4-paths.jpg" layout="responsive" alt="Default GA4 tags" height="390" width="896"></amp-img>
  
    </a>
  

<p>This should be enough to make your endpoint claim the incoming GA4 requests and parse them into the format required by the Facebook tag.</p>

        
          <h2 id="load-the-facebook-conversions-api-tag-template-from-the-template-gallery">Load the Facebook Conversions API Tag template from the template gallery</h2>
<p>Next, head on to <strong>Templates</strong> in the Server container.</p>
<p>In the <strong>Tag Templates</strong> box, click the <strong>Search Gallery</strong> button.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/search-tag-gallery.jpg" title="Search tag gallery">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/search-tag-gallery.jpg" layout="responsive" alt="Search tag gallery" height="458" width="2534"></amp-img>
  
    </a>
  

<p>Search for the <strong>Facebook Conversions API Tag</strong> template, select it, and click <strong>Add to workspace</strong>.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/facebook-tag-gallery.jpg" title="Facebook tag in the gallery">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/facebook-tag-gallery.jpg" layout="responsive" alt="Facebook tag in the gallery" height="770" width="1254"></amp-img>
  
    </a>
  


        
          <h2 id="create-and-configure-the-facebook-conversions-api-tag">Create and configure the Facebook Conversions API Tag</h2>
<p>In the Server container, go to <strong>Tags</strong> and create a new tag.</p>
<p>Choose the <strong>Facebook Conversions API Tag</strong> as the type.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/new-tag.jpg" title="New tag">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/new-tag.jpg" layout="responsive" alt="New tag" height="476" width="1586"></amp-img>
  
    </a>
  

<p>To send data to the <strong>Conversions API</strong>, you will need the following information:</p>
<ul>
<li>The <strong>Pixel ID</strong> to which the data is sent.</li>
<li>An <a href="https://developers.facebook.com/docs/marketing-api/conversions-api/get-started#access-token"><strong>API Access Token</strong></a> for interacting with the Conversions API.</li>
<li>(Optionally) a <a href="https://developers.facebook.com/docs/marketing-api/conversions-api/using-the-api#testEvents">Test Event Code</a> with which to test the Conversions API without actually causing data to be collected against your pixel.</li>
</ul>
<p>You can also set the <strong>Action Source</strong> explicitly here, if you wish.</p>
<p>For more information on how to get the required values, consult <a href="https://developers.facebook.com/docs/marketing-api/conversions-api/get-started">Facebook&rsquo;s documentation</a>.</p>
<p>Finally, you&rsquo;ll want to <strong>trigger</strong> the tag when the <strong>GA4 Client</strong> fires.</p>
<h3 id="trigger-when-any-ga4-request-is-received">Trigger when any GA4 request is received</h3>
<p>The simplest way to work with the Facebook tag is to trigger it whenever <em>any</em> GA4 request is processed by the GA4 Client.</p>
<p>You&rsquo;d need to create a new <strong>Custom</strong> trigger, where the condition is:</p>
<p><strong>Client Name</strong> equals <strong>&lt;your GA4 Client name&gt;</strong></p>
<p>For example, I&rsquo;ve created a GA4 Client named <code>GA4</code>. Thus, my trigger looks like this:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ga4-client.jpg" title="GA4 Client trigger">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ga4-client.jpg" layout="responsive" alt="GA4 Client trigger" height="682" width="1810"></amp-img>
  
    </a>
  

<p>When you add this trigger to the Facebook tag, it will (try to) send data to Facebook when <em>any</em> GA4 event is retrieved.</p>
<h3 id="trigger-conditionally">Trigger conditionally</h3>
<p>However, you might want to fire the tag only when <em>some</em> GA4 requests are received by the GA4 Client. For example, perhaps you only want to fire the tag when it has one of those Facebook-specific parameters included. Or perhaps you want to fire the tag only for a given event name.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/x-fb-trigger.jpg" title="Trigger for x-fb-">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/x-fb-trigger.jpg" layout="responsive" alt="Trigger for x-fb-" height="774" width="1804"></amp-img>
  
    </a>
  

<p>The trigger above will fire only when the GA4 Client receives a request <strong>and</strong> when the request&rsquo;s query string has a query parameter that begins with either <code>ep.x-fb-</code> or <code>epn.x-fb-</code>. The first is for custom text parameters sent with the GA4 tag, and the second is for custom number parameters.</p>
<blockquote>
<p><strong>Query String</strong> is a built-in variable you can enable in the <strong>Variables</strong> section of the Server container.</p>
</blockquote>


    <a href="https://www.simoahava.com/amp/images/2021/03/fb-event-lookup-table.jpg" title="FB Event Lookup Table">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/fb-event-lookup-table.jpg" layout="responsive" alt="FB Event Lookup Table" height="1496" width="1810"></amp-img>
  
    </a>
  

<p>The Lookup Table variable above could be used to set the tag to fire for only a specific set of event names. In the Facebook tag&rsquo;s trigger, you would add the condition that this Lookup Table variable needs to resolve to the <code>true</code> value for the tag to fire.</p>
<p><strong>Note that the event names need to match those set in the GA4 web tag</strong>. So if you want a <code>page_view</code> GA4 web event to fire the Facebook server-side tag, you would need to add <code>page_view</code> to the list of allowed events.</p>
<p>There are many ways to tackle this, and you need to consider how and when you want Facebook to receive data from the Server container. There are similarly many ways to add Facebook-specific parameters to the GA4 web tag so that you can &ldquo;flag&rdquo; certain requests to be intended only for Facebook.</p>

        
          <h2 id="modify-any-possible-ga4-server-side-tags">Modify any possible GA4 server-side tags</h2>
<p>Because you&rsquo;re adding all these new parameters to the GA4 web tag, it&rsquo;s possible you <em>don&rsquo;t</em> want to send them to GA4 as well. This is particularly true for all those <code>x-fb-</code> prefixed parameters.</p>
<p>First, calm yourself. The <strong>GA4 server-side tag will NOT send any User Data parameters</strong>, meaning those prefixed with <code>user_data</code>. So if you send an email address unhashed to your Server container as the <code>user_data.email_address</code> parameter (following <a href="#user-data-parameters-in-the-common-event-schema">this</a>), those will <strong>not</strong> be processed by the server-side GA4 tag!</p>
<p>But for all the others, you&rsquo;ll need to add the parameters you <strong>want to exclude</strong> into the respective setting of your GA4 server-side tag(s). For example, here I&rsquo;m making sure that the <code>x-fb-cd-ge</code> (for Gender), <code>x-fb-cd-db</code> (for Date Of Birth), and <code>x-fb-cd-content_type</code> (for Content Type) are <strong>not</strong> sent to GA4:</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/exclude-x-fb-cd.jpg" title="Exclude x-fb- parameters">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/exclude-x-fb-cd.jpg" layout="responsive" alt="Exclude x-fb- parameters" height="1206" width="1784"></amp-img>
  
    </a>
  

<p>I wish there was a way to specify a regular expression match, for example, but for now you just need to explicitly list the parameters you want to exclude.</p>
<p>The best way to get a list of parameters that are processed by the GA4 Client is to take a look at the Server container&rsquo;s Preview mode and specifically the <strong>Event Data</strong> tab for any given event that fires the GA4 tag.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/event-data-tab-fb.jpg" title="Event Data tab with FB parameters">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/event-data-tab-fb.jpg" layout="responsive" alt="Event Data tab with FB parameters" height="1800" width="3328"></amp-img>
  
    </a>
  

<p>Here you can see how I have the three <code>x-fb-...</code> parameters generated by the GA4 Client, so I need to add those to the exclusion list in the GA4 server-side tag.</p>
<blockquote>
<p>There&rsquo;s one more Facebook-specific parameter in the screenshot above which I should probably also exclude. Can you spot which one it is?</p>
</blockquote>

        
          <h2 id="test-the-setup">Test the setup</h2>
<p>Once you have the <a href="#update-the-ga4-web-tag"><strong>GA4 web tag configured</strong></a>, the <a href="#make-sure-the-ga4-client-is-running-in-the-server-container"><strong>GA4 server-side Client set up</strong></a>, the <a href="#create-and-configure-the-facebook-conversions-api-tag"><strong>Facebook server-side tag ready to go</strong></a>, and the <a href="#modify-any-possible-ga4-server-side-tags"><strong>GA4 server-side tag updated</strong></a>, you&rsquo;re ready to <em>test everything</em>.</p>
<p>Take both the Server container and the web container to Preview mode, and do something that causes a GA4 event designed for Facebook&rsquo;s data collection to fire in the web container.</p>
<p>In the web container&rsquo;s preview mode, you should see a GA4 request to the Server container. To see this, make sure you have the <strong>GA4 Measurement ID</strong> selected in the Preview filters rather than the GTM container ID (see how it&rsquo;s done in the screenshot below).</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/event-data-tab-fb.jpg" title="GA4 web preview">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/event-data-tab-fb.jpg" layout="responsive" alt="GA4 web preview" height="1800" width="3328"></amp-img>
  
    </a>
  

<p>In the Server container&rsquo;s preview mode, you should see an incoming HTTP request, where the <strong>Event Name</strong> you configured in the GA4 web tag is shown beneath the request.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/ga4-purchase.jpg" title="GA4 purchase">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/ga4-purchase.jpg" layout="responsive" alt="GA4 purchase" height="570" width="1080"></amp-img>
  
    </a>
  

<p>When you select the request, you should see an outgoing request to Facebook (and possibly to GA4 as well):</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/request-to-fb-ga4.jpg" title="Request to FB and GA4">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/request-to-fb-ga4.jpg" layout="responsive" alt="Request to FB and GA4" height="1278" width="1908"></amp-img>
  
    </a>
  

<p>When you select the Facebook request, you should see the correct access token in the URL, a nicely formed request body with all the parameters you included (user data parameters being <strong>hashed</strong>), and finally a status code of <code>200</code> to indicate a successful request.</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/facebook-request-details.jpg" title="Facebook request details">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/facebook-request-details.jpg" layout="responsive" alt="Facebook request details" height="924" width="1792"></amp-img>
  
    </a>
  

<blockquote>
<p>You should also check the outgoing request to GA4 to make sure all the parameters you wanted to exclude are, indeed, excluded.</p>
</blockquote>
<p>Finally, in Facebook you should see your event come in to the test event tool (assuming you were using the <strong>Test Event Code</strong>).</p>


    <a href="https://www.simoahava.com/amp/images/2021/03/fb-events-manager.jpg" title="Facebook events manager">
  
    <amp-img src="https://www.simoahava.com/amp/images/2021/03/fb-events-manager.jpg" layout="responsive" alt="Facebook events manager" height="946" width="2568"></amp-img>
  
    </a>
  

<p>If it doesn&rsquo;t work, be sure to check for possible error responses from Facebook by opening the request details in the Server container&rsquo;s Preview mode.</p>

        
          <h2 id="summary">Summary</h2>
<p>Setting up Facebook data collection using a GA4 data stream from the web to the Server container has its perks.</p>
<p>The biggest one, by far, is that you won&rsquo;t be loading <em>any</em> Facebook JavaScript in the browser. This alone should make this convoluted data collection scheme worth the effort to set it up.</p>
<p>You&rsquo;ll also be able to build a <em>consolidated</em> data collection model where redundancy is minimized. After all, the semantic content of conversion data whether to Facebook or to GA4 is always roughly the same â€“Â the keys and labels just have different names.</p>
<p>It&rsquo;s still a fairly new and rough solution, though. For one, the Facebook server-side tag does not currently write the <code>_fbc</code> and <code>_fbp</code> cookies, so if you are <em>not</em> running Facebook JavaScript in the browser, it&rsquo;s possible these identifiers are lost. I&rsquo;ve <a href="https://github.com/facebookincubator/ConversionsAPI-Tag-for-GoogleTagManager/issues/5">submitted an issue about this</a> to Facebook&rsquo;s GitHub project, so hopefully it will be sorted out at some point.</p>
<p>It&rsquo;s also a bit of a chore to first allowlist the parameters for Facebook and then to blocklist them in GA4. But that&rsquo;s unavoidable for now. Perhaps at some point the Server container will give more tools for building parameter maps between Clients and tags, rather than having to add them one-by-one into all the tags separately.</p>
<p>I hope you enjoyed this article. Once Facebook releases a way to leverage the <strong>Facebook web pixel</strong> to send data to the Server container, I will follow-up with another guide about this method, too. But personally I&rsquo;m a huge fan of piggy-backing off the GA4 tag due to the perks listed at the beginning of this chapter.</p>
<p>What do you think about Facebook&rsquo;s entry into the Google Tag Manager Server container? What features are you missing?</p>

        
      
    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://www.simoahava.com/amp/"></a>
    </figure>
    

    
    
    
        
    
    

    <section class="author">
      <h4>Simo Ahava</h4>
      
        <p>Husband | Father | Analytics developer</p>
      
      <div class="author-meta">
        <span class="author-location icon-location">Espoo, Finland</span>
        <span class="author-link icon-link"><a href="https://www.simoahava.com/">https://www.simoahava.com/</a></span>
      </div>
    </section>


    
    <div class="social">

<amp-social-share type="twitter"
  width="60"
  height="44"> </amp-social-share>





<amp-social-share type="linkedin"
                  width="60"
                  height="44"></amp-social-share>


    <amp-social-share type="facebook"
                      width="60"
                      height="44"></amp-social-share>

</div>


    
  </footer>
</article>

</main>
</div>

</body>
</html>

