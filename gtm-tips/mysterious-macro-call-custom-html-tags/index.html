<!doctype html><html lang=en-us><head><meta name=google-site-verification content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"#GTMTips: The Mysterious .macro() Call In Custom HTML Tags | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2019\/10\/macro-call-custom-html-tag.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/images\/simo.png","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/gtm-tips\/mysterious-macro-call-custom-html-tags\/","datePublished":"2019-10-28T11:14:20\u002b02:00","dateModified":"2019-10-28T11:14:20\u002b02:00","description":"","author":{"@type":"Person","name":"Simo Ahava"}}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>#GTMTips: The Mysterious .macro() Call In Custom HTML Tags | Simo Ahava's blog</title>
<script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pageType:"article",environment:null})</script><script>(function(e,t,n,s){window[n]=window[n]||[],window[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(t)[0],o=e.createElement(t),a=n!="dataLayer"?"&l="+n:"";o.async=!0,o.src="https://sgtm.simoahava.com/gtm.js?id="+s+a,i.parentNode.insertBefore(o,i)})(document,"script","dataLayer","GTM-PZ7GMV9")</script><meta name=author content="Simo Ahava"><meta name=keywords content><link rel=icon href=https://www.simoahava.com/images/favicon.ico><link rel=amphtml href=https://www.simoahava.com/amp/gtm-tips/mysterious-macro-call-custom-html-tags/><meta name=description content='When previewing Custom HTML tags in Google Tag Manager you&rsquo;ve almost certainly run into a situation where the GTM variable shows up as a weird JavaScript method resembling something like this:
google_tag_manager["GTM-ABCD123"].macro(15)
And this is when you were expecting it to show the actual, resolved value!
It doesn&rsquo;t help that every now and then the preview mode actually shows to correct value in the preview mode.
What&rsquo;s up with that? Well, there&rsquo;s a fairly logical explanation to this. Read on!'><meta property="og:description" content='When previewing Custom HTML tags in Google Tag Manager you&rsquo;ve almost certainly run into a situation where the GTM variable shows up as a weird JavaScript method resembling something like this:
google_tag_manager["GTM-ABCD123"].macro(15)
And this is when you were expecting it to show the actual, resolved value!
It doesn&rsquo;t help that every now and then the preview mode actually shows to correct value in the preview mode.
What&rsquo;s up with that? Well, there&rsquo;s a fairly logical explanation to this. Read on!'><meta property="og:type" content="blog"><meta property="og:title" content="#GTMTips: The Mysterious .macro() Call In Custom HTML Tags"><meta property="og:url" content="https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><meta property="og:site_name" content="Simo Ahava's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="#GTMTips: The Mysterious .macro() Call In Custom HTML Tags"><meta name=twitter:description content='When previewing Custom HTML tags in Google Tag Manager you&rsquo;ve almost certainly run into a situation where the GTM variable shows up as a weird JavaScript method resembling something like this:
google_tag_manager["GTM-ABCD123"].macro(15)
And this is when you were expecting it to show the actual, resolved value!
It doesn&rsquo;t help that every now and then the preview mode actually shows to correct value in the preview mode.
What&rsquo;s up with that? Well, there&rsquo;s a fairly logical explanation to this. Read on!'><meta name=twitter:creator content="@SimoAhava"><meta name=twitter:image content="https://www.simoahava.com/images/2019/10/macro-call-custom-html-tag.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2019/10/macro-call-custom-html-tag.jpg"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css></head><body><div id=_progress></div><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/>Simo Ahava's blog</a></div></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/><img class=sidebar-profile-picture loading=lazy src=https://www.simoahava.com/images/simo.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Simo Ahava</h4><h5 class=sidebar-profile-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/><i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/gtm-tips/><i class="sidebar-button-icon fa fa-lg fa-magic"></i>
<span class=sidebar-button-desc>GTM Tips</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/about-simo-ahava/><i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/tools/><i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
<span class=sidebar-button-desc>Tools</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/blog-statistics/><i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
<span class=sidebar-button-desc>Blog statistics</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sahava target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/upcoming-talks/><i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
<span class=sidebar-button-desc>Upcoming talks</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/custom-templates/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Templates</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/newsletter/><i class="sidebar-button-icon fa fa-lg fa-bell"></i>
<span class=sidebar-button-desc>Newsletter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://masto.measure.chat/@SimoAhava target=_blank rel="noopener me"><i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
<span class=sidebar-button-desc>Mastodon</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post><form id=search action=/search/><input name=q type=text class="form-control input--xlarge" placeholder="Search blog..." autocomplete=off></form><div class="post-header main-content-wrap text-left"><h1>#GTMTips: The Mysterious .macro() Call In Custom HTML Tags</h1><div class="postShorten-meta post-meta"><time datetime=2019-10-28T11:14:20+02:00>October 28, 2019
</time><span>in</span>
<a class=category-link href=/categories/gtm-tips>GTM Tips</a>
| <a href=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/#commento><comentario-count path=/gtm-tips/mysterious-macro-call-custom-html-tags/ placeholder=... error-text="N/A " zero-text="0 " prefix suffix=" "></comentario-count>Comments</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>When previewing <strong>Custom HTML tags</strong> in <a href=https://tagmanager.google.com/>Google Tag Manager</a> you&rsquo;ve almost certainly run into a situation where the <a href=/analytics/variable-guide-google-tag-manager/>GTM variable</a> shows up as a weird JavaScript method resembling something like this:</p><p><code>google_tag_manager["GTM-ABCD123"].macro(15)</code></p><p>And this is when you were expecting it to show the actual, resolved value!</p><p>It doesn&rsquo;t help that every now and then the preview mode actually shows to <strong>correct</strong> value in the preview mode.</p><p>What&rsquo;s up with that? Well, there&rsquo;s a fairly logical explanation to this. Read on!</p><span class=simmer><span class=close>X</span><p><span class="fa fa-md fa-bell"></span>
<strong>The Simmer Newsletter</strong></p><p>Subscribe to the <a href=/newsletter/>Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!</p></span><h2 id=tip-105-the-macro-call-in-custom-html-tags>Tip 105: The .macro() call in Custom HTML tags</h2><div style=aspect-ratio:960/540 class="figure nocaption"><a href=/images/2019/10/macro-call-custom-html-tag.jpg title="Macro call in Custom HTML tags"><img class=fig-img height=540 width=960 loading=lazy src=/images/2019/10/macro-call-custom-html-tag.jpg#ZgotmplZ alt="Macro call in Custom HTML tags"></a></div><p>Let&rsquo;s start with the good news.</p><p>Your <strong>tag</strong> and the <strong>variables</strong> are <em>most likely</em> working as they should.</p><p>When you create a <strong>Custom HTML tag</strong> in Google Tag Manager, you are actually creating HTML elements that are appended to the end of the <code>&lt;body></code> element when the tag fires.</p><p>This means that if the HTML element you are injecting is a <code>&lt;script>&lt;/script></code> block, i.e. a JavaScript execution context, the code isn&rsquo;t run <em>until</em> 1) the HTML element is appended to the end of <code>&lt;body></code>, and 2) the browser has rendered the element and is ready to execute the JavaScript within the <code>&lt;script></code> block.</p><p>Now, when you add a <strong>Google Tag Manager variable</strong> to a Custom HTML tag, you use the <code>{{variableName}}</code> syntax.</p><div style=aspect-ratio:365/140 class="figure nocaption"><a href=/images/2019/10/gtm-variable.jpg title="GTM variable"><img class=fig-img height=140 width=365 loading=lazy src=/images/2019/10/gtm-variable.jpg#ZgotmplZ alt="GTM variable"></a></div><p>Because it would make little sense to resolve the variable before the surrounding JavaScript code is run, what follows is that GTM does not resolve the variables until the Custom HTML tag has been injected to the end of <code>&lt;body></code>.</p><p>To be able to defer the variables to wait for injection, this must mean that the variables themselves must be some type of function calls that the surrounding script will execute and resolve once the tag has been injected.</p><p><strong>Enter <code>google_tag_manager['GTM-ABCD123'].macro(n)</code>!</strong></p><p>Every single Google Tag Manager used in a Custom HTML tag will receive its own, unique value for <code>n</code>, which will then be passed to the <code>.macro()</code> method <strong>when the tag code is executed</strong>.</p><blockquote><p><strong>Note!</strong> This is not a deterministic value. The <code>n</code> can change from container version to another, so you should NOT build any sort of logic around having some specific variable always assigned some specific value for <code>n</code>.</p></blockquote><h3 id=so-why-doesnt-it-resolve-in-preview-mode>So why doesn&rsquo;t it resolve in Preview mode?</h3><p>First of all, this is a good question. Google Tag Manager shows you what the call to <code>macro()</code> looks like and doesn&rsquo;t actually replace the call with the value of the variable at the time of inspecting the tag.</p><p>The most likely reason why GTM doesn&rsquo;t resolve the <code>macro()</code> call is because it would have to resolve the entire Custom HTML tag content to be able to adjust the value returned by <code>macro()</code> depending on context.</p><p>And this makes no sense - GTM can&rsquo;t start resolving Custom HTML tags within the Preview mode window - how would it render things like HTML elements? How would it resolve things like <code>document.getElementById()</code> when the iframe has no access to the actual page itself?</p><p>So GTM can&rsquo;t resolve the Custom HTML tag while in Preview mode, <strong>which is why it shows you the pre-injection status of the Custom HTML tag</strong>, together with the <code>.macro()</code> calls and all.</p><p>It&rsquo;s only <strong>after</strong> the Custom HTML tag is added to the page that the <code>.macro()</code> calls are executed. This bears repeating since it&rsquo;s an important point.</p><h3 id=but-why-do-some-variables-resolve-in-preview-mode>But why do SOME variables resolve in Preview mode?</h3><p>Hahaa! You found the exception.</p><p>Take a look at this Custom HTML tag:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#1e90ff;font-weight:700>script</span>&gt;
</span></span><span style=display:flex><span>  (<span style=color:#00a>function</span>() {
</span></span><span style=display:flex><span>    console.log({{Container ID}});
</span></span><span style=display:flex><span>    console.log(<span style=color:#a50>&#34;{{Container ID}}&#34;</span>);
</span></span><span style=display:flex><span>  })();
</span></span><span style=display:flex><span>&lt;/<span style=color:#1e90ff;font-weight:700>script</span>&gt;</span></span></code></pre></div><p>See the difference? The first logs the variable plainly, without regard to what its return type is. The second <strong>casts the variable as a string</strong> before logging it.</p><p>Let&rsquo;s take a look at what Preview mode shows.</p><div style=aspect-ratio:758/226 class="figure nocaption"><a href=/images/2019/10/cast-as-string.jpg title="Cast as string"><img class=fig-img height=226 width=758 loading=lazy src=/images/2019/10/cast-as-string.jpg#ZgotmplZ alt="Cast as string"></a></div><p>Fascinating! Why does casting the variable as a string force GTM to resolve the variable?</p><p>Simple. Imagine if GTM did NOT resolve the <code>.macro()</code> call. The second line would become:</p><p><code>console.log("google_tag_manager['GTM-ABCD123'].macro(15)");</code></p><p>In other words, the whole function call would be cast into a string, which would end up writing <code>google_tag_manager['GTM-ABCD123'].macro(15)</code> into the browser console rather than <code>GTM-ABCD123</code>!</p><p>So when you cast the variable into a string, GTM <strong>will resolve it</strong> pre-injection.</p><h3 id=how-do-i-know-its-working>How do I know it&rsquo;s working?</h3><p>Because Google Tag Manager shows variables as <code>macro()</code> calls, it&rsquo;s really difficult to quickly check if the Custom HTML tag nevertheless works. However, here are some tips:</p><h4 id=1-check-the-value-of-the-variable-in-the-variables-tab>1. Check the value of the variable in the Variables tab</h4><p>This is an easy way to get a good idea if the variable works or not. You know what the variable should be (e.g. &ldquo;Container ID&rdquo; in my case), so all you have to do is <strong>select the trigger event that fires the Custom HTML tag</strong>, open the <em>Variables</em> tab in Preview mode, and check the value of the variable.</p><div style=aspect-ratio:981/317 class="figure nocaption"><a href=/images/2019/10/variable-in-preview.jpg title="Variable in preview mode"><img class=fig-img height=317 width=981 loading=lazy src=/images/2019/10/variable-in-preview.jpg#ZgotmplZ alt="Variable in preview mode"></a></div><p>The variable value <strong>should</strong> match the one in the injected Custom HTML tag.</p><h4 id=2-add-some-consolelog-calls>2. Add some <code>console.log()</code> calls</h4><p>Another slightly awkward way to debug is to add <code>console.log()</code> calls to the Custom HTML tag. Have the variable value log into console just before you use it to verify it actually has the right value.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>&lt;script&gt;
</span></span><span style=display:flex><span>  (<span style=color:#00a>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#00a>var</span> log = <span style=color:#00a>function</span>(msg) {
</span></span><span style=display:flex><span>      <span style=color:#00a>if</span> ({{Debug Mode}}) {
</span></span><span style=display:flex><span>        console.log(msg);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    log({{Some Variable}});
</span></span><span style=display:flex><span>    <span style=color:#0aa>window</span>.someFunction({{Some Variable}});
</span></span><span style=display:flex><span>  })();
</span></span><span style=display:flex><span>&lt;<span style=color:red;background-color:#faa>/script&gt;</span></span></span></code></pre></div><p>In the code sample above, there is a global method <code>window.someFunction</code> to which we want to pass the variable <code>{{Some Variable}}</code>. However, we are uncertain what its actual value is since Preview mode isn&rsquo;t very helpful.</p><p>Because of this, we log the value of <code>{{Some Variable}}</code> into the <a href=https://support.airtable.com/hc/en-us/articles/232313848-How-to-open-the-developer-console>browser JavaScript console</a>.</p><p>Furthermore, I&rsquo;ve built a helper function named <code>log()</code> that only logs the value to console if GTM is in Preview mode. This way you avoid your tags from writing arbitrary log messages into the live browser console.</p><h4 id=3-debug-the-tag-result>3. Debug the tag <em>result</em></h4><p>This is the most difficult way to debug whether or not the variable worked. Unfortunately, it&rsquo;s also the best way to do it.</p><p>When you add JavaScript to a Custom HTML tag, it should <strong>do something</strong>. Maybe it adds some text to an HTML element, maybe it creates a new pixel or Ajax call, or perhaps it pushes something to <code>dataLayer</code>.</p><p>In any case, the best way to ensure whether or not the <code>.macro()</code> call resolved to its correct value is to check the <strong>output</strong> or <strong>result</strong> of the tag itself to see if whatever value the variable was supposed to pass was done correctly.</p><p>For example, let&rsquo;s say your tag creates a pixel request like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#1e90ff;font-weight:700>script</span>&gt;
</span></span><span style=display:flex><span>  (<span style=color:#00a>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#00a>var</span> imgId = <span style=color:#a50>&#39;?id=&#39;</span> + {{Container ID}};
</span></span><span style=display:flex><span>    <span style=color:#00a>var</span> imgUrl = <span style=color:#a50>&#39;https://www.somedomain.com/img&#39;</span> + imgId;
</span></span><span style=display:flex><span>    <span style=color:#00a>var</span> el = <span style=color:#0aa>document</span>.createElement(<span style=color:#a50>&#39;img&#39;</span>);
</span></span><span style=display:flex><span>    el.src = imgUrl;
</span></span><span style=display:flex><span>    <span style=color:#0aa>document</span>.body.appendChild(el);
</span></span><span style=display:flex><span>  })();
</span></span><span style=display:flex><span>&lt;/<span style=color:#1e90ff;font-weight:700>script</span>&gt;</span></span></code></pre></div><p>It&rsquo;s a simple, almost nonsensical example, but it should serve to highlight the debug process nicely.</p><p>The tag creates a new image element whose URL is <code>https://www.somedomain.com/img</code> plus the string <code>?id=</code> concatenated with whatever is returned by the <code>{{Container ID}}</code> variable.</p><p>This is what it looks like in Preview mode:</p><div style=aspect-ratio:757/251 class="figure nocaption"><a href=/images/2019/10/img-tag-macro.jpg title="IMG tag macro"><img class=fig-img height=251 width=757 loading=lazy src=/images/2019/10/img-tag-macro.jpg#ZgotmplZ alt="IMG tag macro"></a></div><p>This is what it looks like <strong>after</strong> injection in the Inspect Elements pane:</p><div style=aspect-ratio:1268/54 class="figure nocaption"><a href=/images/2019/10/inspect-elements.jpg title="Inspect elements"><img class=fig-img height=54 width=1268 loading=lazy src=/images/2019/10/inspect-elements.jpg#ZgotmplZ alt="Inspect elements"></a></div><blockquote><p><strong>Note!</strong> As you can see, in Inspect Elements the script element <em>still</em> has the <code>.macro()</code> call. This is how the browser works. GTM injected an element with the <code>.macro()</code> call and this is what was added to the page. If you remember, the script isn&rsquo;t executed until AFTER injection.</p></blockquote><p>Finally, you can inspect the <strong>Network Requests</strong> to find the image request with the ID in place.</p><div style=aspect-ratio:775/230 class="figure nocaption"><a href=/images/2019/10/network-requests.jpg title="Network requests"><img class=fig-img height=230 width=775 loading=lazy src=/images/2019/10/network-requests.jpg#ZgotmplZ alt="Network requests"></a></div><p>Also, because the tag did its own little injection with <code>document.body.appendChild(el)</code>, you can find the image element at the end of <code>&lt;body></code> by inspecting the elements on the page.</p><h2 id=summary>Summary</h2><p>I hope this article has alleviated your concerns. If you see a call to <code>.macro()</code> in Google Tag Manager&rsquo;s Preview mode, <strong>don&rsquo;t worry</strong>. It&rsquo;s what you&rsquo;re <em>supposed</em> to see.</p><p>GTM will not resolve variables until the Custom HTML tag has been injected at the end of <code>&lt;body></code> and the browser has begun to render any JavaScript between <code>&lt;script></code> and <code>&lt;/script></code> within the Custom HTML tag.</p><p>The main exception is variables cast into strings, which Google Tag Manager will <em>have</em> to resolve before injection or else it will end up casting the function expression itself into a string which is not helpful.</p><p>Hopefully this article is helpful in offering you a number of ways you can debug those pesky <code>.macro()</code> calls just to be sure that things are working as they should.</p><p>Let me know if you&rsquo;ve run into edge cases where it still doesn&rsquo;t work, or if you have other examples in addition to cast strings where GTM resolves the variable in Preview mode.</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/google-tag-manager/>google tag manager</a>
<a class="tag tag--primary tag--small" href=/tags/gtmtips/>gtmtips</a>
<a class="tag tag--primary tag--small" href=/tags/custom-html-tags/>custom html tags</a>
<a class="tag tag--primary tag--small" href=/tags/preview-mode/>preview mode</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/gtm-tips/track-outbound-links-google-tag-manager/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/improve-google-analytics-bot-detection-with-recaptcha/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20The%20Mysterious%20.macro%28%29%20Call%20In%20Custom%20HTML%20Tags%20https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div><a name=commento></a><comentario-comments></comentario-comments></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2026 Simo Ahava. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/gtm-tips/track-outbound-links-google-tag-manager/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/improve-google-analytics-bot-detection-with-recaptcha/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20The%20Mysterious%20.macro%28%29%20Call%20In%20Custom%20HTML%20Tags%20https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20The%20Mysterious%20.macro%28%29%20Call%20In%20Custom%20HTML%20Tags%20https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/mysterious-macro-call-custom-html-tags/"><i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://www.simoahava.com/images/simo.png alt="Author's picture"><h4 id=about-card-name>Simo Ahava</h4><div id=about-card-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Senior Data Advocate at Reaktor</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>Finland</div></div></div><div id=cover style=background-image:url(https://www.simoahava.com/images/maisema.jpg)></div><script defer src=https://comentario.simoahava.com/comentario.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=/js/script.js></script><script>!function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),n=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");e&&(n&&(e.style.display="none"),t&&t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"}))}()</script></body></html>