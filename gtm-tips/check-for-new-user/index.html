<!doctype html><html lang=en-us><head><meta name=google-site-verification content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"#GTMTips: Check For New User | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2015\/09\/gtmtips-check-new-user.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/images\/simo.png","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/gtm-tips\/check-for-new-user\/","datePublished":"2015-09-17T11:13:14\u002b00:00","dateModified":"2015-09-17T11:13:14\u002b00:00","description":"How to check if a user is \u0022New\u0022 in terms of Universal Analytics tracking. This uses Google Tag Manager to collect and send the information to Google Analytics.","author":{"@type":"Person","name":"Simo Ahava"}}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>#GTMTips: Check For New User | Simo Ahava's blog</title>
<script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pageType:"article",environment:null})</script><script>(function(e,t,n,s){window[n]=window[n]||[],window[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(t)[0],o=e.createElement(t),a=n!="dataLayer"?"&l="+n:"";o.async=!0,o.src="https://sgtm.simoahava.com/gtm.js?id="+s+a,i.parentNode.insertBefore(o,i)})(document,"script","dataLayer","GTM-PZ7GMV9")</script><meta name=author content="Simo Ahava"><meta name=keywords content><link rel=icon href=https://www.simoahava.com/images/favicon.ico><link rel=amphtml href=https://www.simoahava.com/amp/gtm-tips/check-for-new-user/><meta name=description content='How to check if a user is "New" in terms of Universal Analytics tracking. This uses Google Tag Manager to collect and send the information to Google Analytics.'><meta property="og:description" content='How to check if a user is "New" in terms of Universal Analytics tracking. This uses Google Tag Manager to collect and send the information to Google Analytics.'><meta property="og:type" content="blog"><meta property="og:title" content="#GTMTips: Check For New User"><meta property="og:url" content="https://www.simoahava.com/gtm-tips/check-for-new-user/"><meta property="og:site_name" content="Simo Ahava's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="#GTMTips: Check For New User"><meta name=twitter:description content='How to check if a user is "New" in terms of Universal Analytics tracking. This uses Google Tag Manager to collect and send the information to Google Analytics.'><meta name=twitter:creator content="@SimoAhava"><meta name=twitter:image content="https://www.simoahava.com/images/2015/09/gtmtips-check-new-user.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2015/09/gtmtips-check-new-user.jpg"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css></head><body><div id=_progress></div><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/>Simo Ahava's blog</a></div></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/><img class=sidebar-profile-picture loading=lazy src=https://www.simoahava.com/images/simo.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Simo Ahava</h4><h5 class=sidebar-profile-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/><i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/gtm-tips/><i class="sidebar-button-icon fa fa-lg fa-magic"></i>
<span class=sidebar-button-desc>GTM Tips</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/about-simo-ahava/><i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/tools/><i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
<span class=sidebar-button-desc>Tools</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/blog-statistics/><i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
<span class=sidebar-button-desc>Blog statistics</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sahava target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/upcoming-talks/><i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
<span class=sidebar-button-desc>Upcoming talks</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/custom-templates/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Templates</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/newsletter/><i class="sidebar-button-icon fa fa-lg fa-bell"></i>
<span class=sidebar-button-desc>Newsletter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://masto.measure.chat/@SimoAhava target=_blank rel="noopener me"><i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
<span class=sidebar-button-desc>Mastodon</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post><form id=search action=/search/><input name=q type=text class="form-control input--xlarge" placeholder="Search blog..." autocomplete=off></form><div class="post-header main-content-wrap text-left"><h1>#GTMTips: Check For New User</h1><div class="postShorten-meta post-meta"><time datetime=2015-09-17T11:13:14Z>September 17, 2015
</time><span>in</span>
<a class=category-link href=/categories/gtm-tips>GTM tips</a>
| <a href=https://www.simoahava.com/gtm-tips/check-for-new-user/#commento><comentario-count path=/gtm-tips/check-for-new-user/ placeholder=... error-text="N/A " zero-text="0 " prefix suffix=" "></comentario-count>Comments</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>Every now and then we want to create a bridge between the stateful machines we send data to (e.g. <a href=https://analytics.google.com/>Google Analytics</a>), and the stateless environment where we collect the data itself (e.g. <a href=https://tagmanager.google.com/>Google Tag Manager</a>). This <em>is not easy</em>. There is no synergy between Google Analytics and Google Tag Manager which would let the latter understand anything about things like <em>sessions</em> or <em>landing pages</em> or <em>Bounce Rates</em>.</p><p>One thing we can reliably measure, however, is whether or not the visitor is a <strong>New User</strong> in Google Analytics. This is done by checking whether or not the Universal Analytics cookie <code>_ga</code> exists in the user&rsquo;s browser when they enter the site. Naturally, this check needs to happen before the Universal Analytics Tag has time to create the cookie, which is the only difficult thing to solve here.</p><span class=simmer><span class=close>X</span><p><span class="fa fa-md fa-bell"></span>
<strong>The Simmer Newsletter</strong></p><p>Subscribe to the <a href=/newsletter/>Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!</p></span><h2 id=tip-32-check-for-a-new-google-analytics-user>Tip 32: Check for a new Google Analytics user</h2><div style=aspect-ratio:960/540 class="figure nocaption"><a href=/images/2015/09/gtmtips-check-new-user.jpg title="Check for new user in GA"><img class=fig-img height=540 width=960 loading=lazy src=/images/2015/09/gtmtips-check-new-user.jpg#ZgotmplZ alt="Check for new user in GA"></a></div><p>The process is quite simple. When the user lands on the page, check if they have the <code>_ga</code> cookie in their browser. If not, then they&rsquo;re a &ldquo;New User&rdquo; in Google Analytics. Once this check is made, you can do whatever you want with this information (with one caveat, see below).</p><p>In any case, the first thing you need is a <strong>1st Party Cookie</strong> Variable, which checks for the existence of the <code>_ga</code> cookie:</p><div style=aspect-ratio:746/638 class="figure nocaption"><a href=/images/2015/09/cookie-_ga.jpg title="_ga cookie variable"><img class=fig-img height=638 width=746 loading=lazy src=/images/2015/09/cookie-_ga.jpg#ZgotmplZ alt="_ga cookie variable"></a></div><p>This would return <em>undefined</em> if the cookie does not exist, so we can check against this in a Custom HTML Tag.</p><p>The only thing to solve here is <em>when</em> to fire the Custom HTML Tag. Basically, you have two options. Either upon an event that takes place <strong>before</strong> the first Universal Analytics Tag on the page fires, or upon the same event which fires the first Universal Analytics Tag.</p><p>If you make the Custom HTML Tag fire upon an event which happens <strong>after</strong> the Universal Analytics Tag is fired, it&rsquo;s possible that a <em>race condition</em> emerges, and the UA Tag has time to create the cookie before the check is made.</p><p>Still following?</p><p>The Custom HTML Tag could look like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#1e90ff;font-weight:700>script</span>&gt;
</span></span><span style=display:flex><span>  <span style=color:#00a>if</span> (!{{Cookie - _ga}}) {
</span></span><span style=display:flex><span>    <span style=color:#0aa>window</span>.dataLayer.push({
</span></span><span style=display:flex><span>      <span style=color:#a50>&#39;event&#39;</span> : <span style=color:#a50>&#39;newUser&#39;</span>,
</span></span><span style=display:flex><span>      <span style=color:#a50>&#39;ga_newUser&#39;</span> : <span style=color:#a50>&#39;true&#39;</span>
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>&lt;/<span style=color:#1e90ff;font-weight:700>script</span>&gt;</span></span></code></pre></div><p>This Tag would push a <code>dataLayer</code> object which has an <code>event</code> and an arbitrary key (<code>ga_newUser</code> in the example). You can use these to fire some Tag or run some functions that you only want to run for Google Analytics &ldquo;New Users&rdquo;.</p><h2 id=update>UPDATE</h2><p>As pointed out by both <strong>dusoft</strong> and <strong>Stephen Harris</strong> in the comments (thanks guys!), you can use <a href=/analytics/understanding-tag-sequencing-in-google-tag-manager/>tag sequencing</a> to send user status information to the main Tag without having to build a clumsy event chain. You can follow the guide linked to in the previous sentence, and simply update GTM&rsquo;s data model with <code>google_tag_manager[{{Container ID}}].dataLayer.set('ga_newUser', 'true')</code> in the Custom HTML tag.</p><p>This way the Custom HTML tag, being the setup tag of the sequence, updates the value of <code>ga_newUser</code> in GTM&rsquo;s data model, and it is then available to the main tag to use in a Data Layer Variable.</p><h2 id=caveats>Caveats</h2><p>So, there are some caveats here. First, it&rsquo;s most likely that your Universal Analytics Tag fires on the &ldquo;All Pages&rdquo; Trigger. That&rsquo;s the most common setup. If you set the Custom HTML Tag to fire upon the All Pages Trigger as well, any information you push into <code>dataLayer</code> in the Custom HTML Tag will not be available to the Universal Analytics Tag. Google Tag Manager has a <a href=https://support.google.com/tagmanager/answer/6089629>fixed Data Layer for the duration of an event</a>, so any changes will not be available until the next Data Layer event.</p><p>Also, it&rsquo;s possible that the user is a &ldquo;New User&rdquo; even if they have the <code>_ga</code> in the browser. The cookie lifetime is 2 years, so it&rsquo;s entirely possible that the cookie exists due to an older installation or something. Also, the page can collect to a number of Universal Analytics trackers, each with different cookie configurations. The cookie name could be different, or the cookie domain could vary. In this case, just looking for <code>_ga</code> might not be robust enough to identify a New User. You&rsquo;ll simply need to adapt to how your site&rsquo;s Universal Analytics configuration is setup.</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/cookies/>cookies</a>
<a class="tag tag--primary tag--small" href=/tags/google-tag-manager/>Google Tag Manager</a>
<a class="tag tag--primary tag--small" href=/tags/gtmtips/>gtmtips</a>
<a class="tag tag--primary tag--small" href=/tags/guide/>Guide</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/measure-serp-bounce-time-with-gtm/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/enhanced-ecommerce-tips-and-learnings/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Check%20For%20New%20User%20https://www.simoahava.com/gtm-tips/check-for-new-user/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div><a name=commento></a><comentario-comments></comentario-comments></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2026 Simo Ahava. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/measure-serp-bounce-time-with-gtm/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/enhanced-ecommerce-tips-and-learnings/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Check%20For%20New%20User%20https://www.simoahava.com/gtm-tips/check-for-new-user/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Check%20For%20New%20User%20https://www.simoahava.com/gtm-tips/check-for-new-user/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/check-for-new-user/"><i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://www.simoahava.com/images/simo.png alt="Author's picture"><h4 id=about-card-name>Simo Ahava</h4><div id=about-card-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Senior Data Advocate at Reaktor</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>Finland</div></div></div><div id=cover style=background-image:url(https://www.simoahava.com/images/maisema.jpg)></div><script defer src=https://comentario.simoahava.com/comentario.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=/js/script.js></script><script>!function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),n=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");e&&(n&&(e.style.display="none"),t&&t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"}))}()</script></body></html>