<!doctype html><html lang=en-us><head><meta name=google-site-verification content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"#GTMTips: Track Launch Campaigns In GTM For iOS | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2015\/12\/track-launch-campaigns-gtm-ios.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/images\/simo.png","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/gtm-tips\/gtmtips-track-launch-campaigns-in-gtm-for-ios\/","datePublished":"2015-12-23T08:10:43\u002b00:00","dateModified":"2015-12-23T08:10:43\u002b00:00","description":"How to track launch campaigns in Google Analytics, using Google Tag Manager for iOS (legacy SDK).","author":{"@type":"Person","name":"Simo Ahava"}}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>#GTMTips: Track Launch Campaigns In GTM For iOS | Simo Ahava's blog</title>
<script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pageType:"article",environment:null})</script><script>(function(e,t,n,s){window[n]=window[n]||[],window[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(t)[0],o=e.createElement(t),a=n!="dataLayer"?"&l="+n:"";o.async=!0,o.src="https://sgtm.simoahava.com/gtm.js?id="+s+a,i.parentNode.insertBefore(o,i)})(document,"script","dataLayer","GTM-PZ7GMV9")</script><meta name=author content="Simo Ahava"><meta name=keywords content><link rel=icon href=https://www.simoahava.com/images/favicon.ico><link rel=amphtml href=https://www.simoahava.com/amp/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/><meta name=description content="How to track launch campaigns in Google Analytics, using Google Tag Manager for iOS (legacy SDK)."><meta property="og:description" content="How to track launch campaigns in Google Analytics, using Google Tag Manager for iOS (legacy SDK)."><meta property="og:type" content="blog"><meta property="og:title" content="#GTMTips: Track Launch Campaigns In GTM For iOS"><meta property="og:url" content="https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><meta property="og:site_name" content="Simo Ahava's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="#GTMTips: Track Launch Campaigns In GTM For iOS"><meta name=twitter:description content="How to track launch campaigns in Google Analytics, using Google Tag Manager for iOS (legacy SDK)."><meta name=twitter:creator content="@SimoAhava"><meta name=twitter:image content="https://www.simoahava.com/images/2015/12/track-launch-campaigns-gtm-ios.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2015/12/track-launch-campaigns-gtm-ios.jpg"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css></head><body><div id=_progress></div><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/>Simo Ahava's blog</a></div></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/><img class=sidebar-profile-picture loading=lazy src=https://www.simoahava.com/images/simo.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Simo Ahava</h4><h5 class=sidebar-profile-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/><i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/gtm-tips/><i class="sidebar-button-icon fa fa-lg fa-magic"></i>
<span class=sidebar-button-desc>GTM Tips</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/about-simo-ahava/><i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/tools/><i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
<span class=sidebar-button-desc>Tools</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/blog-statistics/><i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
<span class=sidebar-button-desc>Blog statistics</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sahava target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/upcoming-talks/><i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
<span class=sidebar-button-desc>Upcoming talks</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/custom-templates/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Templates</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/newsletter/><i class="sidebar-button-icon fa fa-lg fa-bell"></i>
<span class=sidebar-button-desc>Newsletter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://masto.measure.chat/@SimoAhava target=_blank rel="noopener me"><i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
<span class=sidebar-button-desc>Mastodon</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post><form id=search action=/search/><input name=q type=text class="form-control input--xlarge" placeholder="Search blog..." autocomplete=off></form><div class="post-header main-content-wrap text-left"><h1>#GTMTips: Track Launch Campaigns In GTM For iOS</h1><div class="postShorten-meta post-meta"><time datetime=2015-12-23T08:10:43Z>December 23, 2015
</time><span>in</span>
<a class=category-link href=/categories/gtm-tips>GTM tips</a>
| <a href=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/#commento><comentario-count path=/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/ placeholder=... error-text="N/A " zero-text="0 " prefix suffix=" "></comentario-count>Comments</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>In <a href=https://analytics.google.com>Google Analytics</a> for iOS, there are two types of campaign measurement. There&rsquo;s <a href=https://developers.google.com/analytics/devguides/collection/ios/v3/campaigns#ios-install>install campaign measurement</a>, which lets you track the channels which brought your visitors to the App Store, where they proceeded to download your app. There&rsquo;s also <a href=https://developers.google.com/analytics/devguides/collection/ios/v3/campaigns#general-campaigns>launch campaign tracking</a>, which lets you attribute app launches to specific campaigns.</p><p>In this tip post, we&rsquo;ll tackle the latter. We&rsquo;ll leverage a feature of the <a href=https://developers.google.com/analytics/devguides/collection/ios/v3/>Google Analytics iOS SDK</a> to build the parameters, and then push them to <code>dataLayer</code> so that they can be used in the Tag.</p><p>We&rsquo;ll be using Swift as the language of choice. Check out my <a href=/tags/ios>previous two posts</a> on GTM for iOS if you need more information on how to make GTM work in your iOS / Swift app.</p><span class=simmer><span class=close>X</span><p><span class="fa fa-md fa-bell"></span>
<strong>The Simmer Newsletter</strong></p><p>Subscribe to the <a href=/newsletter/>Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!</p></span><h2 id=tip-39-launch-campaign-tracking-in-google-tag-manager-for-ios>Tip 39: Launch campaign tracking in Google Tag Manager for iOS</h2><div style=aspect-ratio:960/540 class="figure nocaption"><a href=/images/2015/12/track-launch-campaigns-gtm-ios.jpg title="Track launch campaigns in Google Tag Manager for iOS"><img class=fig-img height=540 width=960 loading=lazy src=/images/2015/12/track-launch-campaigns-gtm-ios.jpg#ZgotmplZ alt="Track launch campaigns in Google Tag Manager for iOS"></a></div><p>To make it all work, you need <strong>two</strong> things.</p><ol><li><p>Code which parses the parameters from the URL and pushes them to <code>dataLayer</code>.</p></li><li><p>Data Layer Variables to send the campaign parameters through your Tag.</p></li></ol><h3 id=1-modifying-the-app-code>1. Modifying the app code</h3><p>To parse the URL, we&rsquo;ll leverage the <code>setCampaignParametersFromUrl</code> method in the <code>GAIDictionaryBuilder</code> class of the Google Analytics SDK. We won&rsquo;t use it for anything else except for parsing the URL. So, in your <strong>AppDelegate.swift</strong> file, locate the overloaded constructor with the <code>handleOpenURL</code> method, or create it yourself:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#00a>func</span> <span style=color:#0a0>application</span>(application: UIApplication, handleOpenURL url: NSURL) -&gt; <span style=color:#0aa>Bool</span> {
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>This is where the app parses any URL parameters used in the launch.</p><p>So, now we need to leverage the GA SDK&rsquo;s built-in methods, and we need to push the parameters to <code>dataLayer</code>. The setup might look something like this:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#00a>func</span> <span style=color:#0a0>application</span>(application: UIApplication, handleOpenURL url: NSURL) -&gt; <span style=color:#0aa>Bool</span> {
</span></span><span style=display:flex><span>  <span style=color:#00a>let</span> <span style=color:#a00>urlString</span> = url.absoluteString
</span></span><span style=display:flex><span>  <span style=color:#00a>let</span> <span style=color:#a00>hitParams</span> = GAIDictionaryBuilder.<span style=color:#00a>init</span>()
</span></span><span style=display:flex><span>  <span style=color:#00a>let</span> <span style=color:#a00>dataLayer</span> = TAGManager.instance().dataLayer
</span></span><span style=display:flex><span>  hitParams.setCampaignParametersFromUrl(urlString)
</span></span><span style=display:flex><span>  dataLayer.push([
</span></span><span style=display:flex><span>    <span style=color:#a50>&#34;campaignMedium&#34;</span> : hitParams.<span style=color:#00a>get</span>(kGAICampaignMedium) ?? <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a50>&#34;campaignName&#34;</span> : hitParams.<span style=color:#00a>get</span>(kGAICampaignName) ?? <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#a50>&#34;campaignSource&#34;</span> : hitParams.<span style=color:#00a>get</span>(kGAICampaignSource) ?? <span style=color:#a50>&#34;&#34;</span>
</span></span><span style=display:flex><span>  ])
</span></span><span style=display:flex><span>  <span style=color:#00a>return</span> <span style=color:#00a>true</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>Let&rsquo;s just quickly walk through this. <code>urlString</code> is the variable where we&rsquo;ll store the URL string itself (d&rsquo;oh). <code>hitParams</code> is what we&rsquo;ll use to parse the URL, and <code>dataLayer</code> is where we&rsquo;ll push the information.</p><p>The <code>setCampaignParametersFromUrl()</code> method takes a URL string, and parses it for the <a href="https://support.google.com/analytics/answer/1033867?hl=en">regular UTM campaign parameters</a>. It stores them in a bunch of constants the GA SDK leverages to pass information between the app and Google Analytics.</p><p>So, if your app is launched with something like:</p><p><strong>awesomeApp://?utm_source=newsletter&amp;utm;_medium=email&amp;utm;_campaign=December_2015</strong></p><p>The values for source (newsletter), medium (email), and campaign (December_2015) would be stored in the constants <strong>kGAICampaignSource</strong>, <strong>kGAICampaignMedium</strong>, <strong>kGAICampaignName</strong>, respectively.</p><p>The <code>dataLayer.push()</code> pulls these from <code>hitParams</code> and stores them in the data structure. If a parameter is missing from the URL, then a blank string is stored for that particular parameter.</p><p>Now we have the values in <code>dataLayer</code>. Next, we need our container to pick them up and send them with our Tag(s).</p><h3 id=2-modifying-the-container>2. Modifying the container</h3><p>To make it all work, you now need to create three Data Layer Variables (one for each parameter), and add them to your Tag.</p><p><strong>DLV - campaignSource</strong><br><em>Variable name:</em> campaignSource</p><p><strong>DLV - campaignMedium</strong><br><em>Variable name:</em> campaignMedium</p><p><strong>DLV - campaignName</strong><br><em>Variable name:</em> campaignName</p><p>Next, edit your Screen View Tag (or whichever Tag fires first on your app). Go to <strong>More Settings</strong> -> <strong>Fields to Set</strong>, and add the following three fields:</p><p><strong>Field Name</strong>: &amp;cs<br><strong>Value</strong>: {{DLV - campaignSource}}</p><p><strong>Field Name</strong>: &amp;cm<br><strong>Value</strong>: {{DLV - campaignMedium}}</p><p><strong>Field Name</strong>: &amp;cn<br><strong>Value</strong>: {{DLV - campaignName}}</p><p>Finally, publish the container, download the binary, update your app, and go crazy with launch campaign tracking.</p><h2 id=summary>Summary</h2><p>There&rsquo;s one thing you need to pay heed to. We&rsquo;re pushing the campaign parameters to <code>dataLayer</code> but we&rsquo;re not sending an &rsquo;event&rsquo; key. The reason for this is that we want the app to send its regular Screen View, using these values only if they&rsquo;re in the <code>dataLayer</code> when the Screen View is dispatched.</p><p>You probably see how this can be a problem. If your app sends a Screen View as soon as the initial view appears, it&rsquo;s possible this <code>dataLayer.push()</code> happens <em>after</em> the Screen View hit is built, leading to a nasty race condition. The best way to ensure it works is to defer the initial hit to Google Analytics until the <code>handleOpenURL</code> method has completed.</p><p>The whole thing is slightly more complex than when using just the GA SDK, as many things seem to be with the Google Tag Manager SDK, but it&rsquo;s still consistent with leveraging <code>dataLayer</code> for message passing, rather than communicating directly with the endpoint.</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/campaign-tracking/>campaign tracking</a>
<a class="tag tag--primary tag--small" href=/tags/google-tag-manager/>Google Tag Manager</a>
<a class="tag tag--primary tag--small" href=/tags/gtmtips/>gtmtips</a>
<a class="tag tag--primary tag--small" href=/tags/ios/>ios</a>
<a class="tag tag--primary tag--small" href=/tags/swift/>swift</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/track-dynamically-loaded-youtube-videos-in-google-tag-manager/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/gtm-tips/url-source-in-the-url-variable/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Track%20Launch%20Campaigns%20In%20GTM%20For%20iOS%20https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div><a name=commento></a><comentario-comments></comentario-comments></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2026 Simo Ahava. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/track-dynamically-loaded-youtube-videos-in-google-tag-manager/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/gtm-tips/url-source-in-the-url-variable/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Track%20Launch%20Campaigns%20In%20GTM%20For%20iOS%20https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Track%20Launch%20Campaigns%20In%20GTM%20For%20iOS%20https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/gtm-tips/gtmtips-track-launch-campaigns-in-gtm-for-ios/"><i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://www.simoahava.com/images/simo.png alt="Author's picture"><h4 id=about-card-name>Simo Ahava</h4><div id=about-card-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Senior Data Advocate at Reaktor</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>Finland</div></div></div><div id=cover style=background-image:url(https://www.simoahava.com/images/maisema.jpg)></div><script defer src=https://comentario.simoahava.com/comentario.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=/js/script.js></script><script>!function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),n=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");e&&(n&&(e.style.display="none"),t&&t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"}))}()</script></body></html>