

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Google Tag Manager API V2 Released | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2017\/03\/gtm-api-v2.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/google-tag-manager-api-v2-released\/",
  "datePublished": "2017-03-31T12:16:49\u002b00:00",
  "dateModified": "2017-03-31T12:16:49\u002b00:00",
  "description": "Introduction to the latest version of the Google Tag Manager programmatic API, and especially the changes compared to version 1.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Google Tag Manager API V2 Released | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/google-tag-manager-api-v2-released/">
    
    <meta name="description" content="Introduction to the latest version of the Google Tag Manager programmatic API, and especially the changes compared to version 1.">
    <meta property="og:description" content="Introduction to the latest version of the Google Tag Manager programmatic API, and especially the changes compared to version 1.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Google Tag Manager API V2 Released">
    <meta property="og:url" content="https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Google Tag Manager API V2 Released">
    <meta name="twitter:description" content="Introduction to the latest version of the Google Tag Manager programmatic API, and especially the changes compared to version 1.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2017/03/gtm-api-v2.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2017/03/gtm-api-v2.jpg">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    
    <div id="_progress"></div>
    
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
  

    <h1>
      Google Tag Manager API V2 Released
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2017-03-31T12:16:49Z">
        
  March 31, 2017

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p><a href="https://tagmanager.google.com/">Google Tag Manager</a> has a very nifty <a href="http://online-behavior.com/analytics/tag-manager-api">programmatic API</a> that lets you do almost anything that&rsquo;s also possible within the GTM UI. I&rsquo;ve used the API a lot, most notably for my <a href="http://www.gtmtools.com/">GTM Tools</a>, which might be getting a new release soon, too!</p>
<p>The API was recently updated to its <a href="https://developers.google.com/tag-manager/api/v2/">second release version</a> (V2), and in this article I want to go over the additions, removals, and changes that the new version introduced.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2017/03/gtm-api-v2.jpg" title="Google Tag Manager API V2">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2017/03/gtm-api-v2.jpg#ZgotmplZ" alt="Google Tag Manager API V2" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2834 916'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>First of all, <a href="https://developers.google.com/tag-manager/api/v1/">V1 of the API</a> is still fully functional, so you don&rsquo;t have to migrate until you&rsquo;re ready. That being said, the new version brings about a number of changes I&rsquo;m sure you&rsquo;ll find helpful when working with the API.</p>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="biggest-changes">Biggest changes</h2>
<p>The most significant change, in my opinion, is the introduction of <a href="https://www.simoahava.com/analytics/google-tag-manager-workspaces/"><strong>workspace</strong></a> as the central focus in almost all interactions with anything on the container level. It&rsquo;s not just that there&rsquo;s a new namespace for workspaces in the API, but that you must always reference a workspace when interacting with container assets. This is going to be the biggest hurdle in a migration, I believe. Anything that happens in a workspace (pretty much all UI interactions with a single container draft) must now be accompanied by the workspace ID of the workspace you want to modify. This, in turn, means a round trip via the <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces">workspaces API</a> to get the IDs you need.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2017/03/gtm-api-workspaces.jpg" title="Workspaces in the GTM API">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2017/03/gtm-api-workspaces.jpg#ZgotmplZ" alt="Workspaces in the GTM API" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1748 920'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Another very visible change is the separation of <strong>Built-in Variables</strong> into its own <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/built_in_variables">namespace</a>. Luckily there&rsquo;s also a simple batching shorthand for enabling / deleting multiple Built-in Variables in a single request.</p>
<p>On a technical level, when using client libraries you now provide the path to the asset as a single parameter (basically <code>path</code> or <code>parent</code>) instead of using multiple named parameters. The new resource representations include the <code>path</code> key, which you can then use to easily chain API commands together.</p>
<p>Finally, and I love this, there&rsquo;s support for adding <strong>notes</strong> to pretty much any resource available via the API. Even though the UI doesn&rsquo;t yet support the <strong>notes</strong> field as widely, you can now add descriptive text to all assets via the API. Very useful for documenting the container.</p>
<p>(<strong>UPDATE</strong>: a short while after writing this article, GTM released <a href="https://twitter.com/SimoAhava/status/848049430184030208">support for notes in the UI</a> too, yay!)</p>

                
                  <h2 id="detailed-changes">Detailed changes</h2>
<p>What follows is a walkthrough of all the namespaces in the new version of the API, with information on what changed from V1.</p>
<h3 id="1-accounts">1. Accounts</h3>
<p><strong>Resource changes:</strong> The <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts">Accounts resource</a> has the following <strong>new</strong> fields:</p>
<ul>
<li><code>path</code>: path of the Account, e.g. <code>accounts/12345</code></li>
<li><code>tagManagerUrl</code>: direct URL to your account in the GTM API</li>
</ul>
<p><strong>Method changes:</strong> There are no significant changes in Accounts methods.</p>
<h3 id="2-built-in-variables">2. Built-in Variables</h3>
<p>This is a completely new namespace in the API. Instead of passing a list of Built-in Variables in the container resource itself, you now need to explicitly enable Built-in Variables in the workspace of your choice. You can read the full description of this new feature <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/built_in_variables">here</a>.</p>
<p>Note that if you want to enable multiple Built-in Variables in a single request (strongly recommended), you can use a shorthand batch format to do so.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">accounts()
    .containers()
    .workspaces()
    .built_in_variables()
    .create(
        parent=<span style="color:#a50">&#39;accounts/</span><span style="color:#a50">%s</span><span style="color:#a50">/containers/</span><span style="color:#a50">%s</span><span style="color:#a50">/workspaces/</span><span style="color:#a50">%s</span><span style="color:#a50">&#39;</span> % (accountId, containerId, workspaceId),
        <span style="color:#0aa">type</span>=[<span style="color:#a50">&#39;clickClasses&#39;</span>, <span style="color:#a50">&#39;clickElement&#39;</span>, <span style="color:#a50">&#39;clickId&#39;</span>, <span style="color:#a50">&#39;clickUrl&#39;</span>, <span style="color:#a50">&#39;clickText&#39;</span>, <span style="color:#a50">&#39;clickTarget&#39;</span>] )</code></pre></div>
<h3 id="3-containers">3. Containers</h3>
<p><strong>Resource changes:</strong> The <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers">Containers</a> namespace hasn&rsquo;t changed that much. The <strong>new</strong> fields are the same as with Accounts: <code>path</code> and <code>tagManagerUrl</code>. Fields that were <strong>removed</strong> from V2 are the redundant <code>timeZoneCountryId</code> and <code>timeZoneId</code>. The <code>enabledBuiltInVariable</code> field has been replaced by the Built-in Variables namespace introduced above.</p>
<p><strong>Method changes:</strong> There are no significant changes to the Containers methods.</p>
<h3 id="4-environments">4. Environments</h3>
<p><strong>Resource changes:</strong> The main changes to the <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/environments">Environments</a> resource are the following:</p>
<ul>
<li>
<p><code>path</code>: relative path in the API to the given environment</p>
</li>
<li>
<p><code>authorizationTimestamp</code>: supports both <code>nanos</code> and <code>seconds</code> as values</p>
</li>
<li>
<p><code>workspaceId</code>: link to preview a given workspace in the environment</p>
</li>
<li>
<p><code>tagManagerUrl</code>: link to the Environments page in the container</p>
</li>
</ul>
<p><strong>Method changes</strong>: The most significant change is that the old <code>environments.reauthorize_environments</code> namespace has been removed in favor of simply adding a <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/environments/reauthorize"><code>reauthorize()</code></a> method to the main Environments API.</p>
<h3 id="5-folders">5. Folders</h3>
<p><strong>Resource changes:</strong> The big changes to the <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/folders">Folders</a> resource are:</p>
<ul>
<li>
<p><code>path</code>: relative API path to the folder</p>
</li>
<li>
<p><code>workspaceId</code>: ID of the workspace from which the folder was fetched</p>
</li>
<li>
<p><code>tagManagerUrl</code>: link to the folder in the GTM UI</p>
</li>
<li>
<p><code>notes</code>: notes about the folder</p>
</li>
</ul>
<p><strong>Method changes:</strong> The main changes to the methods are that both <code>folders.entities</code> and <code>folders.move_folders</code> have been replaced with their own dedicated API methods in <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/folders/entities"><code>entities()</code></a> and <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/folders/move_entities_to_folder"><code>move_entities_to_folders()</code></a>, respectively.</p>
<p>There&rsquo;s also a new method, <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/folders/revert"><code>revert()</code></a>, which lets you revert changes to a folder in the given workspace.</p>
<h3 id="6-tags">6. Tags</h3>
<p><strong>Resource changes:</strong> The only changes are the inclusion of <code>path</code>, <code>workspaceId</code> and <code>tagManagerUrl</code>. Otherwise the resource representation has remained relatively unchanged.</p>
<p><strong>Method changes:</strong> The only big change is the introduction of the <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/tags/revert"><code>revert()</code></a> method, which lets you cancel any changes to the tag in the given workspace.</p>
<h3 id="7-triggers">7. Triggers</h3>
<p>Triggers was affected in exactly the same way as Tags. The changes are identical, with the exception of <code>notes</code> now introduced as a writable field for Triggers, too.</p>
<h3 id="8-user-permissions">8. User Permissions</h3>
<p>(Note, this used to be called just <a href="https://developers.google.com/tag-manager/api/v1/reference/accounts/permissions">Permissions</a> in the previous API version documentation.)
<strong>Resource changes:</strong> The main changes to <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/user_permissions">User Permissions</a> are:</p>
<ul>
<li>
<p><code>path</code>: relative API path to the permission entity, includes the <code>permissionId</code></p>
</li>
<li>
<p><code>accountAccess.permission</code>: now a string rather than a list/array</p>
</li>
<li>
<p><code>containerAccess[].permission</code>: now a string rather than a list/array</p>
</li>
</ul>
<p><strong>Method changes:</strong> No significant changes to methods.</p>
<h3 id="8-variables">8. Variables</h3>
<p>Changes to <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/variables">Variables</a> are pretty much on par with what&rsquo;s done to Tags, so check the relevant section above for more details.</p>
<h3 id="9-version-headers">9. Version Headers</h3>
<p>The <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/version_headers">Version Headers</a> API is a new addition to the GTM API. Basically, it&rsquo;s a shorthand for accessing versions of any given container. Unlike the Versions API itself, Version Headers only returns, surprise surprise, headers. This keeps the API calls really lean, and lets you quickly get the necessary information, such as the version ID.</p>
<p>You can check the documentation for more details on the <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/version_headers/latest">resource representation</a>.</p>
<p>The API has two methods.</p>
<ul>
<li>
<p><code>latest()</code> returns the version header of the Latest Container Version. The Latest version is the most recently created version in Google Tag Manager, and is very relevant to Workspaces, since Workspaces need to be synchronized with the Latest container version before they can be published or turned into versions themselves.</p>
</li>
<li>
<p><code>list()</code> returns a list of all container versions in any given container.</p>
</li>
</ul>
<h3 id="10-versions">10. Versions</h3>
<p>(Note, this used to be called <a href="https://developers.google.com/tag-manager/api/v1/reference/accounts/containers/versions">Container Versions</a> in the previous API version documentation.)
<strong>Resource changes:</strong> Here are the changes to <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/versions">Versions</a> in the GTM API:</p>
<ul>
<li>
<p><code>path</code>: relative API path to the container version</p>
</li>
<li>
<p><code>description</code>: used to be called <code>notes</code> in the previous API version</p>
</li>
<li>
<p><code>builtInVariable</code>: list of Built-in Variables enabled in the version</p>
</li>
<li>
<p><code>tagManagerUrl</code>: link to the container version in the GTM UI</p>
</li>
</ul>
<p>Note that the <code>macro</code> and <code>rule</code> parameters have been deprecated in the new API version.</p>
<p><strong>Method changes</strong>: Here are the main changes to Versions methods:</p>
<ul>
<li>
<p><code>create()</code>: <strong>deprecated</strong> - container version creation is done via Workspaces</p>
</li>
<li>
<p><code>list()</code>: <strong>deprecated</strong> - version list is now done via Version Headers</p>
</li>
<li>
<p><code>live()</code>: retrieves the container version that is currently live in the container</p>
</li>
<li>
<p><code>set_latest()</code>: sets the given version as the Latest version in the container - replaces <a href="https://developers.google.com/tag-manager/api/v1/reference/accounts/containers/versions/restore"><code>restore()</code></a> in the previous API version</p>
</li>
</ul>
<h3 id="11-workspaces">11. Workspaces</h3>
<p>The <strong>Workspaces API</strong> was introduced in V2 of the GTM API. You will definitely want to follow <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces">this link</a> and familiarize yourself with the new API. Understanding how <a href="https://www.simoahava.com/analytics/google-tag-manager-workspaces/">workspaces function in the container</a> is integral to understanding how the GTM API works.</p>
<ul>
<li>
<p><code>create_version()</code> creates a version out of a workspace but only if the version passes all GTM&rsquo;s syntax and validation checks.</p>
</li>
<li>
<p><code>getStatus()</code> returns all the conflicting and/or modified entities in the workspace. This is useful if you want to check if the workspace is ready to be turned into a version.</p>
</li>
<li>
<p><code>resolve_conflict()</code> lets you resolve conflicts in favor of the workspace or the latest version.</p>
</li>
<li>
<p><code>sync()</code> lets you synchronize the workspace with the latest container version - a necessary step to take before creating the version.</p>
</li>
</ul>
<p>Workspaces are fundamental to many interactions with the API. Basically, when you work with tags, triggers, variables, folders, and built-in variables, you always need to provide the workspace ID with which you are interacting. There&rsquo;s no single &ldquo;Container draft&rdquo; anymore. There&rsquo;s always a workspace you&rsquo;re working in.</p>
<p>In addition to having to update your methods, this also means that you need to rethink some of the API flows you have been using thus far. For example, instead of just creating new items in a container, you now need to specify the workspace you want to work with. This means you might first need to <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/list"><code>list()</code></a> the available workspaces to get the ID you are looking for. Or perhaps you want to <a href="https://developers.google.com/tag-manager/api/v2/reference/accounts/containers/workspaces/create"><code>create()</code></a> a new workspace so that you don&rsquo;t mess with other people&rsquo;s unfinished work.</p>

                
                  <h2 id="summary">Summary</h2>
<p>The new API certainly has a lot of stuff to wrap your head around. The introduction of workspaces, for one, is certain to make migration a bit of a headache. However, it would be equally awkward to work with an API that isn&rsquo;t in sync with the feature set of the UI it is managing. For this reason, I think it makes a lot of sense to upgrade to the latest API version as soon as possible.</p>
<p>Most of the stuff is easy to figure out, such as how to move from <code>accountId=</code> and <code>containerId=</code> to <code>path=accounts/accountId/containers/containerId</code>. In fact, I think changes like this make it easier to work with programming languages that make use of string interpolation (Python, for example). There are some conventions that might take time to understand routinely, such as how to use <code>versionheaders.list</code> instead of <code>versions.list</code>.</p>
<p>One thing that&rsquo;s a constant feature request from me is that Google would update their error messages. It&rsquo;s very difficult to understand what&rsquo;s wrong when all you see in the logs is &ldquo;400 Bad Request&rdquo; or &ldquo;500 Backend Error&rdquo;.</p>
<p>What do you think about the new API? Have you written tools for the GTM API you want to share? Please do!</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/api/">api</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/gtm-tools-release-notes-and-user-guide/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/cross-domain-tracking-with-multiple-ga-trackers/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Google%20Tag%20Manager%20API%20V2%20Released%20https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/gtm-tools-release-notes-and-user-guide/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/cross-domain-tracking-with-multiple-ga-trackers/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Google%20Tag%20Manager%20API%20V2%20Released%20https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Google%20Tag%20Manager%20API%20V2%20Released%20https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-tag-manager-api-v2-released/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
    
    <script>
      !function(){
	    var baitPath = 'https://sgtm.simoahava.com/ads-min.js';
	  var pixelPath = 'https://sgtm.simoahava.com/4dchk';
	  var e=document.createElement("script");e.src=baitPath,document.body.appendChild(e);var t=!1;fetch("https://www.google-analytics.com/analytics.js",{method:"HEAD",mode:"no-cors"}).catch(function(){t=!0}),window.addEventListener("load",function(){var e={adb_blocked:!document.querySelector("#ECKckuBYwZaP"),gtm_blocked:!(window.google_tag_manager&&window.google_tag_manager.dataLayer),ga_blocked:t},o=Math.floor(1e6*Math.random()+1)+"_"+(new Date).getTime(),a=document.createElement("img");a.style="width: 1; height: 1; display: none;",a.src=pixelPath+"?client_id="+o+"&"+Object.keys(e).reduce(function(t,o){return t.concat(o+"="+e[o])},[]).join("&"),document.body.appendChild(a)})}();
    </script>
      

    
  </body>
</html>

