

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Node Relationships And GTM | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2014/08/rule-example.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/analytics/node-relationships-gtm/",
  "datePublished": "2014-08-29T13:25:46+00:00",
  "dateModified": "2014-08-29T13:25:46+00:00",
  "description": "Simple variable to check whether or not two nodes are "related" in the document object model. You can do this via Google Tag Manager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.48 with theme Tranquilpeak 0.4.3-BETA">
    <title>Node Relationships And GTM | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    <script src="//de.cdn-v3.conductrics.com/ac-GeQBKxGTiA/v3/agent-api/js/f-TNZdDPOknZ/dt-8BnrVvfJuB1PwktQxXXgVK2OikZ9WR?apikey=api-WDrqMnckreSqejZgDAMu" type="text/javascript"></script>
    <script src="https://www.simoahava.com/js/ctrics-manual.js"></script>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PZ7GMV9');</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/node-relationships-gtm/">
    
    <meta name="description" content="Simple variable to check whether or not two nodes are &#34;related&#34; in the document object model. You can do this via Google Tag Manager.">
    <meta property="og:description" content="Simple variable to check whether or not two nodes are &#34;related&#34; in the document object model. You can do this via Google Tag Manager.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Node Relationships And GTM">
    <meta property="og:url" content="/analytics/node-relationships-gtm/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Node Relationships And GTM">
    <meta name="twitter:description" content="Simple variable to check whether or not two nodes are &#34;related&#34; in the document object model. You can do this via Google Tag Manager.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2014/08/rule-example.png">  
      <meta property="og:image" content="https://www.simoahava.com/images/2014/08/rule-example.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Node Relationships And GTM
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-08-29T13:25:46Z">
        
  August 29, 2014

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/node-relationships-gtm/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              

<p><em>There&rsquo;s a much easier, native-to-GTM way to do this now: the <a href="https://www.simoahava.com/analytics/matches-css-selector-operator-in-gtm-triggers/">Matches CSS Selector</a>.</em></p>

<p>Behind this tragically boring title is a simple solution to many problems with Google Tag Manager&rsquo;s auto-event tracking. The common denominator to these problems is poor website markup. Selectors are used sparingly, and element hierarchy is messy. This disregard for proper node relationships means you have to resort to Data Layer Variable Macros which look like</p>

<p><code>gtm.element.parentElement.parentElement.id</code></p>

<p>to identify the element that was the target of the event. In other words, there&rsquo;s no robust, unique identifier with which you could identify the targeted element, so you have to go either up or down the Document Object Model to find something you can latch on to.</p>

<p>This is <em>not</em> a stable solution.</p>

<p>The more steps there are in your selector chain, the more chances there are of you either miscalculating the required steps, or some code on some page template producing a hierarchy which you didn&rsquo;t account for, resulting in a loss of hits.</p>

<p>In this guide I introduce a pretty simple solution. It explores the concept of node relationships by using a simple DOM function to do so. The whole thing is still a workaround, and you should definitely try to talk with your developers about how to mark up your elements with proper identifiers.</p>

<p>(By the way, for markup ideas, here are two excellent articles about using data attributes as identifiers:</p>

<p><a href="http://www.lunametrics.com/blog/2014/05/08/tracking-clicks-custom-data-attributes-google-tag-manager-google-analytics/">Tracking Clicks Using Custom Data Attributes</a> - LunaMetrics<br />
<a href="http://www.swellpath.com/2014/08/google-tag-manager-events-using-html5-data-attributes/">Google Tag Manager Events Using HTML5 Data Attributes</a> - SwellPath)</p>

<p>Anyway, this guide will demonstrate a pretty simple DOM (Document Object Model) function with which to check whether a given element (e.g. {{element}}) is an ancestor of some other element (e.g. a top-level menu wrapper). The rule will look something like this:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/08/rule-example.png" title="Example of a contains rule">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/08/rule-example.png#ZgotmplZ" alt="Example of a contains rule">
  
    </a>
  
  
</div>



<p>As usual, there&rsquo;s the easy method and then there&rsquo;s the advanced method (which isn&rsquo;t really that advanced at all).</p>

<h2 id="the-easy-method">The easy method</h2>

<p>The easy method is really just about checking the node relationship between a given element, such as {{element}}, and a specific parent element. This is useful if you only have one or two cases where this is an issue.</p>

<p>The DOM method we&rsquo;ll be using is <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node.contains">Node.contains</a>.</p>

<p>Here&rsquo;s the <strong>Custom JavaScript Macro</strong>, which is the motor of the solution, in all its simplicity:</p>

<p><strong>{{node contains element}}</strong></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;#parentId&#39;</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">!==</span> {{<span style="color:#a6e22e">element</span>}} <span style="color:#f92672">?</span> <span style="color:#a6e22e">controlElement</span>.<span style="color:#a6e22e">contains</span>({{<span style="color:#a6e22e">element</span>}}) <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>;
}
</code></pre></div>

<p>And then your firing rule will be something like:</p>

<p><strong>{{node contains element}} equals true<br />
{{event}} equals gtm.linkClick</strong></p>

<p>Feel free to use any other <a href="https://www.simoahava.com/analytics/auto-event-tracking-google-tag-manager/">auto-event tracking</a> type you wish.</p>

<p>This will only fire the tag if a click occurs on a link which is a direct ancestor of an element with ID <strong>parentId</strong>. A cousin or a long-lost blood brother will not do; the nodes must have a direct ancestral relationship.</p>

<p>So that was easy, right? What about when you have multiple ancestor-descendant-relationships you want to explore? You could create a rule and macro for each, but a far more robust way is to use a Lookup Table or a Custom JavaScript macro.</p>

<h2 id="the-advanced-method">The advanced method</h2>

<p>The idea with the advanced method is to vary the the node against which you control the event element, depending on some parameter. In this particular example I use <strong>{{url path}}</strong> to determine which control node to choose, and a Custom JavaScript macro to return the new query selector.</p>

<p>So let&rsquo;s say I have three page templates:</p>

<ol>
<li><p>Home page (url path === &lsquo;/&rsquo;), where I want to track clicks on links in the main navigation (id === &lsquo;#mainNav&rsquo;)</p></li>

<li><p>Product pages (url path === &lsquo;/products/*&lsquo;), where I want to track clicks in any of the three Call-to-action page elements (class === &lsquo;call-to-action&rsquo;)</p></li>

<li><p>All other pages, where I want to track clicks on links in the footer (tag name === &lsquo;footer&rsquo;)</p></li>
</ol>

<p>Now, to complement the Custom JavaScript macro above, I want the query selector to be dynamic, depending on which of the above conditions is true. So let&rsquo;s modify the macro just a little bit:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>({{<span style="color:#a6e22e">get</span> <span style="color:#a6e22e">query</span> <span style="color:#a6e22e">selector</span>}});
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">!==</span> {{<span style="color:#a6e22e">element</span>}} <span style="color:#f92672">?</span> <span style="color:#a6e22e">controlElement</span>.<span style="color:#a6e22e">contains</span>({{<span style="color:#a6e22e">element</span>}}) <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>;
}
</code></pre></div>

<p>So it&rsquo;s the same, but the <code>document.querySelector()</code> fetches the query string from a macro called <strong>{{get query selector}}</strong>.</p>

<p>And what does this macro look like? Well, to satisfy the three requirements I listed above, this is what you&rsquo;ll get:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">homeRegex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/^\/$/</span>,
      <span style="color:#a6e22e">productRegex</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">/^\/products\//</span>;
  <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">homeRegex</span>.<span style="color:#a6e22e">test</span>({{<span style="color:#a6e22e">url</span> <span style="color:#a6e22e">path</span>}})) {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;#mainNav&#39;</span>;
  } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">productRegex</span>.<span style="color:#a6e22e">test</span>({{<span style="color:#a6e22e">url</span> <span style="color:#a6e22e">path</span>}})) {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;.call-to-action&#39;</span>;
  }
  <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;footer&#39;</span>;
}
</code></pre></div>

<p>This returns a different string every time, depending on which condition is satisfied by the URL path of the document.</p>

<p>You can now create a unique tag for each of these three variations, still referencing the same macro in the rule, because it will return true/false depending on which condition is satisfied. If you want a more verbose check than just Boolean true/false, you can modify the original macro to return the query selector itself, after which you can modify the rule accordingly:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>({{<span style="color:#a6e22e">get</span> <span style="color:#a6e22e">query</span> <span style="color:#a6e22e">selector</span>}});
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">controlElement</span> <span style="color:#f92672">!==</span> {{<span style="color:#a6e22e">element</span>}} <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">controlElement</span>.<span style="color:#a6e22e">contains</span>({{<span style="color:#a6e22e">element</span>}}) <span style="color:#f92672">?</span> {{<span style="color:#a6e22e">get</span> <span style="color:#a6e22e">query</span> <span style="color:#a6e22e">selector</span>}} <span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>;
}
</code></pre></div>

<p>This piece of code returns &ldquo;#mainNav&rdquo; if the click occurred on the home page navigation, &lsquo;.call-to-action&rsquo; if the click occurred on any of the three call-to-action elements on the home page, or &lsquo;footer&rsquo; for all other cases. Then, if you have a tag which should only fire on clicks on the product page calls-to-action, the rule would look like this:</p>

<p><strong>{{event equals gtm.linkClick}}<br />
{{node contains element}} equals .call-to-action</strong></p>

<p>And that&rsquo;s it for the advanced method. Remember that one of the huge perks of using a tag management solution is the opportunity to consolidate your tags and make the whole setup so much leaner. Using Custom JavaScript macros for advanced lookups or the Lookup Table macro for simple value retrievals is usually the key to reducing the weight of your implementation.</p>

<h2 id="conclusions">Conclusions</h2>

<p>This was a very basic guide on a sweet little method of the DOM Node object not many seem to be aware of. The point here is that instead of building vast selector chains, where each link is weaker than the one before it, you can just use an all-encompassing ancestor lookup, which reduces the chance of error.</p>

<p>If you want to get real flashy, there&rsquo;s always the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Node.compareDocumentPosition">Node.compareDocumentPosition()</a> method, which returns a bitmask representing the relationship between two nodes. It doesn&rsquo;t take just ancestry into account, it also looks for descendant relationships, which might be useful in some cases. However, it&rsquo;s not in the scope of this guide, and I&rsquo;m pretty sure that most of the problems can be solved with the ancestor lookup.</p>

<p>JavaScript is fun! Google Tag Manager is fun-ner!</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/auto-event-tracking/">auto-event tracking</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/event-listener/">event listener</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/javascript/">JavaScript</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/custom-event-listeners-gtm/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Node%20Relationships%20And%20GTM%20https://www.simoahava.com/analytics/node-relationships-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/custom-event-listeners-gtm/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Node%20Relationships%20And%20GTM%20https://www.simoahava.com/analytics/node-relationships-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/node-relationships-gtm/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Node%20Relationships%20And%20GTM%20https://www.simoahava.com/analytics/node-relationships-gtm/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/node-relationships-gtm/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

