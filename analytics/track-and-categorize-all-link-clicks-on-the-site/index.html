<!doctype html><html lang=en-us><head><meta name=google-site-verification content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Track And Categorize All Link Clicks On The Site With Google Analytics 4 | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2022\/12\/track-link-clicks-with-link-id.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/images\/simo.png","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/analytics\/track-and-categorize-all-link-clicks-on-the-site\/","datePublished":"2022-12-12T07:00:00\u002b02:00","dateModified":"2022-12-12T07:00:00\u002b02:00","description":"Use this solution to automatically track and categorize all link clicks on your site based on which section of the page the link click occurred in.","author":{"@type":"Person","name":"Simo Ahava"}}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Track And Categorize All Link Clicks On The Site With Google Analytics 4 | Simo Ahava's blog</title>
<script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pageType:"article",environment:null})</script><script>(function(e,t,n,s){window[n]=window[n]||[],window[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(t)[0],o=e.createElement(t),a=n!="dataLayer"?"&l="+n:"";o.async=!0,o.src="https://sgtm.simoahava.com/gtm.js?id="+s+a,i.parentNode.insertBefore(o,i)})(document,"script","dataLayer","GTM-PZ7GMV9")</script><meta name=author content="Simo Ahava"><meta name=keywords content><link rel=icon href=https://www.simoahava.com/images/favicon.ico><link rel=amphtml href=https://www.simoahava.com/amp/analytics/track-and-categorize-all-link-clicks-on-the-site/><meta name=description content="Use this solution to automatically track and categorize all link clicks on your site based on which section of the page the link click occurred in."><meta property="og:description" content="Use this solution to automatically track and categorize all link clicks on your site based on which section of the page the link click occurred in."><meta property="og:type" content="blog"><meta property="og:title" content="Track And Categorize All Link Clicks On The Site With Google Analytics 4"><meta property="og:url" content="https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><meta property="og:site_name" content="Simo Ahava's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Track And Categorize All Link Clicks On The Site With Google Analytics 4"><meta name=twitter:description content="Use this solution to automatically track and categorize all link clicks on your site based on which section of the page the link click occurred in."><meta name=twitter:creator content="@SimoAhava"><meta property="og:image" content="https://www.simoahava.com/images/2022/12/track-all-link-clicks-with-link-id.jpg"><meta name=twitter:image content="https://www.simoahava.com/images/2022/12/track-all-link-clicks-with-link-id.jpg"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css></head><body><div id=_progress></div><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/>Simo Ahava's blog</a></div></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/><img class=sidebar-profile-picture loading=lazy src=https://www.simoahava.com/images/simo.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Simo Ahava</h4><h5 class=sidebar-profile-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/><i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/gtm-tips/><i class="sidebar-button-icon fa fa-lg fa-magic"></i>
<span class=sidebar-button-desc>GTM Tips</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/about-simo-ahava/><i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/tools/><i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
<span class=sidebar-button-desc>Tools</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/blog-statistics/><i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
<span class=sidebar-button-desc>Blog statistics</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sahava target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/upcoming-talks/><i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
<span class=sidebar-button-desc>Upcoming talks</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/custom-templates/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Templates</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/newsletter/><i class="sidebar-button-icon fa fa-lg fa-bell"></i>
<span class=sidebar-button-desc>Newsletter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://masto.measure.chat/@SimoAhava target=_blank rel="noopener me"><i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
<span class=sidebar-button-desc>Mastodon</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post><form id=search action=/search/><input name=q type=text class="form-control input--xlarge" placeholder="Search blog..." autocomplete=off></form><div class="post-header main-content-wrap text-left"><div class="figure nocaption"><img class=cover src=/images/2022/12/track-all-link-clicks-with-link-id.jpg width=750 height=422 alt="Track And Categorize All Link Clicks On The Site With Google Analytics 4"></div><h1>Track And Categorize All Link Clicks On The Site With Google Analytics 4</h1><div class="postShorten-meta post-meta"><time datetime=2022-12-12T07:00:00+02:00>December 12, 2022
</time><span>in</span>
<a class=category-link href=/categories/analytics>Analytics</a>
| <a href=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/#commento><comentario-count path=/analytics/track-and-categorize-all-link-clicks-on-the-site/ placeholder=... error-text="N/A " zero-text="0 " prefix suffix=" "></comentario-count>Comments</a></div></div><div class="post-content markdown"><div class=main-content-wrap><blockquote><p>This is a <strong>guest</strong> post by <a href=https://www.linkedin.com/in/sebastianp/>Sebastian Pospischil</a>, Evangelist Digital Analytics at <strong>TRKKN</strong>. All credit for the solution goes to him. The <strong>Summary</strong> section is the only one authored by Simo Ahava.</p></blockquote><p>You know the deal.</p><p>Each and every day, clients reach out to you asking for <strong>custom click tracking</strong> for this call-to-action on that slider, or that button in this section of a page. They reach out to you because such things cannot be answered out of the box in <a href=https://analytics.google.com/>Google Analytics 4</a>.</p><div style=aspect-ratio:1122/775 class="figure nocaption"><a href=/images/2022/12/track-link-clicks-with-link-id.jpg title="Track all link clicks with link_id"><img class=fig-img height=775 width=1122 loading=lazy src=/images/2022/12/track-link-clicks-with-link-id.jpg#ZgotmplZ alt="Track all link clicks with link_id"></a></div><p>Then you roll up your sleeves, create new tags, triggers, and variables, and ultimately the <a href=https://tagmanager.google.com/>Google Tag Manager</a> container will look like a mess. Somehow you&rsquo;ve reached a point where almost each and every page view is <em>also</em> tracked with a click event. That makes no sense.</p><p><strong>Would you like to overcome this? Do you want to help your clients without messing up their containers? Take a look at what this solution promises to report:</strong></p><ul><li>In which sections did a click happen?</li><li>On what page did the click happen?</li><li>To which page did the link redirect?</li><li>Which sections were clicked the most in total, per template, or per page?</li><li>Which events are generated on which sections of a page or a template?</li></ul><p>Yes, you read that last bullet correctly – this works for each and every event, too, and not just page views!</p><p>All you need is <strong>one tag</strong> and <strong>three little variables</strong>.</p><blockquote><p>Unfortunately, due to restrictions of the <a href=https://developers.google.com/tag-platform/tag-manager/templates/api>Custom Template Sandboxed JavaScript</a>, you&rsquo;ll need to implement this solution with <strong>custom JavaScript</strong>.</p></blockquote><p>You can download a workspace with the tag and variables by clicking <a href=/images/2022/12/workspace_link_id.json>this link</a>.</p><div id=toc-container><h1 id=table-of-contents>Table of Contents</h1><input type=checkbox id=show><label for=show id=showbtn><h1 id=table-of-contents-mobile>Table of Contents</h1><span class=show>&nbsp;[+show]</span><span class=hide>&nbsp;[–hide]</span></label><nav id=TableOfContents><ul><li><a href=#technical-walkthrough>Technical walkthrough</a></li><li><a href=#how-do-i-set-it-up>How do I set it up?</a></li><li><a href=#how-to-configure-the-script>How to configure the script</a><ul><li><a href=#divide-the-website-html-template-into-sections>Divide the website HTML template into sections</a></li><li><a href=#define-which-interactions-constitute-a-click>Define which interactions constitute a click</a></li></ul></li><li><a href=#reports-in-google-analytics-4>Reports in Google Analytics 4</a><ul><li><a href=#which-sections-are-clicked-the-most-overall>Which sections are clicked the most overall?</a></li><li><a href=#how-do-i-fix-cookie-missingnavigate>How do I fix (cookie missing)(navigate)?</a></li><li><a href=#do-people-click-my-slider-on-the-start-page>Do people click my slider on the start page?</a></li><li><a href=#which-sections-are-clicked-the-most-on-a-given-page>Which sections are clicked the most on a given page?</a></li><li><a href=#which-modules-get-clicked-most-per-page-template>Which modules get clicked most per page template?</a></li><li><a href=#what-about-all-the-other-events-besides-page_view>What about all the other events besides <code>page_view</code>?</a></li></ul></li><li><a href=#summary-by-simo>Summary (by Simo)</a></li></ul></nav></div><span class=simmer><span class=close>X</span><p><span class="fa fa-md fa-bell"></span>
<strong>The Simmer Newsletter</strong></p><p>Subscribe to the <a href=/newsletter/>Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!</p></span><h2 id=technical-walkthrough>Technical walkthrough</h2><p>You need to <strong>divide your website template into sections</strong>, so that the script returns the correct <code>link_id</code>. You&rsquo;ll also need to <strong>define what a link is</strong> to get accurate results.</p><p>The <strong>tag</strong> will then set a <strong>cookie</strong> with the <code>link_id</code> of each click OR when pressing Enter on the keyboard on a defined link. When reaching the next page, the information will be read out and passed into Google Analytics 4 with the <code>page_view</code> event. This helps to prevent event spam in your analytics data.</p><p>There will also be a <code>link_id_events_cJS</code> variable which can be used to attach the corresponding <code>link_id</code> to any event you want to include in this tracking setup. There&rsquo;s no cookie involved with this approach, because the events take place on the page itself and the information doesn&rsquo;t need to be persisted to the following page.</p><blockquote><p><strong>NOTE!</strong> This is not a solution for total GTM / web development newbies. You&rsquo;re expected to know how GTM works and what HTML elements and CSS selectors are. Furthermore, this article does not cover how to use <code>link_id</code> for single-page applications (SPAs) specifically.</p></blockquote><h2 id=how-do-i-set-it-up>How do I set it up?</h2><p>The steps you need to take are these:</p><ol><li><a href=/images/2022/12/workspace_link_id.json>Download</a> and <a href=https://support.google.com/tagmanager/answer/6106997>import</a> the workspace into your container.</li><li>Configure the tag and variables – the code is commented with instructions but there are additional tips below. Set the tag to fire on the <strong>All Pages</strong> trigger, for example.</li><li>Add <code>link_id_page_cJS</code> (name the event parameter just <code>link_id</code>) and <code>link_id_page_template_var</code>(name the event parameter <code>link_id_page_template</code>) to your <code>page_view</code> tag.</li><li>Add <code>link_id_events_cJS</code> to your event tag(s) (name the parameter <code>link_id</code> again – it&rsquo;s easier to have everything under the same parameter name).</li><li>Create the dimensions accordingly in the GA4 UI (<code>link_id</code> and <code>link_id_page_template</code>).</li></ol><blockquote><p><strong>NOTE!</strong> This solution has to set a <strong>first-party cookie</strong>. You can name it however you wish, but you need to add it to your privacy policy / cookie notice / other relevant documentation to be compliant with whatever legal regulation applies to accessing device storage. The value doesn&rsquo;t contain personal data – it just encodes details about the page and section that was clicked. The cookie will be deleted as soon as its value is accessed on the following page.</p></blockquote><h2 id=how-to-configure-the-script>How to configure the script</h2><p>If you&rsquo;re not familiar with <strong>HTML</strong> and <strong>CSS selectors</strong>, you may struggle with these initially. But I&rsquo;ll help you, don&rsquo;t worry!</p><p>As an example, I&rsquo;ll provide you with a walkthrough of my own project. If you want to see this in action, you can visit the site where the setup is running: <a href=https://www.kunstform.org/>https://www.kunstform.org/</a>.</p><h3 id=divide-the-website-html-template-into-sections>Divide the website HTML template into sections</h3><p>To add information about which <em>section</em> of the page the click happened in, you need to define these sections in the <code>clickIdentifier</code> configuration.</p><p>In Google Tag Manager, open the Custom HTML tag that contains the script.</p><p>Under the <code>gtm_link_id</code> variable initialization, you&rsquo;ll see a property called <code>clickIdentifier</code>. This is an object where you provide the site section details using a special syntax:</p><p><code>"[CSS SELECTOR]": "[DYNAMIC VALUE]#[FIXED VALUE]"</code></p><p>For the <strong>CSS selector</strong>, add a selector that matches that particular section of the page.</p><p>The <strong>fixed value</strong> is what the section will always be called in the parameter value.</p><p>If you specify a <strong>dynamic value</strong>, it attempts to pull in the value from the attribute name(s) you provide.</p><p>When a click lands on the element specified by the CSS selector, the tag creates the <code>link_id</code> parameter by concatenating the <strong>fixed value</strong> first (if available), followed by the <code>></code> separator and the <strong>dynamic value</strong>.</p><p>For example:</p><table><thead><tr><th>Rule</th><th>Target element</th><th>Label</th></tr></thead><tbody><tr><td><code>"div#myhome": "id#main_section"</code></td><td><code>&lt;div id="myhome"></code></td><td><code>main_section > myhome</code></td></tr><tr><td><code>"nav": "#navigation"</code></td><td><code>&lt;nav></code></td><td><code>navigation</code></td></tr><tr><td><code>"span[data-gtm]": "data-gtm#tagged_element"</code></td><td><code>&lt;span data-gtm="..."></code></td><td><code>tagged_element > ...</code></td></tr></tbody></table><p>To build this list of sections, you need to refer to the HTML of your page templates. Not all template engines generate useful HTML, so it&rsquo;s possible you&rsquo;ll need to talk to your developers to get their help in rewiring the HTML structure of your site to be more tracking-friendly.</p><p>Here&rsquo;s how I set this up on <a href=https://www.kunstform.org/>https://www.kunstform.org/</a>:</p><ol><li><p>Open the website, right-click anywhere on the page, and select <strong>Inspect</strong> (or similar) from the context menu.</p></li><li><p>You should now see something like this. When hovering over the HTML code, you&rsquo;ll notice how the different sections get highlighted. Click these tiny grey arrows in order to only show the main sections. This will be our starting point.</p></li></ol><div style=aspect-ratio:1552/722 class="figure nocaption"><a href=/images/2022/12/inspect-elements.jpg title="Inspect the HTML of the page"><img class=fig-img height=722 width=1552 loading=lazy src=/images/2022/12/inspect-elements.jpg#ZgotmplZ alt="Inspect the HTML of the page"></a></div><ol start=3><li>Following this example, we would divide the template into the following sections (by ID):<ol><li><code>header</code></li><li><code>navbar</code></li><li><code>content</code></li><li><code>left</code></li><li><code>right</code></li><li><code>footer</code></li><li><code>subfooter</code></li><li><code>cookie_consent</code></li></ol></li></ol><p>Because this site only has the <code>id</code> attribute on <code>&lt;div></code> tags, we can set up this tracking with a <em>very</em> simple <code>clickIdentifier</code> rule:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>clickIdentifer: {
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;div[id]&#34;</span>: <span style=color:#a50>&#34;id&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>If you recall from above, this means that the script tracks clicks within <em>all</em> <code>&lt;div></code> elements that have the <code>id</code> attribute. The label of the section is dynamically pulled from the <code>id</code> attribute.</p><p>As an example of something different, this is what I would set up on the <a href=https://www.trkkn.com/>https://www.trkkn.com/</a> website:</p><div style=aspect-ratio:1913/1033 class="figure nocaption"><a href=/images/2022/12/trkkn-tracking.jpg title="trkkn.com tracking setup"><img class=fig-img height=1033 width=1913 loading=lazy src=/images/2022/12/trkkn-tracking.jpg#ZgotmplZ alt="trkkn.com tracking setup"></a></div><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>clickIdentifier: {
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;nav&#34;</span>: <span style=color:#a50>&#34;#navigation&#34;</span>, <span style=color:#aaa;font-style:italic>// Fixed value: &#34;navigation&#34;
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>  <span style=color:#a50>&#34;footer&#34;</span>: <span style=color:#a50>&#34;#footer&#34;</span>, <span style=color:#aaa;font-style:italic>// Fixed value: &#34;footer&#34;
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>  <span style=color:#a50>&#34;header&#34;</span>: <span style=color:#a50>&#34;#header&#34;</span>, <span style=color:#aaa;font-style:italic>// Fixed value &#34;header&#34;
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>  <span style=color:#a50>&#34;main section&#34;</span>: <span style=color:#a50>&#34;class&#34;</span>, <span style=color:#aaa;font-style:italic>// Dynamic value from the [class] attribute
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>  <span style=color:#a50>&#34;div[id]&#34;</span>: <span style=color:#a50>&#34;id&#34;</span> <span style=color:#aaa;font-style:italic>// Fallback, passes the dynamic value of the [id] attribute of the clicked &lt;div&gt; element
</span></span></span><span style=display:flex><span><span style=color:#aaa;font-style:italic></span>}</span></span></code></pre></div><p>Hopefully that&rsquo;s clear now. After specifying the <em>basic</em> sections of the template, we can drill deeper into the content section of the page.</p><p>For example, we want to track this slider and this sale section:</p><div style=aspect-ratio:1602/752 class="figure nocaption"><a href=/images/2022/12/drill-into-content-section.jpg title="Drill into the content section"><img class=fig-img height=752 width=1602 loading=lazy src=/images/2022/12/drill-into-content-section.jpg#ZgotmplZ alt="Drill into the content section"></a></div><p>Here&rsquo;s what the updated <code>clickIdentifier</code> would look like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span>clickIdentifier: {
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;div#mainstage&#34;</span>: <span style=color:#a50>&#34;#slider_main&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;div#index&#34;</span>: <span style=color:#a50>&#34;#sale&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;div[id]&#34;</span>: <span style=color:#a50>&#34;id&#34;</span>
</span></span><span style=display:flex><span>}</span></span></code></pre></div><p>We added these to the top of the list, because the script evaluates the selectors in order from first to last and uses the first match to generate the label.</p><p>You can use the technique to divide your template even more, if you wish.</p><blockquote><p>I recommend you start easy at first. Specify the basic sections first and perhaps sprinkle in some detailed sections on the home page. You can then collect data for a while before adding additional content sections on other pages, too.</p></blockquote><h3 id=define-which-interactions-constitute-a-click>Define which interactions constitute a click</h3><p>For this solution to be accurate, we&rsquo;ll need to specify what we consider to be a &ldquo;link click&rdquo;. For example, in addition to <code>&lt;a></code> link elements, some form submissions and some button clicks can generate a redirect, too.</p><p>To specify the selectors for what you want to be treated as a link when targeted with a click, edit the <code>clickSelector</code> property in the <code>gtm_link_id</code> initialization object.</p><p>Set its value to a comma-separated list of selectors that match elements upon which a click should be considered a &ldquo;link click&rdquo;. For example, this is a good starting point:</p><p>clickSelector: &lsquo;a,input[type=&ldquo;submit&rdquo;],button&rsquo;`</p><p>On the <a href=https://www.kunstform.org>https://www.kunstform.org</a> site, we need to also add the search field, because pressing enter there will lead to a redirect to the search results page.</p><div style=aspect-ratio:1365/760 class="figure nocaption"><a href=/images/2022/12/kunstform-search-field.jpg title="Kunstform search field"><img class=fig-img height=760 width=1365 loading=lazy src=/images/2022/12/kunstform-search-field.jpg#ZgotmplZ alt="Kunstform search field"></a></div><p>Here&rsquo;s what the updated <code>clickSelector</code> looks like:</p><p><code>clickSelector: 'a,input[type="submit"],button,#input_search'</code></p><p>At this point you might be wondering just how much you need to configure for this to work. Do you need to crawl all the pages of the website to see if you&rsquo;ve missed something?</p><p>It might be a good idea to take a look at the <strong>reports</strong> at this point to help soothe your mind.</p><h2 id=reports-in-google-analytics-4>Reports in Google Analytics 4</h2><p>Here are some sample report configurations you can use once you&rsquo;ve created the required Custom Dimensions (<code>link_id</code> and <code>link_id_page_template</code>).</p><h3 id=which-sections-are-clicked-the-most-overall>Which sections are clicked the most overall?</h3><ul><li>Dimension: <code>link_id</code></li><li>Filter: <code>event equals page_view</code></li></ul><div style=aspect-ratio:1360/750 class="figure nocaption"><a href=/images/2022/12/which-sections-are-most-clicked.jpg title="Which sections are clicked the most?"><img class=fig-img height=750 width=1360 loading=lazy src=/images/2022/12/which-sections-are-most-clicked.jpg#ZgotmplZ alt="Which sections are clicked the most?"></a></div><p>Notice the entries marked in yellow? When this solution was deployed on the site, there were some gaps in the data collection. These special entries are used to provide more details.</p><ul><li><strong>(back_forward)</strong>: The user navigated with the browser&rsquo;s back or forward button.</li><li><strong>(reload)</strong>: The user reloaded the page.</li><li><strong>(landing page)</strong>: The user landed on the site via this page, because the <code>document.referrer</code> is a different site than yours.</li><li><strong>(cookie missing)(navigate)</strong>: There is no cookie but the user definitely navigated. <em>This means that there are still sections that you haven&rsquo;t tracked as potential navigation sources in <code>clickSelector</code></em>.</li><li><strong>(error)</strong>: There was an error with the <a href=https://caniuse.com/mdn-api_performancenavigationtiming><code>PerformanceNavigationTiming</code> API</a></li></ul><h3 id=how-do-i-fix-cookie-missingnavigate>How do I fix (cookie missing)(navigate)?</h3><ul><li>Dimensions: <code>link_id</code>, <code>Page referrer</code>, <code>Page path and screen class</code></li><li>Filter: <code>event equals page_view</code>, <code>link_id equals (cookie missing)(navigate)</code></li></ul><p>This report tells us on which page the user was (<code>Page referrer</code>) and which page they navigated to (<code>Page path and screen class</code>).</p><div style=aspect-ratio:1357/777 class="figure nocaption"><a href=/images/2022/12/untracked-sections-report.jpg title="Report of untracked sections"><img class=fig-img height=777 width=1357 loading=lazy src=/images/2022/12/untracked-sections-report.jpg#ZgotmplZ alt="Report of untracked sections"></a></div><p>In the first entry, when we hover over the <code>Page referrer</code> value, we can see that the user navigated from <code>/shopping_cart</code> to <code>/shopping_cart</code>. Huh?</p><div style=aspect-ratio:1017/653 class="figure nocaption"><a href=/images/2022/12/shopping-cart-navigation.jpg title="Shopping cart navigation"><img class=fig-img height=653 width=1017 loading=lazy src=/images/2022/12/shopping-cart-navigation.jpg#ZgotmplZ alt="Shopping cart navigation"></a></div><p>There are only two interactions that generate a new page load: <strong>UPDATE CART</strong> and <strong>REMOVE</strong>. Let&rsquo;s click these two buttons to find out how our solution reacts:</p><ul><li>When I click <strong>UPDATE CART</strong>, the label for the link is set to <code>content</code>, so it works nicely.</li><li>When I click <strong>REMOVE</strong>, nothing happens. You need to click <strong>UPDATE CART</strong> anyway.</li></ul><p>So it&rsquo;s neither of these. What could it be?</p><p>Well, if I change the quantity of an item in the respective input field and press <code>Enter</code>, an event with <strong>(cookie missing)(navigate)</strong> is dispatched as the event parameter value. Found it!</p><p>If we inspect this field, we can see how we should update <code>clickSelector</code>.</p><div style=aspect-ratio:1301/419 class="figure nocaption"><a href=/images/2022/12/inspect-cart-update.jpg title="Inspect the cart quantity field"><img class=fig-img height=419 width=1301 loading=lazy src=/images/2022/12/inspect-cart-update.jpg#ZgotmplZ alt="Inspect the cart quantity field"></a></div><p>This <code>&lt;input></code> element is <em>not</em> on our list of valid <code>clickSelector</code> options. So, we need to update it. Here&rsquo;s what the new <code>clickSelector</code> looks like:</p><p><code>clickSelector: 'a,input[type="submit"],button,#input_search,input[name="cart_quantity[]"]'</code></p><p>Now when I change the quantity and press <code>Enter</code>, the solution tracks it correctly.</p><p>You can now do the same run-through with all the obscure entries in the list. If you do your work carefully, the number of <strong>(cookie missing)(navigate)</strong> entries will reduce over time.</p><h3 id=do-people-click-my-slider-on-the-start-page>Do people click my slider on the start page?</h3><ul><li>Dimension: <code>Page path and screen class</code></li><li>Filter: <code>event equals page_view</code>, <code>Page referrer equals https://www.kunstform.org/de/</code>, <code>link_id equals mainstage</code></li></ul><p>There are three cards on the home page slider. Which one gets the most clicks?</p><div style=aspect-ratio:900/663 class="figure nocaption"><a href=/images/2022/12/front-page-slider.jpg title="Front page slider"><img class=fig-img height=663 width=900 loading=lazy src=/images/2022/12/front-page-slider.jpg#ZgotmplZ alt="Front page slider"></a></div><p>Here&rsquo;s what the report tells us:</p><div style=aspect-ratio:983/252 class="figure nocaption"><a href=/images/2022/12/slider-images.jpg title="Slider images compared"><img class=fig-img height=252 width=983 loading=lazy src=/images/2022/12/slider-images.jpg#ZgotmplZ alt="Slider images compared"></a></div><p>In this case, the first slide gets the most clicks. No extra event tracking was needed – our solution took care of it for us! We can use this information to run A/B tests, for example, to make sure that our slider attracts users in the best way possible.</p><h3 id=which-sections-are-clicked-the-most-on-a-given-page>Which sections are clicked the most on a given page?</h3><ul><li>Dimension: <code>link_id</code>, <code>Page referrer</code></li><li>Filter: <code>event equals page_view</code>, <code>Page referrer contains [PAGE_TO_BE_ANALYZED]</code></li></ul><div style=aspect-ratio:1359/784 class="figure nocaption"><a href=/images/2022/12/which-sections-most-clicks.jpg title="Which sections get the most clicks on a page?"><img class=fig-img height=784 width=1359 loading=lazy src=/images/2022/12/which-sections-most-clicks.jpg#ZgotmplZ alt="Which sections get the most clicks on a page?"></a></div><p>In this case, I filtered specifically for clicks on the home page. I wanted to know if users tend to use our <strong>parts finder</strong> more than the main navigation.</p><p>Based on the report, it certainly looks like the <code>findernav</code> is very popular.</p><h3 id=which-modules-get-clicked-most-per-page-template>Which modules get clicked most per page template?</h3><ul><li>Dimension: <code>link_id</code></li><li>Filter: <code>event equals page_view</code>, <code>link_id_page_template equals product_detail</code></li></ul><div style=aspect-ratio:1358/738 class="figure nocaption"><a href=/images/2022/12/clicks-per-page-template.jpg title="Clicks per page template"><img class=fig-img height=738 width=1358 loading=lazy src=/images/2022/12/clicks-per-page-template.jpg#ZgotmplZ alt="Clicks per page template"></a></div><p>On product detail pages, users tend to interact with the price panel first. And that&rsquo;s good news!</p><h3 id=what-about-all-the-other-events-besides-page_view>What about all the other events besides <code>page_view</code>?</h3><p>The Google Tag Manager variable <code>link_id_events_cJS</code> will attach the <code>link_id</code> to whatever tag the variable is added to. No cookie needs to be set, because the event happens on the page without a redirect taking place.</p><p>Be aware that <code>link_id_page_template</code> will contain the value from the previous <code>page_view</code> event. If we want to analyze the events per page template, we should use <code>page_type</code> in our example below instead.</p><div style=aspect-ratio:1067/474 class="figure nocaption"><a href=/images/2022/12/page-type.jpg title="Page type"><img class=fig-img height=474 width=1067 loading=lazy src=/images/2022/12/page-type.jpg#ZgotmplZ alt="Page type"></a></div><p>Other than that, you can do the same analysis with other events as you&rsquo;ve done with <code>page_view</code>. Just remember that event analysis happens on the same page where the event was collected, so when you build the reports, you can use <code>Page path and screen class</code> as the dimension rather than <code>Page referrer</code>. This is relevant when you work with single-page applications (SPAs), too.</p><h2 id=summary-by-simo>Summary (by Simo)</h2><p>Thank you, Sebastian!</p><p>This might seem like a complicated thing to get working, but once you figure out the appropriate CSS selectors for your site sections, and once you figure out which element interactions should be classified as &ldquo;link clicks&rdquo;, the actual script will do the rest of the work for you.</p><p>The end result is a fairly self-sufficient way of tracking clicks that lead to navigation / redirect events.</p><p>You can use this information to build <strong>navigation pathing reports</strong> for sure, but you can also use it for building <strong>heatmaps</strong> and for validating which <strong>sections</strong> of your page templates receive the most attention.</p><p>If you have questions about how to set this up or about the implementation itself, feel free to add them to the blog comments!</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/google-tag-manager/>google tag manager</a>
<a class="tag tag--primary tag--small" href=/tags/guest-post/>guest post</a>
<a class="tag tag--primary tag--small" href=/tags/google-analytics-4/>google analytics 4</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/session-attribution-with-ga4-measurement-protocol/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/privacy/first-party-cookies-webkit-revisited/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=Track%20And%20Categorize%20All%20Link%20Clicks%20On%20The%20Site%20With%20Google%20Analytics%204%20https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div><a name=commento></a><comentario-comments></comentario-comments></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2026 Simo Ahava. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/session-attribution-with-ga4-measurement-protocol/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/privacy/first-party-cookies-webkit-revisited/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=Track%20And%20Categorize%20All%20Link%20Clicks%20On%20The%20Site%20With%20Google%20Analytics%204%20https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=Track%20And%20Categorize%20All%20Link%20Clicks%20On%20The%20Site%20With%20Google%20Analytics%204%20https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/"><i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://www.simoahava.com/images/simo.png alt="Author's picture"><h4 id=about-card-name>Simo Ahava</h4><div id=about-card-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Senior Data Advocate at Reaktor</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>Finland</div></div></div><div id=cover style=background-image:url(https://www.simoahava.com/images/maisema.jpg)></div><script defer src=https://comentario.simoahava.com/comentario.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=/js/script.js></script><script>!function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),n=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");e&&(n&&(e.style.display="none"),t&&t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"}))}()</script></body></html>