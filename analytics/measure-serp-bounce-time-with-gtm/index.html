

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    

<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Measure SERP Bounce Time With GTM | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2015/09/dwell-time-landing-page.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/",
  "datePublished": "2015-09-28T12:28:30+00:00",
  "dateModified": "2015-09-28T12:28:30+00:00",
  "description": "How to measure the dwell time of users who visit your site via SERP before bouncing back to the SERP page. Using Google Tag Manager, of course.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.31 with theme Tranquilpeak 0.4.3-BETA">
    <title>Measure SERP Bounce Time With GTM | Simo Ahava's blog</title>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PZ7GMV9');</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/measure-serp-bounce-time-with-gtm/">
    
    <meta name="description" content="How to measure the dwell time of users who visit your site via SERP before bouncing back to the SERP page. Using Google Tag Manager, of course.">
    <meta property="og:description" content="How to measure the dwell time of users who visit your site via SERP before bouncing back to the SERP page. Using Google Tag Manager, of course.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Measure SERP Bounce Time With GTM">
    <meta property="og:url" content="/analytics/measure-serp-bounce-time-with-gtm/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Measure SERP Bounce Time With GTM">
    <meta name="twitter:description" content="How to measure the dwell time of users who visit your site via SERP before bouncing back to the SERP page. Using Google Tag Manager, of course.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2015/09/dwell-time-landing-page.png">  
      <meta property="og:image" content="https://www.simoahava.com/images/2015/09/dwell-time-landing-page.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Measure SERP Bounce Time With GTM
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-09-28T12:28:30Z">
        
  September 28, 2015

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/#disqus_thread">Comments</a> <span id="linkedincount"></span>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              

<p>Here&rsquo;s an interesting and hacky use case for you. It&rsquo;s all about uncovering <strong>bounce</strong> metrics for visits which originate from organic Google search results. In particular, the metric we&rsquo;re interested in is how long user <em>dwelled</em> on the landing page after arriving from organic Google search <strong>AND</strong> returned to the search engine results page (SERP) using the browser&rsquo;s back button.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/dwell-time-landing-page.png" title="Dwell time landing page">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/dwell-time-landing-page.png#ZgotmplZ" alt="Dwell time landing page">
  
    </a>
  
  
</div>



<p>The inspiration for this post came from an audience question at the Best Internet Conference in Lithuania, which I recently attended as a speaker. They were concerned that Google is using Bounce Rate as a search ranking signal, and I was fairly strongly opinionated that it&rsquo;s simply not possible, as all the &ldquo;native&rdquo; GA metrics are really easy to manipulate. However, Dr. Pete from Moz wrote about <a href="https://moz.com/blog/the-2-user-metrics-that-matter-for-seo"><em>dwell time</em></a> in 2012, and it makes a lot of sense. Google should be <strong>very</strong> interested how long the visitor stays out of the SERP when following a link. If users tend to immediately return to the SERP, it&rsquo;s very likely the result was not relevant for them.</p>

<p>So, inspired by this question, I wanted to see if I can get some metrics from how long people dwell on these landing pages before returning to the SERP. I got my results, but it&rsquo;s definitely not an easy problem to solve. As usual, we&rsquo;re using a combination of <a href="https://tagmanager.google.com">Google Tag Manager</a> and <a href="https://analytics.google.com">Google Analytics</a> to perform the operation.</p>

<p>(<strong>UPDATE 17 April 2016</strong> I updated this article, as I had to make some modifications to the code. It&rsquo;s slightly more robust now, and it lends itself better to e.g. Custom Metrics, if you prefer to use those instead of User Timings.)</p>

<p>The result is a list of User Timings, where each landing page can be scrutinized against the time users spent on there before clicking the browser&rsquo;s back button.</p>

<h2 id="the-mystery-of-the-history">The mystery of the history</h2>

<p>The difficulty is that when the user clicks the browser&rsquo;s back button, we have no knowledge of where the user is taken to. That&rsquo;s browser security for you. It would be highly questionable if the website had access to the history of the web browser. Makes sense, right?</p>

<p>Another difficulty is the actual browser back button. It&rsquo;s not part of the browser object model, so we can&rsquo;t actually measure clicks on it. Instead, we can <em>infer</em> a back button click from how people navigate with URL hashes! When a <em>hash change</em> is recorded, we can infer that it was due to browser back <strong>if</strong> we implement a little hack, where the hash is unique to organic Google search.</p>

<p>You see, by creating a new browser history entry for people landing from organic Google search, the back button click doesn&rsquo;t take them to the SERP, but rather to the original landing page that existed <strong>before</strong> we redirected the user to the new history state. Using that as an indicator, we can extrapolate that the hash change occurred due to a browser back button click (or the backspace).</p>

<h2 id="the-process">The process</h2>

<p>The process is as follows:</p>

<ol>
<li><p>If the user lands on the site through organic Google search, create a new <strong>browser history entry</strong> with the hash <strong>#gref</strong></p></li>

<li><p>Later, if a <strong>hash change</strong> is registered, and the user is still on the landing page, and the hash change is from <strong>#gref</strong> to a blank string, fire a Google Analytics <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/user-timings?hl=en">timing</a> event, after which programmatically invoke the &ldquo;Back&rdquo; event in the browser history</p></li>
</ol>

<p>Looks simple (actually, doesn&rsquo;t look simple at all), but it&rsquo;s very hacky indeed. You see, we&rsquo;re <strong>manipulating browser history</strong> by creating a new, fictional entry called <strong>#gref</strong>. Then, when the user clicks browser back, instead of taking them back to Google search, it actually takes them to the previous state, which is the URL <strong>without</strong> the #gref.</p>

<p>THAT&rsquo;S how we know both that the user clicked browser back AND that they were trying to return to the SERP. All we have to do is send the Google Analytics timing hit, and then move the user manually to the previous entry in the history (i.e. the SERP).</p>

<p>Why is it hacky? Well, you&rsquo;re manipulating browser history, for one. You&rsquo;re creating a custom state, and you&rsquo;re forcing the user to adopt that state if they land from organic search. Next, you&rsquo;re intercepting a legitimate browser back event, and instead of letting the user directly leave the site, you&rsquo;re forcing them to send the GA timing hit first, before manually whisking them back to the SERP.</p>

<p>Whew! Lots of things that can go wrong. Luckily the JavaScript is solid and beautiful, but don&rsquo;t forget to test thoroughly!</p>

<p>Wait, let me repeat that: <strong>test thoroughly</strong>. Also, if you&rsquo;re running a single-page website, I can almost promise you that this won&rsquo;t work out-of-the-box.</p>

<h2 id="the-custom-html-tag">The Custom HTML Tag</h2>

<p>At the heart of this solution is a single Custom HTML Tag. It&rsquo;s fired by two different events, to which we&rsquo;ll return shortly.</p>

<p>First of all, here&rsquo;s the code:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
  (<span style="color:#66d9ef">function</span>() {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">search</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">h</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">hash</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">e</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Event</span>}};
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">New</span> <span style="color:#a6e22e">History</span> <span style="color:#a6e22e">Fragment</span>}};
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Old</span> <span style="color:#a6e22e">History</span> <span style="color:#a6e22e">Fragment</span>}};
    
    <span style="color:#75715e">// Only run if the History API is supported
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (window.<span style="color:#a6e22e">history</span>) {

      <span style="color:#75715e">// Create a new history state if the user lands from Google&#39;s SERP
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.js&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
          document.<span style="color:#a6e22e">referrer</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;www.google.&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> 
          <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;gclid&#39;</span>) <span style="color:#f92672">===</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
          <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;utm_&#39;</span>) <span style="color:#f92672">===</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
          <span style="color:#a6e22e">h</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;#gref&#39;</span>) {
        window.<span style="color:#a6e22e">oldFragment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
        window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">pushState</span>(<span style="color:#66d9ef">null</span>,<span style="color:#66d9ef">null</span>,<span style="color:#e6db74">&#39;#gref&#39;</span>);
      } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.js&#39;</span>) {
        window.<span style="color:#a6e22e">oldFragment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
      }

      <span style="color:#75715e">// When the user tries to return to the SERP using browser back, fire the
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// Google Analytics timing event, and after it&#39;s dispatched, manually
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// navigate to the previous history entry, i.e. the SERP
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.historyChange&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
          <span style="color:#a6e22e">n</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
          <span style="color:#a6e22e">o</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gref&#39;</span>) {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">time</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date().<span style="color:#a6e22e">getTime</span>() <span style="color:#f92672">-</span> {{<span style="color:#a6e22e">DLV</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">gtm</span>.<span style="color:#a6e22e">start</span>}};
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>window.<span style="color:#a6e22e">oldFragment</span>) {
          <span style="color:#a6e22e">dataLayer</span>.<span style="color:#a6e22e">push</span>({
            <span style="color:#e6db74">&#39;event&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;returnToSerp&#39;</span>,
            <span style="color:#e6db74">&#39;timeToSerp&#39;</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">time</span>,
            <span style="color:#e6db74">&#39;eventCallback&#39;</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
              window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">go</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
            }
          });
        } <span style="color:#66d9ef">else</span> {
          window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">go</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
        }
      }
    }
  })();
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span></code></pre></div>

<p>Let&rsquo;s quickly walk through this code. First of all, the whole block is encased in an immediately invoked function expression (IIFE) <code>(function() {...})();</code>, which protects the global namespace. Also, the whole solution only works if the user&rsquo;s browser supports the History API: <code>if (window.history) {...}</code>.</p>

<p>The first important code block is this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.js&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
    document.<span style="color:#a6e22e">referrer</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;www.google.&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span> 
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;gclid&#39;</span>) <span style="color:#f92672">===</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
    <span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;utm_&#39;</span>) <span style="color:#f92672">===</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">&amp;&amp;</span>
    <span style="color:#a6e22e">h</span> <span style="color:#f92672">!==</span> <span style="color:#e6db74">&#39;#gref&#39;</span>) {
  window.<span style="color:#a6e22e">oldFragment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
  window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">pushState</span>(<span style="color:#66d9ef">null</span>,<span style="color:#66d9ef">null</span>,<span style="color:#e6db74">&#39;#gref&#39;</span>);
}</code></pre></div>

<p>This code checks the following:</p>

<ol>
<li><p>Was the Tag fired due to the Page View Trigger (i.e. a page load)?</p></li>

<li><p>Did the user land from a Google site (<code>referrer</code> contains <strong>www.google.</strong>)?</p></li>

<li><p>If they did, make sure it&rsquo;s not from an AdWords ad (check that the URL does not have <strong>?gclid</strong>) or custom campaign.</p></li>

<li><p>Make sure also that the URL does not already contain #gref, which would imply the user followed a link with that hash or that the user already had a history entry with #gref, meaning they&rsquo;ve navigated somewhere else within or outside the site after landing on it in the first place from the SERP.</p></li>
</ol>

<p>If these checks pass, then a new global variable <code>oldFragment</code> is initialized with the value <code>false</code>. This means simply that this is a brand new landing on the site through organic Google search, and we check against this when we push the payload to <code>dataLayer</code>. We only want to send the Timing hit for landing page bounces.</p>

<p>Finally, a new browser history state is created, where the URL is appended with <strong>#gref</strong> to show that the user landed from organic Google search.</p>

<p>The next code block is:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.js&#39;</span>) {
  window.<span style="color:#a6e22e">oldFragment</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
}</code></pre></div>

<p>Here, we check if the event is a page load again, but the URL already has <strong>#gref</strong>. In this case, we set the global variable to <code>true</code>, since obviously this entry is not a direct landing from the SERP but something else. This way, we&rsquo;ll block the Timing hit from happening, as we only want to measure true landing page bounces.</p>

<p>The final code block is:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">e</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gtm.historyChange&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
    <span style="color:#a6e22e">n</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;&#39;</span> <span style="color:#f92672">&amp;&amp;</span> 
    <span style="color:#a6e22e">o</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;gref&#39;</span>) {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">time</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date().<span style="color:#a6e22e">getTime</span>() <span style="color:#f92672">-</span> {{<span style="color:#a6e22e">DLV</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">gtm</span>.<span style="color:#a6e22e">start</span>}};
  <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>window.<span style="color:#a6e22e">oldFragment</span>) {
    <span style="color:#a6e22e">dataLayer</span>.<span style="color:#a6e22e">push</span>({
      <span style="color:#e6db74">&#39;event&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;returnToSerp&#39;</span>,
      <span style="color:#e6db74">&#39;timeToSerp&#39;</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">time</span>,
      <span style="color:#e6db74">&#39;eventCallback&#39;</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
        window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">go</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
      }
    });
  } <span style="color:#66d9ef">else</span> {
    window.<span style="color:#a6e22e">history</span>.<span style="color:#a6e22e">go</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
  }
}</code></pre></div>

<p>Again, there&rsquo;s a checklist of things:</p>

<ol>
<li><p>Is the event a browser history event?</p></li>

<li><p>Is the old hash <strong>#gref</strong> and the new hash a blank string?</p></li>
</ol>

<p>If all these checks pass, it means that the user tried to go back in browser history to the SERP. Due to our manually imposed history state, they&rsquo;re actually taken to the <strong>#gref</strong>-less landing page.</p>

<p>Next, we check the dwell time on the page, using the difference between the current time and the time when the GTM container snippet was first loaded. This is a reasonable description of dwell time, but you can use something else for start time if you wish.</p>

<p>Finally, we check if <code>oldFragment</code> is false, meaning we&rsquo;re still on the landing page. If it is, the payload is pushed into <code>dataLayer</code>. The &lsquo;eventCallback&rsquo; key has the actual return to SERP command, and it will only be executed after any Tags that use the <strong>returnToSerp</strong> event have fired.</p>

<p>Hacky-dy-hack-hack! I love it!</p>

<h2 id="all-the-other-stuff-you-ll-need">All the other stuff you&rsquo;ll need</h2>

<p>Here&rsquo;s a list of the assets you need to create for this to work. Feel free to improvise, if you wish!</p>

<h3 id="1-built-in-variables">1. Built-in Variables</h3>

<p>First, make sure the following Built-in Variables are checked in your container&rsquo;s Variables settings.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/built-ins.png" title="Required built-ins">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/built-ins.png#ZgotmplZ" alt="Required built-ins">
  
    </a>
  
  
</div>



<p>So that&rsquo;s <strong>Page URL</strong>, <strong>Event</strong>, <strong>History Source</strong>, <strong>New / Old History Fragment</strong>.</p>

<h3 id="2-the-triggers-for-the-custom-html-tag">2. The Triggers for the Custom HTML Tag</h3>

<p>The Custom HTML Tag runs on two Triggers.</p>

<p>The first one is the default <strong>All Pages</strong> Trigger.</p>

<p>The second one is a <strong>History Change</strong> Trigger which looks like this:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/history-change-trigger.png" title="History Change Trigger with popstate">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/history-change-trigger.png#ZgotmplZ" alt="History Change Trigger with popstate">
  
    </a>
  
  
</div>



<p>This Trigger only launches when a browser history event is detected which is also a <code>popstate</code>, and the new history fragment is empty.</p>

<h3 id="3-the-variables">3. The Variables</h3>

<p>Create the following Data Layer Variables:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/dlv-gtm.start_.png" title="dlv-gtm.start">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/dlv-gtm.start_.png#ZgotmplZ" alt="dlv-gtm.start">
  
    </a>
  
  
</div>



<p>This one stores the time when the GTM container snippet was executed.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/dlv-timetoserp.png" title="DLV - timetoserp">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/dlv-timetoserp.png#ZgotmplZ" alt="DLV - timetoserp">
  
    </a>
  
  
</div>



<p>This is where the time spent on the landing page is stored.</p>

<h3 id="4-the-trigger-for-the-timing-tag">4. The Trigger for the Timing Tag</h3>

<p>The Trigger you&rsquo;ll attach to the Timing Tag (created next) looks like this:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/trigger-returntoserp.png" title="returntoserp Trigger">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/trigger-returntoserp.png#ZgotmplZ" alt="returntoserp Trigger">
  
    </a>
  
  
</div>



<p>This Trigger fires when the <strong>returnToSerp</strong> <code>dataLayer</code> event is pushed via the Custom HTML Tag. It also checks that the dwell time pushed into <code>dataLayer</code> is less than 30 minutes. This way a new session won&rsquo;t be started with the event, if the visitor stays on the page for an exceptionally long time.</p>

<h3 id="5-the-timing-tag">5. The Timing Tag</h3>

<p>And here&rsquo;s the Universal Analytics Timing Tag you&rsquo;ll need:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/timing-tag.png" title="Universal Analytics Timing Tag">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/timing-tag.png#ZgotmplZ" alt="Universal Analytics Timing Tag">
  
    </a>
  
  
</div>



<p>We&rsquo;re sending <strong>SERP Bounce</strong> as the Timing Category, the full <strong>Page URL</strong> as the Timing Variable, and the <strong>time spent</strong> on the landing page as the value. As mentioned above, this Tag is fired by the Trigger you created in step (4) above.</p>

<h2 id="viewing-the-results">Viewing the results</h2>

<p>Once you implement this, you&rsquo;ll find the results under <strong>Site Content &gt; Site Speed &gt; User Timings</strong> under the Timing Category labelled <strong>SERP Bounce</strong>.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/user-timings-ga.png" title="User Timings in GA">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/user-timings-ga.png#ZgotmplZ" alt="User Timings in GA">
  
    </a>
  
  
</div>



<p>To drill into the data, it&rsquo;s useful to view the Timing Variable as the primary dimension, as that&rsquo;s the one where the landing pages are. Try to find landing pages with an abnormally small average dwell time:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/average-timings.png" title="Average timings">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/average-timings.png#ZgotmplZ" alt="Average timings">
  
    </a>
  
  
</div>



<p>These pages have a very short dwell time compared to site average. Just make sure that the <strong>timing sample</strong> is large enough for you to draw conclusions from. Pages with an abnormally short dwell time from the SERP <strong>MIGHT</strong> indicate a poor experience or lack or relevant content.</p>

<p>Also, the <strong>Distribution</strong> view is useful if you want to drill down to individual page performance:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/distribution.png" title="Timing distribution">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/distribution.png#ZgotmplZ" alt="Timing distribution">
  
    </a>
  
  
</div>



<p>This report lets you view the timing buckets. As you can see, there are some anomalies here, though the sample is quite small.</p>

<h2 id="summary">Summary</h2>

<p>I hope I&rsquo;ve convinced you by now that this is a very hacky solution. Remember to test thoroughly. I can also promise that you will have problems if you try to implement this on a single-page application (e.g. AJAX site), which rely on the browser history API for navigation.</p>

<p>Nevertheless, it&rsquo;s an interesting way of uncovering potential issues with your landing pages. It would be interesting to align this data with keyword data, but that&rsquo;s up to you to solve, since that data is difficult to come by these days, and User Timings don&rsquo;t align well with acquisition dimensions like Keyword.</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics/">google analytics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/seo/">SEO</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/serp/">serp</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/timings/">timings</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/measure-ad-content-blocker-impact-on-traffic/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Measure%20SERP%20Bounce%20Time%20With%20GTM%20https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/measure-ad-content-blocker-impact-on-traffic/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Measure%20SERP%20Bounce%20Time%20With%20GTM%20https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%25!s%28BADINDEX%29">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.simoahava.com%2Fanalytics%2Fmeasure-serp-bounce-time-with-gtm%2F%20%25!s%28BADINDEX%29%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%25!s%28BADINDEX%29">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=%25!s%28BADINDEX%29">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

