

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Community Template Gallery For Google Tag Manager - Introduction And Tips For Use | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2019\/10\/gallery-list.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/introducing-tag-manager-template-gallery\/",
  "datePublished": "2019-10-02T09:00:00\x2b03:00",
  "dateModified": "2019-10-02T09:00:00\x2b03:00",
  "description": "Tips for using the Tag Manager Template Gallery for Google Tag MAnager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.61.0 with theme Tranquilpeak 0.4.3-BETA">
    <title>Community Template Gallery For Google Tag Manager - Introduction And Tips For Use | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/introducing-tag-manager-template-gallery/">
    
    <meta name="description" content="Tips for using the Tag Manager Template Gallery for Google Tag MAnager.">
    <meta property="og:description" content="Tips for using the Tag Manager Template Gallery for Google Tag MAnager.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Community Template Gallery For Google Tag Manager - Introduction And Tips For Use">
    <meta property="og:url" content="/analytics/introducing-tag-manager-template-gallery/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Community Template Gallery For Google Tag Manager - Introduction And Tips For Use">
    <meta name="twitter:description" content="Tips for using the Tag Manager Template Gallery for Google Tag MAnager.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2019/10/gallery-list.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2019/10/gallery-list.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Community Template Gallery For Google Tag Manager - Introduction And Tips For Use
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2019-10-02T09:00:00&#43;03:00">
        
  October 2, 2019

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>Since the introduction of <a href="https://developers.google.com/tag-manager/templates">custom templates</a> in May 2019, the community (myself included) has been anxiously waiting for some official solution for curating and distributing templates created by the community.</p>
<p>Now, finally, we have it. It's called the <strong>Community Template Gallery</strong>! Read Google's announcement in <a href="https://blog.google/products/marketingplatform/analytics/manage-tags-easily-and-safely-new-community-template-gallery/">this blog post</a>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/gallery-list.jpg" title="Gallery list">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/gallery-list.jpg#ZgotmplZ" alt="Gallery list">
  
    </a>
  
  
</div>


<p>I'm not going to go over the basics in this article, since Google's <a href="https://developers.google.com/tag-manager/templates/gallery">own documentation</a> stands fine on its own feet. However, I do want to discuss some of the ways in which you can streamline updating and sharing those lovely templates you've created.</p>
<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-the-community-template-gallery">What is the Community Template Gallery?</a></li>
    <li><a href="#github">GitHub</a>
      <ul>
        <li><a href="#templatetpl">template.tpl</a></li>
        <li><a href="#metadatayaml">metadata.yaml</a></li>
        <li><a href="#license">LICENSE</a></li>
        <li><a href="#github-tip-1-add-new-template-to-the-gallery">GitHub tip #1: Add new template to the gallery</a></li>
        <li><a href="#github-tip-2-update-the-template">GitHub tip #2: Update the template</a></li>
        <li><a href="#github-tip-3-set-up-an-organization-and-submodules">GitHub tip #3: Set up an organization and submodules</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
<p>Don't forget that there are other sources for templates as well, namely:</p>
<ul>
<li><a href="https://www.gtmtemplates.com/">GTM Templates</a> - open-source template library for community templates (see <a href="https://www.simoahava.com/gtm-tips/introducing-gtm-templates-library/">here</a>) for more information.</li>
<li><a href="https://github.com/sahava/GoogleTagManagerTemplates/">GoogleTagManagerTemplates</a> - GitHub repository for community templates.</li>
</ul>
<h2 id="what-is-the-community-template-gallery">What is the Community Template Gallery?</h2>
<p>The Community Template Gallery is Google Tag Manager's own, integrated library for uploading and distributing templates across users, accounts, and containers.</p>
<p><strong>Anybody</strong> in the community can <a href="https://tagmanager.google.com/gallery/getting-started">submit a template</a> to the gallery, and thus get their work in the reach of all Google Tag Manager users around the world.</p>
<blockquote>
<p><strong>NOTE!</strong> Not all templates will be published. Your template must follow the <a href="https://developers.google.com/tag-manager/templates/style">style guide</a>, and if there's a template with similar functionality already in the gallery, your template might not get published.</p>
</blockquote>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/submit-template.jpg" title="Submit template">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/submit-template.jpg#ZgotmplZ" alt="Submit template">
  
    </a>
  
  
</div>


<p>Templates can be added to a container by clicking the <strong>Search gallery</strong> button next to the Tag Templates and Variable Templates listings in the <strong>Templates</strong> section of the container.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/search-gallery-button.jpg" title="search templates button">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/search-gallery-button.jpg#ZgotmplZ" alt="search templates button">
  
    </a>
  
  
</div>


<p>This opens an overlay where you can do string searches for the template you'd like to add to your container.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/sample-template.jpg" title="Sample template">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/sample-template.jpg#ZgotmplZ" alt="Sample template">
  
    </a>
  
  
</div>


<p>The template overlay lets you <strong>add the template to the workspace</strong> by clicking the respective button <strong>(1)</strong>. Here, you can take a final look at the permissions before choosing to add the template to the current workspace.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/add-template-to-workspace.jpg" title="Add template to workspace">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/add-template-to-workspace.jpg#ZgotmplZ" alt="Add template to workspace">
  
    </a>
  
  
</div>


<p>The <strong>little arrow link</strong> in the corner opens the template page in the <a href="https://tagmanager.google.com/gallery/">gallery itself</a> <strong>(2)</strong>.</p>
<p>You can click the <strong>author name</strong> to access their GitHub profile <strong>(3)</strong>. The green checkmark indicates that this organization has been <a href="https://help.github.com/en/articles/verifying-your-organizations-domain">verified</a> in GitHub.</p>
<p>The <strong>permissions</strong> overview is important, as it will let you evaluate what types of <a href="https://www.simoahava.com/analytics/custom-templates-guide-for-google-tag-manager/#permissions">permissions</a> the template might require <strong>(4)</strong>. The red danger and the grey warning icons alert you that the template will load potentially hazardous code, and you should only add the template if you <strong>trust the author</strong>.</p>
<p>There are direct links to the <strong>template repository</strong> in GitHub, and to the <strong>issues</strong> section of the repository <strong>(5)</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/09/template-gallery.jpg" title="Template Gallery">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/09/template-gallery.jpg#ZgotmplZ" alt="Template Gallery">
  
    </a>
  
  
</div>


<p>You can also visit the Community Template Gallery directly at the URL <a href="https://tagmanager.google.com/gallery/">https://tagmanager.google.com/gallery/</a>. It has all the same features as the overlay.</p>
<h2 id="github">GitHub</h2>
<p>As you might have noticed above, to submit a template you need to create a <strong>GitHub repository</strong> for it.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/github-repository.jpg" title="GitHub repository">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/github-repository.jpg#ZgotmplZ" alt="GitHub repository">
  
    </a>
  
  
</div>


<p>GitHub is a community for managing and sharing <strong>code</strong>. It's used to manage and coordinate projects running on the <a href="https://git-scm.com/">Git</a> version-control system.</p>
<p>GitHub is free to use, although there is a paid tier as well, which gives you benefits such as the ability to create private repositories.</p>
<p>For the purposes of the Community Template Gallery, each template requires <strong>its own public repository</strong> in GitHub. This might cause some overhead for users who submit lots of templates, but it makes it easier for Google Tag Manager to parse the correct template every time, to manage metadata, and to have the <strong>Issues</strong> feature (basically bug and feature tracking) be devoid of ambiguities, as there is only one template to which the issues relate.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/required-files.jpg" title="Required files">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/required-files.jpg#ZgotmplZ" alt="Required files">
  
    </a>
  
  
</div>


<p>To be a valid template for the gallery, the repository requires the following three files in the <strong>root</strong>:</p>
<table>
<thead>
<tr>
<th>File</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>template.tpl</strong></td>
<td>You get this when you <a href="https://www.simoahava.com/analytics/custom-templates-guide-for-google-tag-manager/#importing-and-exporting">export</a> a template from Google Tag Manager. <strong>NOTE!</strong> It <em>must</em> be named <code>template.tpl</code>. All other names will break the upload.</td>
</tr>
<tr>
<td><strong>metadata.yaml</strong></td>
<td>Template metadata, where you can provide things like links to the documentation and, <strong>importantly</strong>, the changelog of commits where you've made changes to the template and want to update them to the template users.</td>
</tr>
<tr>
<td><strong>LICENSE</strong></td>
<td>LICENSE text file that uses the <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">Apache 2.0</a>.</td>
</tr>
</tbody>
</table>
<p>These three files <strong>must</strong> be in the repository root or you will not be able to upload the template to the Community Template Gallery.</p>
<p>The repository <strong>can</strong> have other files as well (such as a README), but these three are mandatory.</p>
<p>Easiest way to get started is to <a href="https://help.github.com/en/articles/create-a-repo">create a public repository</a>, and then use the <a href="https://help.github.com/en/articles/adding-a-file-to-a-repository">file upload</a> option to add files to the repository.</p>
<p>Once you're comfortable with GitHub, I recommend installing the <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">git</a> command line tools and working from your terminal.</p>
<h3 id="templatetpl">template.tpl</h3>
<p>For the template file to be accepted into the gallery, you <strong>must</strong> check the box named &ldquo;Agree to Community Template Gallery Terms of Service&rdquo; available in the <strong>Info</strong> tab of the template editor.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/terms-of-service-template.jpg" title="TOS template">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/terms-of-service-template.jpg#ZgotmplZ" alt="TOS template">
  
    </a>
  
  
</div>


<p>You'll also need to <em>manually</em> edit the <strong>template.tpl</strong> file (I'm sure this will be replaced by a UI functionality soon) to add <em>categories</em> to it. Categories will be used to categorize (d'oh) templates in the gallery UI.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;displayName&#34;</span>: <span style="color:#e6db74">&#34;My template&#34;</span>,
  <span style="color:#f92672">&#34;categories&#34;</span>: [<span style="color:#e6db74">&#34;AFFILIATE_MARKETING&#34;</span>, <span style="color:#e6db74">&#34;ADVERTISING&#34;</span>],
  <span style="color:#960050;background-color:#1e0010">/</span><span style="color:#960050;background-color:#1e0010">/</span> <span style="color:#960050;background-color:#1e0010">e</span><span style="color:#960050;background-color:#1e0010">t</span><span style="color:#960050;background-color:#1e0010">c</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#960050;background-color:#1e0010">.</span><span style="color:#960050;background-color:#1e0010">.</span>
}</code></pre></div>
<p>Read more about the available categories <a href="https://developers.google.com/tag-manager/templates/gallery#add_categories_to_templatetpl">here</a>.</p>
<p>Other than that, there's not much to say about the template file. You'll need to <strong>export</strong> the file from GTM and make sure it's renamed to <code>template.tpl</code> before uploading it to your GitHub repository.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/template-export.jpg" title="Template export">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/template-export.jpg#ZgotmplZ" alt="Template export">
  
    </a>
  
  
</div>


<h3 id="metadatayaml">metadata.yaml</h3>
<p>The metadata file is provided in the <strong>YAML</strong> format (short for <strong>Y</strong>AML <strong>A</strong>in't <strong>M</strong>arkup <strong>L</strong>anguage). The only requirement is that it has the <code>versions</code> key populated with the hashes of all the commits you want to include as version changes in the template gallery entry.</p>
<p>Here's a sample <strong>metadata.yaml</strong> file:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">homepage: <span style="color:#e6db74">&#34;https://www.simoahava.com/&#34;</span>
documentation: <span style="color:#e6db74">&#34;https://www.simoahava.com/analytics/create-facebook-pixel-custom-tag-template/&#34;</span>
versions:
  <span style="color:#75715e"># Latest version</span>
  - sha: d7bad4f7a6e39c72dbc72afc7773d7fb8fdc358c
    changeNotes: Update template metadata.
  <span style="color:#75715e"># Older versions</span>
  - sha: ff7bf31a0777e22a370d6371607022fe2a6d1b7c
    changeNotes: |<span style="color:#ae81ff">2</span>
      Add support for <span style="color:#e6db74">&#34;consent&#34;</span> command.
      Add support for using a variable to populate object properties.
  - sha: e1206f9c677fe67348c6678c4669952cb0c0b97b
    changeNotes: Initial release.</code></pre></div>
<p>Use the <code>homepage</code> key to indicate the website home page URL for the template, and use the  <code>documentation</code> key to indicate where documentation can be found.</p>
<p>The <code>versions</code> key is where you nest all the commits <strong>to the template.tpl file</strong> that you want to consider as new <strong>versions</strong> of the template.</p>
<p>Each version comprises of two keys. The first key, <code>sha</code>, is mandatory, and corresponds to the <strong>commit hash</strong> for the commit where you made the final changes to the <strong>template.tpl</strong> file. The second key, <code>changeNotes</code>, is optional, and is the place where you add details about what was changed.</p>
<p>The versions should be listed so that the newest version is the first entry, and the older versions are listed after this from newest to oldest.</p>
<p>You can follow my example and use the comment <code># Latest version</code> to visually separate the older versions (listed after the <code># Older versions</code> comment).</p>
<p>So how do you find this <code>sha</code> hash? Well, whenever you make a <strong>commit</strong> to GitHub, the commit will receive a hash that will uniquely identify the commit.</p>
<p>Thus, whenever you make a commit that <strong>includes changes to template.tpl</strong>, and you consider this commit to be important enough to warrant a new version of the template, you need to browse to the <strong>commits</strong> of your GitHub repository, find the commit in question, and copy its hash.</p>
<p>Easiest way to find the commits is to take your GitHub repo URL and add <code>/commits/</code> to the end, e.g. <a href="https://www.github.com/gtm-templates-simo-ahava/user-distributor/commits/">https://www.github.com/gtm-templates-simo-ahava/user-distributor/commits/</a>.</p>
<p>Then, find the commit whose hash you want, and click the clipboard button to copy the hash to the clipboard.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/copy-hash-to-clipboard.jpg" title="Copy hash to clipboard">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/copy-hash-to-clipboard.jpg#ZgotmplZ" alt="Copy hash to clipboard">
  
    </a>
  
  
</div>


<p>Finally, add a new item under <code>versions</code> in the <strong>metadata.yaml</strong> with the hash under the <code>sha</code> key and any change notes under the <code>changeNotes</code> property. You can specify multi-line notes with the pipe symbol <code>|2</code> as in the example in the beginning of this chapter.</p>
<blockquote>
<p><strong>Note!</strong> You don't have to add every single commit to template.tpl as a new version. You might do incremental updates first, and then when you're ready with a version update, you copy the hash of the last commit, as it would include all the previous commits as well.</p>
</blockquote>
<p>At its bare minimum, the <strong>metadata.yaml</strong> file just needs the <code>sha</code> keys, so this would also work:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">versions:
  - sha: abcd12345
  - sha: bcde23456
  - sha: cdef34567</code></pre></div>
<p>The purpose of versioning the templates like this is that in time, the gallery will introduce features that allow uses who have imported the templates to be notified of changes to the template sources. For this to work, the template author must add versioning information to the metadata file.</p>
<h3 id="license">LICENSE</h3>
<p>You can find the Apache 2.0 license text here: <a href="https://www.apache.org/licenses/LICENSE-2.0.txt">https://www.apache.org/licenses/LICENSE-2.0.txt</a>. Save it as <code>LICENSE</code> in your repository, and make sure you edit the copyright text at the end.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/license-copyright.jpg" title="License copyright">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/license-copyright.jpg#ZgotmplZ" alt="License copyright">
  
    </a>
  
  
</div>


<h3 id="github-tip-1-add-new-template-to-the-gallery">GitHub tip #1: Add new template to the gallery</h3>
<p>When you want to add a new template to the gallery, this is (roughly) the process you would follow.</p>
<p><strong>STEP 1:</strong> Create a new repository in GitHub. Make sure it's <strong>Public</strong> and that it has the <strong>Apache 2.0</strong> license added. If you're creating templates under an <em>organization</em>, make sure the repository is created in the correct place.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/new-repo.jpg" title="new repo">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/new-repo.jpg#ZgotmplZ" alt="new repo">
  
    </a>
  
  
</div>


<p><strong>STEP 2:</strong> Create the template in Google Tag Manager. Make sure you've checked the box for the Community Gallery Terms of Service in the <strong>Info</strong> tab. Export the template as a <strong>template.tpl</strong> file.</p>
<p><strong>STEP 3:</strong> In the GitHub repo, choose <strong>Upload files</strong> to upload your template file into GitHub. Commit the change with a clear commit name, e.g. &ldquo;Initial publish of template.tpl&rdquo;. Commit directly to the <code>master</code> branch.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/initial-commit.jpg" title="Initial commit">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/initial-commit.jpg#ZgotmplZ" alt="Initial commit">
  
    </a>
  
  
</div>


<p><strong>STEP 4:</strong> Visit the <strong>/commits/</strong> page of the repo, and copy the commit hash of the latest commit to the clipboard.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/copy-latest-clipboard.jpg" title="copy latest hash">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/copy-latest-clipboard.jpg#ZgotmplZ" alt="copy latest hash">
  
    </a>
  
  
</div>


<p><strong>STEP 5</strong>: Back in the repo root, click <strong>Create new file</strong>. Name the file <strong>metadata.yaml</strong>. The contents need to be <em>at least</em> the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">versions:
  - sha: paste_commit_hash_here</code></pre></div>
<p>You might as well add the <code>homepage</code> and <code>documentation</code> keys while you're at it.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/my-new-template.jpg" title="My new template">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/my-new-template.jpg#ZgotmplZ" alt="My new template">
  
    </a>
  
  
</div>


<p>Make sure you commit the new file directly to the <code>master</code> branch.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/create-metadata-yaml-commit.jpg" title="Create metadata.yaml commit">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/create-metadata-yaml-commit.jpg#ZgotmplZ" alt="Create metadata.yaml commit">
  
    </a>
  
  
</div>


<p><strong>STEP 6:</strong> Head over to the <a href="https://tagmanager.google.com/gallery/getting-started">gallery submission form</a>. Add the URL to the repo root in the URL field, and hit <em>Submit</em>. If all validates OK, you should get a response that the template has been submitted. If there was a problem, there error message will tell you where the validation failed.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/submit-demo.jpg" title="Submit demo">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/submit-demo.jpg#ZgotmplZ" alt="Submit demo">
  
    </a>
  
  
</div>


<p>That's it! Your template should appear in the gallery after it goes through some further validation.</p>
<blockquote>
<p><strong>NOTE!</strong> Just a reminder that not all templates will be published. Your template must follow the <a href="https://developers.google.com/tag-manager/templates/style">style guide</a>, and if there's a template with similar functionality already in the gallery, your template might not get published.</p>
</blockquote>
<p>Finally, it might make sense to clone the repo to your local machine just so that you can use the <code>git</code> command line tools instead.</p>
<h3 id="github-tip-2-update-the-template">GitHub tip #2: Update the template</h3>
<p>Once the template has been submitted to the gallery, you update it by committing changes to the <strong>template.tpl</strong> file.</p>
<p>Once you've got a commit of the <strong>template.tpl</strong> file merged with <code>master</code> that you want to submit to the Community Template Gallery as a new version of the template, you need to copy its commit hash, and add it as a new entry in the <strong>metadata.yaml</strong> file. It needs to become the new first entry under the <code>versions</code> key.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/update-metadata.jpg" title="Update metadata">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/update-metadata.jpg#ZgotmplZ" alt="Update metadata">
  
    </a>
  
  
</div>


<p>Once you've updated the <strong>metadata.yaml</strong> file, you need to commit <em>that</em> and make sure your changes are merged with the <code>master</code> branch.</p>
<p>Then you'll just need to wait for the gallery to pull in your latest changes, validate them, and update the template listing in the gallery with the changes.</p>
<p>The key thing here is the process:</p>
<ol>
<li>Make incremental changes to <strong>template.tpl</strong>.</li>
<li>Once happy and ready to create a new version of the template in the gallery, <strong>commit</strong> the final version of <strong>template.tpl</strong>, merge it to <code>master</code>,  and copy the commit hash.</li>
<li>Edit <strong>metadata.yaml</strong> and add this commit hash as the newest version of the template.</li>
<li><strong>Commit</strong> the changes to <strong>metadata.yaml</strong> and make sure it's merged to <code>master</code>.</li>
<li>Wait.</li>
</ol>
<h3 id="github-tip-3-set-up-an-organization-and-submodules">GitHub tip #3: Set up an organization and submodules</h3>
<p>If you're providing a lot of templates, it might make sense to logically order them in GitHub as an <a href="https://help.github.com/en/articles/about-organizations">organization</a>. After creating an organization, any public templates you want to upload would be created as repositories within this organization, giving you a single point of origin for managing your templates.</p>
<p>Another benefit of creating an organization is that you can <a href="https://help.github.com/en/articles/verifying-your-organizations-domain">verify</a> the organization (by showing GitHub that you own the domains referenced in the organization profile), and as a consequence get the green checkmark to show next to your organization name in the gallery listing.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/verified-org.jpg" title="Verified organization">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/verified-org.jpg#ZgotmplZ" alt="Verified organization">
  
    </a>
  
  
</div>


<p>Here's what <a href="https://github.com/gtm-templates-simo-ahava">my template organization</a> looks like:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/simo-organization.jpg" title="Template organization">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/simo-organization.jpg#ZgotmplZ" alt="Template organization">
  
    </a>
  
  
</div>


<p>Another thing you might want to do is create a new &ldquo;roll-up&rdquo; repository, to which you add all the template repositories as <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodules</a>. This is, again, a way to logically manage your templates. The use case is similar to organizations, so if you're already grouping the templates together with an organization, using submodules might not be at all useful. Nevertheless, here's what my &ldquo;roll-up&rdquo; repository looks like. See how each template repo has its own folder within? Those are submodules.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/10/git-submodules.jpg" title="Git submodules">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/10/git-submodules.jpg#ZgotmplZ" alt="Git submodules">
  
    </a>
  
  
</div>


<p>These are just quality-of-life things, and definitely not required to get set up with the template gallery.</p>
<h2 id="summary">Summary</h2>
<p>The Community Template Gallery is finally here! We now have a way to distribute the templates we've worked on - how exciting.</p>
<p>Don't be turned off by the seemingly complex way of managing your custom templates via GitHub. First of all, if you've managed to create a template and add all the required metadata, chances are you're already proficient with GitHub and should find it trivial (if somewhat time-consuming) to operate.</p>
<p>And even if GitHub is a new thing for you, take this as an excellent lesson in version control. As your files are directly used by Google Tag Manager, being able to discretely annotate each version is really important.</p>
<p>Similarly, being able to curate community-submitted issues on a template-by-template and commit-by-commit basis is useful not just for template gallery but for you as well.</p>
<p>I'm sure our community will rise up to the occasion and write little tools that will make it even easier to update the templates (a command-line tool to copy the hash from the most recent commit and add it as a new entry in the <strong>metadata.yaml</strong>? Any takers? Ping me - I've got ideas).</p>
<p>Time will tell how popular the gallery will be, but I have a hunch it will be the main way for brands to distribute their script snippets in the near future. I see no reason why a vendor should offer a block of custom code to be copy-pasted into a Custom HTML tag anymore, especially after the introduction of the template gallery. Nor do I see any reason for them to share their templates only on their own site, when they can get the additional brand visibility by offering the templates via the gallery.</p>
<p>In any case, custom templates continue firmly at the top position of my &ldquo;most important and most inspiring Google Tag Manager feature of the recent years&rdquo; list, and the Community Template Gallery is an excellent, complementary feature to support the template suite of features.</p>
<p>What do you think about the Community Template Gallery? Do you have ideas for improvement? Let your voice be heard in the comments!</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/custom-templates/">custom templates</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/bigquery-query-guide-google-analytics-app-web/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/still-running-google-tag-manager-tags/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Community%20Template%20Gallery%20For%20Google%20Tag%20Manager%20-%20Introduction%20And%20Tips%20For%20Use%20https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/bigquery-query-guide-google-analytics-app-web/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/still-running-google-tag-manager-tags/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Community%20Template%20Gallery%20For%20Google%20Tag%20Manager%20-%20Introduction%20And%20Tips%20For%20Use%20https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Community%20Template%20Gallery%20For%20Google%20Tag%20Manager%20-%20Introduction%20And%20Tips%20For%20Use%20https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/introducing-tag-manager-template-gallery/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

