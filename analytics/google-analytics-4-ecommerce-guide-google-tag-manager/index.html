

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Google Analytics 4: Ecommerce Guide For Google Tag Manager | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2020\/10\/app-web-ecommerce.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/google-analytics-4-ecommerce-guide-google-tag-manager\/",
  "datePublished": "2020-10-22T07:00:00\u002b03:00",
  "dateModified": "2020-10-22T07:00:00\u002b03:00",
  "description": "Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Google Analytics 4: Ecommerce Guide For Google Tag Manager | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
    
    <meta name="description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.">
    <meta property="og:description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Google Analytics 4: Ecommerce Guide For Google Tag Manager">
    <meta property="og:url" content="https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Google Analytics 4: Ecommerce Guide For Google Tag Manager">
    <meta name="twitter:description" content="Guide to implementing Google Analytics 4 Ecommerce measurement using Google Tag Manager.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Google Analytics 4: Ecommerce Guide For Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-10-22T07:00:00&#43;03:00">
        
  October 22, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/#commento">Comments</a>
      
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>This is an <strong>implementation guide</strong> for <a href="https://developers.google.com/analytics/devguides/collection/app-web/tag-guide">Google Analytics 4</a>. The guide is aimed at <a href="https://tagmanager.google.com/">Google Tag Manager</a> users and has been designed to complement the <a href="https://developers.google.com/tag-manager/ecommerce-appweb">official documentation</a>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg" title="Google Analytics 4 ecommerce">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg#ZgotmplZ" alt="Google Analytics 4 ecommerce" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1796 922'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>A thing to keep in mind is that Google Analytics 4 (GA4) is <strong>still very new</strong>. The Google Tag Manager integration is still in its infancy, and implementation places a lot of responsibility on accurate tagging and proper <code>dataLayer</code> instrumentation.</p>
<p>In this guide, I&rsquo;ll explain the new data model from an implementation perspective, and walk you through the nuts and bolts on how to get the different parts of GA4&rsquo;s Ecommerce machine to work in unison.</p>
<div id="toc-container"><h1 id="table-of-contents">Table of Contents</h1> <input type="checkbox" id="show"><label for="show" id="showbtn"><span class="show">&nbsp;[+show]</span><span class="hide">&nbsp;[–hide]</span></label></h1><nav id="TableOfContents">
  <ul>
    <li><a href="#universal-analytics-vs-google-analytics-4">Universal Analytics vs. Google Analytics 4</a>
      <ul>
        <li><a href="#available-actions">Available actions</a></li>
        <li><a href="#product-data">Product data</a></li>
        <li><a href="#promotion-data">Promotion data</a></li>
        <li><a href="#action-data">Action data</a></li>
        <li><a href="#parity-issues">Parity issues</a>
          <ul>
            <li><a href="#product-list-attribution">Product List Attribution</a></li>
            <li><a href="#product-scoped-custom-dimensions-and-metrics">Product-scoped Custom Dimensions and Metrics</a></li>
            <li><a href="#checkout-measurement">Checkout measurement</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#implementation-with-google-tag-manager">Implementation with Google Tag Manager</a>
      <ul>
        <li><a href="#migrating-from-enhanced-ecommerce">Migrating from Enhanced Ecommerce</a></li>
        <li><a href="#event-names">Event names</a></li>
        <li><a href="#setting-the-fields">Setting the fields</a></li>
        <li><a href="#trigger">Trigger</a></li>
        <li><a href="#tips-for-server-side-tagging">Tips for server-side tagging</a></li>
      </ul>
    </li>
    <li><a href="#action-reference">Action reference</a>
      <ul>
        <li><a href="#view_promotion">view_promotion</a>
          <ul>
            <li><a href="#data-layer-composition">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#select_promotion">select_promotion</a>
          <ul>
            <li><a href="#data-layer-composition-1">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-1">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-1">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#view_item_list">view_item_list</a>
          <ul>
            <li><a href="#data-layer-composition-2">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-2">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-2">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#select_item">select_item</a>
          <ul>
            <li><a href="#data-layer-composition-3">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-3">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-3">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#view_item">view_item</a>
          <ul>
            <li><a href="#data-layer-composition-4">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-4">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-4">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#add_to_cart">add_to_cart</a>
          <ul>
            <li><a href="#data-layer-composition-5">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-5">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-5">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#add_to_wishlist">add_to_wishlist</a>
          <ul>
            <li><a href="#data-layer-composition-6">Data Layer composition</a></li>
            <li><a href="#tag-configuration-6">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#remove_from_cart">remove_from_cart</a>
          <ul>
            <li><a href="#data-layer-composition-7">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-6">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-7">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#view_cart">view_cart</a>
          <ul>
            <li><a href="#data-layer-composition-8">Data Layer composition</a></li>
            <li><a href="#tag-configuration-8">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#begin_checkout">begin_checkout</a>
          <ul>
            <li><a href="#data-layer-composition-9">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-7">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-9">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#add_shipping_info">add_shipping_info</a>
          <ul>
            <li><a href="#data-layer-composition-10">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-8">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-10">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#add_payment_info">add_payment_info</a>
          <ul>
            <li><a href="#data-layer-composition-11">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-9">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-11">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#purchase">purchase</a>
          <ul>
            <li><a href="#data-layer-composition-12">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-10">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-12">Tag configuration</a></li>
          </ul>
        </li>
        <li><a href="#refund">refund</a>
          <ul>
            <li><a href="#data-layer-composition-13">Data Layer composition</a></li>
            <li><a href="#migration-from-enhanced-ecommerce-11">Migration from Enhanced Ecommerce</a></li>
            <li><a href="#tag-configuration-13">Tag configuration</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav></div>
<p>Make sure you follow the official documentation as well:</p>
<ul>
<li><a href="https://developers.google.com/analytics/devguides/collection/app-web/ecommerce">Google Analytics 4 data schema</a></li>
<li><a href="https://developers.google.com/tag-manager/ecommerce-appweb">Google Analytics 4 instructions for Google Tag Manager implementation</a></li>
</ul>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/ecom-report.jpg" title="Ecommerce report - App &#43; Web">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/ecom-report.jpg#ZgotmplZ" alt="Ecommerce report - App &#43; Web" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2332 368'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>For help with analysis and what to do once the data hits the reports, make sure to follow <a href="https://www.kristaseiden.com/">Krista Seiden&rsquo;s blog</a>, where she&rsquo;s already added a <a href="https://www.kristaseiden.com/new-ecommerce-setup-and-reporting-in-google-analytics-appweb/">walkthrough of the Ecommerce reports in Google Analytics 4</a>.</p>
<p>Other great resources include <a href="https://www.charlesfarina.com/">Charles Farina&rsquo;s blog</a> and <a href="https://ken-williams.com/">Ken William&rsquo;s Google Analytics 4 resource</a>.</p>
<h2 id="universal-analytics-vs-google-analytics-4">Universal Analytics vs. Google Analytics 4</h2>
<p>It&rsquo;s only fair to start with a comparison between Universal Analytics&rsquo; <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-guide-for-google-tag-manager/">Enhanced Ecommerce</a> data model and the one put forth by GA4. They&rsquo;re similar in many places, but also have some key differences that will be covered here.</p>
<h3 id="available-actions">Available actions</h3>
<p>Let&rsquo;s begin with the types of <strong>events</strong> you can collect. They represent the discrete <strong>funnel steps</strong> that the data model uses to reflect the funnels in your website.</p>
<p>The <strong>GA4 action</strong> in the table below represents the <strong>Event name</strong> you need to configure in your site&rsquo;s code or Google Tag Manager tags when building the respective Ecommerce hit to GA4.</p>
<p>The <strong>Corresponding Enhanced Ecommerce action</strong> column refers to what the analogy in Enhanced Ecommerce would be. It&rsquo;s not just an analogy, though, as there&rsquo;s a <a href="#migrating-from-enhanced-ecommerce">migration path</a> available when upgrading from Google Analytics Enhanced Ecommerce to GA4 Ecommerce.</p>
<table>
<thead>
<tr>
<th>GA4 action</th>
<th>Corresponding Enhanced Ecommerce action</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>view_promotion</code></td>
<td><code>promoView</code></td>
<td>View of promotions.</td>
</tr>
<tr>
<td><code>select_promotion</code></td>
<td><code>promoClick</code></td>
<td>Click on a promotion.</td>
</tr>
<tr>
<td><code>view_item_list</code></td>
<td><code>impressions</code></td>
<td>View of item impressions in a list.</td>
</tr>
<tr>
<td><code>select_item</code></td>
<td><code>click</code></td>
<td>Click on an item in a list.</td>
</tr>
<tr>
<td><code>view_item</code></td>
<td><code>detail</code></td>
<td>View item details.</td>
</tr>
<tr>
<td><code>add_to_cart</code></td>
<td><code>add</code></td>
<td>Add item(s) to cart.</td>
</tr>
<tr>
<td><code>add_to_wishlist</code></td>
<td>N/A</td>
<td>Add item(s) to a wishlist.</td>
</tr>
<tr>
<td><code>remove_from_cart</code></td>
<td><code>remove</code></td>
<td>Remove item(s) from the cart.</td>
</tr>
<tr>
<td><code>view_cart</code></td>
<td>N/A</td>
<td>View the contents of the shopping cart.</td>
</tr>
<tr>
<td><code>begin_checkout</code></td>
<td><code>checkout</code>*</td>
<td>Initiate the checkout process.</td>
</tr>
<tr>
<td><code>add_shipping_info</code></td>
<td><code>checkout_option</code>*</td>
<td>Add shipping info during the checkout flow.</td>
</tr>
<tr>
<td><code>add_payment_info</code></td>
<td><code>checkout_option</code>*</td>
<td>Add payment info during the checkout flow.</td>
</tr>
<tr>
<td><code>purchase</code></td>
<td><code>purchase</code></td>
<td>Purchase items that were checked out.</td>
</tr>
<tr>
<td><code>refund</code></td>
<td><code>refund</code></td>
<td>Refund one or more items.</td>
</tr>
</tbody>
</table>
<p><code>*</code> The <strong>checkout funnel</strong> is collected a bit differently with Google Analytics 4. There are no <em>steps</em> anymore - rather, GA4 offers you the (presumably) most popular checkout steps of adding shipping and payment info to the purchase.</p>
<p>The data model includes some welcome additions that were missing from Universal Analytics, namely <code>add_to_wishlist</code> and <code>view_cart</code>.</p>
<h3 id="product-data">Product data</h3>
<p>The data model for <strong>products</strong> has changed somewhat as well. The concept of a <strong>product list</strong> has been widened to include a list identifier, and multi-level <strong>product categories</strong> have been expanded to their individual parameters.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>item_id</code></td>
<td><code>id</code></td>
<td>ID / SKU of the product.</td>
</tr>
<tr>
<td><code>item_name</code></td>
<td><code>name</code></td>
<td>Name of the product.</td>
</tr>
<tr>
<td><code>item_list_name</code></td>
<td><code>list</code></td>
<td>Product list name.</td>
</tr>
<tr>
<td><code>item_list_id</code></td>
<td>N/A</td>
<td>Product list identifier.</td>
</tr>
<tr>
<td><code>index</code></td>
<td><code>position</code></td>
<td>Product position in the list.</td>
</tr>
<tr>
<td><code>item_brand</code></td>
<td><code>brand</code></td>
<td>Product brand.</td>
</tr>
<tr>
<td><code>item_category</code></td>
<td><code>category</code></td>
<td>Product category top-level.</td>
</tr>
<tr>
<td><code>item_category2</code></td>
<td><code>category</code></td>
<td>Product category 2nd level (or alternative).</td>
</tr>
<tr>
<td><code>item_category3</code></td>
<td><code>category</code></td>
<td>Product category 3rd level (or alternative).</td>
</tr>
<tr>
<td><code>item_category4</code></td>
<td><code>category</code></td>
<td>Product category 4th level (or alternative).</td>
</tr>
<tr>
<td><code>item_category5</code></td>
<td><code>category</code></td>
<td>Product category 5th level (or alternative).</td>
</tr>
<tr>
<td><code>item_variant</code></td>
<td><code>variant</code></td>
<td>Item variant name or description.</td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td>N/A</td>
<td>The store affiliation for this event.</td>
</tr>
<tr>
<td><code>discount</code></td>
<td>N/A</td>
<td>Any discount associated with this product.</td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>coupon</code></td>
<td>Coupon associated with this product.</td>
</tr>
<tr>
<td><code>price</code></td>
<td><code>price</code></td>
<td>Price of this product.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td>N/A</td>
<td>Currency of the price that is collected.</td>
</tr>
<tr>
<td><code>quantity</code></td>
<td><code>quantity</code></td>
<td>Quantity of the item.</td>
</tr>
</tbody>
</table>
<p>As with Enhanced Ecommerce, <strong>either</strong> the <code>item_id</code> <strong>or</strong> <code>item_name</code> is always required when products are dealt with. The other parameters might have varying levels of importance, but those two are the only ones that are required.</p>
<p>Some parameters such as <code>affiliation</code> and <code>currency</code> are brought from the <strong>action-level</strong> in Enhanced Ecommerce to <strong>product-level</strong> in Google Analytics 4. It&rsquo;s an interesting choice, as it might not reflect reality to specify these on a product-by-product basis, but it&rsquo;s never a bad thing to have as many parameters as possible available.</p>
<h3 id="promotion-data">Promotion data</h3>
<p>With GA4, it&rsquo;s still possible to collect information about <strong>promotions</strong>. As with Enhanced Ecommerce, they&rsquo;re a bit of an odd duck when it comes to the data model, as they describe <strong>banners</strong> and <strong>other promotions</strong> that might not be actually related to any specific products.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>promotion_id</code></td>
<td><code>id</code></td>
<td>ID of the promotion.</td>
</tr>
<tr>
<td><code>promotion_name</code></td>
<td><code>name</code></td>
<td>Name of the promotion.</td>
</tr>
<tr>
<td><code>creative_name</code></td>
<td><code>creative</code></td>
<td>Name of the creative associated with the promotion.</td>
</tr>
<tr>
<td><code>creative_slot</code></td>
<td><code>position</code></td>
<td>Name of the slot where the creative was shown.</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>N/A</td>
<td>Where the promotion was <em>located</em> on the page when it was shown.</td>
</tr>
</tbody>
</table>
<p>As with Enhanced Ecommerce, <strong>either</strong> the <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code> is always required when promotions are sent.</p>
<h3 id="action-data">Action data</h3>
<p>The importance of different action parameters varies greatly by whatever action is being measured. Broadly speaking, <strong>action data</strong> refers to parameters the describe the action itself rather than the products within.</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Corresponding Enhanced Ecommerce parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>transaction_id</code></td>
<td><code>id</code></td>
<td>Unique ID for the transaction. <strong>Required</strong> for <code>purchase</code> and <code>refund</code> events.</td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td><code>affiliation</code></td>
<td>The store or affiliation where the purchase occurred.</td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>revenue</code></td>
<td>The value associated with the event.</td>
</tr>
<tr>
<td><code>currency</code></td>
<td><code>currencyCode</code></td>
<td>Local currency of the collected price. <strong>Required</strong> for <code>purchase</code> events.</td>
</tr>
<tr>
<td><code>tax</code></td>
<td><code>tax</code></td>
<td>How much tax is included in the total revenue of the purchase.</td>
</tr>
<tr>
<td><code>shipping</code></td>
<td><code>shipping</code></td>
<td>Shipping costs included in the total revenue of the purchase.</td>
</tr>
<tr>
<td><code>items</code></td>
<td><code>products</code>/<code>impressions</code>/<code>promotions</code></td>
<td>Products associated with the event.</td>
</tr>
<tr>
<td><code>shipping_tier</code></td>
<td><code>option</code></td>
<td>The shipping tier used with <code>add_shipping_info</code>.</td>
</tr>
<tr>
<td><code>payment_type</code></td>
<td><code>option</code></td>
<td>The payment method sent with <code>add_payment_info</code>.</td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>coupon</code></td>
<td>Coupon associated with the event.</td>
</tr>
<tr>
<td><code>promotion_id</code></td>
<td>N/A</td>
<td>ID of a promotion associated with the event.</td>
</tr>
<tr>
<td><code>promotion_name</code></td>
<td>N/A</td>
<td>Name of a promotion associated with the event.</td>
</tr>
<tr>
<td><code>creative_name</code></td>
<td>N/A</td>
<td>Name of a promotion creative associated with the event.</td>
</tr>
<tr>
<td><code>creative_slot</code></td>
<td>N/A</td>
<td>Name of the creative slot associated with the event.</td>
</tr>
<tr>
<td><code>location_id</code></td>
<td>N/A</td>
<td>ID of the creative location on the page.</td>
</tr>
<tr>
<td><code>item_list_name</code></td>
<td>N/A</td>
<td>Name of the list associated with the event.</td>
</tr>
<tr>
<td><code>item_list_id</code></td>
<td>N/A</td>
<td>ID of the list associated with the event.</td>
</tr>
</tbody>
</table>
<h3 id="parity-issues">Parity issues</h3>
<p>It looks like there are certain aspects of Enhanced Ecommerce that have not been transported to GA4 yet.</p>
<p>These are things that I hope (and expect) to see in the product before long, at which point I will naturally update this article accordingly.</p>
<h4 id="product-list-attribution">Product List Attribution</h4>
<p><strong>Product list attribution</strong> is a <a href="https://www.simoahava.com/analytics/attribution-enhanced-ecommerce-reports/">staple of Enhanced Ecommerce</a>. It&rsquo;s extremely useful, as it lets you build the <code>dataLayer</code> so that product list information <strong>does not</strong> need to be persisted from action to action.</p>
<p>There&rsquo;s no evidence that a similar attribution setup works with GA4 right now. Granted, attribution is part of a data model that might simply not be exposed in GA4 Ecommerce reports yet, so this is something that is likely to be fixed in the near future. It would be odd to have <em>product lists</em> as a data type without them actually having any functionality.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/product-list-attribution.jpg" title="Product list attribution">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/product-list-attribution.jpg#ZgotmplZ" alt="Product list attribution" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2344 484'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Note that the GA4 data model allows you to send things like <code>item_list_name</code> and <code>promotion_id</code> in <strong>any</strong> Ecommerce object to GA4. You can add them into an <code>items</code> array to indicate that specific items are in this current action due to an interaction with a list or promotion earlier in the session. Or you can add them as regular parameters to the event tag itself, in case the current Ecommerce action took place in a specific item list or within some promotion context.</p>
<h4 id="product-scoped-custom-dimensions-and-metrics">Product-scoped Custom Dimensions and Metrics</h4>
<p>Universal Analytics lets us add <strong>additional metadata</strong> to each product using <a href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/">product-scoped custom dimensions and metrics</a>. This is a <strong>vital</strong> part of dimension widening that any modern online store desperately needs.</p>



<div class="figure " >
  
    <a href="https://www.simoahava.com/images/2020/10/custom-item-parameters.jpg" title="Custom item parameters, where k0 is the parameter name prefix, and v0 is the value prefix.">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/custom-item-parameters.jpg#ZgotmplZ" alt="Custom item parameters, where k0 is the parameter name prefix, and v0 is the value prefix." src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1236 136'%3E%3C/svg%3E">
  
    </a>
  
   
    <span class="caption">Custom item parameters, where k0 is the parameter name prefix, and v0 is the value prefix.</span>
  
</div>


<p>In GA4, you can add any parameters you wish into the <code>items</code> array, and they will be transported to GA4, but even if you <a href="https://support.google.com/analytics/answer/10075209?hl=en&amp;ref_topic=9756175">register these as custom definitions</a> it doesn&rsquo;t seem like they&rsquo;re available in the Ecommerce reports themselves.</p>
<h4 id="checkout-measurement">Checkout measurement</h4>
<p>As mentioned <a href="#available-actions">above</a>, checkout tracking has certainly changed between Enhanced Ecommerce and GA4.</p>
<p>Where Enhanced Ecommerce introduces a combination of <strong>funnel steps</strong> (e.g. view cart, shipping, payment) and <strong>checkout options</strong> (e.g. shipping method, payment method), GA4 only has the <code>begin_checkout</code> event for establishing entrance into the checkout flow.</p>
<p>There are no additional <em>steps</em>. Rather, you can use <strong>actions</strong> such as <code>view_cart</code>, <code>add_shipping_info</code>, and <code>add_payment_info</code> to flesh out the funnel.</p>
<p>It would be cool to be able to specify a more complete funnel in whatever way I want, and it would also be amazing if we could have multiple different checkout funnels in the data schema.</p>
<p>But on the other hand, I don&rsquo;t think this is a very big omission currently. I wouldn&rsquo;t be too surprised if this <em>isn&rsquo;t</em> expanded to have full parity with Enhanced Ecommerce.</p>
<h2 id="implementation-with-google-tag-manager">Implementation with Google Tag Manager</h2>
<p>When implementing GA4 Ecommerce using Google Tag Manager, the <em>beta</em>-ness of the feature really strikes you hard. The only available event tag type is a generic chassis used for sending any type of event. There&rsquo;s no built-in Ecommerce integration, as you&rsquo;ll need to populate the parameters manually.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/tag-example.jpg" title="Tag example">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/tag-example.jpg#ZgotmplZ" alt="Tag example" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1774 542'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>It would be <em>so</em> much simpler to just have a single tag for Ecommerce events, which automatically collects the action parameters and items from the <code>dataLayer</code>, depending on which event name is included in the <code>dataLayer</code> object.</p>
<p>I&rsquo;m sure we&rsquo;ll see something like this before the tags are out of beta, though.</p>
<p>An additional hiccup is the <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-guide-for-google-tag-manager/#send-the-data-to-google-analytics-using-a-custom-javascript-variable">Custom JavaScript variable</a> (or custom template) option, which we&rsquo;ve been spoiled with when using Enhanced Ecommerce.</p>
<p>Even though you can use a Custom JavaScript variable (or a <a href="https://www.simoahava.com/analytics/custom-templates-guide-for-google-tag-manager/">custom template</a>) to map the <code>items</code> array however you wish, you&rsquo;re still forced to add all the other parameters as individual fields into the tag.</p>
<p>I hope we get an option similar to Enhanced Ecommerce, where the <strong>entire</strong> event payload could be fetched from a variable. That way we could have a really dynamic setup and minimize the number of tags we&rsquo;re using. Not just for Ecommerce but for <strong>all</strong> GA4 data collection!</p>
<h3 id="migrating-from-enhanced-ecommerce">Migrating from Enhanced Ecommerce</h3>
<p>Before you start rewriting your <code>dataLayer</code> objects, do note that Google Analytics 4 Ecommerce <strong>does support the Enhanced Ecommerce data model</strong> - at least to some extent.</p>
<p>The main path of migration is that you <strong>do not have to provide an <code>items</code> object</strong> in GA4 syntax. Instead, you can set the value of the <code>items</code> parameter in the tag to an <code>impressions</code> or <code>promotions</code> or <code>products</code> variable in your Enhanced Ecommerce object. GA4 will be able to map the parameter names in the Enhanced Ecommerce <code>products</code> object to their corresponding parameters in the Google Analytics 4 schema.</p>
<p>If you read through the comparison chapters above, you&rsquo;ll remember that there are some distinct differences between these data models. For example, there is no <code>item_list_id</code> analogy in Enhanced Ecommerce, and the product category is split into five different levels rather than the slash-separated single parameter in Enhanced Ecommerce.</p>
<blockquote>
<p><strong>Note!</strong> You do not <strong>have</strong> to follow the migration path. Considering all the new things that GA4 data model enables, it might make sense to upgrade from Enhanced Ecommerce to GA4 and not resort to using the &ldquo;old&rdquo; data schema in your setup.</p>
</blockquote>
<p>I&rsquo;ve built a <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> that you can also use to map an Enhanced Ecommerce <code>products</code> (or <code>impressions</code> or <code>promotions</code>) object to its GA4 counterpart. It has some additional bells and whistles, such as automatic parsing of a multi-level product category into the five separate <code>item_category</code> parameters, and a table that lets you map Enhanced Ecommerce&rsquo;s product-scoped custom dimensions to custom item parameters in the GA4 <code>items</code> objects.</p>
<h3 id="event-names">Event names</h3>
<p>One of the key features of Google Analytics 4 is how it utilizes the <strong>event name</strong> to carry quite a bit of semantic weight. To see the list of event names associated with Ecommerce collection, see the chapter <a href="#available-actions">Available actions</a> above.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/checkout-event.jpg" title="Checkout event">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/checkout-event.jpg#ZgotmplZ" alt="Checkout event" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 720'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>When building the tags to send the Ecommerce data to GA4, you need to make sure that the <strong>Event name</strong> field is always set to the correct value. A typo or a mismatch between the event name and the parameter map will lead to data quality issues that are impossible to fix retroactively.</p>
<h3 id="setting-the-fields">Setting the fields</h3>
<p>To create an Ecommerce tag in Google Tag Manager, you need to create a new <strong>Google Analytics 4 Event</strong> tag.</p>
<p>The first thing you need to establish is what its <strong>Configuration tag</strong> is. For more information about this see <a href="https://support.google.com/tagmanager/answer/9442095?hl=en">this article</a>.</p>
<p>Next, you need to set the <strong>Event name</strong>. Whether you use a variable for this field or hard-code it, you need to be mindful of what the reserved event names for GA4 are. As you go through the <a href="#action-reference">chapters below</a>, each sub-chapter devoted to an Ecommerce action will include details on what the event name should be for that particular action.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/purchase-hit-example.jpg" title="Purchase hit example">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/purchase-hit-example.jpg#ZgotmplZ" alt="Purchase hit example" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1774 1032'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Individual parameters are set by adding them to the <strong>Event Parameters</strong> table. For the most part, you&rsquo;ll only need to add the <code>items</code> parameter, but some actions (such as <a href="#purchase"><strong>purchase</strong></a>) require additional fields to be set.</p>
<blockquote>
<p>If you use a Data Layer variable to pull in an <code>items</code> array, for example, do be mindful of <strong>recursive merge</strong>. You might want to engineer the setup so that you always use <a href="https://www.simoahava.com/gtm-tips/data-layer-variable-versions-explained/">Version 1</a> of the Data Layer variable to avoid values &ldquo;leaking&rdquo; from one object to another.</p>
</blockquote>
<h3 id="trigger">Trigger</h3>
<p>As before, make sure you use a <strong>trigger</strong> on the tag that fires when the relevant Ecommerce object is pushed into <code>dataLayer</code>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/custom-event-trigger.jpg" title="custom event trigger">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/custom-event-trigger.jpg#ZgotmplZ" alt="custom event trigger" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1844 766'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>This means that you&rsquo;ll want to engineer the <code>dataLayer</code> so that each Ecommerce event is its own, distinct push, and each <a href="https://www.simoahava.com/gtm-tips/add-the-event-key-to-datalayer-pushes/">object has the <code>event</code> key</a>. This way you can create a *<em>Custom Event trigger</em> for this <code>event</code> value in order to fire the tag at the exact right moment.</p>
<h3 id="tips-for-server-side-tagging">Tips for server-side tagging</h3>
<p>One possible path of migration from Enhanced Ecommerce to GA4 is to handle the logic in your <a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/">server-side tagging setup</a>.</p>
<p>Obviously, it&rsquo;s not a suitable option for everyone (as there are costs involved), but it would provide a pretty sleek path to having the single Universal Analytics stream sent to the server-side container be fanned out to not just the Universal Analytics endpoint but also to GA4.</p>
<p>When you send a Universal Analytics Enhanced Ecommerce event to a server container, the built-in Universal Analytics <strong>client</strong> chops it up and outputs an <a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/#event-model">event data object</a> like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/event-data-server-side.jpg" title="Event data server-side">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/event-data-server-side.jpg#ZgotmplZ" alt="Event data server-side" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1726 2050'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>As you can see, the model chops up the Enhanced Ecommerce payload in the Measurement Protocol request and outputs the values into standard event parameters. Notably, product-scoped custom dimensions <strong>are not</strong> mapped to the <code>items</code> array.</p>
<p>You could thus fire a GA4 tag in the server container with the Universal Analytics client, and it will send a well-formed event to GA4. You&rsquo;d just need to edit the <code>event_name</code> first, as <code>page_view</code> would not be the correct name for a purchase. You&rsquo;ll also need to add the correct <strong>Measurement ID</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/ga4-purchase-tag.jpg" title="GA4 Purchase Tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/ga4-purchase-tag.jpg#ZgotmplZ" alt="GA4 Purchase Tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1824 1088'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The challenge is, again, creating a custom mapping of the <code>items</code> array, as the Server container does not currently let you run JavaScript variables.</p>
<p>You <em>could</em> build a <a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/#custom-templates">custom tag template</a> in server-side tagging, but it might be better to just wait for Google to improve the migration path.</p>
<h2 id="action-reference">Action reference</h2>
<p>The following chapters outline how to instrument the <code>dataLayer</code> and the Google Tag Manager tags to measure Ecommerce actions in GA4.</p>
<p>Included with each action chapter is an example of how a <strong>migration</strong> setup from Universal Analytics to GA4 might work.</p>
<blockquote>
<p>I want to reiterate that instead of using the Universal Analytics <code>dataLayer</code>, you should either engineer or <em>plan</em> to engineer the <code>dataLayer</code> so it&rsquo;s compatible with the new actions and item parameters that GA4 offers.</p>
</blockquote>
<h3 id="view_promotion">view_promotion</h3>
<p>A <code>view_promotion</code> event is sent when the user sees one or more <strong>promotion</strong> items on the page. Promotions are a different data model from the rest of GA4 Ecommerce, as they do not necessarily involve products at all, but rather banners, campaigns, and such.</p>
<h4 id="data-layer-composition">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_promotion</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_promotion_viewsimpressions">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;view_promotion&#39;</span>,
  ecommerce: {
    items: [{
      promotion_id: <span style="color:#a50">&#39;sc2021&#39;</span>,
      promotion_name: <span style="color:#a50">&#39;summer_campaign_2021&#39;</span>,
      creative_name: <span style="color:#a50">&#39;family_in_bathing_suits_1&#39;</span>,
      creative_slot: <span style="color:#a50">&#39;featured_items&#39;</span>,
      location_id: <span style="color:#a50">&#39;hero_banner&#39;</span>
    },{
      promotion_id: <span style="color:#a50">&#39;wc2020&#39;</span>,
      promotion_name: <span style="color:#a50">&#39;winter_campaign_2020&#39;</span>,
      creative_name: <span style="color:#a50">&#39;family_in_winter_clothes_1&#39;</span>,
      creative_slot: <span style="color:#a50">&#39;featured_items_2&#39;</span>,
      location_id: <span style="color:#a50">&#39;hero_banner&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code>.</p>
<blockquote>
<p>The example in the documentation shows also <code>item</code> parameters set in the promotion view object. This is something you might consider adding if the promotion is clearly related to an item or a specific set of items. The current suite of Ecommerce reports doesn&rsquo;t seem to have any options for viewing items in a promotion, but the export to BigQuery would include this information.</p>
</blockquote>
<h4 id="migration-from-enhanced-ecommerce">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>promotions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.promoView.promotions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_promotion</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>promotions</code> object automatically to the format required by <code>view_promotion</code>.</p>
</blockquote>
<h4 id="tag-configuration">Tag configuration</h4>
<p>The tag for <code>view_promotion</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/view-promotion-tag.jpg" title="view_promotion tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/view-promotion-tag.jpg#ZgotmplZ" alt="view_promotion tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1802 1208'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>view_promotion</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition">here</a>.</li>
<li><code>ecommerce.promoView.promotions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition">above</a>, it would be <code>view_promotion</code>).</p>
<h3 id="select_promotion">select_promotion</h3>
<p>The <code>select_promotion</code> event is sent when the user <strong>clicks</strong> or <strong>selects</strong> one of the promotions they viewed.</p>
<h4 id="data-layer-composition-1">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>select_promotion</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_promotion_clicks">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;select_promotion&#39;</span>,
  ecommerce: {
    items: [{
      promotion_id: <span style="color:#a50">&#39;sc2021&#39;</span>,
      promotion_name: <span style="color:#a50">&#39;summer_campaign_2021&#39;</span>,
      creative_name: <span style="color:#a50">&#39;family_in_bathing_suits_1&#39;</span>,
      creative_slot: <span style="color:#a50">&#39;featured_items&#39;</span>,
      location_id: <span style="color:#a50">&#39;hero_banner&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>promotion_id</code> <strong>or</strong> <code>promotion_name</code>.</p>
<h4 id="migration-from-enhanced-ecommerce-1">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>promotions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.promoClick.promotions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>select_promotion</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>promotions</code> object automatically to the format required by <code>select_promotion</code>.</p>
</blockquote>
<h4 id="tag-configuration-1">Tag configuration</h4>
<p>The tag for <code>select_promotion</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/select-promotion-tag.jpg" title="Select promotion tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/select-promotion-tag.jpg#ZgotmplZ" alt="Select promotion tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1806 1206'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>select_promotion</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-1">here</a>.</li>
<li><code>ecommerce.promoClick.promotions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-1">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-1">above</a>, it would be <code>select_promotion</code>).</p>
<h3 id="view_item_list">view_item_list</h3>
<p>The <code>view_item_list</code> event is sent when the user sees a list of items in a dedicated product list. A product list could be something like search results, featured items, upsell items, and so forth.</p>
<h4 id="data-layer-composition-2">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_item_list</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_productitem_list_viewsimpressions">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;view_item_list&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      item_list_name: <span style="color:#a50">&#39;Featured items&#39;</span>,
      item_list_id: <span style="color:#a50">&#39;FI1&#39;</span>,
      index: <span style="color:#099">1</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Swedish regular parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;sp2323&#39;</span>,
      price: <span style="color:#a50">&#39;92.00&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Black&#39;</span>,
      item_list_name: <span style="color:#a50">&#39;Featured items&#39;</span>,
      item_list_id: <span style="color:#a50">&#39;FI1&#39;</span>,
      index: <span style="color:#099">2</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Note that you should always try to populate the <code>item_list_name</code> field so that you know which list was viewed.</p>
<h4 id="migration-from-enhanced-ecommerce-2">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>impressions</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.impressions</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_item_list</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>impressions</code> object automatically to the format required by <code>view_item_list</code>.</p>
</blockquote>
<p><strong>Note!</strong> If you&rsquo;re bundling <code>impressions</code> with some other Enhanced Ecommerce action (as you might commonly do), the custom variable template will not really work, as it always looks for the <code>products</code> array first.</p>
<h4 id="tag-configuration-2">Tag configuration</h4>
<p>The tag for <code>view_item_list</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/view-item-list-tag.jpg" title="View item list">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/view-item-list-tag.jpg#ZgotmplZ" alt="View item list" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1796 1310'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>view_item_list</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-2">here</a>.</li>
<li><code>ecommerce.impressions</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-2">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-2">above</a>, it would be <code>view_item_list</code>).</p>
<h3 id="select_item">select_item</h3>
<p>The <code>select_item</code> event is sent when the user actually <strong>clicks</strong> or <strong>selects</strong> an item after viewing the item&rsquo;s impression(s) in a list.</p>
<h4 id="data-layer-composition-3">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>select_item</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_productitem_list_clicks">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;select_item&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      item_list_name: <span style="color:#a50">&#39;Featured items&#39;</span>,
      item_list_id: <span style="color:#a50">&#39;FI1&#39;</span>,
      index: <span style="color:#099">1</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Note that you should always try to populate the <code>item_list_name</code> field so that you know which list was the target of the click.</p>
<h4 id="migration-from-enhanced-ecommerce-3">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.click.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>select_item</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>select_item</code>.</p>
</blockquote>
<h4 id="tag-configuration-3">Tag configuration</h4>
<p>The tag for <code>select_item</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/select-item-tag.jpg" title="Select itemt ag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/select-item-tag.jpg#ZgotmplZ" alt="Select itemt ag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1800 1226'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>select_item</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-3">here</a>.</li>
<li><code>ecommerce.click.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-3">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-3">above</a>, it would be <code>select_item</code>).</p>
<h3 id="view_item">view_item</h3>
<p>The <code>view_item</code> event is sent when the user views the <strong>details</strong> of any given product.</p>
<h4 id="data-layer-composition-4">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_item</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_viewsimpressions_of_productitem_details">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;view_item&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-4">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.detail.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>view_item</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>view_item</code>.</p>
</blockquote>
<h4 id="tag-configuration-4">Tag configuration</h4>
<p>The tag for <code>view_item</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/view-item-tag.jpg" title="view_item tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/view-item-tag.jpg#ZgotmplZ" alt="view_item tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1800 1216'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>view_item</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-4">here</a>.</li>
<li><code>ecommerce.detail.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-4">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-4">above</a>, it would be <code>view_item</code>).</p>
<h3 id="add_to_cart">add_to_cart</h3>
<p>The <code>add_to_cart</code> event is sent when the user <strong>adds</strong> a product to the cart, either by adding a new product to the cart or by increasing the quantity of an existing item in the cart.</p>
<h4 id="data-layer-composition-5">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_to_cart</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_additions_or_removals_from_a_shopping_cart">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;add_to_cart&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>. Set <code>quantity</code> to reflect the number of items <em>added</em> to the cart in this action.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-5">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.add.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>add_to_cart</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>add_to_cart</code>.</p>
</blockquote>
<h4 id="tag-configuration-5">Tag configuration</h4>
<p>The tag for <code>add_to_cart</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/add-to-cart-tag.jpg" title="add_to_cart tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/add-to-cart-tag.jpg#ZgotmplZ" alt="add_to_cart tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1798 1214'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>add_to_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-5">here</a>.</li>
<li><code>ecommerce.add.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-5">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-5">above</a>, it would be <code>add_to_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_to_wishlist">add_to_wishlist</h3>
<p>The <code>add_to_wishlist</code> event is sent when the user adds a product to a <strong>wishlist</strong>.</p>
<blockquote>
<p>This does <strong>not</strong> have an analogy in Enhanced Ecommerce. It&rsquo;s a completely new Ecommerce event type.</p>
</blockquote>
<h4 id="data-layer-composition-6">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_to_wishlist</code> event could look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;add_to_wishlist&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="tag-configuration-6">Tag configuration</h4>
<p>The tag for <code>add_to_wishlist</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/add-to-wishlist-tag.jpg" title="Add to wishlist">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/add-to-wishlist-tag.jpg#ZgotmplZ" alt="Add to wishlist" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1802 1224'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>add_to_wishlist</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be <code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-6">here</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-6">above</a>, it would be <code>add_to_wishlist</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="remove_from_cart">remove_from_cart</h3>
<p>The <code>remove_from_cart</code> event is sent when the user <em>removes</em> something from the cart or <em>decreases the quantity</em> of an item in the cart.</p>
<h4 id="data-layer-composition-7">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>remove_from_cart</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#remove_a_product_from_a_shopping_cart">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;remove_from_cart&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-6">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.remove.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>remove_from_cart</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>remove_from_cart</code>.</p>
</blockquote>
<h4 id="tag-configuration-7">Tag configuration</h4>
<p>The tag for <code>remove_from_cart</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/remove-from-cart-tag.jpg" title="remove_from_cart tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/remove-from-cart-tag.jpg#ZgotmplZ" alt="remove_from_cart tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1798 1210'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>remove_from_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-7">here</a>.</li>
<li><code>ecommerce.remove.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-7">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-7">above</a>, it would be <code>remove_from_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="view_cart">view_cart</h3>
<p>The <code>view_cart</code> event is sent when the user views the cart contents.</p>
<blockquote>
<p>This does <strong>not</strong> have an analogy in Enhanced Ecommerce. It&rsquo;s a completely new Ecommerce event type.</p>
</blockquote>
<h4 id="data-layer-composition-8">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>view_cart</code> event could look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;view_cart&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;3&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Parka stain removal&#39;</span>,
      item_id: <span style="color:#a50">&#39;psr1332&#39;</span>,
      price: <span style="color:#a50">&#39;5.99&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Utility&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Care product&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="tag-configuration-8">Tag configuration</h4>
<p>The tag for <code>view_cart</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/view-cart-tag.jpg" title="view_cart tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/view-cart-tag.jpg#ZgotmplZ" alt="view_cart tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1794 1208'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>view_cart</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be <code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-8">here</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-8">above</a>, it would be <code>view_cart</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="begin_checkout">begin_checkout</h3>
<p>The <code>begin_checkout</code> event is sent when the user starts the <strong>checkout flow</strong>.</p>
<h4 id="data-layer-composition-9">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>begin_checkout</code> event could look like this (adapted from the <a href="https://developers.google.com/tag-manager/ecommerce-ga4#measure_a_checkout">official documentation</a>):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;remove_from_cart&#39;</span>,
  ecommerce: {
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;3&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Parka stain removal&#39;</span>,
      item_id: <span style="color:#a50">&#39;psr1332&#39;</span>,
      price: <span style="color:#a50">&#39;5.99&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Utility&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Care product&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <strong>either</strong> <code>item_name</code> <strong>or</strong> <code>item_id</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-7">Migration from Enhanced Ecommerce</h4>
<p>If you want to use the Enhanced Ecommerce <code>products</code> array instead of creating a new <code>items</code> object, you need to create the following variable:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>Then you can add it to your GA4 <code>begin_checkout</code> event tag as the value of the <code>items</code> field (see the next chapter).</p>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>begin_checkout</code>.</p>
</blockquote>
<h4 id="tag-configuration-9">Tag configuration</h4>
<p>The tag for <code>begin_checkout</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/begin-checkout-tag.jpg" title="begin_checkout tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/begin-checkout-tag.jpg#ZgotmplZ" alt="begin_checkout tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1804 1222'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>begin_checkout</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-9">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-9">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-9">above</a>, it would be <code>begin_checkout</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_shipping_info">add_shipping_info</h3>
<p>The <code>add_shipping_info</code> event is sent when the user has selected a shipping method.</p>
<blockquote>
<p>While Enhanced Ecommerce doesn&rsquo;t have a direct analogy to <code>add_shipping_info</code>, most implementations have shipping method selection encoded in a <code>checkout_option</code> object.</p>
</blockquote>
<h4 id="data-layer-composition-10">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_shipping_info</code> event could look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;add_shipping_info&#39;</span>,
  ecommerce: {
    shipping_tier: <span style="color:#a50">&#39;FedEx&#39;</span>,
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;3&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Parka stain removal&#39;</span>,
      item_id: <span style="color:#a50">&#39;psr1332&#39;</span>,
      price: <span style="color:#a50">&#39;5.99&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Utility&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Care product&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameter is just <code>shipping_tier</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-8">Migration from Enhanced Ecommerce</h4>
<p>You can migrate from Enhanced Ecommerce by grabbing the shipping method from the <code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> Data Layer variables, depending on how you&rsquo;ve setup shipping method selection.</p>
<p>You&rsquo;ll need to make sure that the trigger that fires this GA4 tag corresponds with the correct <code>option</code> item pushed into <code>dataLayer</code>, so that you don&rsquo;t inadvertently fire this tag when the payment method was selected, for example.</p>
<p>If you want to send the <code>items</code> array as well (recommended), you can use a Data Layer variable like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<h4 id="tag-configuration-10">Tag configuration</h4>
<p>The tag for <code>add_shipping_info</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/add-shipping-info-tag.jpg" title="add_shipping_info tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/add-shipping-info-tag.jpg#ZgotmplZ" alt="add_shipping_info tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1800 1256'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>add_shipping_info</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-10">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-10">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point the <code>shipping_tier</code> parameter to a Data Layer variable that contains the <code>shipping_tier</code> value. This would be:</p>
<ul>
<li><code>ecommerce.shipping_tier</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-10">here</a>.</li>
<li><code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-10">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-10">above</a>, it would be <code>add_shipping_info</code>). If you&rsquo;re migrating from Enhanced Ecommerce, make sure the trigger fires when the <strong>shipping method</strong> has been selected, and not for any other checkout option you might have.</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="add_payment_info">add_payment_info</h3>
<p>The <code>add_payment_info</code> event is sent when the user has selected a payment method.</p>
<blockquote>
<p>While Enhanced Ecommerce doesn&rsquo;t have a direct analogy to <code>add_payment_info</code>, most implementations have payment method selection encoded in a <code>checkout_option</code> object.</p>
</blockquote>
<h4 id="data-layer-composition-11">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>add_payment_info</code> event could look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;add_shipping_info&#39;</span>,
  ecommerce: {
    payment_type: <span style="color:#a50">&#39;COD&#39;</span>,
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;3&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Parka stain removal&#39;</span>,
      item_id: <span style="color:#a50">&#39;psr1332&#39;</span>,
      price: <span style="color:#a50">&#39;5.99&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Utility&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Care product&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameter is just <code>payment_type</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-9">Migration from Enhanced Ecommerce</h4>
<p>You can migrate from Enhanced Ecommerce by grabbing the payment method from the <code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> Data Layer variables, depending on how you&rsquo;ve setup payment method selection.</p>
<p>You&rsquo;ll need to make sure that the trigger that fires this GA4 tag corresponds with the correct <code>option</code> item pushed into <code>dataLayer</code>, so that you don&rsquo;t inadvertently fire this tag when the shipping method was selected, for example.</p>
<p>If you want to send the <code>items</code> array as well (recommended), you can use a Data Layer variable like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.checkout.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<h4 id="tag-configuration-11">Tag configuration</h4>
<p>The tag for <code>add_payment_info</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/add-payment-info.jpg" title="add_payment_info tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/add-payment-info.jpg#ZgotmplZ" alt="add_payment_info tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1800 1268'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>add_payment_info</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-11">here</a>.</li>
<li><code>ecommerce.checkout.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-11">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point the <code>payment_type</code> parameter to a Data Layer variable that contains the <code>payment_tpye</code> value. This would be:</p>
<ul>
<li><code>ecommerce.payment_type</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-11">here</a>.</li>
<li><code>ecommerce.checkout.option</code> or <code>ecommerce.checkout_option.option</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-11">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-11">above</a>, it would be <code>add_payment_info</code>). If you&rsquo;re migrating from Enhanced Ecommerce, make sure the trigger fires when the <strong>payment method</strong> has been selected, and not for any other checkout option you might have.</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="purchase">purchase</h3>
<p>The <code>purchase</code> event is sent when the user makes a purchase on the site.</p>
<blockquote>
<p>Make sure you configure your website so that the purchase data is <strong>only collected once</strong>. The best way to do this is to invalidate the thank you page once the user has visited it so that they can&rsquo;t revisit it by reloading the page, using the browser history, or hitting the back button after moving to some other page. <strong>Duplicate transactions</strong> are things you need to avoid at all costs.</p>
</blockquote>
<h4 id="data-layer-composition-12">Data Layer composition</h4>
<p>A sample <code>dataLayer</code> object for the <code>purchase</code> event could look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;purchase&#39;</span>,
  ecommerce: {
    currency: <span style="color:#a50">&#39;EUR&#39;</span>,
    value: <span style="color:#099">109.29</span>,
    tax: <span style="color:#099">7.18</span>,
    shipping: <span style="color:#099">10.00</span>,
    affiliation: <span style="color:#a50">&#39;My Parka Store&#39;</span>,
    transaction_id: <span style="color:#a50">&#39;p115-20202000&#39;</span>,
    coupon: <span style="color:#a50">&#39;free_back_rub&#39;</span>,
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;3&#39;</span>
    },{
      item_name: <span style="color:#a50">&#39;Parka stain removal&#39;</span>,
      item_id: <span style="color:#a50">&#39;psr1332&#39;</span>,
      price: <span style="color:#a50">&#39;5.99&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Utility&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Care product&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>,
      item_coupon: <span style="color:#a50">&#39;cheap_stain_removal&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <code>transaction_id</code> and <code>currency</code>.</p>
<p>You can also add promotion and item list parameters (e.g. <code>promotion_name</code> or <code>item_list_name</code>) to the items in the <code>items</code> array if you want to add credit to a promotion or an item list for the current action.</p>
<h4 id="migration-from-enhanced-ecommerce-10">Migration from Enhanced Ecommerce</h4>
<p>You can grab all the required parameters from the Enhanced Ecommerce <code>purchase</code> event. You need to create <strong>Data Layer Variables</strong> (Version 2) for each. Here are the <strong>Data Layer Variable Names</strong> you need to configure in the variables:</p>
<table>
<thead>
<tr>
<th>GA4 parameter</th>
<th>Data Layer Variable Name in EEC</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>currency</code></td>
<td><code>ecommerce.currencyCode</code></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>ecommerce.purchase.actionField.revenue</code></td>
</tr>
<tr>
<td><code>tax</code></td>
<td><code>ecommerce.purchase.actionField.tax</code></td>
</tr>
<tr>
<td><code>shipping</code></td>
<td><code>ecommerce.purchase.actionField.shipping</code></td>
</tr>
<tr>
<td><code>affiliation</code></td>
<td><code>ecommerce.purchase.actionField.affiliation</code></td>
</tr>
<tr>
<td><code>transaction_id</code></td>
<td><code>ecommerce.purchase.actionField.id</code></td>
</tr>
<tr>
<td><code>coupon</code></td>
<td><code>ecommerce.purchase.actionField.coupon</code></td>
</tr>
<tr>
<td><code>items</code></td>
<td><code>ecommerce.purchase.products</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>purchase</code>.</p>
</blockquote>
<h4 id="tag-configuration-12">Tag configuration</h4>
<p>The tag for <code>purchase</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/purchase-tag.jpg" title="purchase tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/purchase-tag.jpg#ZgotmplZ" alt="purchase tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1806 1556'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>purchase</code>.</p>
<p>Make sure you point the <code>items</code> parameter to a Data Layer variable that contains the <code>items</code> array. This would be:</p>
<ul>
<li><code>ecommerce.items</code> if you&rsquo;re following the steps outlined <a href="#data-layer-composition-12">here</a>.</li>
<li><code>ecommerce.purchase.products</code> if you&rsquo;ve chosen to <a href="#migration-from-enhanced-ecommerce-12">migrate</a> from Enhanced Ecommerce.</li>
</ul>
<p>Make sure you point all the other parameters to their counterparts in the <code>ecommerce</code> array. If you&rsquo;re migrating from Enhanced Ecommerce you&rsquo;d need to set them <a href="#migration-from-enhanced-ecommerce-12">accordingly</a>.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-12">above</a>, it would be <code>purchase</code>).</p>
<blockquote>
<p>You can add additional parameters (in addition to <code>items</code>) such as <code>promotion_name</code> or <code>item_list_name</code> if you want to associate this event with a promotion or an item list, respectively.</p>
</blockquote>
<h3 id="refund">refund</h3>
<p>There are two types of <code>refund</code> events you can send: <strong>full refund</strong> (the entire transaction is refunded) and <strong>partial refund</strong> (only some items were refunded).</p>
<h4 id="data-layer-composition-13">Data Layer composition</h4>
<p>For a <strong>full refund</strong>, this is what a sample <code>dataLayer</code> object would look like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;refund&#39;</span>,
  ecommerce: {
    transaction_id: <span style="color:#a50">&#39;p115-20202000&#39;</span>
  }
});
</code></pre></div>
<p><strong>Required</strong> parameter is <code>transaction_id</code>.</p>
<p>For a <strong>partial refund</strong>, this is what a sample <code>dataLayer</code> object would look like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  event: <span style="color:#a50">&#39;refund&#39;</span>,
  ecommerce: {
    transaction_id: <span style="color:#a50">&#39;p115-20202000&#39;</span>,
    items: [{
      item_name: <span style="color:#a50">&#39;Finnish magical parka&#39;</span>,
      item_id: <span style="color:#a50">&#39;mp1122&#39;</span>,
      price: <span style="color:#a50">&#39;31.10&#39;</span>,
      item_brand: <span style="color:#a50">&#39;PARKA4LIFE&#39;</span>,
      item_category: <span style="color:#a50">&#39;Apparel&#39;</span>,
      item_category_2: <span style="color:#a50">&#39;Coats&#39;</span>,
      item_category_3: <span style="color:#a50">&#39;Parkas&#39;</span>,
      item_category_4: <span style="color:#a50">&#39;Unisex&#39;</span>,
      item_variant: <span style="color:#a50">&#39;Navy blue&#39;</span>,
      quantity: <span style="color:#a50">&#39;1&#39;</span>
    }]
  }
});
</code></pre></div>
<p><strong>Required</strong> parameters are <code>transaction_id</code>, and for each item that is refunded, <code>item_id</code> and <code>quantity</code> refunded.</p>
<h4 id="migration-from-enhanced-ecommerce-11">Migration from Enhanced Ecommerce</h4>
<p>To migrate from an Enhanced Ecommerce setup, you&rsquo;d need to create a Data Layer variable for the transaction ID and another one for the products that were refunded.</p>
<p>The Data Layer variable for <strong>transaction ID</strong> looks like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.refund.actionField.id</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<p>The Data Layer variable for the refunded <strong>products</strong> looks like this:</p>
<ul>
<li><strong>Type</strong>: Data Layer Variable</li>
<li><strong>Data Layer Variable name</strong>: <code>ecommerce.refund.products</code></li>
<li><strong>Data Layer Version</strong>: Version 2</li>
</ul>
<blockquote>
<p>You can also use my <a href="https://www.simoahava.com/custom-templates/eec-products-ga4-items/">custom variable template</a> to convert an Enhanced Ecommerce <code>products</code> object automatically to the format required by <code>refund</code>.</p>
</blockquote>
<h4 id="tag-configuration-13">Tag configuration</h4>
<p>The tag for <code>refund</code> would look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/10/refund-tag.jpg" title="refund tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/10/refund-tag.jpg#ZgotmplZ" alt="refund tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1796 1266'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make sure you set the <strong>Event Name</strong> field to <code>refund</code>.</p>
<p>If you&rsquo;re sending a <strong>full</strong> refund, you only need to configure the <code>transaction_id</code> field. It should point to either <code>ecommerce.transaction_id</code> or, if you&rsquo;re <a href="#migration-from-enhanced-ecommerce-13">migrating from Enhanced Ecommerce</a>, to <code>ecommerce.refund.actionField.id</code>.</p>
<p>If you&rsquo;re sending a <strong>partial</strong> refund, you&rsquo;ll also need to configure the <code>items</code> field to point to either the <code>ecommerce.items</code> variable or the <code>ecommerce.refund.products</code> variable, with the latter used in case you&rsquo;re migrating from Enhanced Ecommerce.</p>
<p>Remember also to set <strong>the trigger</strong> to a Custom Event trigger, set to the value of the <code>event</code> key in the object that was pushed to <code>dataLayer</code> (in the example <a href="#data-layer-composition-12">above</a>, it would be <code>refund</code>).</p>
<h2 id="summary">Summary</h2>
<p>We all knew that Google Analytics 4 properties would include Ecommerce capabilities. I think we were all surprised by how <em>beta</em> they still were by the time GA4 was released <em>out of beta</em>.</p>
<p>It doesn&rsquo;t really help that the Google Tag Manager tags are still lagging behind in development. There&rsquo;s a <strong>lot</strong> of manual work involved in building an Ecommerce setup, and while we&rsquo;ve been treated with a migration option from Universal Analytics&rsquo; Enhanced Ecommerce, it doesn&rsquo;t necessarily make sense to use.</p>
<p>The new, <strong>gtag.js</strong>-based format is where all the cool new stuff will be introduced. If you choose complacency over the effort of properly moving to the new setup, you might end up with a suboptimal Ecommerce setup for future iterations of GA4&rsquo;s Ecommerce reports.</p>
<p>Having said that, it makes sense to <strong>implement</strong> GA4 Ecommerce as soon as possible. You don&rsquo;t have to abandon your Universal Analytics setup, but do proceed with either a migration or a completely new <code>dataLayer</code> setup for GA4 as well.</p>
<p>You&rsquo;ll want to start collecting that GA4 data as soon as possible to prepare for the eventual shift from Universal Analytics to Google Analytics 4. At that point, the more historical data you have, the better you&rsquo;ll know how the new paradigm works for your organization.</p>
<p>I know absolute use case parity with Enhanced Ecommerce isn&rsquo;t something GA4 Ecommerce should even pursue, but we&rsquo;re still missing things like <strong>item-scoped custom dimensions</strong> and <strong>easily managed item list and promotion attribution</strong> from the mix.</p>
<p>The Google Tag Manager tags are also missing a few key pieces, such as an option to pull in all Ecommerce data directly from the <code>dataLayer</code> or even from a Custom JavaScript variable (or custom template).</p>
<p>Until we have these things, it&rsquo;s best to treat GA4 Ecommerce as being in <strong>rough beta</strong>, even if that label has officially been dropped.</p>
<p>What are you most looking forward to about the GA4&rsquo;s Ecommerce reports? What do you expect the Google Tag Manager integration to look like?</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/app&#43;web/">app&#43;web</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics-4/">google analytics 4</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/ecommerce/">ecommerce</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/new-preview-mode-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Google%20Analytics%204:%20Ecommerce%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/new-preview-mode-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Google%20Analytics%204:%20Ecommerce%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Google%20Analytics%204:%20Ecommerce%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

