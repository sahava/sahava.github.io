<!doctype html><html lang=en-us><head><meta name=google-site-verification content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"#GTMTips: Use Product-scoped Custom Dimensions In GA Firebase | Simo Ahava's blog","image":"https:\/\/www.simoahava.com\/images\/2019\/01\/product-scoped-dimensions-firebase.jpg","editor":"Simo Ahava","publisher":{"@type":"Organization","name":"Simo Ahava's blog","logo":{"@type":"ImageObject","url":"https:\/\/www.simoahava.com\/images\/simo.png","height":"393","width":"407"}},"url":"https:\/\/www.simoahava.com\/analytics\/product-scoped-custom-dimensions-in-firebase\/","datePublished":"2019-01-17T10:06:25\u002b02:00","dateModified":"2019-01-17T10:06:25\u002b02:00","description":"By hard-coding the dimension\/metric index in the item bundles, you can add Product-scoped Custom Dimensions and Metrics in Google Analytics for Firebase data collection. Both iOS and Android SDKs support this method.","author":{"@type":"Person","name":"Simo Ahava"}}</script><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>#GTMTips: Use Product-scoped Custom Dimensions In GA Firebase | Simo Ahava's blog</title>
<script>window.dataLayer=window.dataLayer||[],window.dataLayer.push({pageType:"article",environment:null})</script><script>(function(e,t,n,s){window[n]=window[n]||[],window[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=e.getElementsByTagName(t)[0],o=e.createElement(t),a=n!="dataLayer"?"&l="+n:"";o.async=!0,o.src="https://sgtm.simoahava.com/gtm.js?id="+s+a,i.parentNode.insertBefore(o,i)})(document,"script","dataLayer","GTM-PZ7GMV9")</script><meta name=author content="Simo Ahava"><meta name=keywords content><link rel=icon href=https://www.simoahava.com/images/favicon.ico><link rel=amphtml href=https://www.simoahava.com/amp/analytics/product-scoped-custom-dimensions-in-firebase/><meta name=description content="By hard-coding the dimension/metric index in the item bundles, you can add Product-scoped Custom Dimensions and Metrics in Google Analytics for Firebase data collection. Both iOS and Android SDKs support this method."><meta property="og:description" content="By hard-coding the dimension/metric index in the item bundles, you can add Product-scoped Custom Dimensions and Metrics in Google Analytics for Firebase data collection. Both iOS and Android SDKs support this method."><meta property="og:type" content="blog"><meta property="og:title" content="#GTMTips: Use Product-scoped Custom Dimensions In GA Firebase"><meta property="og:url" content="https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><meta property="og:site_name" content="Simo Ahava's blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="#GTMTips: Use Product-scoped Custom Dimensions In GA Firebase"><meta name=twitter:description content="By hard-coding the dimension/metric index in the item bundles, you can add Product-scoped Custom Dimensions and Metrics in Google Analytics for Firebase data collection. Both iOS and Android SDKs support this method."><meta name=twitter:creator content="@SimoAhava"><meta name=twitter:image content="https://www.simoahava.com/images/2019/01/product-scoped-dimensions-firebase.jpg"><meta property="og:image" content="https://www.simoahava.com/images/2019/01/product-scoped-dimensions-firebase.jpg"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=/css/style.css></head><body><div id=_progress></div><div id=blog><header id=header data-behavior=4><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=/>Simo Ahava's blog</a></div></header><nav id=sidebar data-behavior=4><div class=sidebar-container><div class=sidebar-profile><a href=/><img class=sidebar-profile-picture loading=lazy src=https://www.simoahava.com/images/simo.png alt="Author's picture"></a><h4 class=sidebar-profile-name>Simo Ahava</h4><h5 class=sidebar-profile-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/><i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/><i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/tags/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/categories/gtm-tips/><i class="sidebar-button-icon fa fa-lg fa-magic"></i>
<span class=sidebar-button-desc>GTM Tips</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/about-simo-ahava/><i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>About</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/index.xml><i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=/tools/><i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
<span class=sidebar-button-desc>Tools</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/blog-statistics/><i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
<span class=sidebar-button-desc>Blog statistics</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/sahava target=_blank rel=noopener><i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
<span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/upcoming-talks/><i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
<span class=sidebar-button-desc>Upcoming talks</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/custom-templates/><i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Templates</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=/newsletter/><i class="sidebar-button-icon fa fa-lg fa-bell"></i>
<span class=sidebar-button-desc>Newsletter</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://masto.measure.chat/@SimoAhava target=_blank rel="noopener me"><i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
<span class=sidebar-button-desc>Mastodon</span></a></li></ul><ul class=sidebar-buttons></ul></div></nav><div id=main data-behavior=4 class=hasCoverMetaIn><article class=post><form id=search action=/search/><input name=q type=text class="form-control input--xlarge" placeholder="Search blog..." autocomplete=off></form><div class="post-header main-content-wrap text-left"><h1>#GTMTips: Use Product-scoped Custom Dimensions In GA Firebase</h1><div class="postShorten-meta post-meta"><time datetime=2019-01-17T10:06:25+02:00>January 17, 2019
</time><span>in</span>
<a class=category-link href=/categories/gtm-tips>GTM tips</a>
| <a href=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/#commento><comentario-count path=/analytics/product-scoped-custom-dimensions-in-firebase/ placeholder=... error-text="N/A " zero-text="0 " prefix suffix=" "></comentario-count>Comments</a></div></div><div class="post-content markdown"><div class=main-content-wrap><p>Thanks to the intrepid detective work of <strong>Jørn Reidel</strong> and <strong>Ahmed Marof</strong>, it looks like one of the big hurdles for doing a full migration from using the legacy <a href=https://developers.google.com/analytics/devguides/collection/ios/v3/sdk-download>Google Analytics</a> and <a href=https://developers.google.com/tag-manager/android/v4/>Google Tag Manager</a> SDKs to the latest <a href=https://developers.google.com/tag-manager/ios/v5/>Tag Manager + Firebase</a> SDK is now a non-issue.</p><p>The issue is, of course, <a href=/gtm-tips/product-scoped-custom-dimensions-and-metrics/>Product-scoped Custom Dimensions</a> or more specifically the lack of support thereof. Until now, I&rsquo;d been holding against recommending the migration to anyone with Enhanced Ecommerce tracking set up simply because the documentation didn&rsquo;t mention the possibility of sending these custom definitions to Google Analytics.</p><p>But, Jørn Reidel did what anyone who wants to actually find the truth beyond documentation should have done: he tested different ways to do it, and found the solution. Spoiler alert: it&rsquo;s quite logical.</p><span class=simmer><span class=close>X</span><p><span class="fa fa-md fa-bell"></span>
<strong>The Simmer Newsletter</strong></p><p>Subscribe to the <a href=/newsletter/>Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!</p></span><h2 id=tip-93-send-product-scoped-custom-dimensions-with-firebase>Tip 93: Send Product-scoped Custom Dimensions with Firebase</h2><div style=aspect-ratio:960/540 class="figure nocaption"><a href=/images/2019/01/product-scoped-dimensions-firebase.jpg title="Product-scoped custom dimensions in firebase"><img class=fig-img height=540 width=960 loading=lazy src=/images/2019/01/product-scoped-dimensions-firebase.jpg#ZgotmplZ alt="Product-scoped custom dimensions in firebase"></a></div><p>Naturally, this applies to the &ldquo;legacy&rdquo; Universal Analytics tags in Firebase GTM only. <a href=https://firebase.google.com/docs/analytics/>Google Analytics for Firebase</a> doesn&rsquo;t have a model for Enhanced Ecommerce any more. Also, thanks to the <a href=/analytics/google-analytics-for-mobile-sunset/>recent news</a> about the upcoming deprecation of Google Analytics for mobile apps, this tip is probably short-lived.</p><p>Anyway, the simple solution is to do what you&rsquo;d do with the <code>dataLayer</code> setup when working with <a href=/analytics/enhanced-ecommerce-guide-for-google-tag-manager/>Enhanced Ecommerce for Google Tag Manager on the web</a>: you <em>hard-code</em> the dimension and metric indices into the item bundles themselves.</p><p>This is what it would look like with Swift (iOS):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#00a>let</span> <span style=color:#a00>product1</span>: [<span style=color:#0aa>String</span> : <span style=color:#0aa>Any</span>]  = [
</span></span><span style=display:flex><span>  AnalyticsParameterItemID: <span style=color:#a50>&#34;sku1234&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterItemName: <span style=color:#a50>&#34;Donut Friday Scented T-Shirt&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterItemCategory: <span style=color:#a50>&#34;Apparel/Men/Shirts&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterItemVariant: <span style=color:#a50>&#34;Blue&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterItemBrand: <span style=color:#a50>&#34;Google&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterPrice: <span style=color:#099>29.99</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterCurrency: <span style=color:#a50>&#34;USD&#34;</span>,
</span></span><span style=display:flex><span>  AnalyticsParameterQuantity: <span style=color:#099>1</span>,
</span></span><span style=display:flex><span>  <span style=color:#a50>&#34;dimension4&#34;</span>: <span style=color:#a50>&#34;Product Scoped Value 01 - GTM Firebase&#34;</span>
</span></span><span style=display:flex><span>]</span></span></code></pre></div><p>And the same in Kotlin (Android):</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#00a>val</span> product1 = Bundle()
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.ITEM_ID, <span style=color:#a50>&#34;sku1234&#34;</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.ITEM_NAME, <span style=color:#a50>&#34;Donut Friday Scented T-Shirt&#34;</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.ITEM_CATEGORY, <span style=color:#a50>&#34;Apparel/Men/Shirts&#34;</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.ITEM_VARIANT, <span style=color:#a50>&#34;Blue&#34;</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.ITEM_BRAND, <span style=color:#a50>&#34;Google&#34;</span>)
</span></span><span style=display:flex><span>product1.putDouble(<span style=color:#0a0;text-decoration:underline>FirebaseAnalyitcs</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.PRICE, <span style=color:#099>29.99</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.CURRENCY, <span style=color:#a50>&#34;USD&#34;</span>)
</span></span><span style=display:flex><span>product1.putLong(<span style=color:#0a0;text-decoration:underline>FirebaseAnalytics</span>.<span style=color:#0a0;text-decoration:underline>Param</span>.QUANTITY, <span style=color:#099>1</span>)
</span></span><span style=display:flex><span>product1.putString(<span style=color:#a50>&#34;dimension4&#34;</span>, <span style=color:#a50>&#34;Product Scoped Value 01 - GTM Firebase&#34;</span>)</span></span></code></pre></div><p>If done correctly (i.e. you have a tag firing in GTM that sends the Enhanced Ecommerce data to Google Analytics), you should see your Custom Dimension surface when queried against this product with the Ecommerce action it was sent in.</p><div style=aspect-ratio:1320/452 class="figure nocaption"><a href=/images/2019/01/ga-report.jpg title="GA product report"><img class=fig-img height=452 width=1320 loading=lazy src=/images/2019/01/ga-report.jpg#ZgotmplZ alt="GA product report"></a></div><p>Simple solution to a jarring problem. Thank you Jørn and Ahmed for the detective work!</p></div></div><div id=post-footer class="post-footer main-content-wrap"><div class=post-footer-tags><span class="text-color-light text-small">TAGGED IN</span><br><a class="tag tag--primary tag--small" href=/tags/google-tag-manager/>google tag manager</a>
<a class="tag tag--primary tag--small" href=/tags/firebase/>firebase</a>
<a class="tag tag--primary tag--small" href=/tags/custom-dimensions/>custom dimensions</a></div><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/trigger-javascript-without-using-custom-html-tag/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/obfuscate-and-duplicate-google-analytics-data/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Use%20Product-scoped%20Custom%20Dimensions%20In%20GA%20Firebase%20https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div><a name=commento></a><comentario-comments></comentario-comments></div></article><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2026 Simo Ahava. All Rights Reserved</span></footer></div><div id=bottom-bar class=post-bottom-bar data-behavior=4><div class=post-actions-wrap><nav><ul class="post-actions post-action-nav"><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/trigger-javascript-without-using-custom-html-tag/><i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">NEXT</span></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=/analytics/obfuscate-and-duplicate-google-analytics-data/><span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
<i class="fa fa-angle-right"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions><i class="fa fa-share-alt"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-facebook"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Use%20Product-scoped%20Custom%20Dimensions%20In%20GA%20Firebase%20https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-linkedin"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#commento><i class="fa-regular fa-comments"></i></a></li><li class=post-action><a class="post-action-btn btn btn--default" href=#><i class="fa fa-search"></i></a></li></ul></div></div><div id=share-options-bar class=share-options-bar data-behavior=4><i id=btn-close-shareoptions class="fa fa-close"></i><ul class=share-options><li class=share-option><a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=%23GTMTips:%20Use%20Product-scoped%20Custom%20Dimensions%20In%20GA%20Firebase%20https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/%20via%20@SimoAhava"><i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span></a></li><li class=share-option><a class=share-option-btn target=new href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/product-scoped-custom-dimensions-in-firebase/"><i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span></a></li></ul></div><div id=share-options-mask class=share-options-mask></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-remove"></i></div><img id=about-card-picture src=https://www.simoahava.com/images/simo.png alt="Author's picture"><h4 id=about-card-name>Simo Ahava</h4><div id=about-card-bio>Husband | Father | Analytics developer<br>simo (at) simoahava.com</div><div id=about-card-job><i class="fa fa-briefcase"></i><br>Senior Data Advocate at Reaktor</div><div id=about-card-location><i class="fa fa-map-marker"></i><br>Finland</div></div></div><div id=cover style=background-image:url(https://www.simoahava.com/images/maisema.jpg)></div><script defer src=https://comentario.simoahava.com/comentario.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous referrerpolicy=no-referrer></script><script defer src=/js/script.js></script><script>!function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),n=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");e&&(n&&(e.style.display="none"),t&&t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"}))}()</script></body></html>