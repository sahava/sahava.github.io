

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script>
      function gtag() { window.dataLayer = window.dataLayer || []; window.dataLayer.push(arguments); }
      gtag('event', 'optimize.callback', {
	    callback: function(e) {
	      window.dataLayer = window.dataLayer || [];
          window.dataLayer.push({
		    event: 'optimize.experimentLoaded',
            experimentTime: new Date().getTime()
	      });
	    }
      });
    </script>
    <script async src="https://www.googleoptimize.com/optimize.js?id=GTM-NGM64B"></script>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Enhanced Ecommerce Tips And Learnings | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2015\/09\/enhanced-ecommerce-tips.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/enhanced-ecommerce-tips-and-learnings\/",
  "datePublished": "2015-09-15T07:55:45\x2b00:00",
  "dateModified": "2015-09-15T07:55:45\x2b00:00",
  "description": "Tips and learnings from a multitude of Enhanced Ecommerce implementations. Most of these tips relate to Google Tag Manager, but there are some Google Analytics tricks mixed in as well.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Enhanced Ecommerce Tips And Learnings | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/enhanced-ecommerce-tips-and-learnings/">
    
    <meta name="description" content="Tips and learnings from a multitude of Enhanced Ecommerce implementations. Most of these tips relate to Google Tag Manager, but there are some Google Analytics tricks mixed in as well.">
    <meta property="og:description" content="Tips and learnings from a multitude of Enhanced Ecommerce implementations. Most of these tips relate to Google Tag Manager, but there are some Google Analytics tricks mixed in as well.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Enhanced Ecommerce Tips And Learnings">
    <meta property="og:url" content="https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Enhanced Ecommerce Tips And Learnings">
    <meta name="twitter:description" content="Tips and learnings from a multitude of Enhanced Ecommerce implementations. Most of these tips relate to Google Tag Manager, but there are some Google Analytics tricks mixed in as well.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2015/09/enhanced-ecommerce-tips.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2015/09/enhanced-ecommerce-tips.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Enhanced Ecommerce Tips And Learnings
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-09-15T07:55:45Z">
        
  September 15, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/#commento">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce">Enhanced Ecommerce</a> is undoubtedly an excellent feature of <a href="https://analytics.google.com">Google Analytics</a>. It provides us with a set of reports that truly extend the capabilities of funnel-based website analysis. As I've shown before, it's also very useful for tracking other transactional events on your site, such as <a href="https://www.simoahava.com/analytics/track-content-enhanced-ecommerce/">content engagement</a>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/enhanced-ecommerce-tips.jpg" title="Enhanced Ecommerce tips">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/09/enhanced-ecommerce-tips.jpg#ZgotmplZ" alt="Enhanced Ecommerce tips">
  
    </a>
  
  
</div>


<p>However, here's the thing. It's not very easy to implement. Even if you get everything right according to the documentation, there are still quite a number of pitfalls, and many of the learnings emerge only through experience. This is where I want to help out, so I composed this post with some of my key findings about Enhanced Ecommerce implementation and use.</p>
<p>It's well worth learning this stuff, as a fully functional Enhanced Ecommerce implementation might well be the key to finally coming up with a useful report to plaster across your vanity dashboards.</p>
<h2 id="1-implementation-via-google-tag-manager">1. Implementation via Google Tag Manager</h2>
<p>As a self-proclaimed <a href="https://tagmanager.google.com">Google Tag Manager</a> fanatic number 1, I do all my implementations with GTM. There are some quirks you need to consider, though, when implementing Enhanced Ecommerce through GTM. Here they are, in no particular order.</p>
<h3 id="the-fleeting-ecommerce-object">The fleeting <code>ecommerce</code> object</h3>
<p>If you use the <strong>Enable Enhanced Ecommerce</strong> / <strong>Use Data Layer</strong> option in your Tags, there's one very important thing to understand.</p>
<p><strong>Only the most recent <code>ecommerce</code> object is included in the hit!</strong></p>
<p>In other words, if you do two consecutive <code>dataLayer.push()</code> commands with their own &lsquo;ecommerce&rsquo; objects, any Tag which fires after the latter push will only have access to the latter &lsquo;ecommerce&rsquo; object.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/ecommerce-features.jpg" title="Use Data Layer">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/09/ecommerce-features.jpg#ZgotmplZ" alt="Use Data Layer">
  
    </a>
  
  
</div>


<p>This is because the &ldquo;Use Data Layer&rdquo; option uses <em>version 1</em> of the Data Layer, which doesn't have fancy things like <a href="https://www.simoahava.com/analytics/google-tag-manager-data-model/"><em>recursive merge</em> of objects</a>. In practice, this means that an &lsquo;ecommerce&rsquo; object will always overwrite the previous &lsquo;ecommerce&rsquo; object in the data layer, if the <em>version 1</em> interface is used.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/use-js-variable.jpg" title="Custom JavaScript Variable">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/09/use-js-variable.jpg#ZgotmplZ" alt="Custom JavaScript Variable">
  
    </a>
  
  
</div>


<p>If you <strong>do</strong> want to recursively merge &lsquo;ecommerce&rsquo; objects, you will need to use the &ldquo;Read data from variable&rdquo; option which becomes available when you uncheck the &ldquo;Use Data Layer&rdquo; option. Read on&hellip;</p>
<h3 id="custom-javascript-variable-to-the-rescue">Custom JavaScript Variable to the rescue</h3>
<p>I've <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">written about this before</a>, and these days I actually only use this option to send the payloads. When you use the Custom JavaScript option (see the <a href="https://developers.google.com/tag-manager/enhanced-ecommerce#macro">developer guide</a> for further information), you can create, parse, and delete parts of the &lsquo;ecommerce&rsquo; object until it's to your liking. This is an incredibly powerful tool, letting you pull in data from multiple sources to compile the object, or allowing you to access the <em>full</em> &lsquo;ecommerce&rsquo; object stored in <a href="https://www.simoahava.com/analytics/google-tag-manager-data-model/">the data model</a>, and not just the stunted <em>version 1</em> object available if you use the &ldquo;Use Data Layer&rdquo; option in your Tags.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  <span style="color:#00a">var</span> ecom = {<span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;impressions&#39;</span> : pageData.productImpressions,
    <span style="color:#a50">&#39;detail&#39;</span> : {
      <span style="color:#a50">&#39;actionField&#39;</span> : {<span style="color:#a50">&#39;list&#39;</span> : <span style="color:#a50">&#39;Related Products&#39;</span>},
      <span style="color:#a50">&#39;products&#39;</span> : pageData.productDetailView
    }
  };
  <span style="color:#00a">return</span> ecom;
}
</code></pre></div>
<p>The example above pulls together both <em>product impressions</em> and <em>product detail view</em> in a single object, sending the complete payload to Google Analytics with the Tag.</p>
<p>To access a <em>recursively merged</em> <code>ecommerce</code> object, you will need to create a new Data Layer Variable which accesses the &lsquo;ecommerce&rsquo; object pushed within. Instructions for this can be found in <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">this article</a>.</p>
<h3 id="you-can-combine-multiple-data-types-in-a-single-payload">You can combine multiple data types in a single payload</h3>
<p>This is pretty vaguely covered in the developer guide, but combining data types in a single payload can be very useful if you want to keep the number of requests to Google Analytics down. So, if you want to send multiple &lsquo;ecommerce&rsquo; objects in one single payload, you can, but only if you send one of each object type (<code>promoView</code>, <code>promoClick</code>, <code>impressions</code>, <strong>action</strong>). An <strong>action</strong> is any Enhanced Ecommerce data type which has the <code>products</code> Array. In other words, these are the available <strong>action</strong> objects:</p>
<p><code>click</code>, <code>detail</code>, <code>add</code>, <code>remove</code>, <code>checkout</code>, <code>purchase</code>, <code>checkout_option</code>, <code>refund</code></p>
<p>Also, you <em>can't</em> combine a <code>promoClick</code> with a <code>promoView</code> or an <strong>action</strong> object. These are, thus, the valid combinations:</p>
<ul>
<li>
<p><code>impressions</code> with one of <code>promoView</code>, <code>promoClick</code> or <strong>action</strong></p>
</li>
<li>
<p><code>impressions</code> with <code>promoView</code> and <strong>action</strong></p>
</li>
<li>
<p><code>promoView</code> with one of <code>impressions</code> or <strong>action</strong></p>
</li>
<li>
<p><code>promoView</code> with <code>impressions</code> and <strong>action</strong></p>
</li>
<li>
<p><code>promoClick</code> with <code>impressions</code></p>
</li>
<li>
<p><strong>action</strong> with one of <code>impressions</code> or <code>promoView</code></p>
</li>
<li>
<p><strong>action</strong> with <code>impressions</code> and <code>promoView</code></p>
</li>
</ul>
<p>In any case, combining objects into a single payload can truly save a lot of time and make the whole thing more efficient, but don't forget that Google Analytics has a character limit in the payload!</p>
<h3 id="there-is-an-8kb-limit-in-the-payload">There is an 8KB limit in the payload</h3>
<p>The <strong>analytics.js</strong> library refuses to send a hit if the full payload size is larger than 8192 bytes. This does require quite a lot of data to be stuffed within, but it only takes some dozens of product impressions to clog up the channel.</p>
<p>Eivind Savio has written <a href="https://www.savio.no/analytics/easier-enhanced-ecommerce-product-promo-tracking">an excellent post</a> about how to manage this overflow, so I suggest you head on over to take a look!</p>
<h2 id="2-consistency-is-key">2. Consistency is key</h2>
<p>Enhanced Ecommerce is comprised almost entirely of hit-level interactions. This means that every Enhanced Ecommerce payload sent to Google Analytics is unique, and does not persists its information across subsequent hits.</p>
<p>This, in turn, basically means that the <code>products</code> Array needs to be consistent throughout the funnel. For example, if you have a product which has the category &lsquo;T-Shirts&rsquo;, you will need to have this information in all the payloads the product is sent in if you want to query for it across the entire funnel. GTM or GA will not persist this information.</p>
<p>You'll want to be very careful when designing and developing the Data Layer for your Enhanced Ecommerce payloads. The developers need to understand how important it is to have the product details be identical throughout the funnel process.</p>
<p>This has implications for queries as well. For example, let's say you send the following two payloads to Google Analytics:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">dataLayer.push({
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;detail&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;A12345&#39;</span>,
      }]
    }
  },
  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;ecommerce&#39;</span>
});
dataLayer.push({
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;add&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;A12345&#39;</span>,
        <span style="color:#a50">&#39;name&#39;</span> : <span style="color:#a50">&#39;My T-Shirt&#39;</span>
      }]
    }
  },
  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;ecommerce&#39;</span>
});
</code></pre></div>
<p>In this case, querying for product <strong>SKU</strong> &lsquo;A12345&rsquo; will return a result when queried against <em>product detail views</em> and <em>product adds to cart</em>. However, product <strong>name</strong> &lsquo;My T-Shirt&rsquo; will only return a result when queried against <em>product adds to cart</em>. Since this product name was missing from the &lsquo;detail&rsquo; payload, you won't be able to query for this information.</p>
<p>Many times when working with an Enhanced Ecommerce implementation which uses client-side methods to populate some of the data (e.g. scraping from the page), this consistency requirement has become a serious issue. I've been forced to persist full product information throughout the funnel using solutions like <a href="https://www.simoahava.com/analytics/two-ways-to-persist-data-via-google-tag-manager/">HTML5 Storage and cookies</a>.</p>
<p>This is not the recommended approach.</p>
<p>The best way is to render product details in <code>dataLayer</code> as the page loads, making sure your developers add them consistently in all steps of the funnel. Once the products are in <code>dataLayer</code>, you can use the <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">Custom JavaScript Variable method</a> to pull them out and parse them into a valid <code>ecommerce</code> object.</p>
<p>Note that <strong>checkout</strong> is a bit exceptional in terms of consistency. It's enough to send the &lsquo;products&rsquo; Array with <em>just the first step</em>. This is because Enhanced Ecommerce only has an aggregate <strong>productCheckouts</strong> metric, which increases by one when a product is sent with the first checkout step. The <strong>checkout option</strong> and the rest of the checkout steps need not, and thus perhaps should not include product information.</p>
<h2 id="3-product-scoped-custom-dimensions-and-metrics">3. Product-scoped custom dimensions and metrics</h2>
<p>Product-scoped custom dimensions and metrics are a wonderful way to extend the rather limited set of information you can send with each product.</p>
<p>To send a product-scoped dimension or metric in Google Tag Manager, you need to include the <code>dimensionX</code> and/or <code>metricX</code> key in the respective product in the payload you want to send the dimension/metric in. Again, as in the previous chapter, product-scoped dimensions and metrics do not persist, so you will need to include them consistently in the payloads.</p>
<p>For example, to send a dimension with details about the T-shirt size, and a metric with the tax-free value of the shirt, the <code>dataLayer.push()</code> would look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">dataLayer.push({
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;detail&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;A12345&#39;</span>,
        <span style="color:#a50">&#39;name&#39;</span> : <span style="color:#a50">&#39;My T-Shirt&#39;</span>,
        <span style="color:#a50">&#39;dimension3&#39;</span> : <span style="color:#a50">&#39;Large&#39;</span>,
        <span style="color:#a50">&#39;metric2&#39;</span> : <span style="color:#099">11.99</span>
      }]
    }
  },
  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;ecommerce&#39;</span>
});
</code></pre></div>
<p>Naturally, a payload like this will only let you query for this information with <em>product detail view</em> queries, and for this particular product only. These dimensions do not persist across funnel payloads, nor do they cover multiple products. They're <strong>per product, per hit</strong>.</p>
<p>I've written about product-scoped custom dimensions and metrics before, so remember to check out <a href="https://www.simoahava.com/gtm-tips/product-scoped-custom-dimensions-and-metrics/">this article</a> as well.</p>
<h2 id="4-product-categories">4. Product categories</h2>
<p>The &lsquo;category&rsquo; field has been available in &ldquo;traditional&rdquo; Ecommerce as well, but it's been slightly revamped in Enhanced Ecommerce.</p>
<p>First of all, the consistency requirement applies here as well. If you want to make full-funnel queries against a product category, you will need to send the category with every single product in all steps of the funnel you want to query against. The field does not persist.</p>
<p>The other thing about categories is that you can send <strong>five levels</strong> of categories, resulting in some sweet segmentation in your reports. These levels are sent by using the slash (<strong>/</strong>) between levels, where level 1 is the first item in the string, level 2 the second, etc. So, a full five-level product category string would look like this in a payload:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">dataLayer.push({
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;detail&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;A12345&#39;</span>,
        <span style="color:#a50">&#39;category&#39;</span> : <span style="color:#a50">&#39;Clothes/T-Shirts/Men/Sleeveless/Used&#39;</span>
      }]
    }
  }
});
</code></pre></div>
<p>This way, you can query for individual category levels with the following Google Analytics dimensions:</p>
<p>Product Category Level 1: <strong>Clothes</strong><br>
Product Category Level 2: <strong>T-Shirts</strong><br>
Product Category Level 3: <strong>Men</strong><br>
Product Category Level 4: <strong>Sleeveless</strong><br>
Product Category Level 5: <strong>Used</strong></p>
<p>These aren't available in the default reports, but you can create custom reports easily, or use them as secondary dimensions.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/product-categories.jpg" title="Product category levels">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/09/product-categories.jpg#ZgotmplZ" alt="Product category levels">
  
    </a>
  
  
</div>


<p>If your category names contain the character &lsquo;/', you will need to write this in a different way, as there's no way to encode the slash without it being interpreted as a category delimiter.</p>
<h2 id="5-product-list-attribution">5. Product list attribution</h2>
<p>Not everything about Enhanced Ecommerce is hit-level, though. Product lists and promotions have an attribution mechanism, where the <strong>last</strong> list or promotion that the user interacted with before a purchase within the same session is the one which gets full credit for the purchase. In other words, you <strong>don't</strong> need to persist list information throughout the funnel. It's enough to send it only where the list interaction takes place, and the attribution will take care of the rest.</p>
<p>Remember to check <a href="https://support.google.com/analytics/answer/6014841?hl=en#product_attribution">the developer guide</a> for a description of this attribution mechanism.</p>
<h2 id="6-summary">6. Summary</h2>
<p>This short list of tips includes a number of things that are either vaguely described in the developer guides, or are difficult to grasp without concrete examples.</p>
<p>If there's one thing that stands out, it's the <strong>consistency</strong> requirement. It's very important to keep product details consistent across the funnel. A single change in the product name, for example, can make reporting extremely difficult, as you'll need to consolidate multiple product names under a single SKU in your reports.</p>
<p>Did I miss some important tip / learning? Do you have something to add? Sound off in the comments!</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/enhanced-ecommerce/">enhanced ecommerce</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics/">google analytics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/tips/">Tips</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20Tips%20And%20Learnings%20https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-for-new-user/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20Tips%20And%20Learnings%20https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20Tips%20And%20Learnings%20https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-tips-and-learnings/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

