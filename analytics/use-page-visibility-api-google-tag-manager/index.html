

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Use Page Visibility API With GTM | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2014\/09\/page-visibility.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/use-page-visibility-api-google-tag-manager\/",
  "datePublished": "2014-09-19T08:52:02\x2b00:00",
  "dateModified": "2014-09-19T08:52:02\x2b00:00",
  "description": "How to use the Page Visibility API in Google Tag Manager for improved accuracy of web analytics tracking.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Use Page Visibility API With GTM | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/use-page-visibility-api-google-tag-manager/">
    
    <meta name="description" content="How to use the Page Visibility API in Google Tag Manager for improved accuracy of web analytics tracking.">
    <meta property="og:description" content="How to use the Page Visibility API in Google Tag Manager for improved accuracy of web analytics tracking.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Use Page Visibility API With GTM">
    <meta property="og:url" content="https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Use Page Visibility API With GTM">
    <meta name="twitter:description" content="How to use the Page Visibility API in Google Tag Manager for improved accuracy of web analytics tracking.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2014/09/page-visibility.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2014/09/page-visibility.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Use Page Visibility API With GTM
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-09-19T08:52:02Z">
        
  September 19, 2014

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/#commento">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>The <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API">Page Visibility API</a> for web browsers is pretty sweet. It lets you poll, using some new properties of the <code>document</code> object, whether or not the current page is visible to the user. Visibility is hidden if the page is not open in the current browser tab instance, or if the browser window has been minimized.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/09/page-visibility.jpg" title="Page Visibility API and GTM">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2014/09/page-visibility.jpg#ZgotmplZ" alt="Page Visibility API and GTM">
  
    </a>
  
  
</div>


<p>In this post, I'll give an example of how features of the Page Visibility API could be used with <a href="http://www.google.com/tagmanager">Google Tag Manager</a>. Do note, however, that browser support for the API pretty much excludes all IE versions older than 10 from the scope of this article.</p>
<p>In this example, we'll set up some tags, rules, and macros which will help us avoid receiving pageviews for pages which have been opened in tabs but were never read. I don't know about you, but having a pageview for a page which wasn't viewed sounds counter-intuitive. The pageview will only get sent once the page first becomes visible.</p>
<h2 id="the-visibility-listener">The Visibility Listener</h2>
<p>First, we'll create a visibility listener. What it does is dispatch a browser event every time the visibility state of a page changes.</p>
<ul>
<li>
<p>Create a new Custom JavaScript Macro <strong>{{visibility prefix}}</strong></p>
</li>
<li>
<p>Add the following code within:</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  <span style="color:#00a">var</span> prefixes = [<span style="color:#a50">&#39;moz&#39;</span>, <span style="color:#a50">&#39;ms&#39;</span>, <span style="color:#a50">&#39;o&#39;</span>, <span style="color:#a50">&#39;webkit&#39;</span>];

  <span style="color:#00a">if</span> (<span style="color:#a50">&#39;hidden&#39;</span> <span style="color:#00a">in</span> <span style="color:#0aa">document</span>) {
    <span style="color:#00a">return</span> <span style="color:#a50">&#39;&#39;</span>;
  }

  <span style="color:#aaa;font-style:italic">// Loop through each prefix to see if it is supported.
</span><span style="color:#aaa;font-style:italic"></span>  <span style="color:#00a">for</span> (<span style="color:#00a">var</span> i = <span style="color:#099">0</span>; i &lt; prefixes.length; i++) {
    <span style="color:#00a">var</span> testPrefix = prefixes[i] + <span style="color:#a50">&#39;Hidden&#39;</span>;
    <span style="color:#00a">if</span> (testPrefix <span style="color:#00a">in</span> <span style="color:#0aa">document</span>) {
      <span style="color:#00a">return</span> prefixes[i];
    }
  }

  <span style="color:#00a">return</span>;
}
</code></pre></div>
<ul>
<li>
<p>Create a new Custom JavaScript Macro <strong>{{visibility hidden}}</strong></p>
</li>
<li>
<p>Add the following code within:</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  <span style="color:#00a">switch</span> ({{visibility prefix}}) {
    <span style="color:#00a">case</span> <span style="color:#a50">&#39;&#39;</span>:
      <span style="color:#00a">return</span> <span style="color:#0aa">document</span>[<span style="color:#a50">&#39;hidden&#39;</span>];
    <span style="color:#00a">case</span> <span style="color:#a50">&#39;moz&#39;</span>:
      <span style="color:#00a">return</span> <span style="color:#0aa">document</span>[<span style="color:#a50">&#39;mozHidden&#39;</span>];
    <span style="color:#00a">case</span> <span style="color:#a50">&#39;o&#39;</span>:
      <span style="color:#00a">return</span> <span style="color:#0aa">document</span>[<span style="color:#a50">&#39;oHidden&#39;</span>];
    <span style="color:#00a">case</span> <span style="color:#a50">&#39;webkit&#39;</span>:
      <span style="color:#00a">return</span> <span style="color:#0aa">document</span>[<span style="color:#a50">&#39;webkitHidden&#39;</span>];
    <span style="color:#00a">default</span>:
      <span style="color:#00a">return</span>;
  }
}
</code></pre></div>
<ul>
<li>
<p>Create a new Custom HTML Tag</p>
</li>
<li>
<p>Add the following code within:</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">script</span>&gt;
  <span style="color:#00a">if</span> (<span style="color:#00a">typeof</span> {{visibility prefix}} !== <span style="color:#a50">&#39;undefined&#39;</span>) {

    <span style="color:#00a">var</span> visibilityEvent = {{visibility prefix}} + <span style="color:#a50">&#39;visibilitychange&#39;</span>,
        hiddenState = {{visibility hidden}},
        visibilityChanged = <span style="color:#00a">function</span>() {
          <span style="color:#00a">if</span> (<span style="color:#00a">typeof</span> hiddenState !== <span style="color:#a50">&#39;undefined&#39;</span>) {
            dataLayer.push({
              <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;visibilityChange&#39;</span>
            });
          }
        };
  
    <span style="color:#aaa;font-style:italic">// Attach visibility listener to document
</span><span style="color:#aaa;font-style:italic"></span>    <span style="color:#0aa">document</span>.addEventListener(visibilityEvent, visibilityChanged, <span style="color:#00a">false</span>);
  }
&lt;/<span style="color:#1e90ff;font-weight:bold">script</span>&gt;</code></pre></div>
<ul>
<li>Set tag to fire upon <strong>{{event}} equals gtm.js</strong></li>
</ul>
<p>First we create a utility macro which returns the required browser prefix for setting up the listener and for testing visibility state. In the next macro, we retrieve the state of the document (true: document is hidden, false: document is visible).</p>
<p>Finally, in the tag we create a listener for changes in page visibility. If visibility changes, a <code>dataLayer</code> event is pushed.</p>
<p>We will utilize this data in the following example.</p>
<h2 id="block-pageview-until-page-is-visible">Block Pageview Until Page Is Visible</h2>
<p>So the point here is to not send a pageview to Google Analytics until the page becomes visible. This applies to all your events as well, so you'll need to add these same rules and functions (modified to match the original firing logic) to your event tags, or you might end up having sessions with only events and no pageviews. This is to be avoided.</p>
<p>Here's the logic:</p>
<ol>
<li>
<p>When the pageview is first set to fire (usually <strong>{{event}} equals gtm.js</strong>), use page visibility as a blocking rule. If the page is hidden, do not fire the tag.</p>
</li>
<li>
<p>When the page becomes visible, use the visibility event as a trigger for the tag.</p>
</li>
<li>
<p>When the pageview has fired, use its hitCallback to prevent the visibility listener from triggering the tag again.</p>
</li>
</ol>
<p>So, let's get going.</p>
<ul>
<li>
<p>Create a new Custom JavaScript Macro <strong>{{visibility callback}}</strong></p>
</li>
<li>
<p>Add the following code within:</p>
</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  <span style="color:#00a">return</span> <span style="color:#00a">function</span>() {
    <span style="color:#00a">if</span> (<span style="color:#00a">typeof</span> {{visibility prefix}} !== <span style="color:#a50">&#39;undefined&#39;</span>) {
      <span style="color:#00a">var</span> visibilityEvent = {{visibility prefix}} + <span style="color:#a50">&#39;visibilitychange&#39;</span>;
      <span style="color:#0aa">document</span>.removeEventListener(visibilityEvent, visibilityChanged);
    }
  }
}
</code></pre></div>
<ul>
<li>
<p>In your pageview tag, create a new rule with the following two conditions, and add it to the tag. Keep all the old rules in place as well!</p>
<ul>
<li>
<p><strong>{{event}} equals visibilityChange</strong></p>
</li>
<li>
<p><strong>{{visibility hidden}} equals false</strong></p>
</li>
</ul>
</li>
<li>
<p>In your pageview tag, add the following <strong>Blocking Rule</strong></p>
<ul>
<li><strong>{{visibility hidden}} equals true</strong></li>
</ul>
</li>
<li>
<p>In your pageview tag, browse all the way down to <strong>Fields to Set</strong>, and add a new field</p>
<ul>
<li>
<p><strong>Field name:</strong> hitCallback</p>
</li>
<li>
<p><strong>Value:</strong> {{visibility callback}}</p>
</li>
</ul>
</li>
</ul>
<p>And that should do it. This is a long chain of actions, but it follows the path described in the beginning of this section.</p>
<h2 id="conclusions">Conclusions</h2>
<p>The Page Visibility API is pretty cool, but it's first and foremost designed to save resources. Use it to stop a video from playing when the tab is not focused, or to stop an image carousel from proceeding.</p>
<p>With Google Tag Manager, you could do a number of things, such as:</p>
<ol>
<li>
<p>Block pageview for non-visible pages (explored in this post)</p>
</li>
<li>
<p>Send visibility during pageview as a Custom Dimension (to track if the page is opened in a new tab or directly)</p>
</li>
<li>
<p>Track visibility change as a GA event (to see if people focus on your content)</p>
</li>
<li>
<p>Pause Timer Listener when page is hidden, and restart it when it becomes visible</p>
</li>
</ol>
<p>And so on.</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/javascript/">JavaScript</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/visibility/">visibility</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-tag-manager-data-model/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/undefined-dimensions-wont-get-sent/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Use%20Page%20Visibility%20API%20With%20GTM%20https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-tag-manager-data-model/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/undefined-dimensions-wont-get-sent/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Use%20Page%20Visibility%20API%20With%20GTM%20https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Use%20Page%20Visibility%20API%20With%20GTM%20https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

