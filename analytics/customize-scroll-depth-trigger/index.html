

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    

<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Customize The Scroll Depth Trigger In Google Tag Manager | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2018/03/scroll-depth-trigger-customizations.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/analytics/customize-scroll-depth-trigger/",
  "datePublished": "2018-03-08T09:44:33+02:00",
  "dateModified": "2018-03-08T09:44:33+02:00",
  "description": "Some tips and tricks on how to customize the scroll depth trigger in Google Tag Manager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.31 with theme Tranquilpeak 0.4.3-BETA">
    <title>Customize The Scroll Depth Trigger In Google Tag Manager | Simo Ahava's blog</title>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PZ7GMV9');</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/customize-scroll-depth-trigger/">
    
    <meta name="description" content="Some tips and tricks on how to customize the scroll depth trigger in Google Tag Manager.">
    <meta property="og:description" content="Some tips and tricks on how to customize the scroll depth trigger in Google Tag Manager.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Customize The Scroll Depth Trigger In Google Tag Manager">
    <meta property="og:url" content="/analytics/customize-scroll-depth-trigger/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Customize The Scroll Depth Trigger In Google Tag Manager">
    <meta name="twitter:description" content="Some tips and tricks on how to customize the scroll depth trigger in Google Tag Manager.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2018/03/scroll-depth-trigger-customizations.png">  
      <meta property="og:image" content="https://www.simoahava.com/images/2018/03/scroll-depth-trigger-customizations.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Customize The Scroll Depth Trigger In Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-03-08T09:44:33&#43;02:00">
        
  March 8, 2018

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/customize-scroll-depth-trigger/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              

<p>The <a href="https://www.simoahava.com/analytics/scroll-depth-trigger-google-tag-manager/">Scroll Depth trigger</a> in <a href="https://tagmanager.google.com/">Google Tag Manager</a> has a lot going for it. Tracking how far users scroll down a given page has <a href="http://cutroni.com/blog/2014/02/12/advanced-content-tracking-with-universal-analytics/">long since</a> been recognized as an important cog in the <em>engagement tracking</em> machine, and there have been <a href="http://scrolldepth.parsnip.io/">really</a> <a href="https://www.lunametrics.com/labs/recipes/scroll-tracking/">great</a> solutions for implementing scroll depth tracking for web analytics over the years.</p>

<p>With Google Tag Manager&rsquo;s native Scroll Depth trigger, it&rsquo;s tempting to think we now have a be-all end-all solution that covers all the bases. However, as with everything else in analytics, the native scroll depth trigger does require customization to provide you with relevant information about your content and the visitors interacting with it.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/scroll-depth-trigger-customizations.png" title="Customizing the scroll depth trigger">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/scroll-depth-trigger-customizations.png#ZgotmplZ" alt="Customizing the scroll depth trigger">
  
    </a>
  
  
</div>



<p>In this article, I&rsquo;ll explore some tricks that you might find useful when customizing the scroll depth trigger.</p>

<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-variable-percentages-depending-on-page">1. Variable percentages depending on page</a></li>
<li><a href="#2-only-fire-the-scroll-depth-trigger-on-relevant-pages">2. Only fire the scroll depth trigger on relevant pages</a></li>
<li><a href="#3-only-fire-tags-on-pages-where-thresholds-are-not-auto-collected">3. Only fire tags on pages where thresholds are not auto-collected</a></li>
<li><a href="#4-track-scroll-percentages-of-a-specific-content-element">4. Track scroll percentages of a specific content element</a></li>
<li><a href="#summary">Summary</a></li>
</ul></li>
</ul>
</nav>

<h2 id="1-variable-percentages-depending-on-page">1. Variable percentages depending on page</h2>

<p>The easiest customization you can make is to track different percentages depending on the page in question. For example, on article pages in my blog I might be interested in tracking in increments of 25% of vertical depth scrolled. But on list pages and summary pages I might only be interested in knowing who scrolls down to the bottom.</p>

<p>The <strong>Vertical Scroll Depths</strong> and <strong>Horizontal Scroll Depths</strong> fields require a number or a list of numbers (comma-separated) to work. Thus you can easily use a <strong>Custom JavaScript variable</strong> to return one list of numbers for a certain condition, and a different list of numbers for some other condition.</p>

<p>For example, here&rsquo;s a Custom JavaScript variable that does what I described in the first paragraph of this chapter.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">return</span> {{<span style="color:#a6e22e">Page</span> <span style="color:#a6e22e">Path</span>}}.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#39;/analytics/&#39;</span>) <span style="color:#f92672">&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;25,50,75,100&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;75,100&#39;</span>;
}</code></pre></div>

<p>This variable returns the string <code>25,50,75,100</code> if the page URL contains <code>/analytics/</code>, and <code>75,100</code> otherwise. Thus, on blog pages, it will measure scroll depth in increments of 25 percent, but on other pages only scrolling up to 75% and 100% in depth.</p>

<p>Then you can just add this variable to the trigger like so:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/get-variables-per-page-type.png" title="Variables per page type">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/get-variables-per-page-type.png#ZgotmplZ" alt="Variables per page type">
  
    </a>
  
  
</div>



<p>You don&rsquo;t <em>have</em> to use a Custom JavaScript variable. I&rsquo;m quirky in that I prefer to use it, always. But you could just as well use a <a href="https://www.simoahava.com/analytics/the-regex-table-variable-in-google-tag-manager/">RegEx Table variable</a> to achieve the same thing:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/regex-table-scroll-depths.png" title="Regex table for scroll depths">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/regex-table-scroll-depths.png#ZgotmplZ" alt="Regex table for scroll depths">
  
    </a>
  
  
</div>



<p>This is a simple customization, but it does allow you to measure relevant metrics for pages where it makes sense.</p>

<h2 id="2-only-fire-the-scroll-depth-trigger-on-relevant-pages">2. Only fire the scroll depth trigger on relevant pages</h2>

<p>This should be a no-brainer, too. It might make sense to have the scroll depth trigger fire your tags only on pages where you are genuinely interested in scroll depth tracking. For example, I&rsquo;m actually only interested in knowing how far users scroll on my blog pages and nowhere else. Thus I could make this simple modification to the trigger to delimit its firing capabilities:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/fire-only-on-relevant-pages.png" title="Fire scroll depth trigger only on relevant pages">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/fire-only-on-relevant-pages.png#ZgotmplZ" alt="Fire scroll depth trigger only on relevant pages">
  
    </a>
  
  
</div>



<p>A very simple modification but helps you collect only meaningful data.</p>

<h2 id="3-only-fire-tags-on-pages-where-thresholds-are-not-auto-collected">3. Only fire tags on pages where thresholds are not auto-collected</h2>

<p>One problem with the Scroll Depth trigger is that it doesn&rsquo;t care if the page is long or short. If you have a very short page, it&rsquo;s possible that all the thresholds are met when the page is loaded, which leads to a bunch of <code>gtm.scrollDepth</code> events pushed into <code>dataLayer</code>, firing your tags even though the user never scrolled!</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/automatically-fire-trigger.png" title="automatically fire scroll depth on short pages">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/automatically-fire-trigger.png#ZgotmplZ" alt="automatically fire scroll depth on short pages">
  
    </a>
  
  
</div>



<p>Luckily there&rsquo;s a nifty trick we can use to fight this. We can prevent the Scroll Depth trigger from functioning on pages where the <strong>ratio between browser viewport height and page height is too high</strong>. The <strong>browser viewport</strong> is the area of the web browser that is filled by your page. The page itself is the entire document, parts of which are likely to be invisible below the fold of the viewport.</p>

<p>The higher the ratio between the height of the visible viewport and the height of the page, the less there is to scroll. For example, if the visible viewport is 400 pixels in height, and the page height is also 400 pixels, there is nothing to scroll. The entire page will be visible in the viewport, and any vertical thresholds you have defined in the Scroll Depth trigger will auto-fire.</p>

<p>So, if you want to only fire the trigger when the user actually scrolls to 25%, 50%, 75%, and 100%, you need to make sure the ratio between the visible viewport height and the page height is <em>less than 0.25</em>. This means that less than 25% of the page is visible in the browser viewport.</p>

<p>To do this, you need to create a <strong>Custom JavaScript variable</strong> that looks like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#75715e">// Change this to reflect the percentages or pixels you want to fire the trigger for
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">verticalScrollDepths</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;25,50,75,100&#39;</span>;
  
  <span style="color:#75715e">// Change this to the MAXIMUM ratio of viewport height / page height you want the trigger to activate for
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">maximumRatio</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.25</span>;
  
  <span style="color:#75715e">// Change this to what thresholds should be tracked if the ratio is more than the maximum
</span><span style="color:#75715e"></span>  <span style="color:#75715e">// Leave it at &#39;101&#39; if you want to prevent the trigger from functioning in this case
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">fallbackDepths</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;101&#39;</span>;
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">heightOfPage</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">scrollHeight</span>, document.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">offsetHeight</span>, document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">clientHeight</span>, document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">scrollHeight</span>, document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">offsetHeight</span>);
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">heightOfViewport</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">max</span>(document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">clientHeight</span>, window.<span style="color:#a6e22e">innerHeight</span>);
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">ratio</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">heightOfViewport</span> <span style="color:#960050;background-color:#1e0010">/ heightOfPage;</span>
  
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ratio</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">maximumRatio</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">verticalScrollDepths</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">fallbackDepths</span>;
}</code></pre></div>

<p>First thing you&rsquo;ll need to do is edit the <code>verticalScrollDepths</code> variable to reflect the list of thresholds you want to track if the page passes the ratio check.</p>

<p>Then, edit the <code>maximumRatio</code> to reflect the maximum ratio (between 0 and 1) of the height of the visible viewport vs. height of the actual page. A value of <code>0.25</code> would mean that at most 25% of the page can be visible in the viewport when the page is loaded.</p>

<p>Finally, edit the <code>fallbackDepths</code> variable to give a &ldquo;default&rdquo; value for the cases when the maximum ratio is surpassed. If you want to prevent the Scroll Depth trigger from working at all when the maximum ratio is surpassed, use the value <code>101</code>, because a depth of 101% can never be tracked.</p>

<p>Then just add this to the &ldquo;Vertical Scroll Depths&rdquo; field and you should be all set.</p>

<p>Now the trigger will only fire in cases where the page is long enough to make sense for your tracking.</p>

<h2 id="4-track-scroll-percentages-of-a-specific-content-element">4. Track scroll percentages of a specific content element</h2>

<p>This is a bit trickier, but still doable with some JavaScript magic.</p>

<p>By default, the Scroll Depth trigger calculates vertical scrolling depth from the top of the page to the bottom of the page. But you might only be interested in knowing the scroll depths of a specific content element, such as the article body. For example, on my site, I don&rsquo;t really care if users scroll past the article end, through the Disqus comments, all the way to the bottom. But I do care if they scroll to the bottom of the main article body.</p>

<p>The way to make this work is to first calculate the height of the HTML element that contains the content whose scroll depths you want to track. Then, you need to check how far from the top of the page this element is. Finally, you need to tell the Scroll Depth trigger to track pixel thresholds that correspond with the desired depths of the content element, and add the distance to the top of the page to those numbers.</p>

<p>I think it&rsquo;s easier to illustrate.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/dynamic-scroll-thresholds.png" title="dynamically resolved scroll thresholds">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/dynamic-scroll-thresholds.png#ZgotmplZ" alt="dynamically resolved scroll thresholds">
  
    </a>
  
  
</div>



<p>As you can see, the total height of the element is <strong>1200 pixels</strong>. If I want to track scroll depth increments of 33%, it means that the respective marks are at 400, 800, and 1200 pixels. Since the top of the content element is exactly <strong>250 pixels</strong> from the top of the page, I need to add this number to the thresholds before I feed it into the Scroll Depth trigger, because it measures everything counting from the top of the page. Thus the final pixel depths would be <strong>650</strong>, <strong>1050</strong>, and <strong>1450</strong> pixels.</p>

<p>Now, since we don&rsquo;t want to hard-code these into the trigger, as that would lead to a horrible mess to manage (every single page would need its own trigger), we can use a <strong>Custom JavaScript variable</strong> to dynamically calculate the pixel depths.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#75715e">// Change the contents of this array to reflect the percentages of scroll depth you want to track
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">verticalPercentages</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">25</span>,<span style="color:#ae81ff">50</span>,<span style="color:#ae81ff">75</span>,<span style="color:#ae81ff">100</span>];
  
  <span style="color:#75715e">// Change this to fetch the element you want to track scrolling in
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">targetElement</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;div.post-content .main-content-wrap&#39;</span>);
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">elementHeight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">targetElement</span>.<span style="color:#a6e22e">offsetHeight</span>;
  
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">totalOffsetTop</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
  
  <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">targetElement</span>) {
    <span style="color:#a6e22e">totalOffsetTop</span> <span style="color:#f92672">+=</span> (<span style="color:#a6e22e">targetElement</span>.<span style="color:#a6e22e">offsetTop</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">targetElement</span>.<span style="color:#a6e22e">scrollTop</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">targetElement</span>.<span style="color:#a6e22e">clientTop</span>);
    <span style="color:#a6e22e">targetElement</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">targetElement</span>.<span style="color:#a6e22e">offsetParent</span>;
  }
  
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">verticalPercentages</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">percentage</span>) {
    <span style="color:#66d9ef">return</span> parseInt(<span style="color:#a6e22e">elementHeight</span> <span style="color:#f92672">*</span> (<span style="color:#a6e22e">percentage</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">0.01</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">totalOffsetTop</span>);
  }).<span style="color:#a6e22e">join</span>();
}</code></pre></div>

<p>You&rsquo;d then need to add this variable reference to the <strong>Pixel</strong> field in the Vertical Scroll Depths selection of the trigger:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2018/03/vertical-scroll-increments.png" title="Dynamically computed vertical scroll increments">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2018/03/vertical-scroll-increments.png#ZgotmplZ" alt="Dynamically computed vertical scroll increments">
  
    </a>
  
  
</div>



<p>This setup calculates dynamically the correct pixel thresholds based on the percentages you wrote in the <code>verticalPercentages</code> array. This way, 0 percent depth is the top of the content element (specified in <code>targetElement</code>), and 100 percent depth is the bottom of the content element.</p>

<p>With this workaround, you can get more meaningful measurements on pages which have lots of different content areas filling up the real estate of the document itself.</p>

<h2 id="summary">Summary</h2>

<p>These four tips ranged from the really simple to the moderately complex.</p>

<p>There are many ways in which you can customize Google Tag Manager&rsquo;s default trigger. With the scroll depth trigger, these customizations are almost necessary, because the trigger itself is lacking in some critical configurations options for now.</p>

<p>For example, I would like to see the following features in the trigger:</p>

<ul>
<li><p>Option to prevent the trigger from auto-firing if the thresholds have been crossed when the page loads.</p></li>

<li><p>Option to reset the trigger manually, which is useful especially on single-page apps.</p></li>

<li><p>Option to define a content element instead of the entire page for determining scroll depth.</p></li>
</ul>

<p>With the tips in this article, you can do plenty, but especially the feature where you could reset the trigger is sorely missing from the current implementation.</p>

<p>Do you have tips you want to share for Google Tag Manager&rsquo;s Scroll Depth trigger?</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/scroll-depth/">scroll depth</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/triggers/">triggers</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/javascript/">javascript</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/add-html-elements-page-programmatically/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Customize%20The%20Scroll%20Depth%20Trigger%20In%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/customize-scroll-depth-trigger/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/add-html-elements-page-programmatically/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Customize%20The%20Scroll%20Depth%20Trigger%20In%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/customize-scroll-depth-trigger/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/customize-scroll-depth-trigger/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=%25!s%28BADINDEX%29">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fwww.simoahava.com%2Fanalytics%2Fcustomize-scroll-depth-trigger%2F%20%25!s%28BADINDEX%29%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=%25!s%28BADINDEX%29">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=%25!s%28BADINDEX%29">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

