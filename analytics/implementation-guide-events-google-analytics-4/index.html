

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Implementation Guide For Events In Google Analytics 4 | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2020\/11\/google-analytics-4-events-implementation-guide.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/implementation-guide-events-google-analytics-4\/",
  "datePublished": "2020-11-16T07:00:51\u002b02:00",
  "dateModified": "2020-11-16T07:00:51\u002b02:00",
  "description": "",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Implementation Guide For Events In Google Analytics 4 | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/implementation-guide-events-google-analytics-4/">
    
    <meta name="description" content="On the surface, tracking events in Google Analytics 4 (GA4) is fairly simple. Events are, after all, pretty much the only thing you can collect in GA4.
It&rsquo;s easy to get tied down with endless comparisons to Universal Analytics, though. While I&rsquo;m steadfastly opposed to the idea that GA4 should resemble Universal Analytics, it&rsquo;s still important to cleanse the palate and approach GA4&rsquo;s event tracking with an open mind.
There are some comparisons that can be drawn between the new and the old, but what GA4 might lack in some features and use cases, it more than makes up for this with a more flexible data structure.">
    <meta property="og:description" content="On the surface, tracking events in Google Analytics 4 (GA4) is fairly simple. Events are, after all, pretty much the only thing you can collect in GA4.
It&rsquo;s easy to get tied down with endless comparisons to Universal Analytics, though. While I&rsquo;m steadfastly opposed to the idea that GA4 should resemble Universal Analytics, it&rsquo;s still important to cleanse the palate and approach GA4&rsquo;s event tracking with an open mind.
There are some comparisons that can be drawn between the new and the old, but what GA4 might lack in some features and use cases, it more than makes up for this with a more flexible data structure.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Implementation Guide For Events In Google Analytics 4">
    <meta property="og:url" content="https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Implementation Guide For Events In Google Analytics 4">
    <meta name="twitter:description" content="On the surface, tracking events in Google Analytics 4 (GA4) is fairly simple. Events are, after all, pretty much the only thing you can collect in GA4.
It&rsquo;s easy to get tied down with endless comparisons to Universal Analytics, though. While I&rsquo;m steadfastly opposed to the idea that GA4 should resemble Universal Analytics, it&rsquo;s still important to cleanse the palate and approach GA4&rsquo;s event tracking with an open mind.
There are some comparisons that can be drawn between the new and the old, but what GA4 might lack in some features and use cases, it more than makes up for this with a more flexible data structure.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2020/11/google-analytics-4-events-implementation-guide.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2020/11/google-analytics-4-events-implementation-guide.jpg">
    


    

      
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    
    <div id="_progress"></div>
    
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener ">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://mastodon.social/@ahava" target="_blank" rel="noopener me">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
      
      <span class="sidebar-button-desc">Mastodon</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
  

    <h1>
      Implementation Guide For Events In Google Analytics 4
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-11-16T07:00:51&#43;02:00">
        
  November 16, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p>On the surface, tracking <strong>events</strong> in <a href="https://developers.google.com/analytics/devguides/collection/ga4">Google Analytics 4</a> (GA4) is fairly simple. Events are, after all, pretty much the <em>only thing</em> you can collect in GA4.</p>
<p>It&rsquo;s easy to get tied down with endless comparisons to Universal Analytics, though. While I&rsquo;m steadfastly opposed to the idea that GA4 should resemble Universal Analytics, it&rsquo;s still important to <em>cleanse the palate</em> and approach GA4&rsquo;s event tracking with an open mind.</p>
<p>There are some comparisons that can be drawn between the new and the old, but what GA4 might lack in some features and use cases, it more than makes up for this with a more flexible data structure.</p>
<p>In this <strong>implementation guide</strong>, I&rsquo;ll take a look at the <strong>structure</strong>, <strong>composition</strong>, <strong>implementation</strong>, and <strong>evaluation</strong> of Google Analytics 4 events.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/google-analytics-4-events-implementation-guide.jpg" title="Events in Google Analytics 4">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/google-analytics-4-events-implementation-guide.jpg#ZgotmplZ" alt="Events in Google Analytics 4" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1792 1022'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>For more details on how events work in Google Analytics 4, do check out the following excellent resources:</p>
<ul>
<li>
<p><a href="https://support.google.com/analytics/answer/9322688?hl=en&amp;ref_topic=9756175">Official support documentation</a></p>
</li>
<li>
<p><a href="https://developers.google.com/analytics/devguides/collection/ga4">Official developer documentation</a></p>
</li>
<li>
<p><a href="https://www.kristaseiden.com/">Digital Debrief by Krista Seiden</a></p>
</li>
<li>
<p><a href="https://www.charlesfarina.com/">Charles Farina&rsquo;s Blog</a></p>
</li>
<li>
<p><a href="https://ken-williams.com/">Ken Williams&rsquo; blog</a></p>
</li>
</ul>
<p>These resources outmatch anything I could create by a wide margin, so make sure you bookmark them and follow them religiously!</p>
<div id="toc-container"><h1 id="table-of-contents">Table of Contents</h1> <input type="checkbox" id="show"><label for="show" id="showbtn"><h1 id="table-of-contents-mobile">Table of Contents</h1><span class="show">&nbsp;[+show]</span><span class="hide">&nbsp;[â€“hide]</span></label><nav id="TableOfContents">
  <ul>
    <li><a href="#structure-of-an-event">Structure of an event</a></li>
    <li><a href="#event-tag-in-google-tag-manager">Event tag in Google Tag Manager</a></li>
    <li><a href="#quotas-and-limits">Quotas and limits</a></li>
    <li><a href="#enhanced-measurement">Enhanced measurement</a></li>
    <li><a href="#bigquery-export-and-ga4-events">BigQuery export and GA4 events</a></li>
    <li><a href="#event-types">Event types</a>
      <ul>
        <li><a href="#automatically-collected-events">Automatically collected events</a></li>
        <li><a href="#recommended-events">Recommended events</a></li>
        <li><a href="#custom-events">Custom events</a></li>
      </ul>
    </li>
    <li><a href="#event-parameters">Event parameters</a>
      <ul>
        <li><a href="#special-parameters">Special parameters</a></li>
        <li><a href="#custom-parameters">Custom parameters</a></li>
        <li><a href="#user-properties">User properties</a></li>
      </ul>
    </li>
    <li><a href="#configuration-tag-and-events">Configuration tag and events</a></li>
    <li><a href="#ecommerce-events">Ecommerce events</a></li>
    <li><a href="#debugging-events">Debugging events</a>
      <ul>
        <li><a href="#tag-assistant-preview">Tag Assistant Preview</a></li>
        <li><a href="#developer-tools">Developer tools</a></li>
        <li><a href="#debugview">DebugView</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav></div>
<blockquote>
<p>This guide will be focused on data collection <strong>for the web</strong>, mainly using <strong>Google Tag Manager</strong>. While mobile app events and <code>gtag.js</code> implementations will be discussed in passing, I have chosen this particular focus due to the overwhelming popularity of Google Tag Manager as the primary means for collecting data to Google Analytics.</p>
</blockquote>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="structure-of-an-event">Structure of an event</h2>
<p>An event hit, when sent to GA4, comprises an <strong>event name</strong> and <strong>parameters</strong>.</p>
<p>Furthermore, parameters can be divided into <strong>automatically collected parameters</strong> and <strong>custom parameters</strong>.</p>
<p>For example, here is an event named <code>page_view</code>, sent with a bunch of parameters to GA4:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/event-parameters-page-view.jpg" title="Event parameters for page_view">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/event-parameters-page-view.jpg#ZgotmplZ" alt="Event parameters for page_view" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1364 914'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>There are a handful of <em>special</em> (reserved) parameters collected for measurement, such as:</p>
<ul>
<li><code>tid</code> - Measurement ID</li>
<li><code>sr</code> - Screen resolution</li>
<li><code>_dbg</code> - Debug mode active</li>
<li><code>seg</code> - User is considered engaged for this session</li>
</ul>
<blockquote>
<p>There are more details about these automatically collected parameters in a <a href="#special-parameters">later chapter</a>.</p>
</blockquote>
<p>I&rsquo;m also sending a couple of custom parameters:</p>
<ul>
<li>
<p><code>epn.readibility_median_grade</code> - A custom parameter sent as a <em>number</em>.</p>
</li>
<li>
<p><code>epn.readability_reading_time</code> - A custom parameter sent as a <em>number</em>.</p>
</li>
</ul>
<p>The prefix <code>epn</code> means a <em>number</em> parameter, whereas the prefix <code>ep</code> means a text parameter.</p>
<p>Here&rsquo;s an example of an event that sends text parameters <strong>and</strong> <a href="https://developers.google.com/analytics/devguides/collection/ga4/user-properties">user properties</a> (prefixed with <code>up</code>):</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/another-event-example.jpg" title="Event example">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/another-event-example.jpg#ZgotmplZ" alt="Event example" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1356 508'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Note that GA4 <strong>batches</strong> events, so if you fire more than one event in a very short time window, the events will be sent together in a single hit:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/batched-events.jpg" title="Batched events">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/batched-events.jpg#ZgotmplZ" alt="Batched events" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1480 414'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The hit above sent <em>two</em> events: a <code>page_view</code> event and a <code>scroll</code> event, both with some custom parameters.</p>
<p>In this article, I&rsquo;ll help you come to terms with the terminology used above.</p>

                
                  <h2 id="event-tag-in-google-tag-manager">Event tag in Google Tag Manager</h2>
<p>While Google Analytics 4 implementation via Google Tag Manager is still somewhat in beta (even if GA4 itself isn&rsquo;t), it&rsquo;s still more than possible to set an entire GA4 implementation up with GTM.</p>
<p>GTM has two tag types for collecting data to Google Analytics 4.</p>
<ul>
<li>
<p><strong>Google Analytics: GA4 Configuration</strong> - Recommended for GA4 data collection. Establishes the base settings and is used as the underlying configuration for event tags.</p>
</li>
<li>
<p><strong>Google Analytics: GA4 Event</strong> - Tag type used for sending events to GA4.</p>
</li>
</ul>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/gtm-ga4-tags.jpg" title="GTM&#39;s GA4 tags">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/gtm-ga4-tags.jpg#ZgotmplZ" alt="GTM&#39;s GA4 tags" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1278 560'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>In order to send your custom event hits to GA4, you need to establish a <strong>configuration</strong> first. You can check out my <a href="https://www.simoahava.com/analytics/getting-started-with-google-analytics-app-web/">original guide</a> for some (slightly outdated) tips on how to do this. See also the <a href="#configuration-tag-and-events">chapter below</a> for more details on how the configuration tag and event tags interact.</p>
<p>Within the <strong>GA4 Event</strong> tag type, you have some fields and settings you can configure the tag with.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/event-tag-example.jpg" title="Event tag example">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/event-tag-example.jpg#ZgotmplZ" alt="Event tag example" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1804 1574'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Configuration Tag</strong></td>
<td>If you want to use a configuration tag, you can select it here. Alternatively, you can ignore the configuration tag and just set a measurement ID manually.</td>
</tr>
<tr>
<td><strong>Event Name</strong></td>
<td>The <strong>name</strong> of the event as will be shown in GA4 reports. The recommended format is <code>snake_case</code>. Try to avoid using the same names as <a href="https://support.google.com/analytics/answer/9234069">automatically collected events</a> unless you know what you&rsquo;re doing.</td>
</tr>
<tr>
<td><strong>Event Parameters</strong></td>
<td>Add any parameters you want to send with the event to GA4. If you use a configuration tag, then any parameters set in that will also be applied to this hit (with the values fixed to what they were when the config tag was fired). Remember that if you want to use parameters in reports, you need to register them as <a href="https://support.google.com/analytics/answer/10075209?hl=en&amp;ref_topic=9756175">custom dimensions</a>.</td>
</tr>
<tr>
<td><strong>User Properties</strong></td>
<td>Add any user properties you want to set with this event. User properties are similar to user-scoped custom dimensions in Universal Analytics: they apply to all future hits from this user, until a new value is set for each. You do need to register them in GA4 for them to be available in reports.</td>
</tr>
</tbody>
</table>
<p>Once you&rsquo;ve configured the event name and the parameters to your liking, all you need to do is add a trigger to the tag and start collecting the data.</p>
<blockquote>
<p>If you&rsquo;re using Google Tag Manager&rsquo;s Preview mode to test your tag with (as you should), the hit will automatically have the <code>_dbg</code> parameter set, and you&rsquo;ll see it in <a href="https://support.google.com/analytics/answer/7201382?hl=en">DebugView</a>.</p>
</blockquote>

                
                  <h2 id="quotas-and-limits">Quotas and limits</h2>
<p>Unfortunately, GA4 events have some arbitrary, and frankly very annoying, quotas and limits that you need to be aware of. See <a href="https://support.google.com/analytics/answer/9267744?hl=en&amp;ref_topic=9756175">this article</a> for the full list.</p>
<p>For example, you should avoid collecting <strong>more than 500</strong> unique event names in GA4. Even though this limit doesn&rsquo;t seem to be technically enforced (you can collect 500+ unique events), you&rsquo;re still in violation of a collection limit, and Google can start enforcing this limit at any time.</p>
<p>Similarly, while you can collect more than 25 parameters in a single event tag, only 25 would be passed on to reporting.</p>
<blockquote>
<p>Note that even if you go over the quotas in event parameters and custom dimensions, they will still be passed through to the <a href="#bigquery-export-and-ga4-events">BigQuery export</a>, which makes the BigQuery export a <strong>super</strong> valuable thing to set up in every single GA4 implementation!</p>
</blockquote>
<p>These quotas and limits will most likely change as the platform matures, so I recommend keeping the documentation bookmarked so that you aren&rsquo;t blindsided by changes that could impact your data quality.</p>

                
                  <h2 id="enhanced-measurement">Enhanced measurement</h2>
<p><strong>Enhanced measurement</strong> is really neat. It takes a leaf out of <a href="https://ga-dev-tools.appspot.com/autotrack/">autotrack.js&rsquo;</a> book, and with a few flavors from Google Tag Manager&rsquo;s triggers, and bakes it all into a simple, automated tracking tool orchestrated by <code>gtag.js</code> itself.</p>
<p>Confused? Sorry about that. In short, enhanced measurement <strong>tracks stuff automatically</strong> just by adding the configuration tag to the page.</p>
<p>Enhanced measurement is controlled from the GA4 <a href="https://support.google.com/analytics/answer/9216061?hl=en">admin settings</a>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/enhanced-measurement.jpg" title="Enhanced Measurement">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/enhanced-measurement.jpg#ZgotmplZ" alt="Enhanced Measurement" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2072 1284'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>If you enable enhanced measurement, the following events will be tracked automatically (assuming you don&rsquo;t disable them) - see the <a href="https://support.google.com/analytics/answer/9216061?hl=en">official documentation</a> for more details.</p>
<ul>
<li><code>page_view</code> - sent with the page load as well as browser history events with single-page apps.</li>
<li><code>scroll</code> - sent when the user scrolls to the bottom of the page.</li>
<li><code>click</code> - sent when the user clicks an <strong>outbound link</strong>.</li>
<li><code>view_search_results</code> - sent when the user loads a page with a configured search query parameter.</li>
<li><code>video_start</code>, <code>video_progress</code>, <code>video_complete</code> - sent automatically when the user starts to view a video, progresses past predefined percentages of the total video length, and reaches the end of the video.</li>
<li><code>file_download</code> - sent when the user clicks a link to a file with one of the predefined extensions.</li>
</ul>
<p>Note that as these are, for all intents and purposes, <a href="#automatically-collected-events">automatically collected events</a>, you can&rsquo;t change or modify the parameters sent with these hits. You can <em>add</em> parameters to them by setting them globally in a configuration tag, but check out this <a href="#configuration-tag-and-events">later chapter</a> for some serious caveats to setting event parameters in a configuration tag!</p>
<blockquote>
<p>You can always opt-out of enhanced measurement tracking by modifying the GA4 data stream settings. For example, I&rsquo;m not a huge fan of the <code>scroll</code> event, so I never enable it - I&rsquo;d rather have full control over something as potentially spammy as scroll tracking.</p>
</blockquote>

                
                  <h2 id="bigquery-export-and-ga4-events">BigQuery export and GA4 events</h2>
<p>If you&rsquo;ve been reading my blog, you might have noticed that I&rsquo;m a <a href="https://www.simoahava.com/tags/bigquery/">huge fan</a> of Google BigQuery.</p>
<p>One of the <strong>main reasons</strong> to stop reading this <em>right now</em> and go and implement GA4 is because it comes with a <a href="https://support.google.com/analytics/answer/9358801?hl=en"><strong>free BigQuery export of all your GA4 data</strong></a>!</p>
<blockquote>
<p>BigQuery itself has, naturally, costs associated with usage, but you don&rsquo;t have to pay <em>Google Analytics</em> for the privilege of accessing raw data in the export.</p>
</blockquote>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/bigquery-link.jpg" title="BigQuery link">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/bigquery-link.jpg#ZgotmplZ" alt="BigQuery link" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2970 1420'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>For the purposes of <strong>event tracking</strong>, the BigQuery export has a huge, huge benefit.</p>
<blockquote>
<p>Quotas that would apply to events in reports do <strong>not</strong> apply to the data exported to BigQuery!</p>
</blockquote>
<p>In other words, if you&rsquo;ve reached the maximum number of custom dimensions, for example, all the custom parameters that you send to GA4 will still be exported into BigQuery.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/bigquery-data-example.jpg" title="BigQuery data sample">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/bigquery-data-example.jpg#ZgotmplZ" alt="BigQuery data sample" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2630 1230'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>This means that you might end up with <strong>two different approaches</strong> to the data collected by a single platform.</p>
<p>First is the data that&rsquo;s surfaced in the reporting UI. This is your everyday data - subject to quotas and limitations, but easy to manipulate and explore for useful insights.</p>
<p>The second is the raw data in BigQuery. This is the data set that you can take, sculpt, engineer, extract, and manipulate however you wish. It lets you break free of the prescriptive schema imposed by GA4, and you can start to truly unravel the wonders of the event stream model.</p>
<p>If you&rsquo;re curious about how BigQuery and GA4 play ball together, takes a look at <a href="https://www.simoahava.com/analytics/bigquery-query-guide-google-analytics-app-web/">this article</a> that Pawel Kapuscinski and I wrote!</p>

                
                  <h2 id="event-types">Event types</h2>
<p>Considering that GA4 is basically an <em>event stream model</em>, it&rsquo;s not surprising that events themselves are categorized in a number of different ways.</p>
<p>There are the <strong>automatically collected events</strong>, which GA4, one way or the other, collects without needing manual tagging.</p>
<p>Then there are a bunch of <strong>recommended events</strong>, which Google strongly recommends you to use (if they are applicable for your measurement needs).</p>
<p>Finally, if there are no automatically collected events or recommended events that suit your use case, you can always use <strong>custom events</strong>.</p>
<h3 id="automatically-collected-events">Automatically collected events</h3>
<p>Automatically collected events are enumerated <a href="https://support.google.com/analytics/answer/9234069">in this document</a>. Both app (Firebase SDK) and web (Global Site Tag / Google Tag Manager) automatically collect some events, and if you&rsquo;ve enabled <a href="#enhanced-measurement">enhanced measurement for the web stream</a>, even more events are collected without the need to manually tag the site.</p>
<p>Just to reiterate - an event is an <em>automatically</em> collected event when it doesn&rsquo;t require adding a <em>manual</em> tag or code snippet for the data collection. Some automatically collected events collect additional parameters that help flesh out the event metadata.</p>
<p>Here are the automatically collected events for the web:</p>
<table>
<thead>
<tr>
<th>Event name</th>
<th>Description</th>
<th>Trigger</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>click</code></td>
<td>Outbound link collection (when enabled via enhanced measurement).</td>
<td>Click on a link that leads out of the current domain.</td>
</tr>
<tr>
<td><code>file_download</code></td>
<td>File download tracking (when enabled via enhanced measurement).</td>
<td>Click on a link that downloads a file with one of the predefined extensions.</td>
</tr>
<tr>
<td><code>first_visit</code></td>
<td>First visit from a given client / user ID.</td>
<td>When an event is collected from a new client or user ID.</td>
</tr>
<tr>
<td><code>page_view</code></td>
<td>When a page is loaded or a browser history event happens (when enabled via enhanced measurement).</td>
<td>Page load or history event (<code>pushState</code>, <code>replaceState</code>, <code>popstate</code>).</td>
</tr>
<tr>
<td><code>scroll</code></td>
<td>Scroll tracking (when enabled via enhanced measurement).</td>
<td>Scroll to the bottom of the page.</td>
</tr>
<tr>
<td><code>session_start</code></td>
<td>An event starts a new session.</td>
<td>30 minutes have expired since the last event sent by the current user.</td>
</tr>
<tr>
<td><code>user_engagement</code></td>
<td>The session is considered an <em>engaged</em> session.</td>
<td>Active engagement with the website for more than 10 seconds, or a conversion event collected, or two or more pageviews collected.</td>
</tr>
<tr>
<td><code>video_complete</code></td>
<td>YouTube video was watched to completion (when enabled via enhanced measurement).</td>
<td>Video ends.</td>
</tr>
<tr>
<td><code>video_progress</code></td>
<td>YouTube video is watched past specific progress milestones (when enabled via enhanced measurement).</td>
<td>Video progresses past 10%, 25%, 50%, and 75%.</td>
</tr>
<tr>
<td><code>video_start</code></td>
<td>YouTube video watching begins (when enabled via enhanced measurement).</td>
<td>Video starts.</td>
</tr>
<tr>
<td><code>view_search_results</code></td>
<td>A search results page is viewed (when enabled via enhanced measurement).</td>
<td>A page is loaded with search query parameters in the URL.</td>
</tr>
</tbody>
</table>
<p>As you can see, many of the events listed have to do with enhanced measurement. However, there are some key events that are always collected, and interestingly they might not actually have their own hit types at all. Instead, they are <em>derived</em> from other events that are collected on the site.</p>
<p>For example, let&rsquo;s say you collect a <code>page_view</code> event from a user who hasn&rsquo;t visited your site before, and this <code>page_view</code> is the first hit they send. This is what you&rsquo;ll see in the request:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/event-params.jpg" title="Event params">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/event-params.jpg#ZgotmplZ" alt="Event params" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1794 194'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The <code>_fv</code> parameter denotes that this is a <strong>first visit</strong> event (the user is a new user), and the <code>_ss</code> parameter means that this event started a new session. When you look at the data in GA4, this one single <code>page_view</code> event actually splits into three separate GA4 events!</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/event-split.jpg" title="Event split">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/event-split.jpg#ZgotmplZ" alt="Event split" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 958 260'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>If you look at the request again, you&rsquo;ll see that the <code>seg</code> parameter has the value <code>0</code>. This means that the session is not considered engaged. When the user then sends another page view before the session timeout (30 minutes), this is what the parameter value becomes in the new page view event:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/engaged-session.jpg" title="Engaged session">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/engaged-session.jpg#ZgotmplZ" alt="Engaged session" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 840 220'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>On the web, <code>user_engagement</code> is collected in milliseconds, with each event that classifies as an engagement event sending the current engaged time with the <code>_et</code> parameter. This parameter value isn&rsquo;t surfaced in GA4 events, but it is available in BigQuery:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/engagement-time.jpg" title="Engagement time">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/engagement-time.jpg#ZgotmplZ" alt="Engagement time" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3390 700'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>For a platform that celebrates not being bound to an arbitrary concept of a <em>session</em>, it sure does seem like it hasn&rsquo;t shrugged off this arbitrariness entirely. Time will tell how these events will properly translate to the reports.</p>
<p>Having said that, the idea that a session is just an annotation (the <code>_ss</code> parameter and the dedicated events) rather than a key aggregation (as in Universal Analytics) is inspiring. It&rsquo;s much easier to reconstruct your <em>own</em> concept of what a meaningful aggregation metric is.</p>
<blockquote>
<p>See <a href="https://stuifbergen.com/2020/11/session-modeling-in-bigquery-sql-using-ga4-data-and-a-trip-to-paris/">this article</a> by Jules Stuifbergen for an example of how you can build your own session approach using BigQuery and the raw data export from GA4.</p>
</blockquote>
<h3 id="recommended-events">Recommended events</h3>
<p><strong>Recommended events</strong> are a curiosity, mainly because <em>at the time of writing</em> they have very little functional use in GA4.</p>
<p>Google has a <a href="https://support.google.com/analytics/answer/9267735?hl=en&amp;ref_topic=9756175">bunch of support pages</a> focused on telling you what semantics to use when collecting events for specific segments and industries.</p>
<p>For example, when the user logs in, Google instructs you to use an event with the name <code>login</code> and a parameter with the name <code>method</code>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/login-event.jpg" title="Login event">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/login-event.jpg#ZgotmplZ" alt="Login event" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1548 1190'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Why? Who knows. There&rsquo;s no benefit in the current events to collecting an event with the name <code>login</code> as opposed to, for example, <code>user_login</code>. However, it&rsquo;s a <em>recommended</em> event, so it has to carry some weight, right?</p>
<p>Well, again, time will tell. I&rsquo;m assuming some of these events get collected into their own dedicated reports. Hopefully, some will even be exempt from current quotas, ecommerce events in particular.</p>
<blockquote>
<p>In fact, ecommerce events are an exception to the rant above - they <strong>do</strong> have functional weight as they populate the monetization reports. Take a look at my <a href="https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">guide for ecommerce implementation in GA4</a> for more information.</p>
</blockquote>
<p>For now, if you want to add a new data collection tag to the site, take a look at the list of recommended events and see if you find one that fits your use case. If you do, use that, and try to use the recommended parameters as well. There&rsquo;s no harm in doing so, and at best you&rsquo;ll enable some cool functionality that Google will release in the near future.</p>
<p>However, if you don&rsquo;t find a recommended event that fits your use case perfectly, don&rsquo;t waste time trying to shoehorn a square piece into a round hole. Use <strong>custom events</strong> instead.</p>
<h3 id="custom-events">Custom events</h3>
<p>Once you&rsquo;ve exhausted the list of automatically collected and recommended events, and you can&rsquo;t find one that fits your tracking need, you can always send <strong>whatever event name you wish</strong>. Just note that there are some <a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#reserved_event_names">reserved names</a>.</p>
<p>Custom events are super powerful, even if Google is <a href="https://developers.google.com/analytics/devguides/collection/ga4/events#custom_events">oddly diminutive</a> about their use.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/custom-events.jpg" title="Custom events">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/custom-events.jpg#ZgotmplZ" alt="Custom events" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1796 480'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>For some reason, Google <em>really</em> wants you to use anything but custom events. I don&rsquo;t really agree with this. Custom events are your chance to choose how GA4 will serve your organization. Even if the data isn&rsquo;t surfaced in most of the standard reports (odd argument because custom events are certainly available in all the key parts of the reporting UI), they will be available in BigQuery.</p>
<p>No matter how long they&rsquo;ve been in the game, I don&rsquo;t think Google can or should prescribe how you are to do event tracking on any given website. Thus, take their recommended events with a grain of salt, especially since they have little functional impact today, and use custom events at your leisure.</p>
<p>Familiarize yourself with BigQuery - it really is the key to making the most of GA4. I love the <a href="https://support.google.com/analytics/answer/9327811?hl=en">analysis hub</a>, and I&rsquo;m sure I&rsquo;ll use the <a href="https://developers.google.com/analytics/devguides/reporting/data/v1">data API</a> religiously once it has a stable release, but nothing - <strong>nothing</strong> - will replace BigQuery as my analysis tool of choice.</p>

                
                  <h2 id="event-parameters">Event parameters</h2>
<p>As mentioned above, events comprise an <strong>event name</strong> and <strong>parameters</strong>.</p>
<p>Parameters are further split into <strong>special</strong> parameters (reserved names that contain technical details about the hit), <strong>custom</strong> parameters (text and number parameters), and <strong>user properties</strong>.</p>
<h3 id="special-parameters">Special parameters</h3>
<p>These parameters are collected with every single event, regardless of if it&rsquo;s collected automatically or tagged manually:</p>
<ul>
<li><code>ul</code> or <code>language</code>, which collects the browser language (e.g. <code>en-us</code>).</li>
<li><code>dl</code> or <code>page_location</code>, which collects the current URL.</li>
<li><code>dr</code> or <code>page_referrer</code>, which collects the referrer URL (or empty string if not available).</li>
<li><code>dt</code> or <code>page_title</code>, which collects the page title.</li>
<li><code>sr</code> or <code>screen_resolution</code>, which collects the screen resolution.</li>
</ul>
<p>There are additional &ldquo;special&rdquo; parameters that are collected in some cases. These include (but are not limited to):</p>
<ul>
<li><code>cid</code> - Client ID; the cookie identifier that helps GA4 recognize repeat visits from the same device.</li>
<li><code>uid</code> - User ID; an identifier you can set manually based on an authentication token, for example. This helps you unite cross-platform and cross-device browsing under a single login identifier.</li>
<li><code>sid</code> - Session ID.</li>
<li><code>sct</code> - Session count; how many sessions have been collected from the current user. NOTE! As this is collected with a client-side cookie that is not related to the Client ID cookie, it&rsquo;s possible this number doesn&rsquo;t actually reflect reality, and a BigQuery analysis might return different results, for example.</li>
<li><code>seg</code> - Session engaged; if the current session is considered &ldquo;engaged&rdquo;.</li>
<li><code>_fv</code> - First visit; if the current hit is the first hit collected from this user.</li>
<li><code>_ss</code> - Session start; if the current hit started a new session.</li>
</ul>
<h3 id="custom-parameters">Custom parameters</h3>
<p>You can set <strong>custom parameters</strong> by adding them manually to your tags. <a href="#automatically-collected-events">Automatically collected events</a> can collect some custom parameters automatically as well.</p>
<p>Custom parameters come in two flavors:</p>
<ul>
<li><strong>Text</strong> parameters, when the value set to this parameter is not a number (<code>ep.</code> prefix in the hit).</li>
<li><strong>Number</strong> parameters, when the value set to this parameter is a number (<code>epn.</code> prefix in the hit).</li>
</ul>
<p>The main difference is that text parameters can be used as custom dimensions and number parameters can be used as custom metrics.</p>
<p>To set parameters, you add them into the event tag like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/event-parameters.jpg" title="Event parameters">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/event-parameters.jpg#ZgotmplZ" alt="Event parameters" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 592'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Here I&rsquo;ve configured the two variables (<code>{{Readability - Get median grade}}</code> and <code>{{Readability - Get reading time}}</code>) to return numbers, so they get automatically converted to number parameters. The <code>user_level</code> is cast into a string by Google Tag Manager (as it&rsquo;s hard-coded into the tag field), and thus it&rsquo;s treated as a text parameter.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/text-and-number-parameters.jpg" title="Text and number parameters">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/text-and-number-parameters.jpg#ZgotmplZ" alt="Text and number parameters" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1544 324'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The only caveat to setting event parameters in the tag is that <a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#reserved_parameter_names">event parameter names cannot begin with <code>google_</code>, <code>ga_</code>, or <code>firebase_</code></a>.</p>
<p>When you want to use event parameters for analysis, they need to be <a href="https://support.google.com/analytics/answer/10075209?hl=en&amp;ref_topic=9756175">registered</a> as custom dimensions and metrics first.</p>
<p>If you have the <a href="#bigquery-export-and-ga4-events">BigQuery export</a> enabled, <strong>all</strong> event parameters will be exported to BQ whether they&rsquo;re registered as custom dimensions / metrics or not.</p>
<h3 id="user-properties">User properties</h3>
<p>User properties can be set with events as well. A user property acts similarly to Universal Analytics&rsquo; user-scoped custom dimensions, with the main difference that they apply from the <strong>hit they were set</strong> onwards rather than the <em>session</em>* they were set as in Universal Analytics.</p>
<p>User properties need to be <a href="https://support.google.com/analytics/answer/9269570?hl=en&amp;ref_topic=9756175"><em>registered</em> in the GA4 user interface</a> for them to be available in reports.</p>
<p>To set a user property, simply add it to the tag in the correct place:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/user-property-set.jpg" title="User property set in the tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/user-property-set.jpg#ZgotmplZ" alt="User property set in the tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1790 354'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>You&rsquo;ll see that it&rsquo;s included in the hit with the <code>up.</code> prefix.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/user-type-internal.jpg" title="User type internal">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/user-type-internal.jpg#ZgotmplZ" alt="User type internal" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1688 296'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>There are some user property names that cannot be used as they are reserved. Check the list <a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4/reference?client_type=gtag#reserved_parameter_names">here</a>.</p>

                
                  <h2 id="configuration-tag-and-events">Configuration tag and events</h2>
<p>When you create an event tag in Google Tag Manager, you have the option of choosing a <strong>configuration tag</strong> to set things up for the event hit.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/select-configuration-tag.jpg" title="Select configuration tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/select-configuration-tag.jpg#ZgotmplZ" alt="Select configuration tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 994 766'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The configuration tag is, surprise surprise, the same as the <a href="https://developers.google.com/gtagjs/reference/api#config"><code>config</code> command</a> with the global site tag (gtag.js).</p>
<p>You can use it to establish a shared configuration for your event hits, and you can even use it to <strong>set persistent event parameters</strong>.</p>
<p>The most common use case for the configuration tag is for <em>configuring</em> the GA4 implementation. You can add fields that configure how <a href="https://developers.google.com/gtagjs/devguide/cookies">cookies are set</a> or to <a href="https://developers.google.com/tag-manager/serverside/send-data#google-analytics-4">which endpoint to send the hits</a> (useful if you want to collect the data with <a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/">a server container</a>).</p>
<p>However, you can also set <strong>persistent</strong> events and user properties with the configuration tag as well. Any field names that you set that are <em>not</em> reserved (e.g. <code>cookie_domain</code>) will be treated as event parameters, and they will be included with <strong>every single event that uses this configuration tag</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/configuration-tag.jpg" title="Configuration tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/configuration-tag.jpg#ZgotmplZ" alt="Configuration tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1816 1264'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Note that there&rsquo;s one potentially pretty devastating <strong>caveat</strong> with setting persistent event parameters and user properties with the configuration tag:</p>
<p><strong>The values will be fixed to their initial values and will NOT be updated with every event</strong>.</p>
<p>In other words, when you set an event parameter or property in the configuration tag, it will be sent with every single event that uses the configuration tag. However, the value will always be whatever it was when the configuration tag fired.</p>
<p>It&rsquo;s thus <em>not</em> a useful way to set dynamic values like event timestamps or similar. Instead, it should be used to set parameters that are unlikely to change from one event to the next.</p>

                
                  <h2 id="ecommerce-events">Ecommerce events</h2>
<p>Ecommerce events are, at the time of writing, part of a very special and unique cast: they are <a href="#recommended-events">recommended events</a> that actually <em>do</em> something.</p>
<p>The typical structure of an ecommerce event is a prescribed <strong>event name</strong> (e.g. <code>add_to_cart</code>) together with an <code>items</code> array that reflects the items or products that were involved in the action.</p>
<p>If you want to start tagging your site for ecommerce data collection, I&rsquo;d like to direct you to my <a href="https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/">comprehensive implementation guide for GA4 ecommerce</a>.</p>
<p>One curiosity about ecommerce events is that the <code>items</code> structure is an actual <strong>array</strong>. Typically, event parameters are primitive values such as strings or numbers.</p>
<p>The <code>items</code> array is a refreshing change and hopefully, <em>hopefully</em>, a sign that GA4 will start opening up the rigid data structure inherited from Universal Analytics, where the only multi-dimensional values you can collect are <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-guide-for-google-tag-manager/">ecommerce objects</a>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/multidimensional-parameters.jpg" title="Multi-dimensional event parameters">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/multidimensional-parameters.jpg#ZgotmplZ" alt="Multi-dimensional event parameters" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2352 432'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>I mean, that syntax of turning the array of objects into this weird, proprietary string format doesn&rsquo;t make very much sense either, but at least you can send something other than just primitive values to GA4.</p>
<p>I really hope they&rsquo;ll extend the data model to accept JSON values, for example. Being able to send an array or object as an event parameter and then having it be automatically parsed for the reporting UI (and nested for BigQuery) would be an absolutely <em>incredible</em> feature to have in GA4. Something that&rsquo;s been missing from Google&rsquo;s analytics tools since day one.</p>

                
                  <h2 id="debugging-events">Debugging events</h2>
<p>For debugging the event implementation, there are three tools I use.</p>
<ol>
<li>
<p>The new <a href="https://www.simoahava.com/analytics/new-preview-mode-google-tag-manager/">Tag Assistant preview mode</a> for making sure that the event fields are populated correctly.</p>
</li>
<li>
<p>The web browser&rsquo;s <a href="https://developers.google.com/web/tools/chrome-devtools">developer tools</a> for making sure the hit payload contains all the correct values.</p>
</li>
<li>
<p>GA4&rsquo;s <a href="https://support.google.com/analytics/answer/7201382?hl=en">DebugView</a> for making sure the data ends up in GA4 in the correct format.</p>
</li>
</ol>
<blockquote>
<p>If you&rsquo;re a fan of browser extensions, I recommend <a href="https://www.thyngster.com/">David Vallejo&rsquo;s</a> excellent <a href="https://chrome.google.com/webstore/detail/gtmga-debug/ilnpmccnfdjdjjikgkefkcegefikecdc">GTM/GA Debug</a> which comes equipped with full GA4 debugging support!</p>
</blockquote>
<h3 id="tag-assistant-preview">Tag Assistant Preview</h3>
<p>When you&rsquo;re debugging your GA4 setup with Tag Assistant, you have <strong>two</strong> ways of validating your setup.</p>
<p>First, you can debug the <strong>GTM container</strong> where you&rsquo;ve implemented the GA4 tags. Choose the trigger event (e.g. DOM Ready), and make sure all the fields in the event tag look right.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/tag-assistant-gtm-preview.jpg" title="Tag assistant GTM preview">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/tag-assistant-gtm-preview.jpg#ZgotmplZ" alt="Tag assistant GTM preview" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3060 1350'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>You can also select the <strong>GA4 measurement ID</strong> to see if the hit actually dispatched.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/ga4-debugging.jpg" title="GA4 debugging">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/ga4-debugging.jpg#ZgotmplZ" alt="GA4 debugging" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3688 1460'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Note how the <code>page_view</code> event name is translated to <strong>Page View</strong> in the Tag Assistant view. Unfortunately, the debug experience for a GA4 tracker is still a bit unwieldy, and you just <em>have to know</em> what event names to look for. Luckily it&rsquo;s usually easy to click through the handful of available messages to find the one where your hit was sent.</p>
<p>When debugging with Tag Assistant, your focus should be on verifying that all the fields and parameters resolve to their correct values. If something is off, you know it needs to be fixed in GTM.</p>
<h3 id="developer-tools">Developer tools</h3>
<p>Even though the new GA4 measurement ID debug view shows you the hit was dispatched with certain values, I still like to do network request debugging using the browser&rsquo;s developer tools.</p>
<p>In GA4, the request is sent to a <code>/collect</code> endpoint just as with Universal Analytics. However, you&rsquo;ll be able to identify a GA4 payload by the <code>v=2</code> parameter as well as the GA4 measurement ID sent with the <code>tid</code> parameter.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/ua-vs-ga4.jpg" title="UA vs GA4 requests">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/ua-vs-ga4.jpg#ZgotmplZ" alt="UA vs GA4 requests" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1254 466'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Check the requests, make sure they return a <code>204</code> status code.</p>
<blockquote>
<p>GA4 requests return a <code>204</code> status because the content type for GA4 requests is <strong>text</strong>, but the response is always empty. It&rsquo;s still a successful request!</p>
</blockquote>
<p>Then go through the parameters and make sure all the values look good. This is what the actual request to GA4 will be, so if something is off at this point you&rsquo;ll know you need to fix it at its source (e.g. GTM).</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/network-tools.jpg" title="Network tools">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/network-tools.jpg#ZgotmplZ" alt="Network tools" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2380 330'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<h3 id="debugview">DebugView</h3>
<p>Finally, if you&rsquo;re previewing a Google Tag Manager container, the hit will be automatically sent to GA4&rsquo;s DebugView. If you want to manually enable DebugView for other hits (e.g. when not previewing a container), you can always set the <code>debug_mode</code> field to any value (though <code>true</code> probably makes most semantic sense).</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/debug-mode.jpg" title="Debug mode">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/debug-mode.jpg#ZgotmplZ" alt="Debug mode" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1804 574'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>When the request includes the <strong>debug mode</strong> parameter (<code>_dbg</code>), you&rsquo;ll find a real-time data stream of similar hits in the <strong>DebugView</strong> report in GA4.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/11/debugview.jpg" title="DebugView">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/11/debugview.jpg#ZgotmplZ" alt="DebugView" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 3002 2116'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>I can&rsquo;t emphasize enough how stupendously <em>amazing</em> this feature is. To be honest, it&rsquo;s my favorite part of GA4&rsquo;s reporting interface!</p>
<p>A real-time stream of debug events, with all the parameters available for perusal, and you can even see how some <a href="#automatically-collected-events">automatically collected events are generated</a> on the fly!</p>
<p>So, as the last step of debugging your event implementation, make sure DebugView agrees with what you think the event should look like. If everything looks good, the next step is to locate the data in your standard reports (might take some time to reach those).</p>
<p>If something looks off in DebugView, the issue might be at the source (something was wrong with GTM after all), or you could have messed something with GA4&rsquo;s data stream settings.</p>
<p>Debugging is an acquired skill - it&rsquo;s not easy to do because you need to know what you&rsquo;re looking for before you can flag it as a potential issue. However, what matters is <strong>consistency</strong> and the discipline to approach debugging with an <strong>end-to-end process</strong> rather than just cherry-picking individual parts of the event implementation for analysis.</p>
<p>It doesn&rsquo;t make sense to only look at your GTM setup if the issue can also be in your GA4 settings or vice versa.</p>

                
                  <h2 id="summary">Summary</h2>
<p>I hope this guide has been useful! Setting up event tracking with GA4 can be difficult at first because there&rsquo;s a <em>lot</em> of baggage inherited from Universal Analytics.</p>
<p>I want to share something that I&rsquo;ve mentioned numerous times in trainings and discussions when GA4 comes up:</p>
<p><strong>I don&rsquo;t want GA4 to repeat Universal Analytics&rsquo; mistakes!</strong></p>
<p>So many people are holding off with trying GA4 out because they want it to have everything that Universal Analytics had first. What&rsquo;s the point? Universal Analytics&rsquo; data model was far from perfect. Sessions, sampling, limited custom dimensions, views, filters, client IDs, just to name a few.</p>
<p>I really hope that GA4 finds a way out of the shackles imposed upon it by virtue of being an analytics platform created by the same company that also created Google Analytics.</p>
<p>GA4&rsquo;s data model is strictly event-driven, even if there are whiffs of sessions and users here and there. The hit-stream vibes are strong with this one, which might make it difficult to adjust after the awkward hierarchical event model of Universal Analytics.</p>
<p>With this guide, my purpose has been to show how you can approach implementing event tracking with Google Analytics 4. Remember that GA4 is still in its infancy - there&rsquo;s likely to be lots and lots of feature releases between now and soon. You&rsquo;ll be disappointed by some and elated by others, but one thing&rsquo;s for certain: it&rsquo;s a brave new world for Google&rsquo;s analytics tools. If they don&rsquo;t come with guns blazing out of the gate, they risk losing foothold in a world where viable analytics platforms are a dime a dozen.</p>
<p>I&rsquo;m excited at the prospects of all the things you can do with GA4&rsquo;s event stream model, but I&rsquo;m also a bit worried about how strong the pull of Universal Analytics will be.</p>
<p>What do you think about GA4&rsquo;s event tracking capabilities? Or, if you wish, feel free to unload your thoughts on GA4 in general.</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/ga4/">GA4</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics-4/">google analytics 4</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/events/">events</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/privacy/itp-debug-mode-in-safari/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/bulk-actions-google-tag-manager-triggers/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
              <i class="fa fa-brands fa-facebook"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Implementation%20Guide%20For%20Events%20In%20Google%20Analytics%204%20https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/%20via%20@SimoAhava">
              <i class="fa fa-brands fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
              <i class="fa fa-brands fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa-regular fa-comments"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://commento.simoahava.com/js/commento.js" data-no-livereload="true"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2022 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/privacy/itp-debug-mode-in-safari/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/bulk-actions-google-tag-manager-triggers/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
              <i class="fa fa-brands fa-facebook"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Implementation%20Guide%20For%20Events%20In%20Google%20Analytics%204%20https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/%20via%20@SimoAhava">
              <i class="fa fa-brands fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
              <i class="fa fa-brands fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa-regular fa-comments"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
          <i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Implementation%20Guide%20For%20Events%20In%20Google%20Analytics%204%20https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/%20via%20@SimoAhava">
          <i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/">
          <i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://commento.simoahava.com/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
         

    
  </body>
</html>

