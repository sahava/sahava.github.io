

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Track Form Engagement With Google Tag Manager | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2015/09/form-event-trigger.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/",
  "datePublished": "2015-09-01T07:56:30+00:00",
  "dateModified": "2015-09-01T07:56:30+00:00",
  "description": "A guide to tracking forms with Google Tag Manager.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.31 with theme Tranquilpeak 0.4.3-BETA">
    <title>Track Form Engagement With Google Tag Manager | Simo Ahava's blog</title>
    
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;

j.addEventListener('load', function() {
  var _ge = new	CustomEvent('gtm_loaded', { bubbles: true });
  d.dispatchEvent(_ge);
});

f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PZ7GMV9');
</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/track-form-engagement-with-google-tag-manager/">
    
    <meta name="description" content="A guide to tracking forms with Google Tag Manager.">
    <meta property="og:description" content="A guide to tracking forms with Google Tag Manager.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Track Form Engagement With Google Tag Manager">
    <meta property="og:url" content="/analytics/track-form-engagement-with-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Track Form Engagement With Google Tag Manager">
    <meta name="twitter:description" content="A guide to tracking forms with Google Tag Manager.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2015/09/form-event-trigger.png">  
      <meta property="og:image" content="https://www.simoahava.com/images/2015/09/form-event-trigger.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Track Form Engagement With Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-09-01T07:56:30Z">
        
  September 1, 2015

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              

<p>(Updated 13 August 2017)</p>

<p>A little over a year ago, in April 2014, I wrote the post &ldquo;<a href="https://www.simoahava.com/analytics/form-tracking-google-tag-manager/">Advanced Form Tracking In Google Tag Manager</a>&rdquo;, and it&rsquo;s been at the top of my best seller list ever since. Turns out that many people are rightfully passionate about making the web forms on their websites as fluid and intuitive as possible, since a web form is often the only thing that stands between a prospect and their transformation into clienthood.</p>

<p>I thought it was time to update the article to be <a href="https://support.google.com/tagmanager/?hl=en#topic=3441530">Google Tag Manager V2</a> compliant. It&rsquo;s not a major difference, but I have remodelled some of the JavaScript as well. Furthermore, I&rsquo;ve pulled together some new ideas explored in other articles, so now it&rsquo;s all conveniently packaged in this one big blog post.</p>

<p>At the heart of this article is still the methodology of picking up values from form fields. Perhaps you want to send some selection the user made to Google Analytics with the purpose of segmenting the data, or perhaps you want to identify values which most often block a conversion. Whatever the case, remember this: Google Analytics is very harsh towards <strong>PII</strong> (personally identifiable information) collection, and you need to be very vigilant in sanitizing any values you&rsquo;re collecting. You don&rsquo;t want to send <em>anything</em> to Google Analytics that can be used to identify the person who filled the form. The most typical value is an <strong>email address</strong>, which you should categorically avoid recording.</p>

<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-form-tracking-in-google-tag-manager">1. Form tracking in Google Tag Manager</a></li>
<li><a href="#2-why-the-form-trigger-doesn-t-always-work">2. Why the Form Trigger doesn&rsquo;t always work</a></li>
<li><a href="#3-built-in-variables">3. Built-In Variables</a></li>
<li><a href="#4-note-about-scope">4. Note about scope</a></li>
<li><a href="#5-capture-field-value">5. Capture field value</a></li>
<li><a href="#6-capture-selected-radio-button-value">6. Capture selected radio button value</a></li>
<li><a href="#7-capture-selected-checkbox-value">7. Capture selected checkbox value</a></li>
<li><a href="#8-capture-selected-drop-down-list-item-value">8. Capture selected drop-down list item value</a></li>
<li><a href="#9-capture-multiple-values">9. Capture multiple values</a></li>
<li><a href="#10-track-form-abandonment">10. Track form abandonment</a></li>
<li><a href="#11-track-form-field-timings">11. Track form field timings</a></li>
<li><a href="#12-one-form-element-multiple-forms-asp-net">12. One form element - multiple forms (ASP.NET)</a></li>
<li><a href="#13-summary">13. Summary</a></li>
</ul></li>
</ul>
</nav>

<p>Without further ado, let&rsquo;s get rolling. First, the basics&hellip;</p>

<h2 id="1-form-tracking-in-google-tag-manager">1. Form tracking in Google Tag Manager</h2>

<p>In the new version (V2) of Google Tag Manager, form tracking is no longer isolated as its own &ldquo;Form Listener&rdquo; Tag type. Instead, <a href="https://www.simoahava.com/analytics/auto-event-tracking-gtm-2-0/">auto-event tracking</a> has shifted to handlers embedded in the Triggers you use to fire Tags.</p>

<p>When you create a <strong>Form</strong> Trigger, it will activate on all pages where the <strong>Enable this trigger when&hellip;</strong> setting is valid. Remember, you only see this setting if either &ldquo;Wait For Tags&rdquo; or &ldquo;Check Validation&rdquo; is checked in the Trigger settings.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/form-event-trigger.png" title="Form Event Trigger">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/form-event-trigger.png#ZgotmplZ" alt="Form Event Trigger">
  
    </a>
  
  
</div>



<p>If the Trigger is active on a page, it will actively listen for a form submission. The settings in the Trigger are:</p>

<ol>
<li><p><strong>Wait For Tags</strong> - GTM will <em>pause</em> the form submission for as long as all the Tags that use the Trigger have fired or until the timeout (default 2000 milliseconds) expires.</p></li>

<li><p><strong>Check Validation</strong> - If this is checked, GTM will not fire the Trigger if the default action of the form (submit and redirect) is prevented. If left unchecked, the Trigger will go off whenever a <code>submit</code> event is registered, whether or not the default action is prevented.</p></li>

<li><p><strong>Enable this trigger when&hellip;</strong> - As mentioned above, this condition is for establishing <strong>on which pages</strong> GTM should listen for form submissions. There&rsquo;s really no performance penalty in having the listener active on all pages, but there are cases where <strong>Wait For Tags</strong> interferes with other JavaScript on the page, so you might want to only have the listener enabled on pages you&rsquo;ve tested it on.</p></li>

<li><p><strong>Fire this trigger when&hellip;</strong> - If you select &ldquo;Some Forms&rdquo; as the <em>This trigger fires on</em> setting, these conditions that govern when the Trigger makes any attached Tags go off. If you have just one form on the website, using &ldquo;All Forms&rdquo; here is justified. But if you want to specify you only want to fire the Tag when a form with <code>id=&quot;contactForm&quot;</code> should fire the Tag, you should add that as a condition here.</p></li>
</ol>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/fire-on.png" title="enable and fire trigger">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/fire-on.png#ZgotmplZ" alt="enable and fire trigger">
  
    </a>
  
  
</div>



<p>If you don&rsquo;t see Variables like &ldquo;Form ID&rdquo; or &ldquo;Form Classes&rdquo; in the Variables drop-down menu, you will need to activate them, as they are <a href="https://www.simoahava.com/analytics/variable-guide-google-tag-manager/">Built-In Variables</a>, introduced in Google Tag Manager V2.</p>

<p>However, there might be many reasons why a properly created Form Trigger doesn&rsquo;t work. So, read on&hellip;</p>

<h2 id="2-why-the-form-trigger-doesn-t-always-work">2. Why the Form Trigger doesn&rsquo;t always work</h2>

<p>For the Form Trigger to work, the form must dispatch a <strong>valid form submit event</strong> which also <strong>bubbles all the way to the document node</strong>. To de-gobbledegookify this statement, it means that:</p>

<ol>
<li><p>The form must dispatch a valid <code>submit</code> browser event</p></li>

<li><p>This event must not be prevented from propagating to the <code>document</code> node</p></li>
</ol>

<p>Those are the conditions. They seem simple enough, but you might be surprised how many forms out there violate either one.</p>

<p>The first means simply that GTM listens for a standard <code>submit</code> browser event, which is most often dispatched when an <code>input</code> or <code>button</code> element is clicked, where element type is <code>submit</code>.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/08/valid-input-submit.png" title="Valid input submit">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/08/valid-input-submit.png#ZgotmplZ" alt="Valid input submit">
  
    </a>
  
  
</div>



<p>The second means that the <code>submit</code> must be allowed to climb all the way up to the <code>document</code> node, where GTM&rsquo;s listener is waiting for the event. You see, GTM uses something called <em>event delegation</em> to listen for form submissions. This is much more economical than adding a listener to all the forms on the page individually.</p>

<p>The first condition is most commonly violated when the <code>submit</code> event is either cancelled (see below) or never dispatched in the first place. Many forms send their data with custom-built requests (e.g. jQuery&rsquo;s <a href="http://api.jquery.com/jquery.ajax/">$.ajax</a> or the <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest API</a>), and these prevent the <code>submit</code> event from working, since it&rsquo;s replaced with a custom dispatcher. Since the <code>submit</code> event is never dispatched, <strong>Google Tag Manager never records a form submission</strong>.</p>

<p>The second condition is violated when event propagation is stopped with <code>return false;</code> in a jQuery handler. Another common way to prevent propagation is to use <code>stopPropagation()</code> instead of <code>preventDefault()</code> on the event object.</p>

<p>I&rsquo;ve written about this phenomenon a number of times before:</p>

<ul>
<li><p><a href="https://www.simoahava.com/analytics/dont-gtm-listeners-work/">Why Don&rsquo;t My GTM Listeners Work?</a></p></li>

<li><p><a href="https://www.simoahava.com/gtm-tips/fix-problems-with-gtm-listeners/">#GTMTips: Fix Problems With GTM&rsquo;s Listeners</a></p></li>
</ul>

<p>The best way to fix the issue, however, is to open a line of communication with your developers, and tell them that GTM requires a standard <code>submit</code> browser event to propagate all the way to the <code>document</code> node to work.</p>

<p>If this can&rsquo;t be done, the next best thing is to ask the developer to implement a custom <code>dataLayer.push()</code> into the callback function which is invoked upon a successful submission. The piece of code could be something like:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">onFormSuccess</span>(<span style="color:#a6e22e">event</span>) {
  window.<span style="color:#a6e22e">dataLayer</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">dataLayer</span> <span style="color:#f92672">||</span> [];
  window.<span style="color:#a6e22e">dataLayer</span>.<span style="color:#a6e22e">push</span>({
    <span style="color:#a6e22e">event</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;formSubmissionSuccess&#39;</span>,
    <span style="color:#a6e22e">formId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;contactForm&#39;</span>
  });
  <span style="color:#75715e">// Rest of the success callback code
</span><span style="color:#75715e"></span>}</code></pre></div>

<p>This would push <code>formSubmissionSuccess</code> into the <code>dataLayer</code> as the value of the <code>event</code> key. Then, you can create a Custom Event Trigger, which waits for an event named <code>formSubmissionSuccess</code>. Using this Trigger would then fire a Tag when the form is successfully submitted.</p>

<p>There are other workarounds which involve e.g. polling the page until a thank you message is identified, or perhaps using a custom-built <a href="https://www.simoahava.com/analytics/google-tag-manager-dom-listener/">DOM Listener</a>. Unfortunately, all workarounds are far less robust than either fixing the form to respect GTM&rsquo;s Form Trigger requirements or the custom <code>dataLayer.push()</code> method described above.</p>

<h2 id="3-built-in-variables">3. Built-In Variables</h2>

<p>Google Tag Manager introduces a number of <a href="https://www.simoahava.com/analytics/variable-guide-google-tag-manager/">Built-In Variables</a> you can use to simplify form tracking. Make sure all the &ldquo;Form&rdquo; Variables are checked before continuing.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/09/form-built-in-variables.png" title="Form built-in variables">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2015/09/form-built-in-variables.png#ZgotmplZ" alt="Form built-in variables">
  
    </a>
  
  
</div>



<ul>
<li><p><strong>Form Element</strong> - returns an HTML Object which contains the form element that was submitted. You can use this Variable to dig deep into the object properties of the form itself.</p></li>

<li><p><strong>Form Classes</strong> - returns a string of values in the <code>class</code> attribute of the form that was submitted.</p></li>

<li><p><strong>Form ID</strong> - returns a string with the value stored in the <code>id</code> attribute of the form that was submitted.</p></li>

<li><p><strong>Form Target</strong> - returns a string with the value stored in the <code>target</code> attribute of the form that was submitted.</p></li>

<li><p><strong>Form URL</strong> - returns a string with the value stored in the <code>action</code> attribute of the form that was submitted.</p></li>

<li><p><strong>Form Text</strong> - returns the entire <em>text</em> content of the form that was submitted (NOT very useful).</p></li>
</ul>

<p>Many of the following solutions rely on these Built-In Variables.</p>

<h2 id="4-note-about-scope">4. Note about scope</h2>

<p>All the Variables described below are <strong>Custom JavaScript Variables</strong>. They are all scoped, by default, to the form that was submitted with <code>{{Form Element}}.querySelector...</code>. If you want to access <em>any</em> form on the page, submitted or not, you need to use the following syntax:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">form</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;#someform&#39;</span>);
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">field</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">querySelector</span>...</code></pre></div>

<p>Keep this in mind when applying the following solutions to your own measurement plan.</p>

<h2 id="5-capture-field-value">5. Capture field value</h2>

<p>This is a simple Custom JavaScript Variable which captures the value user has input into a form field. Do note that items like checkboxes, radio buttons, and drop-down lists work a little differently, which is why they are covered in their own chapters.</p>

<p><strong>Name</strong>: {{Field value}}</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">field</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">Element</span>}}.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;#inputFieldId&#39;</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">field</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">field</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
}</code></pre></div>

<p><strong>Description</strong>: This solution accesses the <code>value</code> attribute of the form field with ID <em>inputFieldId</em>, as long as its found within the form that was submitted. If no such field is found, then <em>undefined</em> is returned instead. Remember, do <strong>not</strong> collect personally identifiable information!</p>

<h2 id="6-capture-selected-radio-button-value">6. Capture selected radio button value</h2>

<p>This solution is for capturing the value of the checked radio button. The default solution is for capturing just one radio button value, i.e. accessing just one group. See chapter 9 for an example of how to access multiple values from similar elements.</p>

<p><strong>Name</strong>: {{Checked radio button}}</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">radioName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;radioName&#34;</span>;
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">checked</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">Element</span>}}.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;[name=&#34;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">radioName</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&#34;]:checked&#39;</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">checked</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">checked</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
}</code></pre></div>

<p><strong>Description</strong>: Returns the value of the checked radio button in the group with the name <em>radioName</em>. This group must exist within the form that was submitted. If no checked button is found, <em>undefined</em> is returned.</p>

<h2 id="7-capture-selected-checkbox-value">7. Capture selected checkbox value</h2>

<p>Returning the value of the selected checkbox within a group is done exactly the same way as how you&rsquo;d capture a radio button value. Both use the <code>checked</code> property to identify if an element is checked.</p>

<p>So use the solution from the previous chapter to capture checkbox values as well. Just remember that it only returns the value of the <strong>first</strong> checkbox in a group that was selected. If the user can check multiple checkboxes (as is usually the case), you might want to check chapter 9 for tips on how to do this.</p>

<h2 id="8-capture-selected-drop-down-list-item-value">8. Capture selected drop-down list item value</h2>

<p>To capture the selected item value in a drop-down list, checking for the <code>value</code> of the list itself will not work, as you&rsquo;d intuitively expect. Instead, you need to access the option in the list that was selected, and then capture its value.</p>

<p><strong>Name</strong>: {{Selected list item}}</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">selectList</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">Element</span>}}.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;#selectListId&#39;</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">selectList</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">selectList</span>.<span style="color:#a6e22e">options</span>[<span style="color:#a6e22e">selectList</span>.<span style="color:#a6e22e">selectedIndex</span>].<span style="color:#a6e22e">value</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
}</code></pre></div>

<p><strong>Description</strong>: First, the script retrieves the drop-down list with ID <em>selectListId</em>. Next, it returns the value of the selected option in the list. If the list does not exist, the script returns <em>undefined</em>.</p>

<h2 id="9-capture-multiple-values">9. Capture multiple values</h2>

<p>Sometimes you&rsquo;ll want to capture multiple values of some specified group. A prime example is the checkbox, where you can have multiple checked boxes in a single group. Here are some ideas for how to capture these values.</p>

<p><strong>Return concatenated string of checked item values</strong></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">groupName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;groupName&#34;</span>;
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">elems</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">Element</span>}}.<span style="color:#a6e22e">querySelectorAll</span>(<span style="color:#e6db74">&#39;[name=&#34;&#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">groupName</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&#34;]:checked&#39;</span>);
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">vals</span> <span style="color:#f92672">=</span> [];
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">len</span>;
  <span style="color:#66d9ef">for</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">len</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">elems</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">len</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">elems</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>);
  }
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39; &#39;</span>) <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
} </code></pre></div>

<p><strong>Description</strong>: This returns a concatenated string of all the checked item values within the group with name <em>groupName</em>. An example would be e.g. &ldquo;breakfast lunch&rdquo;, where the user chooses which meals they always eat out of &ldquo;breakfast&rdquo;, &ldquo;lunch&rdquo;, and &ldquo;dinner&rdquo;.</p>

<p>To return just the plain Array, so that you can process it further in the Tag which calls this Variable, change the <code>return</code> statement to:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">return</span> <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">vals</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;</code></pre></div>

<p>If you want to get the values in a multiple selection list, use the following script. It returns the results in a concatenated string again, but by following the tip in the previous paragraph you can return an Array instead.</p>

<p><strong>Return selected values in a multiple selection list</strong></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">selectList</span> <span style="color:#f92672">=</span> {{<span style="color:#a6e22e">Form</span> <span style="color:#a6e22e">Element</span>}}.<span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#39;#selectListId&#39;</span>);
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">selectList</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">selectList</span>.<span style="color:#a6e22e">options</span> <span style="color:#f92672">:</span> [];
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">vals</span> <span style="color:#f92672">=</span> [];
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">len</span>;
  <span style="color:#66d9ef">for</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">len</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">options</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">len</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">options</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">selected</span>) {
      <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">options</span>[<span style="color:#a6e22e">i</span>].<span style="color:#a6e22e">value</span>);
    }
  }
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">vals</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39; &#39;</span>) <span style="color:#f92672">:</span> <span style="color:#66d9ef">undefined</span>;
}</code></pre></div>

<p><strong>Description</strong>: This returns a concatenated string of all the selected options in a multiple selection drop-down list, which has the ID <em>selectListId</em> and which is within the submitted form.</p>

<h2 id="10-track-form-abandonment">10. Track form abandonment</h2>

<p>For ideas on how to track form abandonment, check out this article I wrote a short while ago:</p>

<p><a href="https://www.simoahava.com/analytics/track-form-abandonment-with-google-tag-manager/">Track Form Abandonment With Google Tag Manager</a></p>

<p>Lunametrics also has a <a href="http://www.lunametrics.com/blog/2014/11/10/form-tracking-google-tag-manager/">sweet guide</a> on how to achieve the same thing, albeit with a somewhat different approach.</p>

<p>My colleague at <a href="https://www.reaktor.com">Reaktor</a>, Lauri Piispanen, has also improved upon this solution, and you can check out his GitHub repo <a href="https://github.com/lauripiispanen/auto-gtm-form-abandonment">here</a>.</p>

<h2 id="11-track-form-field-timings">11. Track form field timings</h2>

<p>If you want to track how much time a user spends on your form, segmented by individual fields, check out the following article:</p>

<p><a href="https://www.simoahava.com/analytics/form-field-timing-with-google-tag-manager/">Form Field Timing With Google Tag Manager</a></p>

<p>It utilizes User Timings in Google Analytics to collect data on how much time users spend in the fields of your form by average.</p>

<h2 id="12-one-form-element-multiple-forms-asp-net">12. One form element - multiple forms (ASP.NET)</h2>

<p>I decided not to dwell on this topic too much, since it&rsquo;s so hacky and unreliable. The issue is that on e.g. ASP.NET sites, a single master form control wraps the entire page, and individual forms are just groups of elements under this one control.</p>

<p>The method I suggested in the <a href="https://www.simoahava.com/analytics/form-tracking-google-tag-manager/">previous guide</a> is still somewhat valid, however. The way it works is that:</p>

<ol>
<li><p>Fire a Custom HTML Tag when the submit button of the form is clicked</p></li>

<li><p>In this Custom HTML Tag, push the ID (or other relevant data) of the clicked element into the data layer</p></li>

<li><p>Create a Form Submit Trigger which looks for this value in the data layer</p></li>
</ol>

<p>This way the Form Submit Trigger should only fire when the form is submitted due to a click on the correct submit button.</p>

<p>I&rsquo;ve noticed this doesn&rsquo;t always work due to race conditions or just the general fragility of the event chain. Nevertheless, it&rsquo;s something you might want to try if you can&rsquo;t get developers to assist you.</p>

<p>If you <strong>do</strong> have an established line of communications with your developers, the solution is to ask them to create / edit the success callback of each form to push a custom <code>dataLayer</code> object when a form is submitted. This object should contain information about which form was submitted, and you can then create a Custom Event Trigger based on this information. Go back to chapter 2 for an example of such a push.</p>

<h2 id="13-summary">13. Summary</h2>

<p>This guide is a bit leaner than the first edition (at least it feels like so). That&rsquo;s because the new Form Submit Trigger has made many things easier, and I&rsquo;ve also rewritten the JavaScript to utilise methods like <code>querySelector</code> and properties like <code>selectedIndex</code> to get the desired result with far less hassle.</p>

<p>Once IE8 and older disappear entirely from the face of this earth (can&rsquo;t wait!), we can use even simpler language, with e.g. CSS3 pseudo-classes like <code>:checked</code>.</p>

<p>Do you think something relevant is missing from this guide? Let me know. I&rsquo;m always happy to update this with new solutions. Don&rsquo;t forget to read the <a href="https://www.simoahava.com/analytics/form-tracking-google-tag-manager/">previous version</a> of the guide as well, and check the <strong>comments</strong> section, too! Lots of great questions and answers there.</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/form-tracking/">form tracking</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics/">google analytics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/understanding-tag-sequencing-in-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Track%20Form%20Engagement%20With%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/prevent-tag-from-firing-in-iframe/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/understanding-tag-sequencing-in-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Track%20Form%20Engagement%20With%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Track%20Form%20Engagement%20With%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

