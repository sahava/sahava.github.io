

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Enhanced Ecommerce With A Custom JavaScript Variable | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2015\/07\/enhanced-ecommerce.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/enhanced-ecommerce-with-a-custom-javascript-variable\/",
  "datePublished": "2015-07-06T08:15:39\u002b00:00",
  "dateModified": "2015-07-06T08:15:39\u002b00:00",
  "description": "Measure Enhanced Ecommerce with a Custom JavaScript variable in Google Tag Manager, rather than directly via the dataLayer. This improves the flexibility of the setup.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Enhanced Ecommerce With A Custom JavaScript Variable | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
    
    <meta name="description" content="Measure Enhanced Ecommerce with a Custom JavaScript variable in Google Tag Manager, rather than directly via the dataLayer. This improves the flexibility of the setup.">
    <meta property="og:description" content="Measure Enhanced Ecommerce with a Custom JavaScript variable in Google Tag Manager, rather than directly via the dataLayer. This improves the flexibility of the setup.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Enhanced Ecommerce With A Custom JavaScript Variable">
    <meta property="og:url" content="https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Enhanced Ecommerce With A Custom JavaScript Variable">
    <meta name="twitter:description" content="Measure Enhanced Ecommerce with a Custom JavaScript variable in Google Tag Manager, rather than directly via the dataLayer. This improves the flexibility of the setup.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2015/07/enhanced-ecommerce.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2015/07/enhanced-ecommerce.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Enhanced Ecommerce With A Custom JavaScript Variable
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-07-06T08:15:39Z">
        
  July 6, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/#commento">Comments</a>
      
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/enhanced-ecommerce">Enhanced Ecommerce</a> is a very nice improvement to the pretty lame, <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/ecommerce">transaction-based Ecommerce</a> tracking in Universal Analytics. Instead of staring blindly at what happens on a receipt page, Enhanced Ecommerce expands your entire webstore into one large funnel labelled &ldquo;Shopping Behavior&rdquo;, and you&rsquo;re able to zoom in on the Checkout funnel as well. Also, the addition of product-scoped tracking is incredibly useful, and it&rsquo;s enabled us to think of <em>any</em> asset (<a href="https://www.simoahava.com/analytics/track-content-enhanced-ecommerce/">our content</a>, for example) on our site as something we could track through the Enhanced Ecommerce reports.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/07/enhanced-ecommerce.jpg" title="Enhanced Ecommerce">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/07/enhanced-ecommerce.jpg#ZgotmplZ" alt="Enhanced Ecommerce" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1908 882'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Tracking Enhanced Ecommerce through <a href="https://tagmanager.google.com">Google Tag Manager</a> is <a href="https://developers.google.com/tag-manager/enhanced-ecommerce">pretty straight-forward</a>. It boils down to a properly formatted Data Layer, which GTM will then use to send the hits to Google Analytics.</p>
<p>Now, the thing with the Data Layer is that you want to <em>try</em> to make it as platform-agnostic as possible. I mean, it doesn&rsquo;t make sense to encode objects in the Data Layer for one platform&rsquo;s needs alone, as a complex object syntax will make it quite difficult to reuse the same information for platforms which might have a completely different syntax.</p>
<p>Enhanced Ecommerce requires a <em>very</em> specific syntax in the Data Layer object. In addition to this, there are some very ill-designed, Google Analytics -specific, customizations you will need to implement if you want to utilize the Data Layer for Enhanced Ecommerce. An example of these customizations would be adding <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/custom-dims-mets">product-scoped Custom Dimensions and/or Metrics</a> to the payload.</p>
<h2 id="product-scoped-custom-definitions-the-gtm-way">Product-scoped Custom Definitions the GTM way</h2>
<p>Here&rsquo;s an example. Let&rsquo;s send a product-scoped Custom Dimension with our &ldquo;Add To Cart&rdquo; action. The Custom Dimension will tell whether the product is a promotion or a regular item. The code you&rsquo;d need in your Data Layer would look like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;addToCart&#39;</span>,
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;add&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;12345&#39;</span>,
        <span style="color:#a50">&#39;name&#39;</span> : <span style="color:#a50">&#39;ACME Flame Thrower&#39;</span>,
        <span style="color:#a50">&#39;dimension2&#39;</span> : <span style="color:#a50">&#39;Promotion&#39;</span>
      }]
    }
  }
});
</code></pre></div>
<p>This hit would prepare the Data Layer for an &ldquo;Add To Cart&rdquo; action, where the value <strong>&lsquo;Promotion&rsquo;</strong> is sent to GA to Custom Dimension index 2.</p>
<p>Now, this would be fine in a perfect world, where you have an incredibly agile cooperation model with your own developers and with the developers of third-party platforms you have on your site. If the Custom Dimension should change, you can just quickly ask them to push an update to the Data Layer, where <code>dimension2</code> is replaced with the new index number.</p>
<p>However, this is rarely the reality. Also, all other parts of the Data Layer object above can be easily reused in other platforms, and the key names (e.g. &lsquo;id&rsquo;, &lsquo;name&rsquo;) are self-explanatory, but &lsquo;dimension2&rsquo; just won&rsquo;t ring a bell with platforms that do not think in terms of <em>dimensions</em>. So we&rsquo;ve taken an agnostic Data Layer and turned it very proprietary, respecting the needs of one single platform (Google Analytics) alone.</p>
<h2 id="use-a-custom-javascript-variable-instead">Use a Custom JavaScript Variable instead</h2>
<p>Turns out that you can use a <a href="https://developers.google.com/tag-manager/enhanced-ecommerce#macro">Custom JavaScript Variable to push Enhanced Ecommerce</a> payloads to Google Analytics as well:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/07/enhanced-ecommerce-add-to-cart.jpg" title="Enhanced Ecommerce Custom JavaScript Variable">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/07/enhanced-ecommerce-add-to-cart.jpg#ZgotmplZ" alt="Enhanced Ecommerce Custom JavaScript Variable" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 714 414'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>We can thus use a Custom JavaScript Variable to do all the platform-specific customizations, and we can leave our Data Layer as generic as possible.</p>
<p>So, let&rsquo;s assume we still have the Data Layer in its normal state, but without the &lsquo;dimension2&rsquo; key in it:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#0aa">window</span>.dataLayer = <span style="color:#0aa">window</span>.dataLayer || [];
<span style="color:#0aa">window</span>.dataLayer.push({
  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;addToCart&#39;</span>,
  <span style="color:#a50">&#39;ecommerce&#39;</span> : {
    <span style="color:#a50">&#39;add&#39;</span> : {
      <span style="color:#a50">&#39;products&#39;</span> : [{
        <span style="color:#a50">&#39;id&#39;</span> : <span style="color:#a50">&#39;12345&#39;</span>,
        <span style="color:#a50">&#39;name&#39;</span> : <span style="color:#a50">&#39;ACME Flame Thrower&#39;</span>
      }]
    }
  }
});
</code></pre></div>
<p>We want to fire the GA Tag, which sends the Add To Cart action to Google Analytics, when this payload is pushed into Data Layer, but we want to also add the Custom Dimension to the payload without having to modify the <code>dataLayer.push()</code> method.</p>
<p>To make this happen, you will first need to create a new <strong>Data Layer Variable</strong>, which returns the &lsquo;ecommerce&rsquo; payload:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/07/dlv-ecommerce.jpg" title="Data Layer Variable ecommerce">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/07/dlv-ecommerce.jpg#ZgotmplZ" alt="Data Layer Variable ecommerce" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 756 902'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>This Variable returns the value of the &lsquo;ecommerce&rsquo; key in the data model. Note, I&rsquo;m using <strong>Version 1</strong> of the Data Layer, because that&rsquo;s what GTM uses for Enhanced Ecommerce. It protects your Enhanced Ecommerce objects from something called a <em>recursive merge</em>, which would result in each &lsquo;ecommerce&rsquo; payload persisting all the previous objects, e.g. &lsquo;promotions&rsquo; and &lsquo;impressions&rsquo; in each hit, resulting in a lot of extra, invalid information being sent to Google Analytics.</p>
<p>Once you have that Variable in place, you will need the actual Custom JavaScript Variable, which I&rsquo;ve named <strong>{{EEC - AddToCart With Dimension}}</strong>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  <span style="color:#00a">var</span> dIndx = <span style="color:#a50">&#39;2&#39;</span>; <span style="color:#aaa;font-style:italic">// This is the Custom Dimension Index
</span><span style="color:#aaa;font-style:italic"></span>  <span style="color:#aaa;font-style:italic">// Make a shallow copy of the ecommerce object
</span><span style="color:#aaa;font-style:italic"></span>  <span style="color:#00a">var</span> ecom = JSON.parse(JSON.stringify({{DLV - ecommerce}}));
  <span style="color:#00a">var</span> ecomAddProducts = ecom[<span style="color:#a50">&#39;add&#39;</span>][<span style="color:#a50">&#39;products&#39;</span>];
  ecomAddProducts[<span style="color:#099">0</span>][<span style="color:#a50">&#39;dimension&#39;</span> + dIndx] = ecomAddProducts[<span style="color:#099">0</span>][<span style="color:#a50">&#39;id&#39;</span>] === <span style="color:#a50">&#39;12345&#39;</span> ? <span style="color:#a50">&#39;Promotion&#39;</span> : <span style="color:#a50">&#39;Regular&#39;</span>;
  <span style="color:#00a">return</span> {<span style="color:#a50">&#39;ecommerce&#39;</span> : {<span style="color:#a50">&#39;add&#39;</span> : {<span style="color:#a50">&#39;products&#39;</span> : ecomAddProducts}}};
}
</code></pre></div>
<p>On the first line, you define the Custom Dimension index. Next, you create a little placeholder variable for the &lsquo;products&rsquo; key in the <code>{'ecommerce' : {'add' : {}} }</code> object.</p>
<p>Next, you&rsquo;ll make a copy of the original {{DLV - ecommerce}} variable by using the <code>JSON.parse(JSON.stringify(obj))</code> trick. This is to prevent multiple iterations of the Custom JS variable from inadvertently running whatever modifications you do over and over again on the source variable, resulting in unexpected results.</p>
<p>Then, you basically check if the first (only) product in the &lsquo;products&rsquo; Array has ID &lsquo;12345&rsquo;. If it does, you add the Custom Dimension key &lsquo;dimension2&rsquo; into the product object with the value &lsquo;Promotion&rsquo;. If the ID is something else, the dimension value is set to &lsquo;Regular&rsquo;.</p>
<p>You can be very creative here, fetching valid IDs from a Lookup Table, for example. The key thing is to <strong>return a complete &lsquo;ecommerce&rsquo; object</strong> in the Custom JavaScript Variable. That&rsquo;s how GTM works. If you don&rsquo;t return a syntactically valid &lsquo;ecommerce&rsquo; object, Enhanced Ecommerce will not work.</p>
<p>Just to clarify: a <em>valid</em> &lsquo;ecommerce&rsquo; object means that the payload needs to be crafted according to how you would create the Data Layer object. A good place to find more information is in the <a href="https://developers.google.com/tag-manager/enhanced-ecommerce">developer guide</a> for the Enhanced Ecommerce Data Layer.</p>
<h2 id="things-to-keep-in-mind">Things to keep in mind</h2>
<p>To make the Custom JavaScript Variable method work with GTM, you will need to remember the following, easy steps:</p>
<ol>
<li>
<p>Use a Custom JavaScript Variable which returns a valid <code>{'ecommerce' : {}}</code> object</p>
</li>
<li>
<p>Uncheck <strong>Use data layer</strong> in your GA Tag settings</p>
</li>
<li>
<p>Select the variable you created in (1) in the drop-down menu labelled <strong>Read data from variable</strong></p>
</li>
</ol>
<p>That&rsquo;s all you need to change. Your Tag should still fire on the Custom Event Trigger for Event Name: <strong>addToCart</strong>. This time, however, instead of using the Data Layer &lsquo;ecommerce&rsquo; object, it uses the &lsquo;ecommerce&rsquo; object returned by your Custom JavaScript Variable.</p>
<h2 id="use-cases">Use cases</h2>
<p>The best way to use the Custom JavaScript Variable has already been mentioned a few times in this article. Use the Custom JS Variable to turn a generic Data Layer object into a Google Analytics -specific payload. This means that you can ask your developers to implement a very generic Ecommerce payload with the &ldquo;Add To Cart&rdquo; action. This makes it easier for other platforms to tap into the data, as you don&rsquo;t need to know how Google Analytics works to be able to understand how the object is built.</p>
<p>Another good use case is for product-specific Custom Dimensions and Metrics, which I&rsquo;ve showed an example of in this article. It doesn&rsquo;t really make sense to add those to the Data Layer, as dimension and metrics can change, and adding keys that are <em>only</em> used by one platform is a bit counter-intuitive.</p>
<p>I&rsquo;ve found myself using the Custom JavaScript Variable method in almost all the implementations I work with, even if the Data Layer &lsquo;ecommerce&rsquo; object is well-formed to begin with. I like the idea that I can flexibly change the payload on a whim, without having to update the Data Layer.</p>
<p>Naturally, if the changes are fundamental, such as product names changing or IDs receiving a new format, you will want to update the on-page Data Layer instead of encoding these changes in your Custom JavaScript Variable. But the Custom JavaScript Variable is perfect for implementing platform-specific payload syntax in your Ecommerce tracking.</p>
<p>Have you got some other use cases for the Custom JavaScript Variable method? Please, do share!</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/enhanced-ecommerce/">enhanced ecommerce</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/universal-analytics/">universal analytics</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/measure-cart-value-in-enhanced-ecommerce/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/cross-domain-tracking-across-subdomains/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20With%20A%20Custom%20JavaScript%20Variable%20https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/measure-cart-value-in-enhanced-ecommerce/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/cross-domain-tracking-across-subdomains/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20With%20A%20Custom%20JavaScript%20Variable%20https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Enhanced%20Ecommerce%20With%20A%20Custom%20JavaScript%20Variable%20https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/enhanced-ecommerce-with-a-custom-javascript-variable/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

