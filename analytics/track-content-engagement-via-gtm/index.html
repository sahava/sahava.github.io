

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Track Content Engagement Via GTM | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2016\/03\/engagement.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/track-content-engagement-via-gtm\/",
  "datePublished": "2016-03-08T15:12:31\u002b00:00",
  "dateModified": "2016-03-08T15:12:31\u002b00:00",
  "description": "How to track the actual time users are engaging with your content using Google Analytics. You can use Google Tag Manager to setup the tracking.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Track Content Engagement Via GTM | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/track-content-engagement-via-gtm/">
    
    <meta name="description" content="How to track the actual time users are engaging with your content using Google Analytics. You can use Google Tag Manager to setup the tracking.">
    <meta property="og:description" content="How to track the actual time users are engaging with your content using Google Analytics. You can use Google Tag Manager to setup the tracking.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Track Content Engagement Via GTM">
    <meta property="og:url" content="https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Track Content Engagement Via GTM">
    <meta name="twitter:description" content="How to track the actual time users are engaging with your content using Google Analytics. You can use Google Tag Manager to setup the tracking.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2016/03/engagement.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2016/03/engagement.jpg">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    
    <div id="_progress"></div>
    
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
  

    <h1>
      Track Content Engagement Via GTM
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2016-03-08T15:12:31Z">
        
  March 8, 2016

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/track-content-engagement-via-gtm/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p>When looking at <a href="https://analytics.google.com">Google Analytics</a> reports, you&rsquo;d think you get a pretty good idea of how people are interacting with your site, right? I mean, you&rsquo;re tracking events here, pageviews there, and user timings, custom dimensions, custom metrics, and calculated metrics are all part of your daily lingo. But you&rsquo;re also probably aware of how futile this tracking is. After all, all you&rsquo;re seeing are numbers that reflect certain outcomes the visitors have produced on the website, and how these outcomes match against your preconceived goals and objectives, right? It&rsquo;s difficult to wrap your head around the individual use cases that constantly take place on the site, and to draw overarching conclusions or unearth business trends on the basis of these data sets can be very problematic indeed.</p>
<p>In anticipation of my upcoming talk at <a href="http://smxmuenchen.de">SMX München</a>, I thought I&rsquo;d show a pretty nifty way of adjusting what <strong>content engagement</strong> means on an article-by-article basis, and how to encode this using <a href="https://tagmanager.google.com/">Google Tag Manager</a>.</p>
<p>Since this blog is pretty much the only digital property I have a stake in, it&rsquo;s very important to me to uncover <strong>meaning</strong> in the content data I&rsquo;m looking at. I&rsquo;ve done this numerous times before in articles such as:</p>
<ul>
<li>
<p><a href="https://www.simoahava.com/analytics/track-content-enhanced-ecommerce/">Track Content With Enhanced Ecommerce</a></p>
</li>
<li>
<p><a href="https://www.simoahava.com/analytics/use-page-visibility-api-google-tag-manager/">Use Page Visibility API With GTM</a></p>
</li>
<li>
<p><a href="https://www.simoahava.com/analytics/track-form-engagement-with-google-tag-manager/">Track Form Engagement With Google Tag Manager</a></p>
</li>
</ul>
<p>And so on and so forth. But what I haven&rsquo;t yet tackled, at least not really, is <strong>how much time users are actually <em>spending engaged</em> with my content</strong>. In other words, I want to see something like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/engagement.jpg" title="Content engagement GA report">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/engagement.jpg#ZgotmplZ" alt="Content engagement GA report" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2318 582'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>I&rsquo;m interested in knowing, among other things, out of <strong>all</strong> of the time users spend on the page, how much of it are they engaged with the page.</p>
<p>!!! <strong>UPDATE</strong> !!!
I&rsquo;ve had to rewrite parts of this article due to a severe limitation in utilizing User Timings for data collection. Please read on until you reach step <strong>4. User Timings</strong>. At the beginning of that step is another <strong>UPDATE</strong>, where I link you to the <a href="https://www.simoahava.com/analytics/track-content-engagement-part-2/">revised version</a> of the article. The revised article picks up right after <strong>Step 3</strong> and takes you all the way to the end, so you don&rsquo;t have to jump back here unless you want to enjoy the comments.
!!! <strong>END UPDATE</strong> !!!</p>
<p>Now, this is a very difficult topic to breach, so I had to ground it somewhere. Enter <a href="https://www.yle.fi/">Yleisradio</a> (YLE; Finnish Broadcasting Company) and <a href="https://chartbeat.com">Chartbeat</a>.</p>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="yle-and-chartbeat">YLE and Chartbeat</h2>
<p>A week ago I had the pleasure of visiting some friends at YLE with a group of like-minded people, all interested in analytics. What Jaakko Ojalehto, Leevi Kokko, and Sami Mattila, the guys from YLE, showed us, was how they&rsquo;ve replicated <a href="https://chartbeat.com/public-release-methodology/">Chartbeat&rsquo;s research</a> on engagement, and how they&rsquo;re utilizing this data to feed their reporters and journalists with more actionable data about how their content is faring on this enormous digital property.</p>
<p>Chartbeat&rsquo;s research showed, among other things, that the engagement window of a single user averages at around 5 seconds. So after interacting with the page with clicks, mouse movements, keyboard presses, and scrolls, the user would stay engaged for another 5 seconds, before starting to idle or changing to another window or browser tab:</p>
<blockquote>Chartbeat’s JavaScript is constantly listening for acts of engagement on the in-focus webpage within an active browser (full list of events indicating engagement included below). These checks indicate when a user is actively engaged on the page and, based on a study conducted by Chartbeat, will likely remain so for five additional seconds.</blockquote>
<p>As this quote from their &ldquo;<a href="https://chartbeat.com/public-release-methodology/">Description of Methodology</a>&rdquo; page implies, <em>engagement</em> is something we can, and should, measure.</p>
<p>So I wanted to replicate what the YLE guys have been doing while replicating what Chartbeat have been doing. And I wanted to provide a simple means of doing so via Google Tag Manager. Thus the rest of this blog post will cover the steps required to send timing data to Google Analytics, where you&rsquo;re measuring the cumulative time each visitor is <strong>engaged</strong> with any piece of content on your site.</p>
<p>This will give you a better understanding of <em>active time spent on the page</em>, as the <strong>Average Time On Page</strong> just doesn&rsquo;t describe accurately the complexity of engagement. Time On Page is, after all, quite a <a href="http://cutroni.com/blog/2012/02/29/understanding-google-analytics-time-calculations/">complex</a> and <a href="http://help.analyticsedge.com/googleanalytics/misunderstood-metrics-time-on-page-session-duration/">misleading</a> metric, even if there are some <a href="http://www.analytics-ninja.com/blog/2015/02/real-time-page-google-analytics.html">excellent ways</a> to improve it.</p>

                
                  <h2 id="what-youll-need">What you&rsquo;ll need</h2>
<p>To make it all work, you&rsquo;ll need:</p>
<ol>
<li>
<p><strong>Custom HTML Tag</strong> (GTM) - To setup the script which measures engagement time</p>
</li>
<li>
<p><strong>Custom Event Trigger</strong> (GTM) - To fire the User Timings Tag when the timings have been calculated</p>
</li>
<li>
<p><strong>Data Layer Variable</strong> (GTM) - To pick up the time engaged from <code>dataLayer</code></p>
</li>
<li>
<p><strong>User Timings Universal Analytics Tag</strong> (GTM) - To send the timing data to Google Analytics</p>
</li>
<li>
<p><strong>Calculated Metric</strong> (GA) - To calculate the average time engaged per page</p>
</li>
<li>
<p><strong>Custom Report</strong> (GA) - To display the data correctly</p>
</li>
</ol>
<p>Note that there are some caveats to what you can do in Google Analytics, which depend on whether you&rsquo;re already using User Timings in your data collection. I&rsquo;ll get back to those when discussing the calculated metric you need to create.</p>

                
                  <h2 id="1-custom-html-tag">1. Custom HTML Tag</h2>
<p>Create a new <strong>Custom HTML Tag</strong>, give it some fancy name, and copy-paste the following code within:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">script</span>&gt;
  (<span style="color:#00a">function</span>() {
    <span style="color:#00a">var</span> startEngage = <span style="color:#00a">new</span> <span style="color:#0aa">Date</span>().getTime();
    <span style="color:#00a">var</span> timeEngaged = <span style="color:#099">0</span>;
    <span style="color:#00a">var</span> idleTime = <span style="color:#099">0</span>;
    <span style="color:#00a">var</span> idle = <span style="color:#00a">true</span>;
    <span style="color:#00a">var</span> idleReport = <span style="color:#00a">false</span>;
    <span style="color:#00a">var</span> idleTimer, reportTimer;
    
    <span style="color:#aaa;font-style:italic">/*  Set the user as idle, and calculate the time
</span><span style="color:#aaa;font-style:italic">        they were non-idle */</span>
    <span style="color:#00a">var</span> setIdle = <span style="color:#00a">function</span>() {
      idleTime = <span style="color:#00a">new</span> <span style="color:#0aa">Date</span>().getTime();
      timeEngaged += idleTime - startEngage;
      idle = <span style="color:#00a">true</span>;
    };
    
    <span style="color:#aaa;font-style:italic">/*  Reset the 5 second idle timer.
</span><span style="color:#aaa;font-style:italic">        If the user was idle, start the non-idle timer */</span>
    <span style="color:#00a">var</span> pulse = <span style="color:#00a">function</span>(evt) {
      <span style="color:#00a">if</span> (idle) {
        idle = <span style="color:#00a">false</span>;
        startEngage = <span style="color:#00a">new</span> <span style="color:#0aa">Date</span>().getTime();
        idleReport = <span style="color:#00a">false</span>;
      }
      <span style="color:#0aa">window</span>.clearTimeout(idleTimer);
      idleTimer = <span style="color:#0aa">window</span>.setTimeout(setIdle, <span style="color:#099">5000</span>); 
    };    
    
    <span style="color:#aaa;font-style:italic">//  Utility function for attaching listeners to the window
</span><span style="color:#aaa;font-style:italic"></span>    <span style="color:#00a">var</span> addListener = <span style="color:#00a">function</span>(evt, cb) {
      <span style="color:#00a">if</span> (<span style="color:#0aa">window</span>.addEventListener) {
        <span style="color:#0aa">window</span>.addEventListener(evt, cb);
      } <span style="color:#00a">else</span> <span style="color:#00a">if</span> (<span style="color:#0aa">window</span>.attachEvent) {
        <span style="color:#0aa">window</span>.attachEvent(<span style="color:#a50">&#39;on&#39;</span> + evt, cb);
      }
    };
    
    <span style="color:#aaa;font-style:italic">/* Push an event to dataLayer every 15 seconds
</span><span style="color:#aaa;font-style:italic">       unless the user is idle.
</span><span style="color:#aaa;font-style:italic">       Also, push an event when the user leaves the page */</span>
    <span style="color:#00a">var</span> report = <span style="color:#00a">function</span>(evt) {
      <span style="color:#00a">if</span> (!idle) {
        timeEngaged += <span style="color:#00a">new</span> <span style="color:#0aa">Date</span>().getTime() - startEngage;
      }

      <span style="color:#aaa;font-style:italic">// Push the payload to dataLayer, and only push valid time values
</span><span style="color:#aaa;font-style:italic"></span>      <span style="color:#00a">if</span> (!idleReport &amp;&amp; timeEngaged &gt; <span style="color:#099">0</span> &amp;&amp; timeEngaged &lt; <span style="color:#099">3600000</span>) { 
	    <span style="color:#0aa">window</span>.dataLayer.push({
    	  <span style="color:#a50">&#39;event&#39;</span> : <span style="color:#a50">&#39;nonIdle&#39;</span>,
          <span style="color:#a50">&#39;nonIdleTimeElapsed&#39;</span> : timeEngaged
        });
      }
      <span style="color:#00a">if</span> (idle) {
        idleReport = <span style="color:#00a">true</span>;
      }
      
      <span style="color:#aaa;font-style:italic">// Fix possible beforeunload duplication problem
</span><span style="color:#aaa;font-style:italic"></span>      <span style="color:#00a">if</span> (evt &amp;&amp; evt.type === <span style="color:#a50">&#39;beforeunload&#39;</span>) {
	    <span style="color:#0aa">window</span>.removeEventListener(<span style="color:#a50">&#39;beforeunload&#39;</span>, report);
      }
      timeEngaged = <span style="color:#099">0</span>;
      startEngage = <span style="color:#00a">new</span> <span style="color:#0aa">Date</span>().getTime();
      reportTimer = <span style="color:#0aa">window</span>.setTimeout(report, <span style="color:#099">15000</span>);
    };
    
    addListener(<span style="color:#a50">&#39;mousedown&#39;</span>, pulse);
    addListener(<span style="color:#a50">&#39;keydown&#39;</span>, pulse);
    addListener(<span style="color:#a50">&#39;scroll&#39;</span>, pulse);
    addListener(<span style="color:#a50">&#39;mousemove&#39;</span>, pulse);
    addListener(<span style="color:#a50">&#39;beforeunload&#39;</span>, report);
    idleTimer = <span style="color:#0aa">window</span>.setTimeout(setIdle, <span style="color:#099">5000</span>);
    reportTimer = <span style="color:#0aa">window</span>.setTimeout(report, <span style="color:#099">15000</span>);
  })();
&lt;/<span style="color:#1e90ff;font-weight:bold">script</span>&gt;</code></pre></div>
<p>Let&rsquo;s take a look at the script, just briefly and superficially, so that you have an idea of what you&rsquo;re doing.</p>
<p>At the very end, you have the following lines:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">addListener(<span style="color:#a50">&#39;mousedown&#39;</span>, pulse);
addListener(<span style="color:#a50">&#39;keydown&#39;</span>, pulse);
addListener(<span style="color:#a50">&#39;scroll&#39;</span>, pulse);
addListener(<span style="color:#a50">&#39;mousemove&#39;</span>, pulse);
addListener(<span style="color:#a50">&#39;beforeunload&#39;</span>, report);
idleTimer = <span style="color:#0aa">window</span>.setTimeout(setIdle, <span style="color:#099">5000</span>);
reportTimer = <span style="color:#0aa">window</span>.setTimeout(report, <span style="color:#099">15000</span>);
</code></pre></div>
<p>Here, you&rsquo;re binding the events <strong>mousedown</strong> (when a mouse button is depressed), <strong>keydown</strong> (when a key is depressed), <strong>scroll</strong> (when the page is scrolled), and <strong>mousemove</strong> (when the mouse is moved) to send a <em>pulse</em> that the user is engaged. If there&rsquo;s a <strong>5000 millisecond</strong> (5 second) delay between pulses, the user is set as idle.</p>
<p>Finally, every 15 seconds the cumulative engaged time is sent to Google Analytics, resetting the time engaged for the next 15 second stretch.</p>
<p>So this is the heart of the script. The events are taken directly from Chartbeat&rsquo;s study, and nicely cover pretty much all of the ways in which the user can tell the browser they haven&rsquo;t fallen asleep. Whether or not they model <strong>engagement</strong> is another, more philosophical, question, but at least they model <strong>interaction</strong>.</p>
<p>As you can see, mobile-specific events such as <strong>touchstart</strong> and <strong>touchend</strong> are missing. This is because, first of all, the way you interact with a page while reading on your phone is different from the idle doodling you do while using a mouse. Secondly, following Chartbeat&rsquo;s conclusions, creating arbitrary handlers for purely mobile browser events can be risky due to how browsers interpret touch interactions. So this is something to keep in mind when segmenting the data.</p>
<p>The three methods we use, <code>setIdle</code>, <code>report</code>, and <code>pulse</code> are described here:</p>
<ul>
<li>
<p><code>setIdle</code> sets the user as idle every 5 seconds of <strong>non-interaction</strong>. When the user is idle, the timer calculating engagement will be paused. Also, only the first &ldquo;report&rdquo; to <code>dataLayer</code> will be pushed. After that, nothing is pushed to <code>dataLayer</code> until the user starts engaging with the page again.</p>
</li>
<li>
<p><code>report</code> pushes the current time engaged to <code>dataLayer</code>, and resets all necessary timers and variables.</p>
</li>
<li>
<p><code>pulse</code> is what keeps the user &ldquo;active&rdquo;. If the user was idle, it sets their idle status to <strong>false</strong>, and the 5 second idling timer is also reset at this point.</p>
</li>
</ul>
<p>It might seem complicated (I sure hope it doesn&rsquo;t), but it&rsquo;s actually a very simple set of scripts.</p>
<p>Set this Custom HTML Tag to fire on a <strong>Page View / DOM Ready</strong> Trigger. You want to start engagement calculations only after the page content can be interacted with.</p>

                
                  <h2 id="2-custom-event-trigger">2. Custom Event Trigger</h2>
<p>To fire your User Timings Tag (coming to that soon) when the engagement time is pushed into <code>dataLayer</code> every 15 seconds, you only need a Custom Event Trigger. It should look like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/custom-event-trigger.jpg" title="Custom Event Trigger">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/custom-event-trigger.jpg#ZgotmplZ" alt="Custom Event Trigger" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 934 710'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Hooray, that was easy.</p>

                
                  <h2 id="3-data-layer-variable">3. Data Layer Variable</h2>
<p>You&rsquo;ll need to grab the time engaged from <code>dataLayer</code>, so create the following Data Layer Variable:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/data-layer-variable.jpg" title="Data Layer Variable for time elapsed">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/data-layer-variable.jpg#ZgotmplZ" alt="Data Layer Variable for time elapsed" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 780 930'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Quite simple as well, right?</p>

                
                  <h2 id="4-user-timings-tag">4. User Timings Tag</h2>
<p>!!! <strong>UPDATE</strong> !!!
User Timings has one major flaw: it has a daily limit of <strong>10,000</strong> hits, which <em>includes Page Timings</em>. This means that if your site is even marginally at risk of collecting this many timings altogether, the rest of this article will not work for you. In fact, I strongly recommend you stop reading the rest of the steps here, and jump instead to the <a href="https://www.simoahava.com/analytics/track-content-engagement-part-2/">revised steps</a> I wrote, which utilize an Event Tag and a Custom Metric Tag. I&rsquo;m sorry for making you jump between texts, but the truth is that User Timings have proven to be a subpar data collection method, even if I think they&rsquo;re excellent in so many other ways. So, read the rest of this article at your own peril, as the actual average engagement you&rsquo;ll be collecting might well be very much off the mark.
!!! <strong>END UPDATE</strong> !!!</p>
<p>So now you&rsquo;ll need a Tag which pulls all this information together, and dispatches it to Google Analytics.</p>
<p>We&rsquo;ll use the amazing <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/user-timings">User Timings</a> Tag Type for this. User Timings, if you didn&rsquo;t know, are just about the coolest feature of Google Analytics, and ridiculously useful for collecting arbitrary time measurements. I&rsquo;ve written about them before a number of times:</p>
<ul>
<li>
<p><a href="https://www.simoahava.com/analytics/measure-serp-bounce-time-with-gtm/">Measure SERP Bounce Time With GTM</a></p>
</li>
<li>
<p><a href="https://www.simoahava.com/analytics/form-field-timing-with-google-tag-manager/">Form Field Timing With Google Tag Manager</a></p>
</li>
<li>
<p><a href="https://www.simoahava.com/analytics/page-load-time-universal-analytics/">Page Load Time In Universal Analytics</a></p>
</li>
</ul>
<p>So, create the Tag and make it look something like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/user-timings-tag.jpg" title="User Timings Tag">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/user-timings-tag.jpg#ZgotmplZ" alt="User Timings Tag" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1580 1424'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Remember to set the <code>transport : beacon</code> field in the <strong>Fields to Set</strong>. This is a very useful, albeit poorly supported, feature of Google Analytics, which attempts to preserve any hits that are sent while the user is leaving the page. I have, of course, <a href="https://www.simoahava.com/analytics/leverage-usebeacon-beforeunload-google-analytics/">written about this before</a>, too.</p>
<p>Make this User Timings Tag fire on the <strong>Custom Event Trigger</strong> you created earlier.</p>
<p>And that&rsquo;s it for data collection! Now Google Tag Manager will send a User Timings hit to Google Analytics every 15 seconds, where the timing value will be the time the user spent interacting with the page during that 15 second stretch.</p>
<p>Now we&rsquo;ll want to look at this data in Google Analytics, so that we can get an idea of how much people are interacting, by average, which each page on the site.</p>

                
                  <h2 id="caveat">Caveat</h2>
<p>There&rsquo;s a very important caveat to discuss before proceeding. To calculate Average Engagement Time, you&rsquo;d want to calculate the <strong>total milliseconds spent engaged</strong> with the <strong>Pageviews</strong> for each page. Unfortunately, User Timings are not bound to a Pageview, as they exist as their own hit type. In other words, it&rsquo;s impossible to request <strong>only specific User timings per specific Pageviews</strong> in a calculated metric or by  using a custom report with report filters.</p>
<p>So, the only way the following will work is if this is the <strong>only</strong> User Timing you&rsquo;re measuring, because then you can create a calculated metric which calculates the average of <strong>all</strong> User Timings per <strong>all</strong> Pageviews, giving you what we&rsquo;re after.</p>
<p>If this isn&rsquo;t possible in your case, you might want to pull both Pageview and User Timings data out of Google Analytics, and join them together in Google Sheets or a tool like <a href="http://www.klipfolio.com/">Klipfolio</a>.</p>
<p>If you have a good idea on how to circumvent this problem in Google Analytics, I&rsquo;m all ears. Using the default <strong>Avg. User Timing</strong> metric will not work, as that&rsquo;s bound to the size of the User Timing Sample, and not Pageviews. Using Custom Metrics <em>might</em> work, but I&rsquo;m having a hard time figuring out how to align them with Pageviews.</p>

                
                  <h2 id="5-the-calculated-metric">5. The Calculated Metric</h2>
<p>Calculated Metrics are cool. No, they&rsquo;re awesome. They let you do calculations! On metrics! COOL AND AWESOME!</p>
<p>Before you proceed, don&rsquo;t forget to checkout some of the amazing articles my friends have written about Calculated Metrics:</p>
<ul>
<li>
<p>Analytics Pros - <a href="https://www.analyticspros.com/blog/google-analytics/25-calculated-metrics-for-google-analytics/">25 Calculated Metrics For Google Analytics</a></p>
</li>
<li>
<p>Bounteous - <a href="https://www.bounteous.com/insights/2015/10/22/calculated-metrics-universal-analytics/">New Calculated Metrics In Google Analytics</a></p>
</li>
<li>
<p>Avinash Kaushik - <a href="http://www.kaushik.net/avinash/analytics_tips_smart_calculated_metrics/">Excellent Analytics Tip #27: Chase Smart Calculated Metrics!</a></p>
</li>
<li>
<p>Peter O&rsquo;Neill - <a href="http://www.l3analytics.com/2015/11/03/a-powerful-use-case-for-ga-calculated-metrics/">A Powerful Use Case for GA Calculated Metrics</a></p>
</li>
<li>
<p>Yehoshua Coren - <a href="http://www.analytics-ninja.com/blog/2015/12/google-analytics-custom-metrics-calculated-metrics.html">Google Analytics Custom Metrics And Calculated Metrics</a></p>
</li>
</ul>
<p>Honestly, seems like anybody who&rsquo;s a somebody in web analytics has written about this feature, and that speaks heaps about how useful calculated metrics are!</p>
<p>So, the metric we&rsquo;ll use will calculate the average user timing by the simple formula of <strong>total User Timing value</strong> / <strong>total Pageviews</strong>. Since the <strong>Time</strong> formatting type expects seconds as the input value, we&rsquo;ll need to divide the total user timings value by 1000 to convert milliseconds to the required format. Anyway, the metric setup looks like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/calculated-metric.jpg" title="Calculated Metric">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/calculated-metric.jpg#ZgotmplZ" alt="Calculated Metric" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 806 810'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>To find this screen, go to your <strong>View Settings</strong> in GA Administration, and choose <strong>Calculated Metrics (BETA)</strong>. Next, click the ominous, big, red button labelled <strong>+ New Calculated Metric</strong>, and make sure the settings match with the screenshot above.</p>

                
                  <h2 id="6-the-custom-report">6. The Custom Report</h2>
<p>Finally, let&rsquo;s pull it all together in a Custom Report. You can see a screenshot of the report itself at the beginning of this post, so here&rsquo;s what the report settings would look like:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/03/custom-report.jpg" title="Custom Report">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/03/custom-report.jpg#ZgotmplZ" alt="Custom Report" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2358 870'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>I&rsquo;ve got <strong>Bounce Rate</strong> and <strong>Entrances</strong> there as well, so that I can get an idea of how sessions with these Page Views actually performed in terms of bounces and initial acquisition, but what&rsquo;s important is the juxtaposition of Page Views, Average Engagement, and Average Time On Page.</p>

                
                  <h2 id="summary">Summary</h2>
<p>Looking at Average Engagement versus Average Time On Page is illuminating. ATOP tells us how much time it took from one page view to another, but it doesn&rsquo;t tell us <strong>anything</strong> about the quality of that time. With Average Engagement, we&rsquo;re measuring the time user <strong>interacted</strong> with the page, i.e. kept it in focus and <strong>did</strong> something.</p>
<p>Does this tell us anything about whether the user read the page or how they digested the contents? No, of course not. We&rsquo;d need a probe in their brain to uncover intent like that. But this data increases the significance and the <strong>meaning</strong> of the Time On Page metric, by describing actual, <em>interactive</em> time rather than just arbitrary time between two pageviews. It&rsquo;s a far more powerful indicator than any of the out-of-the-box metrics in Google Analytics, and a crucial cog in the machine you&rsquo;re building, whose job is to slowly, painfully open the lid on the can of worms, with the huge label of &ldquo;USER INTENT&rdquo; plastered on the side.</p>
<p>Again, huge thanks to the guys at YLE and to Chartbeat for the interesting and pioneering work they&rsquo;ve done. I hope the steps within this tutorial will help you in uncovering yet another interesting aspect of the users&rsquo; browsing behavior on your site!</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/calculated-metrics/">calculated metrics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/content/">content</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/engagement/">engagement</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics/">google analytics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/user-timings/">user timings</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/track-content-engagement-part-2/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-analytics-endpoint-debugger/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Track%20Content%20Engagement%20Via%20GTM%20https://www.simoahava.com/analytics/track-content-engagement-via-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/track-content-engagement-part-2/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-analytics-endpoint-debugger/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Track%20Content%20Engagement%20Via%20GTM%20https://www.simoahava.com/analytics/track-content-engagement-via-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Track%20Content%20Engagement%20Via%20GTM%20https://www.simoahava.com/analytics/track-content-engagement-via-gtm/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/track-content-engagement-via-gtm/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
         

    
  </body>
</html>

