

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script>
      function gtag() { window.dataLayer = window.dataLayer || []; window.dataLayer.push(arguments); }
      gtag('event', 'optimize.callback', {
	    callback: function(e) {
	      window.dataLayer = window.dataLayer || [];
          window.dataLayer.push({
		    event: 'optimize.experimentLoaded',
            experimentTime: new Date().getTime()
	      });
	    }
      });
    </script>
    <script async src="https://www.googleoptimize.com/optimize.js?id=GTM-NGM64B"></script>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "GA Snippet And GA (GTM) Tag On The Same Page | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2016\/02\/ga-and-gtm-same-time.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/ga-snippet-and-ga-gtm-tag-on-the-same-page\/",
  "datePublished": "2016-02-02T09:52:31\x2b00:00",
  "dateModified": "2016-02-02T09:52:31\x2b00:00",
  "description": "Guide to what happens if the Google Analytics JavaScript snippet and Google Tag Manager\x27s container snippet coexist on a web page.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>GA Snippet And GA (GTM) Tag On The Same Page | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
    
    <meta name="description" content="Guide to what happens if the Google Analytics JavaScript snippet and Google Tag Manager&#39;s container snippet coexist on a web page.">
    <meta property="og:description" content="Guide to what happens if the Google Analytics JavaScript snippet and Google Tag Manager&#39;s container snippet coexist on a web page.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="GA Snippet And GA (GTM) Tag On The Same Page">
    <meta property="og:url" content="https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="GA Snippet And GA (GTM) Tag On The Same Page">
    <meta name="twitter:description" content="Guide to what happens if the Google Analytics JavaScript snippet and Google Tag Manager&#39;s container snippet coexist on a web page.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2016/02/ga-and-gtm-same-time.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2016/02/ga-and-gtm-same-time.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      GA Snippet And GA (GTM) Tag On The Same Page
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2016-02-02T09:52:31Z">
        
  February 2, 2016

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/#commento">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>In this article, I'm going to tackle one of the most frequently asked questions out there:</p>
<p><strong>Can you run <a href="https://analytics.google.com">Google Analytics</a> using the snippet AND using a <a href="https://tagmanager.google.com/">Google Tag Manager</a> Tag <em>on the same page</em>?</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/02/ga-and-gtm-same-time.jpg" title="Google Analytics and GTM on the same page">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/02/ga-and-gtm-same-time.jpg#ZgotmplZ" alt="Google Analytics and GTM on the same page">
  
    </a>
  
  
</div>


<p>There are many facets to this query, so I'll try to tackle as many of them as I possibly can.</p>
<p>First, a terminology rant. You hear lots of talk about &ldquo;on-page&rdquo; and &ldquo;inline&rdquo; Google Analytics tracking, as that's what's used to describe the non-GTM way of tracking Google Analytics. Well, all the power to you, but I think they're just adding to the confusion. GTM is just as &ldquo;on-page&rdquo; and &ldquo;inline&rdquo; as GA's own snippet, as both are based on injecting an asynchronous HTTP request that downloads the respective library.</p>
<p>I've chosen to use <em>snippet-based tracking</em> to describe Google Analytics tracking that's outside GTM, and <em>Tag-based tracking</em> to describe Tags run through GTM. Note the capital &lsquo;T&rsquo;, as that's the syntax I most commonly use in this blog to denote Google Tag Manager assets.</p>
<p>I'm fully aware this distinction can cause confusion as well, but since I'd hesitate to ever call the <code>ga('send',...)</code> commands on the page &ldquo;tags&rdquo; of any kind, I think this makes a bit more sense.</p>
<h2 id="the-premise-what-the-problem-really-is">The premise: what the problem really is</h2>
<p>Most often this question gets asked when migrating to Google Tag Manager. There was a <em>crazy</em> amount of questions about this in the <a href="https://analyticsacademy.withgoogle.com/course05">Google Tag Manager Fundamentals</a> course forums, where I was volunteering my help. There were so many questions about it that I felt the need to write the following intro to course participants:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/02/course-forum.jpg" title="GTM fundamentals course forum">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/02/course-forum.jpg#ZgotmplZ" alt="GTM fundamentals course forum">
  
    </a>
  
  
</div>


<p>I don't know if it helped, but at least it let me jot some things down that would be helpful to anyone pondering about these issues.</p>
<p>The problem itself is usually a manifestation of the following, underlying queries:</p>
<ol>
<li>
<p>Will just adding Google Tag Manager to the site break my existing Google Analytics tracking?</p>
</li>
<li>
<p>Will adding a Google Analytics Tag in GTM break my existing Google Analytics tracking?</p>
</li>
<li>
<p>Can I run the bulk of my tracking via the Google Analytics snippet, and use Google Tag Manager Tags for tracking certain specific things?</p>
</li>
<li>
<p>Can I run the bulk of my tracking via Google Tag Manager, and use <code>ga('send',...)</code> commands on the page to cover some, usually legacy, tracking needs?</p>
</li>
<li>
<p>I'm just curious, how does snippet-based tracking differ from GTM's Tag-based tracking?</p>
</li>
</ol>
<p>The last question is just the best, I can't wait to get to it!</p>
<p>OK, I'll start with it! That's how crazy and unpredictable I am.</p>
<h2 id="5-snippet-based-vs-tag-based-tracking">5. Snippet-based vs. Tag-based tracking</h2>
<p>When you create your Google Analytics tracker using the given <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/?hl=en">snippet</a>, you have the option of providing a <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers#naming_trackers">tracker name</a> vs. using the default name.</p>
<p>For example, if you want to name the tracker <strong>SuperTracker</strong>, you'd use the following syntax in the tracker creation command:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">ga(<span style="color:#a50">&#39;create&#39;</span>, <span style="color:#a50">&#39;UA-12345-1&#39;</span>, {<span style="color:#a50">&#39;name&#39;</span> : <span style="color:#a50">&#39;SuperTracker&#39;</span>});
</code></pre></div>
<p>This would give the tracker a name, after which you interact with it by prefixing all commands sent to the <code>ga()</code> queue with the tracker name: <code>ga('SuperTracker.send', 'pageview);</code>.</p>
<p>If you <strong>don't</strong> provide a tracker name, you can use the naked <code>ga('send',...)</code> syntax, where you don't use a tracker name prefix. However, the tracker <strong>does</strong> have a name: <strong>t0</strong> (t-zero). So the following two commands do the same thing:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">ga(<span style="color:#a50">&#39;send&#39;</span>, <span style="color:#a50">&#39;pageview&#39;</span>);
ga(<span style="color:#a50">&#39;t0.send&#39;</span>, <span style="color:#a50">&#39;pageview&#39;</span>);
</code></pre></div>
<p>This is clear, yes? The reason you'd want to rename the tracker is if you're running multiple trackers on the page, or due to some very special edge cases I might or might not touch upon later in the article (I'm just making this stuff up as I go along).</p>
<p>Now, with <strong>Google Tag Manager</strong> it's a bit different. In GTM, <em>whenever a Tag is injected</em>, i.e. whenever a Tag &ldquo;fires&rdquo; (hate that terminology as well) due to some Trigger &ldquo;firing&rdquo; as well, a <strong>new</strong> tracker is created with a random, unique name:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/02/gtm-tracker-name.jpg" title="Google Tag Manager tracker name">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/02/gtm-tracker-name.jpg#ZgotmplZ" alt="Google Tag Manager tracker name">
  
    </a>
  
  
</div>


<p>So here the GTM tracker was created with the name <strong>gtm1454402957304</strong>. For you fellow nerds, look at the numbers in that string. Don't they look vaguely familiar? That's right, it resembles <a href="https://en.wikipedia.org/wiki/Unix_time">Unix time</a>! So, in fact, the tracker name isn't random, it's just the exact timestamp of when the tracker was created, down to the millisecond. So it's not deterministically unique, either, but having two Tags fire at the exact same millisecond is, as far as I know it, next to impossible.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/02/timestamp.jpg" title="GTM tracker name is a timestamp">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/02/timestamp.jpg#ZgotmplZ" alt="GTM tracker name is a timestamp">
  
    </a>
  
  
</div>


<p>So, now the major difference is spelled out for you: the GA snippet requires that you either use a fixed, default tracker name when creating the tracker, or you give it a custom name. This tracker name is then used when communicating with the tracker object.</p>
<p>GTM, on the other hand, creates a new, unique tracker name for every single Tag on the page - even when the same Tag is injected multiple times.</p>
<p>This is, in fact, how GTM manages to navigate through one of the biggest flaws of the platform. I've outlined this in a previous article on the dangers of <a href="https://www.simoahava.com/gtm-tips/be-careful-with-the-tracker-name-setting/">messing with the tracker name</a> setting in GTM's GA Tags. In a nutshell, GTM doesn't let you assign settings, fields, custom dimensions and the ilk on the hit itself, but they're always set on the tracker object. This means that they are &ldquo;hit-scoped&rdquo; by default, since each Tag has its own tracker, but if you mess with the tracker name you'll run into some unexpected side effects.</p>
<p>Now that we have the basics sorted out, let's jump into the queries themselves.</p>
<h2 id="1-will-google-analytics-break-if-just-google-tag-manager-is-installed-on-the-page">1. Will Google Analytics break if just Google Tag Manager is installed on the page?</h2>
<p>This is easy to answer:</p>
<p><strong>NO, IT WILL NOT!</strong></p>
<p>Remember, Google Tag Manager has nothing to do with Google Analytics when you add the container on the page. It's just a container, a chassis, a receptacle, a vehicle, a <em>vessel</em> (making the most out of my thesaurus here) for your Tags and other arbitrary JavaScript you want to execute on the page.</p>
<p>When you add the Google Tag Manager container snippet to the page, all it does is load a library from Google servers. It doesn't create any Google Analytics trackers, it doesn't mess with your tracking code, it doesn't interfere with other JavaScript running on the site, or anything like that.</p>
<p>In other words, <strong>feel free to add the container snippet to the page the minute you've created the container</strong>.</p>
<h2 id="2-will-adding-a-google-analytics-tag-in-gtm-break-my-existing-tracking">2. Will adding a Google Analytics Tag in GTM break my existing tracking?</h2>
<p>This is also easy to answer:</p>
<p><strong>NO, IT WILL NOT!</strong></p>
<p>Now, choose your favorite conjunct: &ldquo;However&hellip;&rdquo; / &ldquo;But&hellip;&rdquo; / &ldquo;Unless&hellip;&quot;. I'll go with the first one.</p>
<p>However, if you've <strong>manually set the Google Tag Manager tracker name to the GA tracker name</strong>, and you don't know what you're doing, problems can arise.</p>
<p>I've covered many of these cases in my <a href="https://www.simoahava.com/gtm-tips/be-careful-with-the-tracker-name-setting/">tracker name rant</a>.</p>
<p>The most important thing to note is that if the tracker name is shared between the snippet-based tracker and GTM's Tag, each time a new tracker is created on the page (usually via GTM) with that name, any settings it has will overwrite all the previous settings on any of the trackers.</p>
<p>So, for example, let's say you've created the snippet-based tracker with:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">ga(<span style="color:#a50">&#39;create&#39;</span>, <span style="color:#a50">&#39;UA-12345-1&#39;</span>);
</code></pre></div>
<p>And then you set the Tracker name in GTM to <em>blank</em>:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2016/02/gtm-tracker-name-blank.jpg" title="GTM Tracker Name Blank">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2016/02/gtm-tracker-name-blank.jpg#ZgotmplZ" alt="GTM Tracker Name Blank">
  
    </a>
  
  
</div>


<p>Now, since you only create the tracker once when using snippet-based GA tracking, any GTM Tag that shares the tracker name and fires <strong>after</strong> the snippet-based tracker will <strong>overwrite</strong> all the settings that were in the snippet-based tracker.</p>
<p>So, let's say you're tracking to <strong>UA-12345-1</strong> in the snippet, using the <code>ga('create','UA-12345-1')</code> command to create the tracker. Then, you have an Event Tag in GTM, collecting data to &lsquo;UA-12345-<strong>2</strong>', and firing after 15 seconds of dwell time on the page. If this Tag has the same tracker name as the snippet-based tracker, <strong>any</strong> <code>ga('send',...)</code> commands you run on the page after this GTM Tag has fired will now use the settings in the GTM Tag, <em>including the new property ID</em>.</p>
<p>You can see how this is potentially a huge problem.</p>
<p>But like I wrote in the beginning of this chapter, if you <strong>don't</strong> mess with the tracker name setting, there will be no interference. You can freely track via Google Tag Manager to a Google Analytics property, and then keep the snippet-based tracker collecting data to some other property, if you wish.</p>
<p>This is a great segue to the next question.</p>
<h2 id="3-run-the-bulk-of-tracking-via-the-snippet-and-use-gtm-for-specific-things">3. Run the bulk of tracking via the snippet, and use GTM for specific things</h2>
<p>In this case, we want to <strong>combine</strong> snippet-based GA tracking with Google Tag Manager Tags.</p>
<p>Interesting!</p>
<p>Well, it's certainly doable. You can easily have a snippet-based tracker track to UA-12345-1, and then add the occasional Tag via GTM to also track to UA-12345-1, and you don't have to make any changes if working with default settings. Google Analytics uses a combination of <strong>Client ID</strong> found in the <code>_ga</code> cookie together with the UA-XXXXX-Y code to make sure hits are attributed to the same session and the same user.</p>
<p>There are some cases where you <strong>will</strong> need to make changes:</p>
<ul>
<li>
<p>If you're using custom <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#cookieName">cookie settings</a> in either, make sure they match between the snippet-based tracker and <strong>all</strong> the Google Analytics Tags you're running via Google Tag Manager into the same GA property.</p>
</li>
<li>
<p>If you're using custom <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#trafficsources">traffic source tracking</a>, make sure you respect these in all the Tags and snippet commands sending data to the same Google Analytics property. For example, if you GA snippet is sending the <strong>?utm-parameters</strong> with the page URL, but in GTM you're overwriting the page name with something customized, it's possible the GTM Tag will use the <strong>referrer</strong> instead, creating a new session since the traffic source changed.</p>
</li>
</ul>
<p>All in all, try to make all fields and settings match between the trackers. This way you won't run into surprises when one creates a session and the other one creates a new session immediately after due to a discrepancy in the tracker settings.</p>
<h2 id="4-using-gtm-to-drive-tracking-and-occasionally-resorting-to-snippet-based-commands">4. Using GTM to drive tracking, and occasionally resorting to snippet-based commands</h2>
<p>This is a tricky one. Usually it's because there's a huge, sprawling legacy library for snippet-based tracking, and the user wants to migrate one command at a time.</p>
<p>The easiest way to make it work is to remember to have the Google Analytics snippet and tracker creation commands on each page as before. If you do this, there won't be any conflicts as long as you respect the tips in the previous chapter.</p>
<p>However, if you're in a jam where you only have a <code>ga('send',...)</code> command here or there, without any tracker creation via the snippet, things get much more complicated. To make it work, the following things need to happen:</p>
<ol>
<li>
<p>The <code>ga('send',...)</code> cannot be run before the first GTM Tag has been added to the page. Before that, the <code>ga()</code> function doesn't exist in the global namespace.</p>
</li>
<li>
<p>The Google Tag Manager Tag needs to have its Tracker Name setting set to blank (if you're using <code>ga('send',...)</code> on the page), or to a custom name, in which case the snippet-based commands need to use that name as well: <code>ga('customName.send',...)</code>.</p>
</li>
</ol>
<p>The first one is very difficult to respect, since the Google Tag Manager is downloaded asynchronously. To mitigate this, you can add this line to the <code>&lt;head&gt;</code> of each page, before any <code>ga()</code> functions are called:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">script</span>&gt;
  <span style="color:#0aa">window</span>[<span style="color:#a50">&#39;GoogleAnalyticsObject&#39;</span>] = <span style="color:#a50">&#39;ga&#39;</span>;
  <span style="color:#0aa">window</span>[<span style="color:#a50">&#39;ga&#39;</span>] = <span style="color:#0aa">window</span>[<span style="color:#a50">&#39;ga&#39;</span>] || <span style="color:#00a">function</span>() {
    (<span style="color:#0aa">window</span>[<span style="color:#a50">&#39;ga&#39;</span>].q = <span style="color:#0aa">window</span>[<span style="color:#a50">&#39;ga&#39;</span>].q || []).push(arguments)
  };
&lt;/<span style="color:#1e90ff;font-weight:bold">script</span>&gt;</code></pre></div>
<p>This is taken from the <a href="https://www.thyngster.com/how-does-the-universal-analytics-snippet-work/">Universal Analytics snippet</a>, and it basically creates a temporary data store for all <code>ga()</code> commands that exist before the <strong>analytics.js</strong> library has been created.</p>
<p>If you take all the previous tips into account, then there should be minimal problems with combining tracking methods like this. However, it's still suboptimal, and can lead to unexpected problems due to the complexity of the code you need to manage and maintain.</p>
<h2 id="summary">Summary</h2>
<p>What started as a simple foray into tracker discrepancies blossomed into a sprawling, overly complex account of how tracking works across the Google Analytics snippet and Google Tag Manager's Tag templates.</p>
<p>Bottom line is, if you <strong>do</strong> want to combine tracking across the two methods, you need to make sure that tracker settings match across the board.</p>
<p>On the other hand, if you want to track each tracker method to a different Google Analytics property, you need to make sure that certain tracker settings <strong>do NOT match</strong> across the trackers.</p>
<p>All in all, you'll commonly hear people suggesting that you move to Google Tag Manager in all your tracking needs. I tend to agree in general, but there are many, many solid reasons for keeping the snippet-based tracker, at least for a little while.</p>
<p>Whenever I do a migration from snippet-based to Google Tag Manager -based tracking, I run the two simultaneously (to different properties) until I'm satisfied the migration has been a success.</p>
<p>Similarly, it's not an altogether bad idea to keep the snippet-based tracker on the page for a while, just so you can benchmark the two different tracker setups in your data, and perhaps use the information to improve overall data quality.</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-analytics/">google analytics</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/snippet/">snippet</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/tracker/">tracker</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-if-dom-ready-or-window-loaded-have-fired/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/be-careful-with-the-tracker-name-setting/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=GA%20Snippet%20And%20GA%20%28GTM%29%20Tag%20On%20The%20Same%20Page%20https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/check-if-dom-ready-or-window-loaded-have-fired/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/be-careful-with-the-tracker-name-setting/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=GA%20Snippet%20And%20GA%20%28GTM%29%20Tag%20On%20The%20Same%20Page%20https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=GA%20Snippet%20And%20GA%20%28GTM%29%20Tag%20On%20The%20Same%20Page%20https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/ga-snippet-and-ga-gtm-tag-on-the-same-page/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

