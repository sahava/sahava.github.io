

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Macro Guide For Google Tag Manager | Simo Ahava's blog",
  "image": "https://www.simoahava.com/images/2014/02/macro-in-ui.png",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.simoahava.com/images/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https://www.simoahava.com/analytics/macro-guide-google-tag-manager/",
  "datePublished": "2014-02-11T16:09:20+00:00",
  "dateModified": "2014-02-11T16:09:20+00:00",
  "description": "Guide to Google Tag Manager macros. This is a comprehensive guide for macros, but has been superceded by variables in the latest Google Tag Manager version.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.48 with theme Tranquilpeak 0.4.3-BETA">
    <title>Macro Guide For Google Tag Manager | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    <script src="//de.cdn-v3.conductrics.com/ac-GeQBKxGTiA/v3/agent-api/js/f-TNZdDPOknZ/dt-8BnrVvfJuB1PwktQxXXgVK2OikZ9WR?apikey=api-WDrqMnckreSqejZgDAMu" type="text/javascript"></script>
    <script src="https://www.simoahava.com/js/ctrics-manual.js"></script>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PZ7GMV9');</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/macro-guide-google-tag-manager/">
    
    <meta name="description" content="Guide to Google Tag Manager macros. This is a comprehensive guide for macros, but has been superceded by variables in the latest Google Tag Manager version.">
    <meta property="og:description" content="Guide to Google Tag Manager macros. This is a comprehensive guide for macros, but has been superceded by variables in the latest Google Tag Manager version.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Macro Guide For Google Tag Manager">
    <meta property="og:url" content="/analytics/macro-guide-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Macro Guide For Google Tag Manager">
    <meta name="twitter:description" content="Guide to Google Tag Manager macros. This is a comprehensive guide for macros, but has been superceded by variables in the latest Google Tag Manager version.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2014/02/macro-in-ui.png">  
      <meta property="og:image" content="https://www.simoahava.com/images/2014/02/macro-in-ui.png">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Macro Guide For Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-02-11T16:09:20Z">
        
  February 11, 2014

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/macro-guide-google-tag-manager/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              

<p><em>I&rsquo;ve written a new <a href="https://www.simoahava.com/analytics/variable-guide-google-tag-manager/">Variable Guide for Google Tag Manager</a>, which covers the new GTM UI. This guide is for the old UI.</em></p>

<p>You might be vaguely familiar with macros if you&rsquo;ve ever used a computer. Basically, whenever you perform a complicated task with a simple gesture, or reuse complex code with a simple input mechanism, you&rsquo;re using macros. Think keyboard shortcuts.</p>

<p>In <a href="http://www.google.com/tagmanager">Google Tag Manager</a>, this is the essence of macros. You can do away with a lot of complexity by resorting to macros, especially if you ever find that you need the same piece of code or the same operation over and over again.</p>

<p>This guide will first take a cursory look at what macros really are, before going through the (current) list of available macros. I&rsquo;ll add short examples and use cases for each, but there&rsquo;s a whole lot more to be found online.</p>

<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#what-is-a-macro">What is a macro</a></li>
<li><a href="#technical-details">Technical details</a></li>
<li><a href="#how-to-use-macros">How to use macros</a></li>
<li><a href="#the-different-macro-types-in-gtm">The different macro types in GTM</a>
<ul>
<li><a href="#1-1st-party-cookie">1. 1st Party Cookie</a></li>
<li><a href="#2-auto-event-variable">2. Auto-Event Variable</a></li>
<li><a href="#3-constant-string">3. Constant String</a></li>
<li><a href="#4-container-version-number">4. Container Version Number</a></li>
<li><a href="#5-custom-event">5. Custom Event</a></li>
<li><a href="#6-custom-javascript">6. Custom JavaScript</a></li>
<li><a href="#7-data-layer-variable">7. Data Layer Variable</a></li>
<li><a href="#8-debug-mode">8. Debug Mode</a></li>
<li><a href="#9-dom-element">9. DOM Element</a></li>
<li><a href="#10-http-referrer">10. HTTP Referrer</a></li>
<li><a href="#11-javascript-variable">11. JavaScript Variable</a></li>
<li><a href="#12-lookup-table">12. Lookup Table</a></li>
<li><a href="#13-random-number">13. Random Number</a></li>
<li><a href="#14-url">14. URL</a></li>
</ul></li>
<li><a href="#conclusions">Conclusions</a></li>
</ul></li>
</ul>
</nav>

<h2 id="what-is-a-macro">What is a macro</h2>

<p>In Google Tag Manager, a macro is a construct that you can set up in the UI. However, it&rsquo;s not a tag in the sense that it would be something you&rsquo;d <em>tag</em> your page with. Rather, macros are turned into a function of the _google_tag<em>manager</em> object (more on this later), and they return a value when called.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macro-in-ui.png" title="Macros in GTM">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macro-in-ui.png#ZgotmplZ" alt="Macros in GTM">
  
    </a>
  
  
</div>



<p>So a macro is, in essence, a placeholder for some value that you might need in your tags. Most common uses for macros would be to:</p>

<ul>
<li><p>Retrieve a constant string (e.g. your tracking code)</p></li>

<li><p>Retrieve a variable string (e.g. the <strong>href</strong> attribute of a clicked element)</p></li>

<li><p>Retrieve the result of some simple function (e.g. the date and time of the current visit)</p></li>
</ul>

<p>Macros are thus used to call for and to retrieve certain values. You can surely see how they facilitate your day-to-day GTM use, can&rsquo;t you? It&rsquo;s much easier to just refer to a macro name rather than having to write the value-retrieving function over and over again.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macro-example.png" title="An example of a GTM macro">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macro-example.png#ZgotmplZ" alt="An example of a GTM macro">
  
    </a>
  
  
</div>



<p>Without macros, whenever you rewrite your hard-coded functions or variables, you have to remember to change them wherever they were used. It&rsquo;s much easier to just have a macro refer to the original location.</p>

<h2 id="technical-details">Technical details</h2>

<blockquote>DISCLAIMER: Note that the following analysis is my own and only for illustrative purposes. Don't attempt to use the DOM functions uncovered here in your own code, since they are liable to change without notice. Use macros only via the GTM UI using the syntax required by the tool.</blockquote>

<p>Well my skills at reverse engineering minified JavaScript code are pretty sparse, but you can uncover a lot just by going through the DOM (Document Object Model) tree of a page where macros are active. You can do this by using a JavaScript console in your browser&rsquo;s developer tools. Just type <strong>window</strong> and click enter.</p>

<p>For example, if you go through the DOM, you&rsquo;ll find an object called <strong>google_tag_manager</strong>:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/google-tag-manager-macro.png" title="Google Tag Manager object with macro function">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/google-tag-manager-macro.png#ZgotmplZ" alt="Google Tag Manager object with macro function">
  
    </a>
  
  
</div>



<p>Here you can see the google_tag_manager array and its contents. There&rsquo;s an index for your container ID (GTM-XXXX), under which you&rsquo;ll find the macro function. The function is actually defined in gtm.js, which you load in the GTM container snippet.</p>

<p>The <strong>macro</strong> function accepts a single parameter and returns something else.</p>

<p>It appears that the parameter is a numeral value which refers to a certain macro that you&rsquo;ve set up in GTM. I didn&rsquo;t find any way to actually identify which number returns which macro value, but just by testing you can find a lot of stuff. For example, I have a macro which stores the number of images on the page. Twiddling around with the macro function I finally found the correct index:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macro-test.png" title="Testing a macro index via JavaScript console">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macro-test.png#ZgotmplZ" alt="Testing a macro index via JavaScript console">
  
    </a>
  
  
</div>



<p>So as you can see, when you refer to a macro in your tag setup, e.g. {{number_of_images}}, it actually translates to a JavaScript function call that returns the value.</p>

<p>This is also the reason why your macros don&rsquo;t accept parameters. The macro itself is a function call which only takes the index number of the macro as its parameter. Runtime evaluation is done on the spot with only elements found in the Document Object Model to work with.</p>

<p>This is why you&rsquo;ll see <em>undefined</em> for those indices which expect a value in the data layer that hasn&rsquo;t been pushed yet. As soon as the value is pushed into the data layer, you&rsquo;ll find that the macro index returns the appropriate value.</p>

<h2 id="how-to-use-macros">How to use macros</h2>

<p>To use a macro, you refer to it in GTM with its name between two sets of curly brackets:</p>

<p><strong>{{macro name}}</strong></p>

<p>Note that this is case-sensitive, so {{macro name}} and {{Macro name}} refer to different things.</p>

<p>You can use macros in any GTM fields which accept a text string, e.g.:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macros-in-fields.png" title="Macros in GTM tag fields">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macros-in-fields.png#ZgotmplZ" alt="Macros in GTM tag fields">
  
    </a>
  
  
</div>



<p>On top of that (and this is really cool), you can refer to macros in your custom HTML tags:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/custom-html-macro.png" title="Macro in Custom HTML tag">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/custom-html-macro.png#ZgotmplZ" alt="Macro in Custom HTML tag">
  
    </a>
  
  
</div>



<p>Here, I check whether or not the clicked link <strong>href</strong> contained the text &ldquo;.pdf&rdquo;. Since it&rsquo;s an <a href="https://www.simoahava.com/analytics/auto-event-tracking-google-tag-manager/">auto-event macro</a> I&rsquo;m using, the macro won&rsquo;t return a proper value until the auto-event variable is pushed into the data layer. So upon page load the macro {{element url}} would return <em>undefined</em>, but after I click a link, it would return the href attribute of the link. This means that in order for this tag to work like it should, I need a firing rule which prevents it from firing until after the auto-event variable is pushed into the data layer. Runtime evaluation, remember?</p>

<p>You can also, and this is really REALLY cool, refer to macros in other macros!</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/custom-javascript-macro.png" title="Macro in a custom JavaScript macro">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/custom-javascript-macro.png#ZgotmplZ" alt="Macro in a custom JavaScript macro">
  
    </a>
  
  
</div>



<p>This returns the tag name of the first child of the clicked element.</p>

<p>There&rsquo;s a small point to make about using macros and JavaScript. You can only treat a macro as a JavaScript object in the <strong>context of a script</strong>. This means that you can freely access macro properties with dot notion, e.g. <strong>{{element}}.innerText</strong>, in Custom HTML tags and Custom JavaScript macros. However, this won&rsquo;t work in other GTM fields where you can use macros (e.g. Event Category), because these fields do not run JavaScript functions. So if you want to access a property of a macro in a tag field, for example, <strong>you will need to create a separate macro for this property</strong>.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macro-in-fields.png" title="Macro in script vs. field">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macro-in-fields.png#ZgotmplZ" alt="Macro in script vs. field">
  
    </a>
  
  
</div>



<p>You&rsquo;ll also use macros a lot in your firing and blocking rules:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/fire-only-debug.png" title="Firing rule for debug mode">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/fire-only-debug.png#ZgotmplZ" alt="Firing rule for debug mode">
  
    </a>
  
  
</div>



<p>This rule would fire only when visits are tracked to my GA debug account.</p>

<p>Here&rsquo;s the key takeaway:</p>

<p><strong>Use a macro whenever you need to reuse a certain value or value-returning function.</strong></p>

<p>I won&rsquo;t add a separate section for when <strong>not</strong> to use a macro, but suffice to say, if you only need a certain value once or you have a function which you know won&rsquo;t be reused, don&rsquo;t bother creating a macro for it. Just hard-code it into your custom HTML tag or use the value directly in your tags. A macro is always, after all, another function call, which does increase the complexity of your code.</p>

<p>Rules are a bit different, since you <strong>must</strong> use macros in rules. You can&rsquo;t write an ad hoc function into your rule; you must have a macro which you evaluate on runtime.</p>

<h2 id="the-different-macro-types-in-gtm">The different macro types in GTM</h2>

<p>Here, I&rsquo;ve listed all the different macro types you can create in Google Tag Manager (at the time of writing). I&rsquo;ve added a short description, and an example use case for each.</p>

<p>All macros need a name, which you refer to (case-sensitive) using two sets of curly brackets, e.g. {{macro name}}.</p>

<p>Also, you can give a <strong>default value</strong> to some of the macros. It&rsquo;s a good practice to use a default value, because you can use that as a blocking rule (e.g. {{macro}} equals &ldquo;default&rdquo;) in your tags, and you can avoid getting the pesky <em>undefined</em> as a return value.</p>

<p>Note also that there&rsquo;s a difference between <strong>macro type</strong> and <strong>macro instance</strong>. Below, I list all the different macro <em>types</em> you can use to create different macro <em>instances</em>. You can have as many instances of a macro type as you want (as long as they have different names). Macro types are provided by GTM, and you can&rsquo;t edit or create new macro types.</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/macro-instance-type.png" title="Macro instance and macro type">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/macro-instance-type.png#ZgotmplZ" alt="Macro instance and macro type">
  
    </a>
  
  
</div>



<p>When you create a new container, you get the following pre-populated <strong>macro instances</strong>. Encased in brackets is the type of macro the pre-populated macro is an instance of:</p>

<ul>
<li><p>element (Auto-Event Variable / Element)</p></li>

<li><p>element classes (Auto-Event Variable / Element Classes)</p></li>

<li><p>element id (Auto-Event Variable / Element ID)</p></li>

<li><p>element target (Auto-Event Variable / Element Target)</p></li>

<li><p>element url (Auto-Event Variable / Element URL)</p></li>

<li><p>event (Custom Event)</p></li>

<li><p>referrer (HTTP Referrer)</p></li>

<li><p>url (URL / URL)</p></li>

<li><p>url hostname (URL / Host Name)</p></li>

<li><p>url path (URL / Path)</p></li>
</ul>

<p>So you might be a bit confused at first, since you have these pre-populated macros which are named the same as the macro types they are instances of. But you&rsquo;ll get the hang of it soon enough, don&rsquo;t worry.</p>

<h3 id="1-1st-party-cookie">1. 1st Party Cookie</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/1st-party-cookie.jpg" title="1st Party Cookie">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/1st-party-cookie.jpg#ZgotmplZ" alt="1st Party Cookie">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>The 1st Party Cookie macro returns the value of the cookie whose name you indicate in the Cookie Name field. For example, if you set up a cookie named &ldquo;front-page-visits&rdquo; which increases by one every time the visitor visits your front page, you can set up this macro to return the value (i.e. number of visits) every time the macro is used.</p>

<p><strong>USE CASE</strong></p>

<p>Check my previous article on <a href="https://www.simoahava.com/analytics/universal-analytics-fire-script-just-per-session/">the session cookie</a> for a nice use case for this macro.</p>

<p>Basically this macro can be used to replace any code you used to have for retrieving cookie values.</p>

<h3 id="2-auto-event-variable">2. Auto-Event Variable</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/auto-event-variable.jpg" title="Auto-Event Variable">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/auto-event-variable.jpg#ZgotmplZ" alt="Auto-Event Variable">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>When you <a href="https://www.simoahava.com/analytics/auto-event-tracking-google-tag-manager/">set up an event listener</a> using GTM, you can use the auto-event variable macros to return the value of various attributes of the element you were listening to.</p>

<p>You need to specify the variable type of the auto-event variable you want to use. Here are the different types.</p>

<p><em>Element</em>: This returns the element that was clicked. Note that the macro returns an object, not a string, so the best use of it is for traversing the DOM tree of the clicked element (e.g. <strong>{{Element}}.children[0].tagName</strong> returns the tag name of the first child of the clicked element).</p>

<p><em>Element classes</em>: This returns the class attribute of the element that was clicked. For example, if the element was <code>&lt;div class=&quot;mainBanner&quot;&gt;</code>, you&rsquo;d get &ldquo;mainBanner&rdquo; as the return value.</p>

<p><em>Element ID</em>: This returns the ID attribute of the element that was clicked. For example, if the element was <code>&lt;a href=&quot;/home&quot; id=&quot;home-link&quot;/&gt;</code>, the macro would return &ldquo;home-link&rdquo;.</p>

<p><em>Element target</em>: This returns the target attribute of the element that was clicked. For example, if the element was <code>&lt;a href=&quot;/home&quot; target=&quot;blank&quot;/&gt;</code>, the macro would return &ldquo;blank&rdquo;.</p>

<p><em>Element text</em>: This returns the text content (if any) of the element that was clicked. It returns either the innerText or the textContent property (depending on what browser the visitor uses).</p>

<p><em>Element URL</em>: This returns the href (in e.g. links) or action (in e.g. forms) attribute of the clicked (or submitted) element. For example, if the element was <code>&lt;form action=&quot;/process-form&quot; id=&quot;myForm&quot;&gt;</code>, the macro would return &ldquo;/process-form&rdquo;. You can also choose which URL component is returned by the Element URL macro (see the chapter on URL macros for a description of component types).</p>

<p><em>History New URL Fragment</em>: The <em>History</em> macros are populated by the History Listener. History New URL Fragment returns the URL fragment set in the current history state. You can use this to fire your tags (e.g. pageview) when a certain URL fragment is in the URL.</p>

<p><em>History Old URL Fragment</em>: Returns the URL fragment set in the previous history change event. For example, if you first navigate to <strong>#aboutus</strong> then to <strong>#contact</strong>, History New URL Fragment will return &ldquo;aboutus&rdquo; and History Old URL Fragment will return &ldquo;contact&rdquo;.</p>

<p><em>History New State</em>: History New State returns the state object stored in the current history entry (if any). You can access the properties of this object to set up your content and fire your dynamic tags. Note that it&rsquo;s an <em>object</em> that is returned, so you can&rsquo;t use it directly in any GTM fields. You&rsquo;ll need to use some programming logic to access the properties of this object if you want to send them as strings with your tags.</p>

<p><em>History Old State</em>: The previous state stored in browser history (if any). You can use this to determine what the previous browser history state was, for example if navigation patterns determine the tags you want to fire.</p>

<p><strong>USE CASE</strong></p>

<p>There&rsquo;s a million different things you can use auto-event variables for. The variables are most frequently used to refer to certain aspects of the element in event descriptions. You could, for example, add {{element url}} as the action of a GA event which measures link clicks on your different pages.</p>

<p>Check my tutorial on <a href="https://www.simoahava.com/analytics/auto-event-tracking-google-tag-manager/">auto-event tracking</a> to see how the different auto-event variables can be used to improve your site measurement.</p>

<h3 id="3-constant-string">3. Constant String</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/custom-string.jpg" title="GA tracking code as macro">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/custom-string.jpg#ZgotmplZ" alt="GA tracking code as macro">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This macro can be used to store a string you&rsquo;d use over and over again. In other words, it&rsquo;s a time-saver.</p>

<p><strong>USE CASE</strong></p>

<p>Store your GA tracking code in this, so you don&rsquo;t have to remember it in every single tag. Just add the UA-XXXXXXX-X into the &ldquo;Value&rdquo; field, and name the macro &ldquo;GA Tracking Code&rdquo; or something similar. After that, whenever your tracking code is required (e.g. in tags), you can just use the macro {{GA Tracking Code}}.</p>

<h3 id="4-container-version-number">4. Container Version Number</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/container-version-number.jpg" title="Container version number">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/container-version-number.jpg#ZgotmplZ" alt="Container version number">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This returns your GTM container version number. If you&rsquo;re in the Preview mode (as you should be whenever you&rsquo;re testing), this returns the preview container version number.</p>

<p><strong>USE CASE</strong></p>

<p>A nice way to use it is to output the version number into the console using <strong>console.log({{container version}});</strong> in your Custom HTML tag. This way you can always check the console if you&rsquo;re unsure which version you&rsquo;re currently running. It&rsquo;s a good way to debug your live implementation.</p>

<h3 id="5-custom-event">5. Custom Event</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/event.jpg" title="Event macro">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/event.jpg#ZgotmplZ" alt="Event macro">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This macro returns the data layer &ldquo;event&rdquo; value of the last event that was pushed into the array. So if you&rsquo;ve just executed <strong>dataLayer.push({&ldquo;event&rdquo;: &ldquo;myEvent&rdquo;});</strong>, this macro will return &ldquo;myEvent&rdquo;.</p>

<p><strong>USE CASE</strong></p>

<p>This should be one of your most familiar macros. It comes with every container setup under the name {{event}}. There are about a zillion use cases for this, most notably in firing and blocking rules. For example, if you only want a tag to fire when the event &ldquo;fireNow&rdquo; has been pushed into the data layer, you can add the rule <strong>{{event}} equals fireNow</strong> to your tag. Then, as soon as you execute <strong>dataLayer.push({&ldquo;event&rdquo;: &ldquo;fireNow&rdquo;});</strong> the event macro will be populated with the value &ldquo;fireNow&rdquo; and your firing rule will trigger.</p>

<h3 id="6-custom-javascript">6. Custom JavaScript</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/custom-javascript-macro.jpg" title="Custom JavaScript Macro">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/custom-javascript-macro.jpg#ZgotmplZ" alt="Custom JavaScript Macro">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>Use this macro to perform a simple JavaScript function using either ad hoc values or elements in the DOM tree. The JavaScript function <strong>has</strong> to be encased in a function structure, it <strong>has</strong> to return a value and it <strong>can&rsquo;t</strong> take parameters of its own.</p>

<p><strong>USE CASE</strong></p>

<p>You could use it with auto-event tracking to return the value &ldquo;Outbound link&rdquo; for all outbound links and &ldquo;In-site link&rdquo; for all in-site links. You can then use these as your Event Category in the event where you send information about the link that was clicked. The function would look like this:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>() {
  <span style="color:#66d9ef">if</span>({{<span style="color:#a6e22e">element</span> <span style="color:#a6e22e">url</span>}}.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;http://www.my-domain.com&#34;</span>) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;In-site link&#34;</span>;
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;Outbound link&#34;</span>;
  }
}
</code></pre></div>

<p>See how I&rsquo;m referring to another macro within this macro? :) &ldquo;www.my-domain.com/&rdquo; would naturally need to be replaced with your hostname.</p>

<p>Another neat trick is to use a Custom JavaScript macro to retrieve the file extension of the link that was clicked. You can use this to create more dynamic tags. Check out the tip on <a href="https://plus.google.com/109635181158374226872/posts/AuVjXieWx7J">this Google+ post</a>.</p>

<h3 id="7-data-layer-variable">7. Data Layer Variable</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/data-layer-variable.jpg" title="Data Layer Variable">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/data-layer-variable.jpg#ZgotmplZ" alt="Data Layer Variable">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>Use this macro to refer to the variables you push into the data layer. Remember, you do the push with <strong>dataLayer.push({&ldquo;Variable_Name&rdquo;: &ldquo;Some value&rdquo;});</strong>. If you set this macro to look for &ldquo;Variable Name&rdquo;, the return value will be &ldquo;Some value&rdquo;.</p>

<p>With &ldquo;version 2&rdquo; (now default), you can refer to nested values using dot notation. For example, if you&rsquo;ve pushed <strong>dataLayer.push({&ldquo;Products&rdquo;: {&ldquo;Product_1&rdquo;: &ldquo;Lawn mower&rdquo;}});</strong>, by referring to Data Layer Variable Name <strong>Products.Product_1</strong>, you&rsquo;ll get &ldquo;Lawn mower&rdquo; as the return value.</p>

<p><strong>USE CASE</strong></p>

<p>You can use it nicely in conjunction with auto-event tracking. When you click an element, the data layer is updated with the object <strong>gtm.element</strong>, which can be traversed like any DOM object. For example, to get the tag name of the object that was clicked, you&rsquo;d create a data layer variable macro for <strong>gtm.element.tagName</strong>. Clicking an image would then return &ldquo;IMG&rdquo;.</p>

<h3 id="8-debug-mode">8. Debug Mode</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/debug-mode.jpg" title="Debug Mode">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/debug-mode.jpg#ZgotmplZ" alt="Debug Mode">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This returns &ldquo;true&rdquo; if you&rsquo;re in Google Tag Manager Debug mode, and &ldquo;false&rdquo; if you aren&rsquo;t.</p>

<p><strong>USE CASE</strong></p>

<p>See Lookup Table Macro below for a nice use case.</p>

<h3 id="9-dom-element">9. DOM Element</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/dom-element.jpg" title="DOM Element">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/dom-element.jpg#ZgotmplZ" alt="DOM Element">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>Use this macro to refer to any element that can be found in the Document Object Model. The element needs a unique ID identifier. You can even specify the attribute whose value you want to get in return. If you don&rsquo;t specify an attribute, you get the text content of the element (if any).</p>

<p><strong>USE CASE</strong></p>

<p>Let&rsquo;s say I want a certain tag to only fire on pages where the text &ldquo;By Simo Ahava&rdquo; can be found in the <code>&lt;div id=&quot;author&quot;&gt;</code> element. A good use case for just my article pages. For this to work, I&rsquo;d create a DOM Element macro called &ldquo;Author&rdquo; with Element ID &ldquo;author&rdquo;. After that, I can create a firing rule <strong>{{Author}} contains &ldquo;By Simo Ahava&rdquo;</strong> for the tag that only fires on my article pages.</p>

<h3 id="10-http-referrer">10. HTTP Referrer</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/http-referrer.jpg" title="HTTP Referrer">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/http-referrer.jpg#ZgotmplZ" alt="HTTP Referrer">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This returns the HTTP referrer (i.e. the previous page URL). You can also choose which URL component is returned by the HTTP Referrer macro (see the chapter on URL macros for a description of component types).</p>

<p><strong>USE CASE</strong></p>

<p>You can use it to check if this is the first page of the visit or not. Create the macro and then use it like:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> ({{<span style="color:#a6e22e">referrer</span>}}.<span style="color:#a6e22e">indexOf</span>(<span style="color:#e6db74">&#34;http://www.mydomain.com&#34;</span>) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>) { 
  <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Yay, not the landing page!&#34;</span>); 
} <span style="color:#66d9ef">else</span> { 
  <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Aww, this is the landing page&#34;</span>); 
}
</code></pre></div>

<h3 id="11-javascript-variable">11. JavaScript Variable</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/javascript-variable.jpg" title="JavaScript Variable">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/javascript-variable.jpg#ZgotmplZ" alt="JavaScript Variable">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>This returns the value of a globally defined JavaScript variable.</p>

<p>You can use dot notation to refer to nested variables, e.g. <strong>document.doctype</strong> to get the doctype declaration of the current document. (Thanks <a href="http://plus.google.com/+BrianKuhn">+Brian Kuhn</a> for pointing this out).</p>

<p><strong>USE CASE</strong></p>

<p>If you haven&rsquo;t (or can&rsquo;t) push the value into the data layer (preferred), or if you can&rsquo;t find the variable in the DOM, you can use this macro to refer to it. A simple use case would be if you define a global variable (e.g. <strong>var myName=&ldquo;Simo&rdquo;;</strong>) in a Custom HTML Tag, you can use this macro to get the content of this variable in other tags as well. Sure, you could just use &ldquo;myName&rdquo; to refer to the global variable, but reusability is the key here. If you find that you need to change the variable reference, you just need to change it once in the variable definition and once in the macro, rather than many times in all the tags where you refer to the variable.</p>

<h3 id="12-lookup-table">12. Lookup Table</h3>

<p><strong>DESCRIPTION</strong></p>

<p>My favorite macro, by far. Check my five-star <a href="https://www.simoahava.com/analytics/google-tag-manager-lookup-table-macro/">review of the lookup table macro</a> for specifics. The lookup table macro is basically a simple runtime evaluation, where you assign value Y to variable Z if X is something.</p>

<p><strong>USE CASE</strong></p>

<p>Here&rsquo;s a really nice use case (<a href="https://plus.google.com/109635181158374226872/posts/U7kBb4p33yd">originally on Google+</a>). If you use GTM Preview &amp; Debug mode a lot (AND YOU SHOULD!), you might be annoyed at all the debug hits in your GA account (unless, of course, you filter yourself out). You can use a combination of Lookup Table and Debug Mode macros to make sure that debug mode hits are sent to your test account:</p>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/lookup-table-macro.png" title="The Lookup Table macro for debug mode">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/lookup-table-macro.png#ZgotmplZ" alt="The Lookup Table macro for debug mode">
  
    </a>
  
  
</div>



<p>Here the macro {{GA Tracking Code}} is assigned a variable value depending on the value returned by the {{Debug Mode}} macro.</p>

<p>Remember that lookup tables only accept simple runtime evaluation of &ldquo;when X equals Y&rdquo;, so you can&rsquo;t do calculations (e.g. &ldquo;when X &lt; 10&rdquo;).</p>

<h3 id="13-random-number">13. Random Number</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/random-number.jpg" title="random-number">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/random-number.jpg#ZgotmplZ" alt="random-number">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>Returns a random number between 0 and 2147483647.</p>

<p><strong>USE CASE</strong></p>

<p>You can use it to create a random hash for your URLs (for cache-busting) OR you can <a href="http://dan-russell.com/2013/03/sampling-a-percentage-of-your-users-with-google-tag-manager/">follow this example</a> of using the random number to fire a tag for only a certain percentage of your visitors.</p>

<h3 id="14-url">14. URL</h3>




<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2014/02/url.jpg" title="URL">
  
    <img class="fig-img" src="https://www.simoahava.com/images/2014/02/url.jpg#ZgotmplZ" alt="URL">
  
    </a>
  
  
</div>



<p><strong>DESCRIPTION</strong></p>

<p>Returns the URL or a specific component thereof. The various component types are:</p>

<p><em>URL</em>: Returns the entire URL minus fragment (fragment begins with a #).</p>

<p><em>Protocol</em>: Returns the protocol of the URL address (i.e. http or https).</p>

<p><em>Host Name</em>: Returns the full hostname of the URL (e.g. www.google.com) or you can choose to strip the www-prefix.</p>

<p><em>Port</em>: Returns the port number of the hostname. If no port number is specified, the return value is either 80 or 443 (for http and https, respectively).</p>

<p><em>Path</em>: Returns the URI of the URL address, i.e. the structure immediately following the hostname. You can also specify &ldquo;default pages&rdquo;, which are stripped out of the return value if found.</p>

<p><em>Query</em>: Returns the query string of the URL address (without leading question mark and possible fragment). You can also specify a query key for the macro, after which only the value of the key is returned if found in the URL.</p>

<p><em>Fragment</em>: Returns the fragment of the URL without the leading #.</p>

<p><strong>USE CASE</strong></p>

<p>You could query for only email campaign traffic by creating a URL of component type Query. Set &ldquo;utm_medium&rdquo; as the Query Key. Then you can employ a firing rule for only those visits which came via email with <strong>{{URL Query}} equals email</strong>.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Macros are a really powerful way of making a complicated setup simple. You can use macros to dramatically reduce the amount of code AND separate tags in your Google Tag Manager container.</p>

<p>When using macros, a bunch of <a href="http://online-behavior.com/analytics/tag-manager-conventions">best practices</a> should be observed:</p>

<ul>
<li><p>Name your macros so that you&rsquo;ll instantly identify them (e.g. &ldquo;Name - Macro Type&rdquo;)</p></li>

<li><p>Only use macros when they facilitate either coding or maintenance; don&rsquo;t use them as replacements for one-off functions or variables</p></li>

<li><p>Document your macro use somewhere so that you&rsquo;ll know what repercussions changes might have</p></li>
</ul>

<p>The last is especially important in large implementations, where dozens and dozens of macros are used in dozens and dozens of tags.</p>

<p>Do you have any questions about macros? Drop a comment on this post if you didn&rsquo;t find what you were looking for above.</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/macros/">macros</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/dont-gtm-listeners-work/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-tag-manager-lookup-table-macro/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Macro%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/macro-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/dont-gtm-listeners-work/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/google-tag-manager-lookup-table-macro/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Macro%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/macro-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Macro%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/macro-guide-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
          <i class="fa fa-google-plus"></i><span>Share on Google&#43;</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/macro-guide-google-tag-manager/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        





        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

