

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Create Slack Notification System For Google Tag Manager Changes | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2020\/02\/gtm-slack-notification-system.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/create-slack-notification-system-google-tag-manager-changes\/",
  "datePublished": "2020-03-02T09:00:00\x2b02:00",
  "dateModified": "2020-03-02T09:00:00\x2b02:00",
  "description": "Use Google Cloud Functions to notify Slack whenever a change is detected in a Google Tag Manager container. The example in this article covers notifying about recently published container versions.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Create Slack Notification System For Google Tag Manager Changes | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article'});
    </script>
    

    

    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/create-slack-notification-system-google-tag-manager-changes/">
    
    <meta name="description" content="Use Google Cloud Functions to notify Slack whenever a change is detected in a Google Tag Manager container. The example in this article covers notifying about recently published container versions.">
    <meta property="og:description" content="Use Google Cloud Functions to notify Slack whenever a change is detected in a Google Tag Manager container. The example in this article covers notifying about recently published container versions.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Create Slack Notification System For Google Tag Manager Changes">
    <meta property="og:url" content="https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Create Slack Notification System For Google Tag Manager Changes">
    <meta name="twitter:description" content="Use Google Cloud Functions to notify Slack whenever a change is detected in a Google Tag Manager container. The example in this article covers notifying about recently published container versions.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2020/02/gtm-slack-notification-system.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2020/02/gtm-slack-notification-system.jpg">
    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
            <div class="post-header main-content-wrap text-left">

  

    <h1>
      Create Slack Notification System For Google Tag Manager Changes
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-03-02T09:00:00&#43;02:00">
        
  March 2, 2020

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/#disqus_thread">Comments</a>
  </div>


</div>

          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>Until recently, I had a feature on <a href="https://www.gtmtools/">GTM Tools</a> that polled the user's <a href="https://tagmanager.google.com/">Google Tag Manager</a> container(s) for a recently published version. If one was found, a notification was sent to a <a href="https://www.slack.com/apps/">Slack app</a>, which forwarded it to a workspace and channel of the user's choice.</p>
<p>This was fine, except for the fact that polling the GTM and Slack APIs for dozens upon dozens of containers is a total resource hog, and the only way I can maintain GTM Tools is it doesn't have API leaks like that.</p>
<p>I thus deprecated the feature. Feeling bad about the decision (and because I got a bunch of feedback that users were actually using the feature), I wanted to share a step-by-step guide on how anyone can setup a simple Slack notification system for changes in a Google Tag Manager container.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gtm-slack-notification-system.jpg" title="Slack notification system for GTM changes">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gtm-slack-notification-system.jpg#ZgotmplZ" alt="Slack notification system for GTM changes">
  
    </a>
  
  
</div>


<p>It's a <a href="https://nodejs.org/en/">Node.js</a> application running on <a href="https://cloud.google.com/functions/">Google Cloud Functions</a>. Google Cloud Functions are serverless, self-contained functions on the <a href="https://cloud.google.com/">Google Cloud Platform</a> (GCP) that can be triggered with different stimuli, such as an HTTP request or a <a href="https://cloud.google.com/pubsub/docs">Pub/Sub</a> message. For our purposes, it's the perfect tech because what we're trying to do is a very simple operation that needs to run periodically with zero- or low-cost.</p>
<h1 id="table-of-contents">Table of Contents</h1><nav id="TableOfContents">
  <ul>
    <li><a href="#how-it-works">How it works</a></li>
    <li><a href="#what-youll-need">What you'll need</a></li>
    <li><a href="#step-1-create-a-new-google-cloud-platform-project">Step 1: Create a new Google Cloud Platform project</a></li>
    <li><a href="#step-2-configure-the-gcp-project">Step 2: Configure the GCP project</a>
      <ul>
        <li><a href="#enable-the-apis">Enable the APIs</a></li>
        <li><a href="#create-a-new-cloud-storage-bucket">Create a new Cloud Storage bucket</a></li>
      </ul>
    </li>
    <li><a href="#step-3-create-a-new-slack-app">Step 3: Create a new Slack app</a>
      <ul>
        <li><a href="#create-the-app">Create the app</a></li>
        <li><a href="#create-an-incoming-webhook">Create an incoming webhook</a></li>
      </ul>
    </li>
    <li><a href="#step-4-configure-the-cloud-function">Step 4: Configure the Cloud Function</a>
      <ul>
        <li><a href="#modify-the-configjson-file">Modify the config.json file</a></li>
        <li><a href="#create-a-new-cloud-function">Create a new Cloud Function</a></li>
      </ul>
    </li>
    <li><a href="#step-5-add-a-service-account-as-a-user-to-your-gtm-containers">Step 5: Add a service account as a user to your GTM containers</a></li>
    <li><a href="#step-6-test-it">Step 6: Test it</a></li>
    <li><a href="#step-7-setup-cloud-scheduler-to-run-the-function-every-x-minutes">Step 7: Setup Cloud Scheduler to run the function every X minutes</a></li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
<h2 id="how-it-works">How it works</h2>
<p>Once it's up and running, here's how the solution works:</p>
<ol>
<li>Every N minutes (you can choose the interval), a <em>cron job</em> running on <strong>Cloud Scheduler</strong> will send a Pub/Sub message.</li>
<li>This Pub/Sub message triggers the <strong>Cloud Function</strong>, which hosts a simple, serverless <strong>Node.js</strong> application.</li>
<li>The application downloads a <em>state object</em> from <strong>Cloud Storage</strong>, which contains the most recent information (since the previous triggering) about each Google Tag Manager container you've specified in the application configuration*.</li>
<li>Then, the application polls the <strong>Google Tag Manager API</strong> to fetch details about the <em>published</em> version of each container.</li>
<li>If the application detects a change in the <em>version ID</em> of the published version (compared to that stored in the state object), it sends a message using a <strong>Slack Incoming Webhook</strong>.</li>
<li>This webhook posts the message to the appropriate channel in the Slack workspace you've chosen for the integration.</li>
</ol>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gtm-slack-process.jpg" title="GTM Slack process">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gtm-slack-process.jpg#ZgotmplZ" alt="GTM Slack process">
  
    </a>
  
  
</div>


<p>Once everything is done, the application stores the new, updated state back into Google Cloud Storage and finishes execution.</p>
<h2 id="what-youll-need">What you'll need</h2>
<p>To make the whole thing work, you'll need a <a href="https://console.cloud.google.com/">Google Cloud Platform account</a>. In addition to that, you'll need:</p>
<ul>
<li>Access to a <a href="https://www.slack.com/">Slack</a> workspace, with permissions to add a bot to a channel.</li>
<li>A credit card (this solution will most likely be zero-cost, but you need to add your billing information regardless).</li>
<li>A <a href="https://cloud.google.com/billing/docs/how-to/manage-billing-account">Google Cloud billing account</a>.</li>
<li>Permissions to add a new READ user to the Google Tag Manager container(s) you want to observe.</li>
</ul>
<h2 id="step-1-create-a-new-google-cloud-platform-project">Step 1: Create a new Google Cloud Platform project</h2>
<p>The first thing you'll need to do is create a new project in GCP.</p>
<p>You can do this by following <a href="https://console.cloud.google.com/projectcreate">this link</a>.</p>
<p>Give your project a name, and make sure you select a valid Billing Account for it.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/create-new-gcp-project.jpg" title="Create new GCP project">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/create-new-gcp-project.jpg#ZgotmplZ" alt="Create new GCP project">
  
    </a>
  
  
</div>


<p>The console will hang for a while as your new project is being created. Once the project is created, you can visit it via the project selector.</p>
<h2 id="step-2-configure-the-gcp-project">Step 2: Configure the GCP project</h2>
<h3 id="enable-the-apis">Enable the APIs</h3>
<p>Next thing you'll need to do is enable the APIs that the application will require. You'll also need to create a <em>bucket</em> in Google Cloud Storage, but we'll get to that after the APIs have been enabled.</p>
<p>While making sure your new project is selected in the console, type <code>Cloud Functions API</code> into the search bar and click the result.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/cloud-functions-api.jpg" title="Cloud Functions API">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/cloud-functions-api.jpg#ZgotmplZ" alt="Cloud Functions API">
  
    </a>
  
  
</div>


<p>In the screen that opens, click <strong>Enable</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/enable-api.jpg" title="Enable API">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/enable-api.jpg#ZgotmplZ" alt="Enable API">
  
    </a>
  
  
</div>


<p>Do the same for <code>Tag Manager API</code>.</p>
<h3 id="create-a-new-cloud-storage-bucket">Create a new Cloud Storage bucket</h3>
<p>Once you've enabled these two APIs, it's time to create a new <strong>bucket</strong> in Google Cloud Storage. This is where we'll store the <em>state</em> of the GTM container. Follow <a href="https://console.cloud.google.com/storage/browser">this link</a> to reach the storage browser.</p>
<p>Click the big blue <strong>Create Bucket</strong> link in the middle of the screen.</p>
<p>Give the bucket a global, unique name. I simply named it the same thing as my project: <code>simo-demo-gtm-slack</code>.</p>
<p>As <strong>Location type</strong>, choose <strong>Region</strong>, and select one that's available for <a href="https://cloud.google.com/functions/docs/locations">Cloud Functions as well</a>. For example, I chose <code>europe-west1</code> as the region for the Google Cloud Storage bucket, and I'll use the same location eventually for the Cloud Function.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gcs-location.jpg" title="GCS location">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gcs-location.jpg#ZgotmplZ" alt="GCS location">
  
    </a>
  
  
</div>


<p>Keep the <strong>storage class</strong> as the default (<strong>Standard</strong>).</p>
<p>Keep <strong>access control</strong> as the default (<strong>Fine-grained</strong>).</p>
<p>Don't touch the <strong>Advanced settings</strong>.</p>
<p>Click the blue <strong>Create</strong> button when ready.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gcs-bucket-ready.jpg" title="Cloud Storage bucket ready">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gcs-bucket-ready.jpg#ZgotmplZ" alt="Cloud Storage bucket ready">
  
    </a>
  
  
</div>


<p>Make sure you remember your <strong>bucket name</strong> (<code>simo-demo-gtm-slack</code> in my example) - you'll need it when configuring the Cloud Function.</p>
<h2 id="step-3-create-a-new-slack-app">Step 3: Create a new Slack app</h2>
<h3 id="create-the-app">Create the app</h3>
<p>You need to create a new <strong>Slack app</strong>. This application will be in charge of forwarding the messages sent by the Cloud Function to your Slack workspace and channel.</p>
<p>To create a new app, visit <a href="https://api.slack.com/">https://api.slack.com/</a> and click the big green <strong>Start Building</strong> button in the middle of the screen.</p>
<p>Give the app a <strong>name</strong> (this will appear as the name of the bot in Slack). Choose the <strong>workspace</strong> you want to add this bot to.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/create-app.jpg" title="Create Slack app">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/create-app.jpg#ZgotmplZ" alt="Create Slack app">
  
    </a>
  
  
</div>


<p>When done, click <strong>Create App</strong>.</p>
<h3 id="create-an-incoming-webhook">Create an incoming webhook</h3>
<p>In the dashboard that opens, choose the <strong>Incoming Webhooks</strong> functionality.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/incoming-webhooks.jpg" title="Incoming webhooks">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/incoming-webhooks.jpg#ZgotmplZ" alt="Incoming webhooks">
  
    </a>
  
  
</div>


<p>In the configuration screen that opens, click the toggle to activate webhooks.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/activate-webhooks.jpg" title="Activate webhooks">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/activate-webhooks.jpg#ZgotmplZ" alt="Activate webhooks">
  
    </a>
  
  
</div>


<p>Then, scroll down the configuration screen and click the button to <strong>Add New Webhook To Workspace</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/add-webhook-to-workspace.jpg" title="Add webhook to workspace">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/add-webhook-to-workspace.jpg#ZgotmplZ" alt="Add webhook to workspace">
  
    </a>
  
  
</div>


<p>Now you need to choose which channel to post the messages on, so select one from the list. Once done, click <strong>Allow</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/allow-bot-channel.jpg" title="Allow bot to Slack channel">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/allow-bot-channel.jpg#ZgotmplZ" alt="Allow bot to Slack channel">
  
    </a>
  
  
</div>


<p>You should see your new bot enter as a new user into the channel.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/new-integration-slack.jpg" title="New integration in Slack">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/new-integration-slack.jpg#ZgotmplZ" alt="New integration in Slack">
  
    </a>
  
  
</div>


<p>In the list of webhooks for your app, there should now be a new URL. Keep this tab open for a while, as you'll soon need the URL.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/your-webhook-url.jpg" title="Your webhook URL">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/your-webhook-url.jpg#ZgotmplZ" alt="Your webhook URL">
  
    </a>
  
  
</div>


<h2 id="step-4-configure-the-cloud-function">Step 4: Configure the Cloud Function</h2>
<p>Almost done!</p>
<p>Now, download this archive:</p>
<p><a href="https://github.com/sahava/gtm-slack-integration/raw/master/function.zip">https://github.com/sahava/gtm-slack-integration/raw/master/function.zip</a></p>
<p>Unzip the archive to a folder on your computer.</p>
<h3 id="modify-the-configjson-file">Modify the config.json file</h3>
<p>Rename the <code>config.sample.json</code> to <code>config.json</code> and open the file for editing with a <strong>text editor</strong> (or whatever you use to edit JSON files normally).</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/unzipped-archive.jpg" title="Unzipped archive">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/unzipped-archive.jpg#ZgotmplZ" alt="Unzipped archive">
  
    </a>
  
  
</div>


<p>This is what the default <code>config.json</code> looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#1e90ff;font-weight:bold">&#34;gcs&#34;</span>: {
    <span style="color:#1e90ff;font-weight:bold">&#34;bucketName&#34;</span>: <span style="color:#a50">&#34;gcs-bucket-name&#34;</span>,
    <span style="color:#1e90ff;font-weight:bold">&#34;fileName&#34;</span>: <span style="color:#a50">&#34;filename.json&#34;</span>
  },
  <span style="color:#1e90ff;font-weight:bold">&#34;slackOutput&#34;</span>: [{
    <span style="color:#1e90ff;font-weight:bold">&#34;slackWebhookUrl&#34;</span>: <span style="color:#a50">&#34;https://hooks.slack.com/services/YYYY/XXXX/ZZZZ&#34;</span>,
    <span style="color:#1e90ff;font-weight:bold">&#34;gtmContainers&#34;</span>: [<span style="color:#a50">&#34;12345_23456&#34;</span>, <span style="color:#a50">&#34;12345_34567&#34;</span>]
  }],
  <span style="color:#1e90ff;font-weight:bold">&#34;verboseLogging&#34;</span>: <span style="color:#00a">true</span>
}</code></pre></div>
<p>Change the <code>bucketName</code> value to what you set when <a href="#create-a-new-cloud-storage-bucket">creating the bucket</a>.</p>
<p>Set the <code>fileName</code> to what you want to store the GTM state as. For all intents and purposes, this makes very little difference. You can just keep the name as <code>filename.json</code> if you wish.</p>
<p>Set <code>slackWebhookUrl</code> to the URL of the incoming webhook you created in the <a href="#create-an-incoming-webhook">previous chapter</a>.</p>
<p>Now, populate the <code>gtmContainers</code> array with all the combinations of Google Tag Manager account ID and container ID that you want to analyze for changes. The syntax is <code>accountID_containerID</code>, so in the default <code>config.json</code>, there are two containers:</p>
<ol>
<li>Account ID <code>12345</code>, Container ID <code>23456</code></li>
<li>Account ID <code>12345</code>, Container ID <code>34567</code></li>
</ol>
<p>You can find the account ID and container ID in the URL when visiting the container. The account ID is the first numerical string you see, and the container ID is the second one. For example, this is one of the containers I want to monitor:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gtm-accountid-containerid.jpg" title="GTM account ID container ID">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gtm-accountid-containerid.jpg#ZgotmplZ" alt="GTM account ID container ID">
  
    </a>
  
  
</div>


<p>And this is another one:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gtm-accountid-containerid-2.jpg" title="Another account ID container ID">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gtm-accountid-containerid-2.jpg#ZgotmplZ" alt="Another account ID container ID">
  
    </a>
  
  
</div>


<p>So the array would look like this:</p>
<p><code>&quot;gtmContainers&quot;: [&quot;23019854_8060344&quot;, &quot;4702258931_12269166&quot;]</code></p>
<blockquote>
<p>Remember that you need enough access rights on these containers to add a new user to them!</p>
</blockquote>
<p>You can keep the <code>verboseLogging</code> setting as <code>true</code>. My final <code>config.json</code> now looks like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#1e90ff;font-weight:bold">&#34;gcs&#34;</span>: {
    <span style="color:#1e90ff;font-weight:bold">&#34;bucketName&#34;</span>: <span style="color:#a50">&#34;simo-demo-gtm-slack&#34;</span>,
    <span style="color:#1e90ff;font-weight:bold">&#34;fileName&#34;</span>: <span style="color:#a50">&#34;filename.json&#34;</span>
  },
  <span style="color:#1e90ff;font-weight:bold">&#34;slackOutput&#34;</span>: [{
    <span style="color:#1e90ff;font-weight:bold">&#34;slackWebhookUrl&#34;</span>: <span style="color:#a50">&#34;https://hooks.slack.com/services/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&#34;</span>,
    <span style="color:#1e90ff;font-weight:bold">&#34;gtmContainers&#34;</span>: [<span style="color:#a50">&#34;23019854_8060344&#34;</span>, <span style="color:#a50">&#34;4702258931_12269166&#34;</span>]
  }],
  <span style="color:#1e90ff;font-weight:bold">&#34;verboseLogging&#34;</span>: <span style="color:#00a">true</span>
}</code></pre></div>
<p><strong>Save</strong> the file when done.</p>
<p>Then, create a new <strong>ZIP</strong> archive that has the following files from the folder:</p>
<ul>
<li><code>index.js</code></li>
<li><code>config.json</code></li>
<li><code>package.json</code></li>
</ul>
<p>Keep this archive handy, you'll need it very shortly.</p>
<h3 id="create-a-new-cloud-function">Create a new Cloud Function</h3>
<p>Go to the <a href="https://console.cloud.google.com/functions/list">Cloud Functions dashboard</a>, and click the <strong>Create Function</strong> link.</p>
<p>Give the function a name. Again, my lack of imagination steers me to name it the same as my project and my GCS bucket: <code>simo-demo-gtm-slack</code>.</p>
<p>Keep the <strong>Memory allocated</strong> as its default (256MB), and then choose <strong>Cloud Pub/Sub</strong> from the list of triggers. In the <strong>Topic</strong> drop-down, click <strong>Create new topic</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/create-new-topic.jpg" title="Create new Pub/Sub topic">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/create-new-topic.jpg#ZgotmplZ" alt="Create new Pub/Sub topic">
  
    </a>
  
  
</div>


<p>Set the topic name to <code>gtm-slack-start</code> and click <strong>CREATE</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/new-pubsub-topic.jpg" title="New Pub/Sub topic">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/new-pubsub-topic.jpg#ZgotmplZ" alt="New Pub/Sub topic">
  
    </a>
  
  
</div>


<p>In the <strong>Source Code</strong> selection, choose <strong>ZIP upload</strong>. Keep <strong>Node.js 8</strong> as the <strong>Runtime</strong>.</p>
<p>For <strong>ZIP file</strong>, click <strong>Browse</strong> and locate the archive you just created with your modified <code>config.json</code> included in it.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/new-zip-file.jpg" title="New ZIP file">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/new-zip-file.jpg#ZgotmplZ" alt="New ZIP file">
  
    </a>
  
  
</div>


<p>Next, click <strong>Browse</strong> next to <strong>Stage bucket</strong>, and choose the bucket you created in the beginning of this tutorial.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gcs-bucket-stage.jpg" title="GCS stage bucket">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gcs-bucket-stage.jpg#ZgotmplZ" alt="GCS stage bucket">
  
    </a>
  
  
</div>


<p>The Google Cloud Platform will use this bucket as a temporary location to <em>stage</em> the Cloud Functions files.</p>
<p>For <strong>Function to execute</strong>, type: <code>getGtmInfo</code>.</p>
<p>Finally, expand the <strong>Environment variables, networking, timeouts and more</strong> option, and set your Cloud Functions to run on the same region where you created the Cloud Storage bucket in.</p>
<blockquote>
<p>This isn't a necessary step - you can set the Cloud Functions to run on any region you wish. It does make the application run a bit smoother, and can keep any possible costs down.</p>
</blockquote>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/advanced-settings.jpg" title="Advanced Settings">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/advanced-settings.jpg#ZgotmplZ" alt="Advanced Settings">
  
    </a>
  
  
</div>


<p>Finally, click the blue <strong>Create</strong> button at the bottom of the configuration screen to create your Cloud Function.</p>
<p>If all goes well, the icon next to the function name should turn into a green checkmark.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/cloud-function-ready.jpg" title="Cloud Function ready">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/cloud-function-ready.jpg#ZgotmplZ" alt="Cloud Function ready">
  
    </a>
  
  
</div>


<h2 id="step-5-add-a-service-account-as-a-user-to-your-gtm-containers">Step 5: Add a service account as a user to your GTM containers</h2>
<p>When you created the Cloud Function, GCP automatically created a <strong>service account</strong> for you.</p>
<p>Service accounts can be used for server-to-server access between different Google properties. In this case, we want the Cloud Functions to have access to the Google Tag Manager containers you specified in the <code>config.json</code>, so we need to add a <strong>service account</strong> from your project as a user in Google Tag Manager.</p>
<p>To find the service account email address, browse to <a href="https://console.cloud.google.com/iam-admin/serviceaccounts">https://console.cloud.google.com/iam-admin/serviceaccounts</a>. You should see an <strong>App Engine default service account</strong> here, with email:</p>
<p><code>YOUR_PROJECT_ID@appspot.gserviceaccount.com</code></p>
<p>If you don't see a service account here, you might need to wait 10 minutes or so after creating the function, and you might need to refresh the page.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/service-account.jpg" title="Service account">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/service-account.jpg#ZgotmplZ" alt="Service account">
  
    </a>
  
  
</div>


<p>Now, copy the email address and add it as a new <strong>READ</strong> user to <em>all the containers you listed in <code>config.json</code></em>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/gtm-user.jpg" title="GTM user">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/gtm-user.jpg#ZgotmplZ" alt="GTM user">
  
    </a>
  
  
</div>


<p>Once you've done these steps, you Cloud Function has permission to communicate with these Google Tag Manager containers.</p>
<h2 id="step-6-test-it">Step 6: Test it</h2>
<p>You can now <strong>test</strong> the setup.</p>
<p>First, visit <a href="https://console.cloud.google.com/functions/list">https://console.cloud.google.com/functions/list</a> and click your function name to open it.</p>
<p>In the dashboard that opens, choose the <strong>TESTING</strong> tab. Here, click <strong>TEST THE FUNCTION</strong>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/test-the-function.jpg" title="Test the cloud function">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/test-the-function.jpg#ZgotmplZ" alt="Test the cloud function">
  
    </a>
  
  
</div>


<p>If all goes well, you should see a bunch of log entries like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/test-function-worked.jpg" title="Test function worked">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/test-function-worked.jpg#ZgotmplZ" alt="Test function worked">
  
    </a>
  
  
</div>


<p>Importantly, the <strong>state file</strong> has now been created. Thus, any time you run the function, if the version of the published containers is different from the one stored in the state file, Slack will be notified.</p>
<p>Let's try this!</p>
<p>Go ahead and <strong>publish</strong> one of your containers. Remember to name the version to describe what was changed.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/just-published-version.jpg" title="Just published version">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/just-published-version.jpg#ZgotmplZ" alt="Just published version">
  
    </a>
  
  
</div>


<p>Now, <strong>test the Cloud Function again</strong>. You should see a new Slack message from your integration.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/slack-works.jpg" title="Slack works">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/slack-works.jpg#ZgotmplZ" alt="Slack works">
  
    </a>
  
  
</div>


<p>If you see this message, then everything works as it should.</p>
<h2 id="step-7-setup-cloud-scheduler-to-run-the-function-every-x-minutes">Step 7: Setup Cloud Scheduler to run the function every X minutes</h2>
<p>Final step is to automate the polling. You can use <strong>Cloud Scheduler</strong> for that. It's basically a managed <a href="https://en.wikipedia.org/wiki/Cron">cron</a> service, which you can configure to trigger the Cloud Function every five minutes, for example.</p>
<p>First, visit <a href="https://console.cloud.google.com/cloudscheduler">https://console.cloud.google.com/cloudscheduler</a> and click <strong>CREATE JOB</strong> to create a new job.</p>
<p>From the location selector, choose a location as close to your Cloud Function as possible. I chose <code>europe-west</code>, as that's the main region where my Cloud Function and Cloud Storage buckets are running.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/scheduler-location.jpg" title="Cloud Scheduler location">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/scheduler-location.jpg#ZgotmplZ" alt="Cloud Scheduler location">
  
    </a>
  
  
</div>


<p>In the next screen, set the following options.</p>
<ul>
<li><strong>Name</strong>: Whatever you wish, I chose <code>simo-demo-gtm-slack</code>.</li>
<li><strong>Description</strong>: Leave empty.</li>
<li><strong>Frequency</strong>: Use <a href="https://crontab.guru/">crontab.guru</a> if you don't know how to set schedule expressions. I chose <code>*/5 * * * *</code> to fire the function <strong>every five minutes</strong>.</li>
<li><strong>Timezone</strong>: Irrelevant - choose your own, for example.</li>
<li><strong>Target</strong>: Choose <strong>Pub/Sub</strong>.</li>
<li><strong>Topic</strong>: <code>gtm-slack-start</code>.</li>
<li><strong>Payload</strong>: <code>true</code>.</li>
</ul>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2020/02/scheduler-cron-job.jpg" title="Scheduler cron job">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2020/02/scheduler-cron-job.jpg#ZgotmplZ" alt="Scheduler cron job">
  
    </a>
  
  
</div>


<p>Click <strong>CREATE</strong> when ready.</p>
<p>Now, publish a different container version again, and wait for the scheduler to go off. As I chose <strong>every 5 minutes</strong>, it means I have to wait a maximum of five minutes to verify the setup works.</p>
<h2 id="summary">Summary</h2>
<p>You've now got a <strong>Cloud Scheduler</strong> running your <strong>Cloud Function</strong> periodically. Each time the Cloud Function runs, it pulls the most recent state object from <strong>Cloud Storage</strong>, and then it polls the <strong>Google Tag Manager API</strong> to check if any of the containers in the state object have a newly published version.</p>
<p>If a published version is found, the Cloud Function notifies your <strong>Slack Workspace</strong> with a message that a new version has been found.</p>
<p>You can follow the costs in your Google Cloud Platform <a href="https://console.cloud.google.com/home/dashboard">dashboard</a>. With two containers, my setup costs <strong>nothing</strong>.</p>
<blockquote>
<p>Note that if you add many more containers to the setup, not only might your costs increase but you also might need to increase the timeout from 60 seconds to something higher from the Google Cloud Functions settings. Be sure to monitor the cloud <strong>logs</strong>!</p>
</blockquote>
<p>You can modify <code>index.js</code> to check other properties as well. For example, with some programming you could notify Slack about <em>what</em> changes were done. Another useful feature would be to notify if new users have been added to the container, though before you do this you must make sure it's OK to do this legally, as you'd have to store the list of users in the state object. You <em>could</em> hash this list to mitigate this, though.</p>
<p>Anyway, let me know in the comments if you have questions about the setup, or if you have other ideas for this type of a <em>diff</em>-machine!</p>

              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-cloud/">google cloud</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/cloud-functions/">cloud functions</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/slack/">slack</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/api/">api</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/cookieless-tracking-cross-site-iframes/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Create%20Slack%20Notification%20System%20For%20Google%20Tag%20Manager%20Changes%20https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              
                <span id="disqus"></span>
<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--disabled">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/cookieless-tracking-cross-site-iframes/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Create%20Slack%20Notification%20System%20For%20Google%20Tag%20Manager%20Changes%20https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#disqus">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Create%20Slack%20Notification%20System%20For%20Google%20Tag%20Manager%20Changes%20https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/create-slack-notification-system-google-tag-manager-changes/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




  
    
      <script>
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'simoahava';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  


    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

