

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "Firing A Single Tag Multiple Times In GTM | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2015\/12\/single-tag-multiple-times.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/firing-a-single-tag-multiple-times-in-gtm\/",
  "datePublished": "2015-12-09T07:40:46\u002b00:00",
  "dateModified": "2015-12-09T07:40:46\u002b00:00",
  "description": "How to fire a single Google Tag Manager tag multiple times, with a variable changing value dynamically. This is useful if you want to use a single GA tag to track data to multiple properties.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Firing A Single Tag Multiple Times In GTM | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/firing-a-single-tag-multiple-times-in-gtm/">
    
    <meta name="description" content="How to fire a single Google Tag Manager tag multiple times, with a variable changing value dynamically. This is useful if you want to use a single GA tag to track data to multiple properties.">
    <meta property="og:description" content="How to fire a single Google Tag Manager tag multiple times, with a variable changing value dynamically. This is useful if you want to use a single GA tag to track data to multiple properties.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Firing A Single Tag Multiple Times In GTM">
    <meta property="og:url" content="https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Firing A Single Tag Multiple Times In GTM">
    <meta name="twitter:description" content="How to fire a single Google Tag Manager tag multiple times, with a variable changing value dynamically. This is useful if you want to use a single GA tag to track data to multiple properties.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2015/12/single-tag-multiple-times.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2015/12/single-tag-multiple-times.jpg">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
  

    <h1>
      Firing A Single Tag Multiple Times In GTM
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-12-09T07:40:46Z">
        
  December 9, 2015

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p>There might be many reasons you&rsquo;d want to fire a single Tag multiple times in <a href="https://tagmanager.google.com/">Google Tag Manager</a>. The most common one is when you want to deploy multiples of a single tracking point on the web. Perhaps you have a roll-up account you want to send the hits to, in addition to the site-specific tracking property.</p>
<p>Quite a while ago, I <a href="https://www.simoahava.com/analytics/fun-google-tag-manager-part-2/">gave a solution for this</a> with a specific focus on <a href="https://analytics.google.com">Google Analytics</a> Tags. It leveraged the <a href="https://www.simoahava.com/gtm-tips/hitcallback-eventcallback/">hitCallback</a> feature of the Universal Analytics library by increasing a global counter each time a Tag had fired. This solution had a number of drawbacks: being GA-specific, polluting the global namespace, and requiring a unique setup for every single Tag you wanted to fire.</p>
<p>Not long after this, I actually started doing the whole thing in a different way. A much more durable, sensible, robust way, and in this article I want to open up the method. In fact, it&rsquo;s not just <em>me</em> who wants to introduce this. This article is a collaboration with Marco Wekking from <a href="http://www.adwise.nl">Adwise</a>. He approached me with almost exactly the same solution asking for a review. Instead of reviewing, I asked if he would like to contribute to a collaboration of sorts on this post, and he gracefully accepted. So, much of this post is from Marco&rsquo;s pen, with my typical bad humour and some JavaScript shenanigans intertwined in the rhetoric.</p>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="how-it-works">How it works</h2>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/single-tag-multiple-times.jpg" title="Fire a single GTM tag multiple times">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/single-tag-multiple-times.jpg#ZgotmplZ" alt="Fire a single GTM tag multiple times" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 614 337'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>The skilfully grafted diagram above shows how the solution works. Every single event that passes through <code>dataLayer</code> is duplicated by suffixing it with <code>.first</code> and <code>.second</code>. This way, all the Tags you want to fire twice per event just need to be modified to use the original event name plus the two suffixes. You can even use this in a Lookup Table to fire the hits to different Google Analytics tracking properties, for example.</p>
<p>It&rsquo;s a simple, elegant solution to a pressing problem which, if you ask me, should be handled natively by the platform. This is such a common use case for so many people - it would be immensely helpful if you could just denote multiple cycles to each Tag using the Tag template settings instead of having to resort to hacks like this.</p>

                
                  <h2 id="how-to-do-it">How to do it</h2>
<p>The solution comprises three steps:</p>
<ol>
<li>
<p>Create a new Custom Event Trigger</p>
</li>
<li>
<p>Create the Custom HTML Tag which manages the duplication</p>
</li>
<li>
<p>Create new Triggers</p>
</li>
</ol>
<p>We&rsquo;ll wrap it up with an example of how to leverage this when firing to multiple Google Analytics properties! So stay tuned.</p>

                
                  <h2 id="1-create-the-custom-event-trigger">1. Create the Custom Event Trigger</h2>
<p>To fire the Custom HTML Tag, we&rsquo;ll need a Trigger which activates on <em>every single event</em>. Why? Because we want to duplicate every single event! There&rsquo;s just one exception - we don&rsquo;t want to fire the Trigger when the actual duplication events are pushed into <code>dataLayer</code>, or we might find ourselves in an infinite loop. Ontologically fascinating, but not cool when it comes to site performance.</p>
<p>Before you create the Trigger, make sure you have the <strong>Event</strong> Built-in Variable checked in the appropriate slot of the Variables page in your container.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/event-built-in.jpg" title="Event built-in variable">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/event-built-in.jpg#ZgotmplZ" alt="Event built-in variable" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 908 389'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>This is required for the Trigger to work.</p>
<p>Next, create a Trigger which matches all events except for the duplicated ones. In this example, we&rsquo;re using the generic <code>.first</code> and <code>.second</code> as the suffixes, but nothing&rsquo;s stopping you from using something more descriptive, for example <code>.Country</code> and <code>.Rollup</code>.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/event-trigger.jpg" title="Non-duplicate datalayer event trigger">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/event-trigger.jpg#ZgotmplZ" alt="Non-duplicate datalayer event trigger" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 944 376'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>To reiterate: <strong>The exception is important</strong>! If you don&rsquo;t add that Fire On condition, you will run into issues, as the Trigger would fire again and again with each duplication cycle. Yes, you could use the <a href="https://support.google.com/tagmanager/answer/6279951?hl=en">Tag Firing Options</a> feature of the Tag templates, but it&rsquo;s better to nip bad behavior in its bud.</p>

                
                  <h2 id="2-create-the-custom-html-tag">2. Create the Custom HTML Tag</h2>
<p>The Custom HTML Tag is the heart and soul of this solution. It&rsquo;s very simple, but it does have some peculiarities that might surprise if you&rsquo;re not familiar with how GTM works.</p>
<p>Actually, to ensure that one of these special features works as it should, you&rsquo;ll need to activate yet another Built-In Variable: Container ID. This returns, surprise surprise, the public ID of the GTM container the Tag is firing in (GTM-XXXX).</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/container-id.jpg" title="Container ID built-in">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/container-id.jpg#ZgotmplZ" alt="Container ID built-in" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 325 321'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Create a new Custom HTML Tag and add the following code within:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">script</span>&gt;
  (<span style="color:#00a">function</span>() {
    <span style="color:#00a">var</span> event = {{Event}};
    <span style="color:#00a">var</span> gtm = google_tag_manager[{{Container ID}}];

    <span style="color:#0aa">window</span>.dataLayer.push({
      <span style="color:#a50">&#39;event&#39;</span> : event + <span style="color:#a50">&#39;.first&#39;</span>
    });
    <span style="color:#0aa">window</span>.dataLayer.push({
      <span style="color:#a50">&#39;event&#39;</span> : event + <span style="color:#a50">&#39;.second&#39;</span>,
      <span style="color:#a50">&#39;eventCallback&#39;</span> : <span style="color:#00a">function</span>() { gtm.onHtmlSuccess(); }
    });
  })();
&lt;/<span style="color:#1e90ff;font-weight:bold">script</span>&gt;</code></pre></div>
<p>We&rsquo;re wrapping the whole thing in an <a href="https://en.wikipedia.org/wiki/Immediately-invoked_function_expression">IIFE</a> as we want to avoid polluting the global namespace. Next, we&rsquo;re assigning a local variable <code>event</code> with whatever value is currently stored in the Built-in <strong>Event</strong> variable (i.e. the event that was pushed in the first place).</p>
<p>Finally, we&rsquo;re doing <strong>two</strong> consecutive <code>dataLayer.push()</code> commands, one for each iteration of the cycle. If you want to add more events there, be my guest. As far as we know, there is no limitation to the number of events you can push into <code>dataLayer</code> this way.</p>
<p>The latter push includes the special <code>eventCallback</code> key (read more about it <a href="https://www.simoahava.com/gtm-tips/hitcallback-eventcallback/">here</a>). The key holds a callback function which is invoked as soon as Tags which fire on this particular push have signalled <em>their</em> completion. Within this callback, we&rsquo;re using the <code>onHtmlSuccess()</code> feature of GTM&rsquo;s interface. This is something that was exposed for public use with the <a href="https://www.simoahava.com/analytics/understanding-tag-sequencing-in-google-tag-manager/">Tag sequencing</a> feature. The only thing you need to know about it is that it&rsquo;s our way of telling GTM that it can now proceed with whatever was going on before this loop of <code>dataLayer.push()</code> commands.</p>
<p>In other words, if you&rsquo;re duplicating a <strong>Click / Just Links</strong>, and you&rsquo;ve got &ldquo;Wait for Tags&rdquo; checked (meaning the Trigger will wait for all dependent Tags to fire before proceeding with the link default action), the process goes something like this:</p>
<ol>
<li>
<p>The link click Trigger fires this Custom HTML Tag.</p>
</li>
<li>
<p>The Custom HTML Tag pushes the first duplicated event, and any Tags which use it start their execution.</p>
</li>
<li>
<p>Immediately after, the Custom HTML Tag pushes the second duplicated event, and any Tags which use it start their execution.</p>
</li>
<li>
<p>Once the last Tag firing on the second duplicated push signals its completion, the <code>eventCallback</code> callback is invoked, and the Custom HTML Tag tells the link click Trigger that everything is done, allowing it to proceed with the redirect.</p>
</li>
</ol>
<p>Now, add the Trigger you created in the previous step to this Tag, and you&rsquo;re ready to duplicate. You can preview this to see what happens in your dataLayer with each event.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/duplicates.jpg" title="Preview duplicate events">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/duplicates.jpg#ZgotmplZ" alt="Preview duplicate events" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 444 343'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>As you can see, each event is duplicated. There&rsquo;s the <strong>Pageview</strong>, followed by its duplicates: <strong>gtm.js.first</strong> and <strong>gtm.js.second</strong>. There&rsquo;s <strong>DOM Ready</strong>, followed by its duplicates: <strong>gtm.dom.first</strong> and <strong>gtm.dom.second</strong>, and so on.</p>
<p>(If you don&rsquo;t understand what &ldquo;Pageview&rdquo; and &ldquo;gtm.js&rdquo; have to do with each other, the latter is the underlying event representation of the former. More information in my <a href="https://www.simoahava.com/analytics/trigger-guide-google-tag-manager/">Trigger guide</a>.)</p>

                
                  <h2 id="3-create-new-triggers">3. Create new Triggers</h2>
<p>The only housekeeping pain you&rsquo;ll need with this solution is with the Triggers. Here&rsquo;s how it should work:</p>
<ul>
<li>
<p>To duplicate a Trigger, you need one &ldquo;base&rdquo; Trigger of the event type firing without any delimiting conditions. This is the event that is duplicated.</p>
</li>
<li>
<p>To fire your duplicate Tags, you&rsquo;ll need to use Custom Event Triggers which use the original event name (e.g. <strong>gtm.linkClick</strong>) plus <strong>.first</strong> or <strong>.second</strong>, all wrapped in a simple regular expression.</p>
</li>
</ul>
<p>In other words, we&rsquo;re taking a step back to how GTM used to work before the auto-event triggers. We&rsquo;re creating <em>listeners</em> using the generic event Triggers, and when these are duplicated, the Custom Event Triggers are used to delimit the Tags to fire only when specific conditions exist.</p>
<p><strong>NOTE!</strong> You don&rsquo;t need to create a &ldquo;base&rdquo; Trigger for the Page View event type. This is because &ldquo;Pageview&rdquo;, &ldquo;DOM Ready&rdquo;, and &ldquo;Window Loaded&rdquo; are automatically pushed into <code>dataLayer</code> as the page and GTM load. In other words, they are automatically duplicated, and you just need to focus on creating the Custom Event Triggers.</p>
<p>Look at the illustration below for clarity:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/process.jpg" title="Duplication process">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/process.jpg#ZgotmplZ" alt="Duplication process" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1112 958'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Let&rsquo;s zoom in. If you have an &ldquo;Outbound Links&rdquo; Trigger, which fires when the Click URL is not your own hostname, the duplicated Trigger would look something like this:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2015/12/outbound-link-click-duplicated.jpg" title="Outbound link click duplicated">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2015/12/outbound-link-click-duplicated.jpg#ZgotmplZ" alt="Outbound link click duplicated" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 947 366'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Make note of the &ldquo;Event name&rdquo; field. That&rsquo;s what it should look like for your Triggers. With custom event names it&rsquo;s easy, as you&rsquo;re the one pushing them into <code>dataLayer</code> in the first place. With the built-in Triggers it might be a bit more difficult, so here&rsquo;s a cheat sheet for you:</p>
<table>
<thead>
<tr>
<th>Built-in Event</th>
<th>Underlying event name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Page View / Page View (also All Pages)</td>
<td>gtm.js</td>
</tr>
<tr>
<td>Page View / DOM Ready</td>
<td>gtm.dom</td>
</tr>
<tr>
<td>Page View / Window Loaded</td>
<td>gtm.load</td>
</tr>
<tr>
<td>Click / All Elements</td>
<td>gtm.click</td>
</tr>
<tr>
<td>Click / Just Links</td>
<td>gtm.linkClick</td>
</tr>
<tr>
<td>Form Submit</td>
<td>gtm.formSubmit</td>
</tr>
<tr>
<td>History Change</td>
<td>gtm.historyChange</td>
</tr>
<tr>
<td>JavaScript Error</td>
<td>gtm.pageError</td>
</tr>
<tr>
<td>Timer</td>
<td>gtm.timer</td>
</tr>
</tbody>
</table>
<p>Make sure you&rsquo;ve got the <strong>Fire On</strong> condition on the <em>Custom Event Trigger</em>, as you don&rsquo;t need it on the generic event Trigger. If you miss it from the Custom Event Trigger, you&rsquo;ll inadvertently fire the Tag whenever <em>any</em> such event is detected on the page. For example, if we&rsquo;d left out the <strong>Click URL Hostname</strong> condition from the example above, the Outbound Links Tag would fire whenever the Link Click event is pushed into <code>dataLayer</code>.</p>

                
                  <h2 id="bonus-use-variable-tracking-id">BONUS: Use variable Tracking ID</h2>
<p>Here&rsquo;s a tip straight from Marco. To create a variable which sends a different Universal Analytics tracking ID depending on which cycle of the duplication loop is currently active, use the following <strong>Custom JavaScript Variable</strong>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#00a">function</span>() {
  
  <span style="color:#00a">var</span> event = {{Event}};
  
  <span style="color:#00a">var</span> regexFirst = <span style="color:#099">/\.first$/</span>;
  <span style="color:#00a">var</span> regexSecond = <span style="color:#099">/\.second$/</span>;
  
  <span style="color:#00a">if</span> (regexFirst.test(event)) {
    <span style="color:#00a">return</span> <span style="color:#a50">&#34;UA-XXXXXXXX-1&#34;</span>;
  } <span style="color:#00a">else</span> <span style="color:#00a">if</span> (regexSecond.test(event)) {
    <span style="color:#00a">return</span> <span style="color:#a50">&#34;UA-XXXXXXXX-2&#34;</span>;
  }

  <span style="color:#aaa;font-style:italic">// Do something in case neither matches
</span><span style="color:#aaa;font-style:italic"></span>
}
</code></pre></div>
<p>This returns the UA code &ldquo;UA-XXXXXXXX-1&rdquo; if the Tag is firing on the first loop of the duplication cycle, and &ldquo;UA-XXXXXXXX-2&rdquo; if on the second. You might want to setup some type of fallback or default return value in case neither matches.</p>

                
                  <h2 id="overview-and-summary">Overview and summary</h2>
<p>While the solution works for all kinds of tags and creates less redundancy in many setups, it has some drawbacks of its own.</p>
<p>First, it inflates the number of <code>dataLayer</code> events significantly. A simple setup with just two events (Page View and Outbound Link Clicks) already triples the amount. Note that this doesn&rsquo;t really have any impact on performance. <code>dataLayer</code> is just a message bus used by Google Tag Manager&rsquo;s <a href="https://www.simoahava.com/analytics/google-tag-manager-data-model/">internal data model</a>. Whenever GTM needs to access the &ldquo;Data Layer&rdquo;, it&rsquo;s actually just performing a lookup in its own data model, so the size of <code>dataLayer</code> is inconsequential here.</p>
<p>Second, it requires a different and probably more difficult approach to triggers. All tags need to be linked to custom event triggers instead of the built-in Trigger types you might have become used to. If you were around during GTM&rsquo;s previous version, you might be familiar with the setup, as it resembles how things were done with the old auto-event tracking setup. However, when you really chew it down, all you&rsquo;re actually doing is creating <strong>one</strong> extra Trigger per event type, and moving from the built-in Trigger types to Custom Event Triggers.</p>
<p>Finally, trigger conditions become more critical as they can cause infinite loops or Tags firing in wrong situations. While such accidents shouldnâ€™t cause infinite regret (assuming you test before publish) it does remain another difficulty for you to deal with.</p>
<p>One thing you might be concerned about is whether or not all the Variables populated with the initial base Trigger are still available when the duplicate Custom Event Triggers fire. For example, you might need the <strong>Click URL</strong> Variable, and now you&rsquo;re worried that it&rsquo;s not available when the duplicate Triggers fire. Don&rsquo;t worry! GTM persists Variable values until they&rsquo;re overwritten or there&rsquo;s a page unload/refresh. So, unless you&rsquo;re manually overriding the Data Layer values populated by GTM&rsquo;s auto-event Triggers, you should be fine.</p>
<p>Well, we might have overstated the simplicity and elegance of the setup, but the idea of intercepting each event and duplicating it is far more approachable than the complex hitCallback setup used before.</p>
<p>I want to thank Marco for putting the approach into writing, and most of the content in this article has come from his pen, edited to suit the devil-may-care style of this blog. Any errors, factual mistakes, or radicalist propaganda cleverly hidden in the whitespace is solely the fault of me, Simo, and I take full responsibility for all the uprisings that will inevitably follow.</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">Google Tag Manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">Guide</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/triggers/">triggers</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guest-post/">guest post</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Firing%20A%20Single%20Tag%20Multiple%20Times%20In%20GTM%20https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/gtm-container-snippet-in-the-head/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/gtm-tips/useful-gtm-for-ios-tips/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Firing%20A%20Single%20Tag%20Multiple%20Times%20In%20GTM%20https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Firing%20A%20Single%20Tag%20Multiple%20Times%20In%20GTM%20https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/firing-a-single-tag-multiple-times-in-gtm/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

