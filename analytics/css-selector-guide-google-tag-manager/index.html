

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "CSS Selector Guide For Google Tag Manager | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2019\/04\/css-selector-google-tag-manager.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/css-selector-guide-google-tag-manager\/",
  "datePublished": "2019-04-08T09:55:23\u002b03:00",
  "dateModified": "2019-04-08T09:55:23\u002b03:00",
  "description": "Guide to CSS selectors in Google Tag Manager. You can use CSS selectors to identify and work with elements on the page. This is especially useful when using Click triggers.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>CSS Selector Guide For Google Tag Manager | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/css-selector-guide-google-tag-manager/">
    
    <meta name="description" content="Guide to CSS selectors in Google Tag Manager. You can use CSS selectors to identify and work with elements on the page. This is especially useful when using Click triggers.">
    <meta property="og:description" content="Guide to CSS selectors in Google Tag Manager. You can use CSS selectors to identify and work with elements on the page. This is especially useful when using Click triggers.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="CSS Selector Guide For Google Tag Manager">
    <meta property="og:url" content="https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="CSS Selector Guide For Google Tag Manager">
    <meta name="twitter:description" content="Guide to CSS selectors in Google Tag Manager. You can use CSS selectors to identify and work with elements on the page. This is especially useful when using Click triggers.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta name="twitter:image" content="https://www.simoahava.com/images/2019/04/css-selector-google-tag-manager.jpg">  
      <meta property="og:image" content="https://www.simoahava.com/images/2019/04/css-selector-google-tag-manager.jpg">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
  

    <h1>
      CSS Selector Guide For Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2019-04-08T09:55:23&#43;03:00">
        
  April 8, 2019

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p>Some four years ago, <a href="https://www.simoahava.com/analytics/matches-css-selector-operator-in-gtm-triggers/">Google Tag Manager</a> released a new <a href="https://www.simoahava.com/analytics/trigger-guide-google-tag-manager/">trigger</a> predicate named <a href="https://www.simoahava.com/analytics/matches-css-selector-operator-in-gtm-triggers/"><strong>matches CSS selector</strong></a>. Slowly but surely, it has evolved into one of <a href="https://www.simoahava.com/gtm-tips/10-useful-css-selectors/">the most useful</a> little features in GTM.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/css-selector-google-tag-manager.jpg" title="CSS selector in Google Tag Manager">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/css-selector-google-tag-manager.jpg#ZgotmplZ" alt="CSS selector in Google Tag Manager" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1784 570'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Even though I&rsquo;ve <a href="https://www.simoahava.com/tags/css-selectors/">written</a> about CSS selectors many times before, I wanted to compile all the relevant information into a single guide. For an external resource, I recommend bookmarking the <a href="https://www.w3schools.com/cssref/css_selectors.asp">w3schools.com CSS Selector Reference</a>. But for your day-to-day use of CSS selectors in GTM, this guide will hopefully prove useful.</p>
<div id="toc-container"><h1 id="table-of-contents">Table of Contents</h1> <input type="checkbox" id="show"><label for="show" id="showbtn"><h1 id="table-of-contents-mobile">Table of Contents</h1><span class="show">&nbsp;[+show]</span><span class="hide">&nbsp;[–hide]</span></label><nav id="TableOfContents">
  <ul>
    <li><a href="#what-are-css-selectors">What are CSS selectors?</a></li>
    <li><a href="#css-selectors-in-javascript">CSS selectors in JavaScript</a>
      <ul>
        <li><a href="#using-documentqueryselector-and-documentqueryselectorall">Using <code>document.querySelector</code> and <code>document.querySelectorAll</code></a></li>
        <li><a href="#using-elementmatches">Using <code>element.matches</code></a></li>
      </ul>
    </li>
    <li><a href="#css-selectors-in-google-tag-manager">CSS selectors in Google Tag Manager</a>
      <ul>
        <li><a href="#the-click-element-variable">The Click Element variable</a></li>
        <li><a href="#the-matches-css-selector-predicate">The Matches CSS Selector predicate</a></li>
      </ul>
    </li>
    <li><a href="#css-selector-reference-for-google-tag-manager">CSS selector reference for Google Tag Manager</a>
      <ul>
        <li><a href="#class">.class</a></li>
        <li><a href="#id">#id</a></li>
        <li><a href="#element">element</a></li>
        <li><a href="#elementelement">element,element</a></li>
        <li><a href="#element-element">element element</a></li>
        <li><a href="#-wildcard">* (wildcard)</a></li>
        <li><a href="#elementelement-1">element&gt;element</a></li>
        <li><a href="#elementelement-2">element+element</a></li>
        <li><a href="#element1element2">element1~element2</a></li>
        <li><a href="#attribute">[attribute]</a></li>
        <li><a href="#attributevalue">[attribute=value]</a></li>
        <li><a href="#attributevalue-1">[attribute^=value]</a></li>
        <li><a href="#attributevalue-2">[attribute$=value]</a></li>
        <li><a href="#attributevalue-3">[attribute*=value]</a></li>
        <li><a href="#checked">:checked</a></li>
        <li><a href="#first-child">:first-child</a></li>
        <li><a href="#first-of-type">:first-of-type</a></li>
        <li><a href="#last-child">:last-child</a></li>
        <li><a href="#last-of-type">:last-of-type</a></li>
        <li><a href="#notselector">:not(selector)</a></li>
        <li><a href="#nth-childn">:nth-child(n)</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav></div>
<p>Remember to read my article on <a href="https://www.simoahava.com/gtm-tips/10-useful-css-selectors/">the 10 selectors I consider most useful in GTM</a> - that list has more concrete use cases for you to use. If you want a concrete way to test CSS selectors with (outside GTM), check out the w3schools.com <a href="https://www.w3schools.com/cssref/trysel.asp">CSS selector tester</a>.</p>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="what-are-css-selectors">What are CSS selectors?</h2>
<p>You can use CSS selectors to target <strong>any element</strong> on a web page. Every single element is <strong>uniquely positioned</strong> in the document object model (DOM), and thus selectors can be used to find even the most generic elements.</p>
<p>Sometimes selectors are very simple while being extremely robust. For example, when using a selector like <code>div#author</code>, you&rsquo;re selecting an element that looks like <code>&lt;div id=&quot;author&quot;&gt;</code>. Since it has the <code>id</code> attribute, it&rsquo;s a reasonable expectation that it&rsquo;s the <strong>only</strong> such element on the page, thus even that short selector is very powerful.</p>
<p>On the other hand, sometimes all you can do is use a really long, complex chain, because there are so few uniquely identifying features in the element itself or its closest ancestors. Thus, the selector might end up looking like this:</p>
<p><code>#main &gt; article &gt; div.post-content.markdown &gt; div &gt; p:nth-child(12) &gt; a:nth-child(2)</code></p>
<p>It&rsquo;s not pretty, and it carries the additional weight that <strong>the longer and more complex the CSS selector is, the more fragile it becomes</strong>. The selector above will be invalidated when any one of the elements in the chain changes position or form.</p>
<p>In other words, always strive to create a selector that is <strong>as simple as possible</strong> without compromising <strong>its accuracy to target the exact element you want</strong>.</p>
<p>CSS selectors originated, surprise surprise, in Cascading Style Sheets (CSS). Style sheets are sets of rules and declarations that govern how HTML elements are displayed (and sometimes interacted with) on a web page. Here&rsquo;s what a typical style declaration might look like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#1e90ff;font-weight:bold">a</span>:<span style="color:#888">hover</span>, <span style="color:#1e90ff;font-weight:bold">a</span>:<span style="color:#888">active</span> {
    <span style="color:#00a">text-decoration</span>: <span style="color:#00a">none</span>;
    <span style="color:#00a">font-weight</span>: <span style="color:#00a">bold</span>
}</code></pre></div>
<p>The two items preceding the <code>{</code> and separated by a comma are the <strong>selectors</strong>, and the two rows contained within the curly braces are the <strong>declarations</strong>. This is how you would read the rule:</p>
<ol>
<li>Select all links (<code>a</code>) that are currently being hovered over by the mouse (<code>:hover</code>)</li>
<li>AND select all links (<code>a</code>) that are currently being clicked by the mouse (<code>:active</code>)</li>
<li>THEN remove all text decorations (e.g underline) from them</li>
<li>AND set their font weight to <strong>bold</strong></li>
</ol>
<p>CSS is its own, wonderfully complex discipline in web design and development. There are so many weird and magnificent things you can do with it, from <a href="https://www.amberweinberg.com/replacing-js-functionality-with-css-properties/">replacing JavaScript functionality</a> to running complex transitions <a href="https://www.smashingmagazine.com/2012/06/play-with-hardware-accelerated-css/">using hardware acceleration</a>.</p>
<p>Well, in this guide we&rsquo;ll try to be a bit more modest and focus on how CSS selectors can be used with Google Tag Manager&rsquo;s JavaScript to make the most out of triggers, tags, and variables, where selecting, querying, or parsing the <strong>correct element</strong> is of utmost importance.</p>

                
                  <h2 id="css-selectors-in-javascript">CSS selectors in JavaScript</h2>
<p>In <strong>JavaScript</strong>, you&rsquo;ll often run into CSS selectors in two scenarios:</p>
<ol>
<li>
<p>You need to <strong>retrieve</strong> a specific element or elements from the page.</p>
</li>
<li>
<p>You need to check if a given element <strong>matches</strong> a CSS selector.</p>
</li>
</ol>
<p>Both of these scenarios are very relevant in Google Tag Manager. Before we jump into how they work in GTM, let&rsquo;s take a look at JavaScript&rsquo;s handling of CSS selectors.</p>
<h3 id="using-documentqueryselector-and-documentqueryselectorall">Using <code>document.querySelector</code> and <code>document.querySelectorAll</code></h3>
<p>The two JavaScript methods you&rsquo;ll most often use with CSS selectors are <code>document.querySelector(selector)</code> and <code>document.querySelectorAll(selector)</code>.</p>
<p>The first <strong>returns the first element on the page that matches the given selector</strong>.</p>
<p>The second <strong>returns a list of all the elements on the page that match the given selector</strong>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#aaa;font-style:italic">// Get the first outbound link element on the page
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> firstOutbound = <span style="color:#0aa">document</span>.querySelector(<span style="color:#a50">&#39;a:not([href=&#34;mydomain.com&#34;])&#39;</span>);

<span style="color:#aaa;font-style:italic">// Get all the checked checkbox and radio button elements on the page
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> allChecked = <span style="color:#0aa">document</span>.querySelectorAll(<span style="color:#a50">&#39;input[type=&#34;checkbox&#34;]:checked,input[type=&#34;radio&#34;]:checked&#39;</span>);
</code></pre></div>
<p>As you can see, the selector is passed as a <strong>string</strong> argument to the method.</p>
<p>Remember that HTML elements are essentially objects, and just capturing them makes often little sense. Instead, you&rsquo;ll want to do something with those objects, such as parse some property from them.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#aaa;font-style:italic">// Get the first outbound link element on the page
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> firstOutbound = <span style="color:#0aa">document</span>.querySelector(<span style="color:#a50">&#39;a:not([href=&#34;mydomain.com&#34;])&#39;</span>);

<span style="color:#aaa;font-style:italic">// Push the URL of this outbound link into dataLayer
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">window</span>.dataLayer.push({
  firstOutboundLinkURL: firstOutbound.getAttribute(<span style="color:#a50">&#39;href&#39;</span>)
});
</code></pre></div>
<p>In the example above, we use <code>document.querySelector</code> to fetch the first outbound link (i.e. link that does NOT have <code>mydomain.com</code> in its <code>href</code>), and then we push it into <code>dataLayer</code>.</p>
<p>One thing to remember is that <code>document.querySelectorAll</code> doesn&rsquo;t return an <strong>array</strong> but rather a <code>NodeList</code>. This means that <strong>you can&rsquo;t use regular array methods</strong> with whatever the method returns. You&rsquo;ll have to resort to some workarounds if you, for example, want to <code>map()</code> all elements in the list to get a modified array as a result.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#aaa;font-style:italic">// Get ALL outbound links on the page
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> allOutbound = <span style="color:#0aa">document</span>.querySelectorAll(<span style="color:#a50">&#39;a:not([href=&#34;mydomain.com&#34;])&#39;</span>);

<span style="color:#aaa;font-style:italic">// Create an array of all their href values
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> allHrefValues = <span style="color:#0aa">Array</span>.prototype.map.call(allOutbound, <span style="color:#00a">function</span>(link) { <span style="color:#00a">return</span> link.href; });

<span style="color:#aaa;font-style:italic">// Remove all duplicates
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> uniqueHrefValues = allHrefValues.filter(<span style="color:#00a">function</span>(href, index) { <span style="color:#00a">return</span> allHrefValues.indexOf(href) === index; });
</code></pre></div>
<p>As you can see, in order to run the <code>map()</code> method against the list returned by <code>document.querySelectorAll</code>, you need to invoke the method from the array prototype. It&rsquo;s a good thing to keep in mind if you ever find yourself working with <code>document.querySelectorAll</code>.</p>
<h3 id="using-elementmatches">Using <code>element.matches</code></h3>
<p>If you want to check if any given element <strong>matches</strong> a specific CSS selector, you can use the <code>matches()</code> method like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#aaa;font-style:italic">// Check if the clicked element is an outbound link
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">function</span> checkIfClickedElementIsOutbound() {
  <span style="color:#00a">var</span> element = {{Click Element}};
  <span style="color:#00a">if</span> (element.matches(<span style="color:#a50">&#39;a:not([href=&#34;mydomain.com&#34;])&#39;</span>) {
    <span style="color:#00a">return</span> <span style="color:#00a">true</span>;
  } <span style="color:#00a">else</span> {
    <span style="color:#00a">return</span> <span style="color:#00a">false</span>;
  }
}
</code></pre></div>
<p>You invoke the <code>matches()</code> method on the element itself (the element has to be an HTML element), and like <code>querySelector</code> / <code>querySelectorAll</code>, you pass the selector as a string argument. The method returns <code>true</code> for a match, and <code>false</code> otherwise.</p>
<p>The thing about <code>matches()</code> is that it didn&rsquo;t use to have <a href="https://caniuse.com/#feat=matchesselector">stellar browser support</a>, so if you want to use these methods with Internet Explorer in mind, you might need to implement a <strong>polyfill</strong> to extend the support (see <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill">here</a> for inspiration).</p>
<p>Luckily, the <code>matches()</code> method is abstracted in Google Tag Manager when using triggers, which is by far the most common use case. So let&rsquo;s dive right in!</p>

                
                  <h2 id="css-selectors-in-google-tag-manager">CSS selectors in Google Tag Manager</h2>
<p>In <strong>Google Tag Manager</strong>, you&rsquo;ll find CSS selectors in a number of places.</p>
<p>You can use them as the selection method in the DOM Element variable:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/dom-element-css.jpg" title="DOM element and CSS">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/dom-element-css.jpg#ZgotmplZ" alt="DOM element and CSS" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1326 844'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Using a CSS selector here lets you target specific elements that might not have the ID attribute (the only other selection method provided).</p>
<p>You can also find the same option in the <a href="https://www.simoahava.com/analytics/element-visibility-trigger-google-tag-manager/">Element Visibility</a> trigger:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/element-visibility-css.jpg" title="Element visibility and CSS">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/element-visibility-css.jpg#ZgotmplZ" alt="Element visibility and CSS" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1794 974'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>Whereas the DOM Element variable only returns the <strong>first</strong> matching element (thus being similar to <code>document.querySelector</code>), the Element Visibility trigger can be set to target <strong>all</strong> the matching elements, making CSS selectors super powerful in this particular trigger type.</p>
<p>The third, and by far the most useful scenario for CSS selectors in Google Tag Manager is the <a href="https://www.simoahava.com/analytics/matches-css-selector-operator-in-gtm-triggers/">matches CSS selector predicate</a> when used together with the <strong>{{Click Element}}</strong> built-in variable.</p>
<h3 id="the-click-element-variable">The Click Element variable</h3>
<p>The <strong>Click Element</strong> variable is a <a href="https://www.simoahava.com/analytics/variable-guide-google-tag-manager/#built-in-variables">Built-in variable</a> that you need to <strong>enable</strong> before you can use. The easiest way to enable it is to go to <strong>Variables</strong> via GTM&rsquo;s main navigation, and click the blue <strong>Configure</strong> button in the top corner of the content.</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/variables-configure.jpg" title="Variables and configure in GTM">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/variables-configure.jpg#ZgotmplZ" alt="Variables and configure in GTM" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 2516 740'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>In the overlay that opens, check the box next to <strong>Click Element</strong> and you&rsquo;re done. Now you can choose the Click Element variable in all the variable drop-downs of GTM.</p>
<p><strong>Click Element</strong> returns the <strong>HTML element</strong> that was the target of the auto-event trigger action. In other words:</p>
<ul>
<li>
<p>It returns the <strong>clicked element</strong> when using the Click / All Elements and Click / Just Links triggers.</p>
</li>
<li>
<p>It returns the <strong>submitted form element</strong> when using the Form Submission trigger.</p>
</li>
<li>
<p>It returns the <a href="https://www.simoahava.com/analytics/use-click-variables-with-element-visibility-trigger/"><strong>matched element that became visible</strong></a> when using the Element Visibility trigger.</p>
</li>
</ul>
<p>Because it returns an HTML element, you can use it in your Custom HTML tags and Custom JavaScript variables together with typical HTML element methods such as <code>getAttribute</code>, <code>appendChild</code>, and yes, <code>matches</code>.</p>
<p>In GTM, you&rsquo;ll use it most often, I&rsquo;m confident enough to say, with the <strong>matches CSS selector</strong> predicate in your Click and Form triggers. It&rsquo;s not that useful with the Element Visibility trigger, since you already specify the set of matching elements with the CSS selector setting in the trigger.</p>
<h3 id="the-matches-css-selector-predicate">The Matches CSS Selector predicate</h3>
<p>You can use the <strong>matches CSS selector</strong> trigger predicate together with the <strong>Click Element</strong> variable to check if the element matches a specific selector (d&rsquo;oh).</p>
<p>This is particularly useful with the <strong>All Elements</strong> trigger, since it truly fires when <strong>anything</strong> on the page is clicked, and you can use CSS selectors to delimit the tag to which the trigger is attached from firing all too often.</p>
<p>To make it work, you need to first check the <strong>This trigger fires on&hellip;Some Clicks/Some Link Clicks/Some Forms</strong> option, then select the <strong>Click Element</strong> variable from the variable selector, the <strong>matches CSS selector</strong> predicate from the predicate selector, and then type the selector in the field to the right, like so:</p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/trigger-matches-css.jpg" title="Trigger matches CSS">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/trigger-matches-css.jpg#ZgotmplZ" alt="Trigger matches CSS" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1794 722'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p>One thing to keep in mind is that the <strong>All Elements</strong> truly captures the <strong>exact</strong> element the user clicked. Thus it might be something nested within the element you actually drafted the selector for. With the All Elements trigger, you should make liberal use of the wildcard (<code>*</code>) selector. Read <a href="https://www.simoahava.com/analytics/use-wildcard-css-selectors-with-all-elements-triggers/">this article</a> for more information.</p>
<p>In the reference chapter below, I have included what a Click trigger would look like for all the selectors listed in the reference.</p>

                
                  <h2 id="css-selector-reference-for-google-tag-manager">CSS selector reference for Google Tag Manager</h2>
<p>The reference below is a modified (slimmed down) version of the <a href="https://www.w3schools.com/cssref/css_selectors.asp">w3schools&rsquo; excellent resource</a>. I&rsquo;ve tailored the different selectors with imaginary Google Tag Manager use cases in mind.</p>
<p>Remember that you can combine selectors to identify different aspects of the element. When combining selectors, put them one after the other with <strong>no</strong> whitespace in between. For example, to target all <code>&lt;a&gt;</code> elements that have the <code>author</code> class, <code>simo</code> as the ID, and that are also outbound links, use something like this:</p>
<p><code>a.author#simo:not([href=&quot;mydomain.com&quot;])</code></p>
<p>The order is inconsequential, but it&rsquo;s customary to add <strong>pseudo-classes</strong> (e.g. <code>:checked</code>, <code>:not</code>) to the end for readability.</p>
<h3 id="class">.class</h3>
<p>Matches elements that have the given class as one of the class names in their <code>class</code> attribute.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">class</span>=<span style="color:#a50">&#34;highlight author&#34;</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/author-page/&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;Simo Ahava&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/class-just-links.jpg" title="Class - just links">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/class-just-links.jpg#ZgotmplZ" alt="Class - just links" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 700'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>.author</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the link is clicked. Clicks on the <code>&lt;span&gt;</code> work too, since the Just Links trigger automatically retrieves the closes wrapping <code>&lt;a&gt;</code> element of whatever was actually clicked.</p>
<h3 id="id">#id</h3>
<p>Matches elements that have the given ID as the value of their <code>id</code> attribute.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">class</span>=<span style="color:#a50">&#34;date&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/archives&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;date&#34;</span>&gt;2019-04-09&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/id-all-elements.jpg" title="ID - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/id-all-elements.jpg#ZgotmplZ" alt="ID - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1778 564'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>#date</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the <code>&lt;span id=&quot;date&quot;&gt;...&lt;/span&gt;</code> element is clicked.</p>
<h3 id="element">element</h3>
<p>Matches elements that are the given <code>element</code> (e.g. <code>a</code> for links, <code>img</code> for images).</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">class</span>=<span style="color:#a50">&#34;author&#34;</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/author-page&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">img</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;simo&#34;</span> <span style="color:#1e90ff">src</span>=<span style="color:#a50">&#34;simo.jpg&#34;</span>/&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;</code></pre></div>
<p><strong>Selector</strong></p>
<p><code>img#simo</code></p>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/element-all-elements.jpg" title="Element - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/element-all-elements.jpg#ZgotmplZ" alt="Element - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1776 570'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Outcome</strong></p>
<p>The trigger fires if the clicked element is the <code>&lt;img id=&quot;simo&quot;.../&gt;</code>. As you can see, the selector combines both <code>element</code> and <code>id</code>, meaning the matched element must be both an image and have the ID <code>simo</code>.</p>
<h3 id="elementelement">element,element</h3>
<p>Matches elements that can be selected with <strong>ANY</strong> of the selectors separated by a comma (you can add multiple selectors, each separated by a comma).</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">class</span>=<span style="color:#a50">&#34;author&#34;</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/author-page&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">img</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;simo_img&#34;</span> <span style="color:#1e90ff">src</span>=<span style="color:#a50">&#34;simo.jpg&#34;</span>/&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;simo_name&#34;</span>&gt;Name: Simo Ahava&lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/multiple-selectors-all-elements.jpg" title="Multiple selectors - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/multiple-selectors-all-elements.jpg#ZgotmplZ" alt="Multiple selectors - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1776 558'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>img#simo_img, p#simo_name</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on EITHER <code>&lt;img id=&quot;simo_img&quot;.../&gt;</code> OR <code>&lt;p id=&quot;simo_name&quot;&gt;...&lt;/p&gt;</code>.</p>
<h3 id="element-element">element element</h3>
<p>Matches the rightmost element when it is within the leftmost element in the DOM tree. The relationship does <strong>not</strong> have to be parent-child - it&rsquo;s enough that the left element wraps the right element at some point.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">section</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;article&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/archives&#34;</span>&gt;
      &lt;<span style="color:#1e90ff;font-weight:bold">h1</span>&gt;Hello world!&lt;/<span style="color:#1e90ff;font-weight:bold">h1</span>&gt;
    &lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">section</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/wrap-element-all-elements.jpg" title="Wrapping selectors - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/wrap-element-all-elements.jpg#ZgotmplZ" alt="Wrapping selectors - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1800 582'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>section#main h1</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;h1&gt;Hello world!&lt;/h1&gt;</code> because one of its wrapping elements matches the first selector (<code>section#main</code>).</p>
<h3 id="-wildcard">* (wildcard)</h3>
<p>Matches any element. Extremely useful when used with the Click / All Elements trigger.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;navi&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">ul</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/home&#34;</span>&gt;Home&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/products&#34;</span>&gt;Products&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/contact&#34;</span>&gt;Contact us&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">ul</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/wildcard-all-elements.jpg" title="Wildcard - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/wildcard-all-elements.jpg#ZgotmplZ" alt="Wildcard - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1788 572'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div#navi, div#navi *</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires when the <code>&lt;div id=&quot;navi&quot;&gt;</code> element or <strong>any</strong> of its nested elements (<code>&lt;ul&gt;</code>, <code>&lt;li&gt;</code> and <code>&lt;a&gt;</code>) are clicked.</p>
<p>The selector is <code>div#navi, div#navi *</code>. Based on what you have learned above, this is actually <strong>two</strong> selectors, <code>div#navi</code> and <code>div#navi *</code>, and the trigger will fire if either is clicked.</p>
<p>The first selector matches clicks directly on the <code>&lt;div id=&quot;navi&quot;&gt;</code> element. The second selector matches clicks on <strong>any</strong> element that is wrapped by <code>&lt;div id=&quot;navi&quot;&gt;</code>. The whitespace is important here. If the second selector were <code>div#navi &gt; *</code>, it would only match clicks on the <code>&lt;ul&gt;</code>, as it&rsquo;s the only direct child of <code>&lt;div id=&quot;navi&quot;&gt;</code>.</p>
<h3 id="elementelement-1">element&gt;element</h3>
<p>Matches the rightmost element when its direct parent is the element to the left.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">section</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;article&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/archives&#34;</span>&gt;
      &lt;<span style="color:#1e90ff;font-weight:bold">h2</span>&gt;Hello world!&lt;/<span style="color:#1e90ff;font-weight:bold">h2</span>&gt;
    &lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">section</span>&gt;
&lt;<span style="color:#1e90ff;font-weight:bold">section</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;end&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;footer&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">h2</span>&gt;Goodbye world!&lt;/<span style="color:#1e90ff;font-weight:bold">h2</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">section</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/parent-selector-all-elements.jpg" title="Parent selector - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/parent-selector-all-elements.jpg#ZgotmplZ" alt="Parent selector - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1774 570'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div&gt;h2</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;h2&gt;Goodbye world!&lt;/h1&gt;</code> because its direct parent is <code>&lt;div&gt;</code>. It will <strong>not</strong> fire on <code>&lt;h2&gt;Hello world!&lt;/h2&gt;</code> because that element&rsquo;s direct parent is <code>&lt;a&gt;</code>.</p>
<h3 id="elementelement-2">element+element</h3>
<p>Matches the rightmost element if it comes directly after the leftmost element. They must share the same parent.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">img</span> <span style="color:#1e90ff">src</span>=<span style="color:#a50">&#34;/author.jpg&#34;</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author_image&#34;</span>/&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;Author name&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/element-after-element-all-elements.jpg" title="Element after element - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/element-after-element-all-elements.jpg#ZgotmplZ" alt="Element after element - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1776 556'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>img#author_image+p</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the <code>&lt;span&gt;</code>, because it is right after the <code>&lt;img id=&quot;author_image&quot;/&gt;</code>.</p>
<h3 id="element1element2">element1~element2</h3>
<p>Matches the rightmost element if it is preceded by the leftmost element. They must share the same parent. In other words, it&rsquo;s slightly less strict than the previous selector, in that the preceding element does not have to be immediately next to the targeted element.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">img</span> <span style="color:#1e90ff">src</span>=<span style="color:#a50">&#34;/author.jpg&#34;</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author_image&#34;</span>/&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;Author name&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;https://www.simoahava.com&#34;</span>&gt;Author home page&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/element-preceded-all-elements.jpg" title="Element preceded - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/element-preceded-all-elements.jpg#ZgotmplZ" alt="Element preceded - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 554'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>img#author_image~a</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the <code>&lt;a&gt;</code>, because it is preceded by <code>&lt;img id=&quot;author_image&quot;/&gt;</code>.</p>
<h3 id="attribute">[attribute]</h3>
<p>Matches if the element has the given attribute.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_content&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">data-name</span>=<span style="color:#a50">&#34;gtm_example&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;GTM examples&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/attribute-all-elements.jpg" title="Attribute - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/attribute-all-elements.jpg#ZgotmplZ" alt="Attribute - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1776 546'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div[data-name]&gt;span</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the <code>&lt;span&gt;</code>, because its direct parent is a <code>&lt;div&gt;</code> with the <code>data-name</code> attribute.</p>
<h3 id="attributevalue">[attribute=value]</h3>
<p>Matches if the element has the given attribute with the exact value.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_content&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">data-name</span>=<span style="color:#a50">&#34;gtm_example&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;GTM example&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">data-name</span>=<span style="color:#a50">&#34;second_gtm_example&#34;</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">span</span>&gt;Another GTM example&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/attribute-value-all-elements.jpg" title="Attribute value - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/attribute-value-all-elements.jpg#ZgotmplZ" alt="Attribute value - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1240 344'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div[data-name=&quot;second_gtm_example&quot;]&gt;span</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the <strong>second</strong> <code>&lt;span&gt;</code>, because only it has a direct parent whose <code>data-name</code> attribute has the value <code>second_gtm_example</code>.</p>
<h3 id="attributevalue-1">[attribute^=value]</h3>
<p>Matches if the element has the given attribute whose value starts with the provided string.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_content&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;product_12345&#34;</span>&gt;
    Product 12345
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;product_23456&#34;</span>&gt;
    Product 23456
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;attachment_12345&#34;</span>&gt;
    Attachment 12345
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/attribute-value-starts-all-elements.jpg" title="Attribute value starts - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/attribute-value-starts-all-elements.jpg#ZgotmplZ" alt="Attribute value starts - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1768 564'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>span[id^=&quot;product&quot;]</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on either of the two <code>&lt;span&gt;</code> elements whose ID starts with <code>product</code>. It will not fire if the click lands on the third span, because that element ID starts with <code>attachment</code>.</p>
<h3 id="attributevalue-2">[attribute$=value]</h3>
<p>Matches if the element has the given attribute whose value ends with the provided string.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_content&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;product_12345&#34;</span>&gt;
    Product 12345
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;product_23456&#34;</span>&gt;
    Product 23456
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;attachment_12345&#34;</span>&gt;
    Attachment 12345
  &lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/attribute-value-ends-all-elements.jpg" title="Attribute value ends - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/attribute-value-ends-all-elements.jpg#ZgotmplZ" alt="Attribute value ends - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1788 556'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>span[id$=&quot;_12345&quot;]</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on either the first <code>&lt;span&gt;</code> or the last <code>&lt;span&gt;</code>, since both elements&rsquo; ID attributes end with <code>_12345</code>. It will not fire if the click lands on <code>&lt;span id=&quot;product_23456&quot;&gt;</code>, since that ID does not end with <code>_12345</code>.</p>
<h3 id="attributevalue-3">[attribute*=value]</h3>
<p>Matches if the element has the given attribute whose value contains the provided string.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;simo_ahava_profile&#34;</span>&gt;Simo&#39;s profile&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;profile_benjamin_ahava&#34;</span>&gt;Benjamin&#39;s profile&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">span</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;derek_anderson&#34;</span>&gt;Derek&#39;s profile&lt;/<span style="color:#1e90ff;font-weight:bold">span</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/attribute-value-contains-all-elements.jpg" title="Attribute value contains - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/attribute-value-contains-all-elements.jpg#ZgotmplZ" alt="Attribute value contains - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1760 562'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div#author &gt; span[id*=&quot;ahava&quot;]</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on either of the first two <code>&lt;span&gt;</code> elements, since they have IDs that <strong>contain</strong> the string <code>ahava</code>. It will not fire for the third <code>&lt;span&gt;</code> because that element&rsquo;s ID attribute does not contain the string <code>ahava</code>.</p>
<h3 id="checked">:checked</h3>
<p>Matches if the given element is <strong>checked</strong> (radio buttons, checkboxes, and <code>&lt;option&gt;</code> elements within select menus).</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">form</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;contact-us&#34;</span>&gt;
  My name: &lt;<span style="color:#1e90ff;font-weight:bold">input</span> <span style="color:#1e90ff">type</span>=<span style="color:#a50">&#34;text&#34;</span> <span style="color:#1e90ff">name</span>=<span style="color:#a50">&#34;name&#34;</span> /&gt;&lt;<span style="color:#1e90ff;font-weight:bold">br</span> /&gt;
  I consent to everything &lt;<span style="color:#1e90ff;font-weight:bold">input</span> <span style="color:#1e90ff">type</span>=<span style="color:#a50">&#34;checkbox&#34;</span> <span style="color:#1e90ff">name</span>=<span style="color:#a50">&#34;consent&#34;</span> /&gt;&lt;<span style="color:#1e90ff;font-weight:bold">br</span> /&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">input</span> <span style="color:#1e90ff">type</span>=<span style="color:#a50">&#34;submit&#34;</span> /&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">form</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/checked-all-elements.jpg" title="Checked - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/checked-all-elements.jpg#ZgotmplZ" alt="Checked - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1774 548'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>input[name=&quot;consent&quot;]:checked</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the checkbox <strong>when it is checked</strong> (i.e. the user <strong>unchecks</strong> it).</p>
<h3 id="first-child">:first-child</h3>
<p>Matches if the given element is the first child of its parent.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">ul</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_navigation&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;Home&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/products&#34;</span>&gt;Products&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;&lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/contact&#34;</span>&gt;Contact&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">ul</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/first-child-all-elements.jpg" title="First child - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/first-child-all-elements.jpg#ZgotmplZ" alt="First child - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 554'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>ul#main_navigation &gt; li:first-child</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;li&gt;Home&lt;/li&gt;</code> since it is the first child element of its direct parent.</p>
<h3 id="first-of-type">:first-of-type</h3>
<p>Matches if the given element is the first element of its type (e.g. <code>p</code>, <code>img</code>, <code>span</code>) of its parent.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author_info&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/author&#34;</span>&gt;Simo Ahava&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;Web Analytics Developer&lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;Ukulele and death metal enthusiast&lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/first-of-type-all-elements.jpg" title="First of type - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/first-of-type-all-elements.jpg#ZgotmplZ" alt="First of type - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1786 548'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div#author_info &gt; p:first-of-type</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on the <code>&lt;p&gt;Web Analytics Developer&lt;/p&gt;</code> since it is the first <code>&lt;p&gt;</code> under its parent.</p>
<h3 id="last-child">:last-child</h3>
<p>Matches if the given element is the last child element of its parent (the reverse of <code>:first-child</code>).</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">ul</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_navigation&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;GTM&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;Ukulele&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;Death metal&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">ul</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/last-child-all-elements.jpg" title="Last child - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/last-child-all-elements.jpg#ZgotmplZ" alt="Last child - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1804 550'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>ul#main_navigation &gt; li:last-child</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;li&gt;Death metal&lt;/li&gt;</code> since it is the last child element of its parent.</p>
<h3 id="last-of-type">:last-of-type</h3>
<p>Matches if the given element is the last element of its type of its parent.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author_info&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;/author&#34;</span>&gt;Simo Ahava&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;Web Analytics Developer&lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;Ukulele and death metal enthusiast&lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/last-of-type-all-elements.jpg" title="Last of type - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/last-of-type-all-elements.jpg#ZgotmplZ" alt="Last of type - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 560'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>div#author_info p:last-of-type</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;p&gt;Ukulele and death metal enthusiast&lt;/p&gt;</code> since it is the last <code>&lt;p&gt;</code> under its parent.</p>
<h3 id="notselector">:not(selector)</h3>
<p>Matches if the given element does <strong>not</strong> match the selector within the parentheses.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">div</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;author&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;https://www.simoahava.com/&#34;</span>&gt;Home page&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
    &lt;<span style="color:#1e90ff;font-weight:bold">a</span> <span style="color:#1e90ff">href</span>=<span style="color:#a50">&#34;https://tagmanager.google.com/&#34;</span>&gt;Favorite hobby&lt;/<span style="color:#1e90ff;font-weight:bold">a</span>&gt;
  &lt;/<span style="color:#1e90ff;font-weight:bold">p</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">div</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/not-just-links.jpg" title="Not - just links">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/not-just-links.jpg#ZgotmplZ" alt="Not - just links" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1792 684'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>a:not([href*=&quot;simoahava.com])</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires when the click lands on the second link (<code>&lt;a href=&quot;https://tagmanager.google.com/&quot;&gt;Favorite hobby&lt;/a&gt;</code>). This is because the CSS selector targets all link elements (<code>&lt;a&gt;</code>) that do <strong>not</strong> match the CSS selector <code>[href*=&quot;simoahava.com&quot;]</code>. In other words the link must <strong>not</strong> have a <code>href</code> attribute containing the string <code>simoahava.com</code>.</p>
<h3 id="nth-childn">:nth-child(n)</h3>
<p>Matches if the given element is the nth child of its parent, where <code>n</code> is the number passed in the parentheses.</p>
<p><strong>Sample HTML structure</strong></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#1e90ff;font-weight:bold">ul</span> <span style="color:#1e90ff">id</span>=<span style="color:#a50">&#34;main_navigation&#34;</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;GTM&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;Ukulele&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
  &lt;<span style="color:#1e90ff;font-weight:bold">li</span>&gt;Death metal&lt;/<span style="color:#1e90ff;font-weight:bold">li</span>&gt;
&lt;/<span style="color:#1e90ff;font-weight:bold">ul</span>&gt;</code></pre></div>
<p><strong>Sample trigger</strong></p>



<div class="figure nocaption" >
  
    <a href="https://www.simoahava.com/images/2019/04/nth-child-all-elements.jpg" title="Nth child - all elements">
  
    <img class="fig-img lazy" data-src="https://www.simoahava.com/images/2019/04/nth-child-all-elements.jpg#ZgotmplZ" alt="Nth child - all elements" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1780 552'%3E%3C/svg%3E">
  
    </a>
  
  
</div>


<p><strong>Selector</strong></p>
<p><code>ul#main_navigation &gt; li:nth-child(2)</code></p>
<p><strong>Outcome</strong></p>
<p>The trigger fires if the click lands on <code>&lt;li&gt;Ukulele&lt;/li&gt;</code> since it is the <strong>second</strong> child (<code>nth-child(2)</code>) of its parent.</p>

                
                  <h2 id="summary">Summary</h2>
<p>I&rsquo;ve said it many times, but I seriously think CSS selectors are high up there with JavaScript and regular expressions in the list of things you must learn if you want to master Google Tag Manager.</p>
<p>Much of browser-based web analytics, especially when tracking interactions, is rooted in the ability to track interactions with specific elements. Often, we&rsquo;re recommended to use the <code>id</code> and <code>class</code> attributes these elements have, but it&rsquo;s very common that they don&rsquo;t actually have these attributes.</p>
<p>It&rsquo;s in these situations that CSS selectors shine. They allow you to pinpoint every single and any element on any given page, since every element <strong>always</strong> has a unique position that can be targeted with some selector.</p>
<p>Just remember my tip from earlier - always strive for a selector that is a simple as possible without compromising its ability to target the specific elements you want it to.</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/css-selectors/">css selectors</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/guide/">guide</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/web-development/monitor-google-ads-accounts-r-adwords-api-slack-api/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/trigger-groups-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=CSS%20Selector%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://cdn.commento.io/js/commento.js"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2020 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/web-development/monitor-google-ads-accounts-r-adwords-api-slack-api/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/trigger-groups-google-tag-manager/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=CSS%20Selector%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
              <i class="fa fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa fa-comment-o"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
          <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=CSS%20Selector%20Guide%20For%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/css-selector-guide-google-tag-manager/">
          <i class="fa fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

