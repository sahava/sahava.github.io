

  
    
  


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />


<script type="application/ld+json">
{
  "@context": "http://schema.org", 
  "@type": "BlogPosting",
  "headline": "New Piwik PRO Templates In Server-side Google Tag Manager | Simo Ahava's blog",
  "image": "https:\/\/www.simoahava.com\/images\/2024\/07\/ga4-client-to-tags.jpg",
  "editor": "Simo Ahava",
  "publisher": {
    "@type": "Organization",
    "name": "Simo Ahava's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.simoahava.com\/images\/simo.png",
      "height": "393",
      "width": "407"
    }
  },
  "url": "https:\/\/www.simoahava.com\/analytics\/new-piwik-pro-templates-server-side-google-tag-manager\/",
  "datePublished": "2024-07-24T07:00:00\u002b03:00",
  "dateModified": "2024-07-24T07:00:00\u002b03:00",
  "description": "This walkthrough introduces the Client and Tag templates for running Piwik PRO in a server-side Google Tag Manager container.",
  "author": {
    "@type": "Person",
    "name": "Simo Ahava"
  }
}
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>New Piwik PRO Templates In Server-side Google Tag Manager | Simo Ahava's blog</title>
    
    <script>
      window.dataLayer=window.dataLayer||[];window.dataLayer.push({pageType: 'article', environment:  null });
    </script>
    

    
    
    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
    
    <meta name="description" content="This walkthrough introduces the Client and Tag templates for running Piwik PRO in a server-side Google Tag Manager container.">
    <meta property="og:description" content="This walkthrough introduces the Client and Tag templates for running Piwik PRO in a server-side Google Tag Manager container.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="New Piwik PRO Templates In Server-side Google Tag Manager">
    <meta property="og:url" content="https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="New Piwik PRO Templates In Server-side Google Tag Manager">
    <meta name="twitter:description" content="This walkthrough introduces the Client and Tag templates for running Piwik PRO in a server-side Google Tag Manager container.">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
	  <meta property="og:image" content="https://www.simoahava.com/images/2024/07/new-piwik-pro-templates-in-server-side-google-tag-manager.jpg">
      <meta name="twitter:image" content="https://www.simoahava.com/images/2024/07/new-piwik-pro-templates-in-server-side-google-tag-manager.jpg">
    


    

      
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
      
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    
    <div id="_progress"></div>
    
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" loading="lazy" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener ">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://masto.measure.chat/@SimoAhava" target="_blank" rel="noopener me">
    
      <i class="sidebar-button-icon fa fa-lg fa-brands fa-mastodon"></i>
      
      <span class="sidebar-button-desc">Mastodon</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post">
	  <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          <div class="post-header main-content-wrap text-left">
  
    <div class="figure nocaption">
      <img class="cover" src="https://www.simoahava.com/images/2024/07/new-piwik-pro-templates-in-server-side-google-tag-manager.jpg" width="750" height="422" alt="New Piwik PRO Templates In Server-side Google Tag Manager">
    </div>
  
  

    <h1>
      New Piwik PRO Templates In Server-side Google Tag Manager
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2024-07-24T07:00:00&#43;03:00">
        
  July 24, 2024

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/#commento">Comments</a>
      
  </div>


</div>

          <div class="post-content markdown">
            <div class="main-content-wrap">
	      
                
  	        <p><a href="https://piwik.pro">Piwik PRO</a> has <strong>two</strong> new <a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/">server-side Google Tag Manager</a> templates, and this article explains what they are and how they work.</p>
<p>The first template, <a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2-client"><strong>Piwik PRO Client</strong></a>, is designed to work in unison with the <a href="https://developers.piwik.pro/en/latest/data_collection/web/javascript_tracking_client/index.html">Piwik PRO HTTP API</a>. Most often these requests are generated by the Piwik PRO JavaScript tracker, but theoretically <em>any</em> HTTP source that uses the same schema can send requests for the Client to claim. Once the Client claims the request, it generates an <strong>event data object</strong> that can be consumed by tags in the server-side Google Tag Manager container.</p>
<p>The second template, <a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2"><strong>Piwik PRO</strong></a>, is a tag template that takes the <em>event data object</em>, compiles it into the format required by the <a href="https://developers.piwik.pro/en/latest/data_collection/api/http_api.html">Piwik PRO HTTP API</a>, and then dispatches it to the Piwik PRO instance.</p>
<p>These two templates enable (at least) these two approaches:</p>
<ol>
<li>Use some other vendor&rsquo;s tracker, such as <strong>Google Tag</strong> in the browser. Forward the hits to server-side Google Tag Manager. Claim the requests with the vendor&rsquo;s own Client (such as the GA4 Client), and use this data to fire the vendor&rsquo;s own tag <em>as well as</em> the Piwik PRO tag.</li>
</ol>



<div style="aspect-ratio: 1920 / 1080;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/ga4-client-to-tags.jpg" title="First approach, GA4 client to tags">
  
    <img class="fig-img" height="1080" width="1920" loading="lazy" src="https://www.simoahava.com/images/2024/07/ga4-client-to-tags.jpg#ZgotmplZ" alt="First approach, GA4 client to tags">
  
    </a>
  
  
</div>


<ol start="2">
<li>Use the <strong>Piwik PRO JavaScript tracker</strong> in the browser. Forward the hits to server-side Google Tag Manager. Claim the requests with the <strong>Piwik PRO Client</strong>, and use this data to fire the Piwik PRO tag and other vendors&rsquo; tags, too, such as those designed for <strong>Google Ads</strong> and <strong>Meta Conversions API</strong>.</li>
</ol>



<div style="aspect-ratio: 1920 / 1080;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/pp-client-to-tags.jpg" title="Piwik PRO Client to tags">
  
    <img class="fig-img" height="1080" width="1920" loading="lazy" src="https://www.simoahava.com/images/2024/07/pp-client-to-tags.jpg#ZgotmplZ" alt="Piwik PRO Client to tags">
  
    </a>
  
  
</div>


<p>If you&rsquo;re curious about the first approach, check out this <a href="https://www.simoahava.com/analytics/ga4-to-piwik-pro-using-server-side-google-tag-manager/">article I&rsquo;ve written about mapping Google Analytics 4 data to Piwik PRO</a> using the new Piwik PRO tag template.</p>
<div id="toc-container"><h1 id="table-of-contents">Table of Contents</h1> <input type="checkbox" id="show"><label for="show" id="showbtn"><h1 id="table-of-contents-mobile">Table of Contents</h1><span class="show">&nbsp;[+show]</span><span class="hide">&nbsp;[–hide]</span></label><nav id="TableOfContents">
  <ul>
    <li><a href="#the-client-template">The Client template</a>
      <ul>
        <li><a href="#how-to-install-the-template">How to install the template</a></li>
        <li><a href="#how-to-configure-the-client-template">How to configure the Client template</a></li>
        <li><a href="#how-the-client-works">How the Client works</a></li>
      </ul>
    </li>
    <li><a href="#the-tag-template">The tag template</a>
      <ul>
        <li><a href="#how-to-install-the-tag-template">How to install the tag template</a></li>
        <li><a href="#how-the-tag-template-works">How the tag template works</a></li>
        <li><a href="#integration-with-the-piwik-pro-client">Integration with the Piwik PRO Client</a></li>
        <li><a href="#inherit-from-client">&ldquo;Inherit from Client&rdquo;</a></li>
        <li><a href="#custom-dimensions-and-custom-variables">Custom dimensions and custom variables</a></li>
        <li><a href="#transformations">Transformations</a></li>
        <li><a href="#additional-parameters">Additional Parameters</a></li>
        <li><a href="#priority-for-value-resolution">Priority for value resolution</a></li>
        <li><a href="#preview-the-tag">Preview the tag</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav></div>

                <span class="simmer">
  <span class="close">X</span>
  <p>
    <span class="fa fa-md fa-bell"></span>
    <strong>The Simmer Newsletter</strong>
  </p>
  <p>
    Subscribe to the <a href="https://www.simoahava.com/newsletter/">Simmer newsletter</a> to get the latest news and content from Simo Ahava into your email inbox!
  </p>
  </span>

                
                  <h2 id="the-client-template">The Client template</h2>



<div style="aspect-ratio: 1362 / 1030;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-client.jpg" title="Piwik PRO Client">
  
    <img class="fig-img" height="1030" width="1362" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-client.jpg#ZgotmplZ" alt="Piwik PRO Client">
  
    </a>
  
  
</div>


<p>The <strong>Piwik PRO Client</strong> template has been designed to capture requests that originate in Piwik PRO&rsquo;s client-side libraries.</p>
<p>For example, <a href="https://developers.piwik.pro/en/latest/data_collection/web/javascript_tracking_client/api.html#setTrackerUrl">with the JavaScript API</a>, you can use a command like this to route all subsequent events by the tracker to your server-side Google Tag Manager endpoint:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">_paq.push([<span style="color:#a50">&#34;setTrackerUrl&#34;</span>, <span style="color:#a50">&#34;https://sgtm.my-website.com/ppms.php&#34;</span>]);
</code></pre></div>
<p>If you&rsquo;re using the <a href="https://help.piwik.pro/support/getting-started/google-tag-manager-install-a-tracking-code/">Piwik PRO Analytics template</a> for <strong>client-side</strong> Google Tag Manager, you can use the <strong>Use a custom tracker URL</strong> setting to achieve the same easily:</p>



<div style="aspect-ratio: 904 / 256;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/custom-tracker-url.jpg" title="Custom tracker URL">
  
    <img class="fig-img" height="256" width="904" loading="lazy" src="https://www.simoahava.com/images/2024/07/custom-tracker-url.jpg#ZgotmplZ" alt="Custom tracker URL">
  
    </a>
  
  
</div>


<p>When a request comes in for the <code>/ppms.php</code> resource, the Piwik PRO Client (in server-side Google Tag Manager) <strong>claims</strong> the request and proceeds to generate an <strong>event data object</strong> with both <em>common</em> event data keys as well as Piwik PRO-specific items.</p>
<h3 id="how-to-install-the-template">How to install the template</h3>
<p>Because Google Tag Manager&rsquo;s <a href="https://tagmanager.google.com/gallery/#/">Community Template Gallery</a> doesn&rsquo;t support distributing Client templates, you need to install the template manually.</p>
<p>First, navigate to the <code>template.tpl</code> file in the <a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2-client">GitHub repo</a> for the Client by following <a href="https://raw.githubusercontent.com/PiwikPRO/server-side-template-for-gtm-v2-client/master/template.tpl">this link</a>. Download the file to your device.</p>
<p>Then, in your server-side Google Tag Manager container, browse to <strong>Templates</strong> and create a new <strong>Client</strong> template.</p>



<div style="aspect-ratio: 1762 / 1070;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/create-new-client.jpg" title="Create new client">
  
    <img class="fig-img" height="1070" width="1762" loading="lazy" src="https://www.simoahava.com/images/2024/07/create-new-client.jpg#ZgotmplZ" alt="Create new client">
  
    </a>
  
  
</div>


<p>Once the editor opens, click the overflow menu in the top-right corner and choose <strong>Import</strong>.</p>



<div style="aspect-ratio: 1482 / 440;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/import-template.jpg" title="Import template">
  
    <img class="fig-img" height="440" width="1482" loading="lazy" src="https://www.simoahava.com/images/2024/07/import-template.jpg#ZgotmplZ" alt="Import template">
  
    </a>
  
  
</div>


<p>Locate the <code>template.tpl</code> file on your device, and select it to import it.</p>
<p>You should see the template load in the editor. Click <strong>Save</strong> to save the template.</p>
<p>Once the template is saved, head on over to <strong>Clients</strong> in the container, and click to create a new Client.</p>



<div style="aspect-ratio: 1818 / 692;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/create-client.jpg" title="Create new Client">
  
    <img class="fig-img" height="692" width="1818" loading="lazy" src="https://www.simoahava.com/images/2024/07/create-client.jpg#ZgotmplZ" alt="Create new Client">
  
    </a>
  
  
</div>


<p>Select the <strong>Piwik PRO Client</strong> from the list of available templates.</p>
<h3 id="how-to-configure-the-client-template">How to configure the Client template</h3>
<p>The Client template has only a few configuration options. It&rsquo;s designed to work <strong>automatically</strong> whenever Piwik PRO JavaScript requests are dispatched to the server-side Google Tag Manager container.</p>
<p>The only manually configurable option is labeled <strong>Serve requests for ppms.js</strong>.</p>



<div style="aspect-ratio: 918 / 452;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/serve-requests-for-ppms-js.jpg" title="Serve requests for ppms.js">
  
    <img class="fig-img" height="452" width="918" loading="lazy" src="https://www.simoahava.com/images/2024/07/serve-requests-for-ppms-js.jpg#ZgotmplZ" alt="Serve requests for ppms.js">
  
    </a>
  
  
</div>


<p>Checking this option enables <strong>first-party serving</strong> of the Piwik PRO JavaScript library.</p>
<blockquote>
<p>This means that instead of loading the JavaScript from Piwik PRO&rsquo;s own content distribution network, you load the library from the server-side Google Tag Manager domain. You need to <a href="https://developers.piwik.pro/en/latest/data_collection/web/javascript_tracking_client/installation.html">configure your client-side Piwik PRO installation</a> to load the <code>ppms.js</code> file from your own domain.</p>
</blockquote>
<p>When you enable this option, you need to provide the <strong>Account name</strong> of your Piwik PRO environment. You also need to list all the <strong>allowed URL origins</strong> from which requests for the <code>ppms.js</code> file are considered. Add the list of origins as a comma-separated string:</p>
<p><code>https://www.my-website.com,https://www.my-website.de,https://store.my-other-website.com</code></p>
<p>Check <strong>Cache the resource in server-side GTM</strong> to reduce <em>network egress costs</em> by storing the file (temporarily) in the server cache.</p>
<p>Once you save the Client and publish (or preview) the container, the Client is active and ready to intercept incoming requests.</p>
<h3 id="how-the-client-works">How the Client works</h3>
<p>The Client parses the incoming request from the web browser and creates an <strong>event data object</strong> with it.</p>



<div style="aspect-ratio: 1958 / 1318;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-client-event-data.jpg" title="Event data object">
  
    <img class="fig-img" height="1318" width="1958" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-client-event-data.jpg#ZgotmplZ" alt="Event data object">
  
    </a>
  
  
</div>


<p>In server-side Google Tag Manager, the only way that <strong>tags</strong> can fire is if a Client generates an event data object. This object typically contains <a href="https://developers.google.com/tag-platform/tag-manager/server-side/common-event-data">common event data</a> as well as vendor-specific keys.</p>
<p>The Piwik PRO Client generates these <strong>common event data</strong> keys:</p>
<table>
<thead>
<tr>
<th>Event data key</th>
<th>Piwik PRO request parameter</th>
<th>Description</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event_name</code></td>
<td>N/A</td>
<td>The request event type. This is not always applicable to Piwik PRO requests.</td>
<td></td>
</tr>
<tr>
<td><code>client_id</code></td>
<td><code>_id</code></td>
<td>The Visitor ID.</td>
<td></td>
</tr>
<tr>
<td><code>ip_override</code></td>
<td><code>cip</code></td>
<td>The IP address of the visitor.</td>
<td></td>
</tr>
<tr>
<td><code>language</code></td>
<td><code>lang</code></td>
<td>The browser language string.</td>
<td></td>
</tr>
<tr>
<td><code>page_location</code></td>
<td><code>url</code></td>
<td>The URL of the page the request was sent from.</td>
<td></td>
</tr>
<tr>
<td><code>page_path</code></td>
<td>N/A</td>
<td>The URL path of the page the request was sent from.</td>
<td></td>
</tr>
<tr>
<td><code>page_referrer</code></td>
<td><code>urlref</code></td>
<td>The referrer URL of the page the request was sent from.</td>
<td></td>
</tr>
<tr>
<td><code>screen_resolution</code></td>
<td><code>res</code></td>
<td>The screen resolution of the visitor&rsquo;s device.</td>
<td></td>
</tr>
<tr>
<td><code>ua</code></td>
<td><code>ua</code></td>
<td>The User-Agent string of the web browser.</td>
<td></td>
</tr>
<tr>
<td><code>user_id</code></td>
<td><code>uid</code></td>
<td>The login ID of the visitor.</td>
<td></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>revenue</code></td>
<td>The revenue of the order.</td>
<td></td>
</tr>
<tr>
<td><code>value</code></td>
<td><code>e_v</code></td>
<td>The event value.</td>
<td></td>
</tr>
</tbody>
</table>
<p>Any parameter that isn&rsquo;t listed here but is part of the incoming request is added to the event data object using the parameter name with the prefix <code>x-pp-</code>:</p>



<div style="aspect-ratio: 1416 / 488;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/x-pp-parameters.jpg" title="x-pp-parameters">
  
    <img class="fig-img" height="488" width="1416" loading="lazy" src="https://www.simoahava.com/images/2024/07/x-pp-parameters.jpg#ZgotmplZ" alt="x-pp-parameters">
  
    </a>
  
  
</div>


<p>For more details about these Piwik PRO-specific parameters, consult the <a href="https://developers.piwik.pro/en/latest/data_collection/api/http_api.html">HTTP API documentation</a>.</p>
<p>This event data can then be used to trigger supported tags, allowing you to orchestrate a complete data pipeline using the Piwik PRO JavaScript tracker as the starting point.</p>

                
                  <h2 id="the-tag-template">The tag template</h2>
<p>The purpose of a <strong>Client</strong> in server-side Google Tag Manager is to <strong>claim</strong> an incoming HTTP request and (ideally) generate an <strong>event data object</strong> to trigger tags and populate them with data.</p>
<p>Tags, on the other hand, are typically <em>request-agnostic</em>, which means that they <em>should</em> be configurable to work with the event data object generated by <strong>any</strong> Client.</p>
<p>The Piwik PRO <strong>tag template</strong> has been designed to be as request-agnostic as possible, but it works best when coupled with a Piwik PRO Client.</p>
<h3 id="how-to-install-the-tag-template">How to install the tag template</h3>
<p>The easiest way to install the tag template is to browse to <strong>Templates</strong> in the server-side Google Tag Manager container, and then click <strong>Search Gallery</strong> in the Tag Templates section.</p>



<div style="aspect-ratio: 1840 / 560;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/search-gallery.jpg" title="Search gallery">
  
    <img class="fig-img" height="560" width="1840" loading="lazy" src="https://www.simoahava.com/images/2024/07/search-gallery.jpg#ZgotmplZ" alt="Search gallery">
  
    </a>
  
  
</div>


<p>Here, you can search for <code>piwik pro</code>.</p>



<div style="aspect-ratio: 1252 / 278;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-gallery.jpg" title="Piwik PRO gallery">
  
    <img class="fig-img" height="278" width="1252" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-gallery.jpg#ZgotmplZ" alt="Piwik PRO gallery">
  
    </a>
  
  
</div>


<blockquote>
<p><strong>Note!</strong> This is the <strong>official</strong> template by Piwik PRO. You might find other templates, too, but they have not been created by the Piwik PRO team. For most reliable results, I recommend you stick with the official templates.</p>
</blockquote>
<p>Once you locate the template, install it after reading and approving any prompts it throws your way.</p>
<p>You can also install the tag template <strong>manually</strong> by first downloading the <a href="https://raw.githubusercontent.com/PiwikPRO/server-side-template-for-gtm-v2/master/template.tpl">template.tpl file from Piwik PRO&rsquo;s GitHub repo</a>, and then following the <a href="#how-to-install-the-template">same steps</a> as for the Client template.</p>
<p>Once you&rsquo;ve installed it, browse to <strong>Tags</strong> in the server-side Google Tag Manager container, and click <strong>New</strong> to create a new tag. Choose the <strong>Piwik PRO</strong> template.</p>



<div style="aspect-ratio: 1266 / 686;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-tag-type.jpg" title="Piwik PRO Tag template">
  
    <img class="fig-img" height="686" width="1266" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-tag-type.jpg#ZgotmplZ" alt="Piwik PRO Tag template">
  
    </a>
  
  
</div>


<p>Before we explore the template, let&rsquo;s walk through how the tag actually works.</p>
<h3 id="how-the-tag-template-works">How the tag template works</h3>
<p>The purpose of the tag template is to compile an HTTP request to your Piwik PRO instance using the <a href="https://developers.piwik.pro/en/latest/data_collection/api/http_api.html">Piwik PRO HTTP API</a>.</p>
<p>Minimally, you need to enter your <strong>Account name</strong> (<code>myinstance.piwik.pro</code>) and your <a href="https://help.piwik.pro/support/questions/find-website-id/"><strong>Site or App ID</strong></a>.</p>
<p>You&rsquo;ll also need to add a <em>trigger</em> to the tag.</p>
<blockquote>
<p>If the tag is orchestrated to work with a specific Client, such as the Piwik PRO Client or the GA4 Client, it&rsquo;s a <strong>good practice</strong> to modify the trigger so that it only fires the tag when this Client has claimed the request, like this:</p>
</blockquote>



<div style="aspect-ratio: 1774 / 420;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-client-trigger.jpg" title="Piwik PRO Client trigger">
  
    <img class="fig-img" height="420" width="1774" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-client-trigger.jpg#ZgotmplZ" alt="Piwik PRO Client trigger">
  
    </a>
  
  
</div>


<p>As for populating the necessary parameters for the outgoing request, you have <strong>three</strong> options with the tag template:</p>
<ol>
<li>Select <strong>Inherit from Client</strong> means that the field tries to grab the value directly from the <strong>event data object</strong> generated by the Client (<a href="#inherit-from-client">more on this below</a>).</li>
<li>Add or select a value by editing the tag field (you can use variables).</li>
<li>Add any supported HTTP API parameter name and value to the <strong>Additional Parameters</strong> table in the tag (<a href="#additional-parameters">more on this below</a>, too).</li>
</ol>
<p>Once the tag fires, it parses all the available fields and the values within to generate the outgoing request to your Piwik PRO instance.</p>
<p>It will transparently forward the data generated by the Piwik PRO Client to your Piwik PRO instance.</p>
<h3 id="integration-with-the-piwik-pro-client">Integration with the Piwik PRO Client</h3>
<p>If you are using the Piwik PRO JavaScript tracker or the Piwik PRO HTTP API to collect hits to server-side Google Tag Manager, you can get by with a <strong>minimal</strong> setup in server-side Google Tag Manager.</p>
<p>This is because the Piwik PRO Client transparently forwards everything in the incoming request stream to the event data object, where the Piwik PRO tag then picks it up and sends to Piwik PRO servers.</p>
<p>In this case, the Piwik PRO tag could look as simple as this:</p>



<div style="aspect-ratio: 1778 / 1332;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-minimal-tag.jpg" title="Piwik PRO minimal tag">
  
    <img class="fig-img" height="1332" width="1778" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-minimal-tag.jpg#ZgotmplZ" alt="Piwik PRO minimal tag">
  
    </a>
  
  
</div>


<p>The tag only has <strong>Account Name</strong> and <strong>Site or App ID</strong> populated, and it fires on a trigger for all events generated when <code>{{Client Name}}</code> <em>equals</em> <code>Piwik PRO Client</code>.</p>
<h3 id="inherit-from-client">&ldquo;Inherit from Client&rdquo;</h3>
<p>When you select <strong>Inherit from Client</strong> as the value of a tag field, the tag template looks at the <strong>event data object</strong> for the value relevant to that particular field.</p>
<blockquote>
<p>Note that the fields in the tag are the most frequently used configurations. They don&rsquo;t cover every single possible aspect of a Piwik PRO data stream. The template sources other parameters too, when necessary, and you can always use <a href="#transformations">Transformations</a> and <a href="#additional-parameters">Additional Parameters</a> to further configure the tracking.</p>
</blockquote>
<p>Here are the tag fields with the associated event data logic included.</p>
<blockquote>
<p>Remember that Piwik PRO-specific keys are prefixed with <code>x-pp-</code>, and the rest of the key name comes from the <a href="https://developers.piwik.pro/en/latest/data_collection/api/http_api.html">HTTP API</a> parameter name.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Field name in the tag UI</th>
<th>Event data key</th>
</tr>
</thead>
<tbody>
<tr>
<td>Anonymous Tracking</td>
<td><code>x-pp-uia</code> and <code>x-pp-rmip</code></td>
</tr>
<tr>
<td>Event URL</td>
<td><code>page_location</code></td>
</tr>
<tr>
<td>Referrer URL</td>
<td><code>page_referrer</code></td>
</tr>
<tr>
<td>Event (Action) Name</td>
<td><code>x-pp-action_name</code> or <code>page_title</code></td>
</tr>
<tr>
<td>Search Query</td>
<td><code>x-pp-search</code></td>
</tr>
<tr>
<td>Search Categories</td>
<td><code>x-pp-search_cats</code></td>
</tr>
<tr>
<td>Search Results Count</td>
<td><code>x-pp-search_count</code></td>
</tr>
<tr>
<td>External Link URL</td>
<td><code>x-pp-link</code></td>
</tr>
<tr>
<td>File Download URL</td>
<td><code>x-pp-download</code></td>
</tr>
<tr>
<td>Custom Event Category</td>
<td><code>x-pp-e_c</code></td>
</tr>
<tr>
<td>Custom Event Action</td>
<td><code>x-pp-e_a</code></td>
</tr>
<tr>
<td>Custom Event Name</td>
<td><code>x-pp-e_n</code></td>
</tr>
<tr>
<td>Custom Event Value</td>
<td><code>x-pp-e_v</code></td>
</tr>
<tr>
<td>Ecommerce Event Type</td>
<td><code>x-pp-e_t</code></td>
</tr>
<tr>
<td>Order ID</td>
<td><code>x-pp-ec_id</code> or <code>transaction_id</code></td>
</tr>
<tr>
<td>Revenue</td>
<td><code>value</code></td>
</tr>
<tr>
<td>Sub-total</td>
<td><code>x-pp-ec_st</code></td>
</tr>
<tr>
<td>Shipping</td>
<td><code>x-pp-ec_sh</code></td>
</tr>
<tr>
<td>Tax</td>
<td><code>x-pp-ec_tx</code></td>
</tr>
<tr>
<td>Discount</td>
<td><code>x-pp-ec_dt</code></td>
</tr>
<tr>
<td>Products</td>
<td><code>x-pp-ec_products</code> or <code>items</code></td>
</tr>
<tr>
<td>Visitor ID</td>
<td><code>client_id</code></td>
</tr>
<tr>
<td>User ID</td>
<td><code>user_id</code></td>
</tr>
<tr>
<td>Override User IP</td>
<td><code>ip_override</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>If there is an <code>items</code> key in the event data object that is in the <a href="https://developers.google.com/analytics/devguides/collection/ga4/ecommerce?client_type=gtag#implementation">GA4 format</a>, then it is <strong>automatically</strong> transformed to the format that Piwik PRO requires <code>ec_products</code> to be in.</p>
</blockquote>
<p>Additionally, the Tag automatically inherits these fields from the event data object:</p>
<ul>
<li><code>user_agent</code> is used to populate the <code>ua</code> parameter.</li>
<li><code>language</code> is used to populate the <code>lang</code> parameter.</li>
<li><code>screen_resolution</code> is used to populate the <code>res</code>parameter.</li>
</ul>
<p>So, if you want <strong>Inherit from Client</strong> to work, you need to make sure that the event data keys for the tag fields you are concerned about can be found in the event data object (<a href="#transformations">see below</a> for tips on using Transformations).</p>
<h3 id="custom-dimensions-and-custom-variables">Custom dimensions and custom variables</h3>
<p>Any custom dimensions (<code>x-pp-dimensionN</code>) in the event data object are automatically inherited by the tag, unless you override them with the Custom Dimensions table in the tag (or with Additional Parameters).</p>



<div style="aspect-ratio: 1268 / 296;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/custom-dimensions.jpg" title="Custom dimensions">
  
    <img class="fig-img" height="296" width="1268" loading="lazy" src="https://www.simoahava.com/images/2024/07/custom-dimensions.jpg#ZgotmplZ" alt="Custom dimensions">
  
    </a>
  
  
</div>


<p>In the example above, custom dimension with index number <code>6</code> has been overridden by the tag field. Any <em>other</em> custom dimensions present in the event data object are included automatically.</p>
<p>Custom variables work a bit differently. If you add even a <strong>single</strong> custom variable to the tag, then nothing else is inherited from the event data object. In that case, only the variables added to the tag are considered.</p>
<p>If you do not edit the custom variables in the tag, then the event data key <code>x-pp-cvar</code> is used for event-scoped custom variables, and <code>x-pp-_cvar</code> is used for session-scoped custom variables.</p>



<div style="aspect-ratio: 1278 / 532;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/custom-variables.jpg" title="Custom variables">
  
    <img class="fig-img" height="532" width="1278" loading="lazy" src="https://www.simoahava.com/images/2024/07/custom-variables.jpg#ZgotmplZ" alt="Custom variables">
  
    </a>
  
  
</div>


<p>In the example above, the only <strong>event-scoped</strong> custom variable that is sent is the one with index <code>1</code>, <em>even if</em> there are additional event-scoped custom variables in the event data object. All session-scoped custom variables in the event data object are sent with the request to Piwik PRO.</p>
<h3 id="transformations">Transformations</h3>
<p>In case the event data object is not in the correct format or it&rsquo;s missing certain keys that you need your tag fields to inherit, you can apply a <a href="https://www.simoahava.com/analytics/transformations-server-side-google-tag-manager/">Transformation</a> to add or augment the Piwik PRO key in the event data object.</p>
<p>It&rsquo;s a good practice to make sure the Transformation only applies to Piwik PRO tags.</p>



<div style="aspect-ratio: 1844 / 1264;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/transformations-example-for-template-guide.jpg" title="Transformations example">
  
    <img class="fig-img" height="1264" width="1844" loading="lazy" src="https://www.simoahava.com/images/2024/07/transformations-example-for-template-guide.jpg#ZgotmplZ" alt="Transformations example">
  
    </a>
  
  
</div>


<p>For example, the Transformation above adds the <code>x-pp-rec</code> key with the value <code>1</code> to the event data object, and it automatically populates the <code>x-pp-e_t</code> (Event Type) key based on the GA4 event name.</p>
<p>Read <a href="https://www.simoahava.com/analytics/ga4-to-piwik-pro-using-server-side-google-tag-manager/">this article</a> for a more elaborate example of how to use a Transformation like this to support a real-world use case.</p>
<h3 id="additional-parameters">Additional Parameters</h3>
<p>In the <strong>Additional Parameters</strong> section of the tag, you can add any supported <a href="https://developers.piwik.pro/en/latest/data_collection/api/http_api.html">HTTP API parameters</a> to the tag.</p>
<blockquote>
<p>Remember to use the <strong>HTTP API</strong> parameter name directly, and <strong>don&rsquo;t</strong> add the <code>x-pp-</code> prefix.</p>
</blockquote>



<div style="aspect-ratio: 1326 / 526;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/additional-parameters-added.jpg" title="Additional parameters added">
  
    <img class="fig-img" height="526" width="1326" loading="lazy" src="https://www.simoahava.com/images/2024/07/additional-parameters-added.jpg#ZgotmplZ" alt="Additional parameters added">
  
    </a>
  
  
</div>


<p>Anything you add to Additional Parameters will override <strong>any</strong> other considerations done by the tag. So even if the tag inherits from the Client, or even if you&rsquo;ve added a value directly to a tag field, the keys in Additional Parameters will take precedence.</p>
<h3 id="priority-for-value-resolution">Priority for value resolution</h3>
<p>The <strong>priority</strong> order of how parameters are populated into the Piwik PRO request is:</p>
<ol>
<li>If the parameter has been defined in Additional Parameters, use it.</li>
<li>Else if the parameter has been added into a tag field (and has a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Truthy">truthy</a> value), use it.</li>
<li>Else if the parameter is available in the event data object, use it.</li>
</ol>
<p>Thus if you want to <strong>unset</strong> a value that&rsquo;s present in a tag field or in the event data object, the easiest way is to use Additional Parameters and make sure the value is set to <code>undefined</code> or <code>null</code>, such as with the <strong>Undefined Value</strong> variable type available in server-side GTM.</p>
<h3 id="preview-the-tag">Preview the tag</h3>
<p>When you enable Preview mode in server-side Google Tag Manager, the Piwik PRO tag writes <strong>two</strong> log entries into the Console tab for any given event.</p>



<div style="aspect-ratio: 2410 / 480;" class="figure nocaption">
  
    <a href="https://www.simoahava.com/images/2024/07/piwik-pro-tag-console.jpg" title="Piwik PRO tag console">
  
    <img class="fig-img" height="480" width="2410" loading="lazy" src="https://www.simoahava.com/images/2024/07/piwik-pro-tag-console.jpg#ZgotmplZ" alt="Piwik PRO tag console">
  
    </a>
  
  
</div>


<p>The first is the <strong>Compiled request body</strong>, which is the <strong>JSON</strong> data including all the parameters configured for the outgoing request. If you don&rsquo;t see some parameter here, it&rsquo;s not sent to Piwik PRO.</p>
<p>The second is the <strong>Encoded POST body</strong>, which is the URL-encoded request body that is shipped to your Piwik PRO instance. This is what Piwik PRO servers ultimately receive. If it looks good here, it will most likely look good in Piwik PRO.</p>
<blockquote>
<p>However, always remember to use the <a href="https://help.piwik.pro/support/collecting-data/tracker-debugger/"><strong>Tracker Debugger</strong></a> to verify the data stream – <em>that</em> is the ultimate truth.</p>
</blockquote>
<p>Use Preview mode to ascertain that the SGTM pipeline works.</p>
<blockquote>
<p>The logging is <em>only</em> available in Preview mode. In a Live container, nothing is logged to <code>stdout</code>.</p>
</blockquote>

                
                  <h2 id="summary">Summary</h2>
<p>This article is a <strong>technical</strong> overview of how the Client and tag templates work.</p>
<p>For a more practical approach, don&rsquo;t forget to read my other <a href="https://www.simoahava.com/analytics/ga4-to-piwik-pro-using-server-side-google-tag-manager/">article on how to utilize the GA4 data stream to mutate a request flow to Piwik PRO</a>.</p>
<p>Custom templates in Google Tag Manager are open-source projects. I encourage you to participate in the Client and tag template development work by submitting Issues.</p>
<ol>
<li><a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2-client/">The GitHub repo for the Client template</a>. Direct link to <a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2-client/issues">Issues</a>.</li>
<li><a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2/">The GitHub repo for the tag template</a>. Direct link to <a href="https://github.com/PiwikPRO/server-side-template-for-gtm-v2/issues">Issues</a>.</li>
</ol>
<p>There are lots of further development ideas going through my mind, ranging from a <strong>better integration with Google Analytics 4</strong> to <strong>more granular control over custom variable overrides</strong>.</p>
<p>The success of template development for GTM is directly correlated with the strength of the community around the vendor&rsquo;s services. In this, I believe, Piwik PRO is very well positioned. With the help of <a href="https://community.piwik.pro/">Piwik PRO&rsquo;s amazing community</a>, these templates will surely become benchmarks for all other vendors&rsquo; template development work.</p>
<p>Please let me know in the comments if you have questions about these templates!</p>

                
              
              

            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/google-tag-manager/">google tag manager</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/server-side/">server-side</a>

  <a class="tag tag--primary tag--small" href="https://www.simoahava.com/tags/piwik-pro/">piwik pro</a>

                  </div>
                
              
            
            
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/ga4-to-piwik-pro-using-server-side-google-tag-manager/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/first-party-mode-google-tags/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
              <i class="fa fa-brands fa-facebook"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=New%20Piwik%20PRO%20Templates%20In%20Server-side%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-brands fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
              <i class="fa fa-brands fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa-regular fa-comments"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


            
              <span id="commento_thread"></span>
<div id="commento"></div>
<script defer src="https://commento.simoahava.com/js/commento.js" data-no-livereload="true"></script>

            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2025 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
      
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
  <div class="post-actions-wrap">
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/ga4-to-piwik-pro-using-server-side-google-tag-manager/">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default" href="https://www.simoahava.com/analytics/first-party-mode-google-tags/">
              
                  <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
              <i class="fa fa-brands fa-facebook"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=New%20Piwik%20PRO%20Templates%20In%20Server-side%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/%20via%20@SimoAhava">
              <i class="fa fa-brands fa-twitter"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
              <i class="fa fa-brands fa-linkedin"></i>
            </a>
          </li>
        
      
      
        <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#commento_thread">
            <i class="fa-regular fa-comments"></i>
          </a>
        </li>
      
      <li class="post-action">
          <a class="post-action-btn btn btn--default" href="#">
          <i class="fa fa-search"></i>
        </a>
      </li>
    </ul>
  </div>


      </div>
      
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
          <i class="fa fa-brands fa-facebook"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=New%20Piwik%20PRO%20Templates%20In%20Server-side%20Google%20Tag%20Manager%20https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/%20via%20@SimoAhava">
          <i class="fa fa-brands fa-twitter"></i><span>Share on Twitter</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.linkedin.com/cws/share?url=https://www.simoahava.com/analytics/new-piwik-pro-templates-server-side-google-tag-manager/">
          <i class="fa fa-brands fa-linkedin"></i><span>Share on LinkedIn</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://commento.simoahava.com/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
         

    
  </body>
</html>

