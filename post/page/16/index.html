


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Posts | Simo Ahava's blog</title>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.simoahava.com/post/index.xml">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/post/">
    
    <meta name="description" content="Simo Ahava&#39;s blog">
    <meta property="og:description" content="Simo Ahava&#39;s blog">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Posts">
    <meta property="og:url" content="https://www.simoahava.com/post/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Posts">
    <meta name="twitter:description" content="Simo Ahava&#39;s blog">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
	<section class="postShorten-group main-content-wrap">
          <form id="search" action="https://www.simoahava.com/search/">
  <input name="q" type="text" class="form-control input--xlarge" placeholder="Search blog..." autocomplete="off">
  </form>

          
          
          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/two-simple-data-model-tricks/">
          #GTMTips: Two Simple Data Model Tricks
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-08-03T09:46:04&#43;03:00">
        
  August 3, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


      | <a href="https://www.simoahava.com/analytics/two-simple-data-model-tricks/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      One of the more difficult concepts in Google Tag Manager is the data model. In essence, the data model is what Google Tag Manager uses to populate the Data Layer variable. You might be tempted to think that it&rsquo;s the same thing as the dataLayer array, but it&rsquo;s not.
The data model is a representation of the keys and values you push into dataLayer. Whenever you push any key into dataLayer, GTM grabs this key and updates the corresponding key in its data model with the new value, or in the case of objects and arrays merges the old and the new value together.
      <p>
        <a href="https://www.simoahava.com/analytics/two-simple-data-model-tricks/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/two-simple-data-model-tricks/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/08/two-simple-data-model-tricks.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/get-position-index-of-visible-element/">
          #GTMTips: Get Position Index Of Visible Element
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-08-02T09:35:24&#43;03:00">
        
  August 2, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


      | <a href="https://www.simoahava.com/analytics/get-position-index-of-visible-element/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      It&rsquo;s time for a very simple #GTMTips article (I know, I always write that these are simple tips, but then they escalate into complex behemoths). Today, we&rsquo;ll cover a nifty trick you can use with the Element Visibility trigger in Google Tag Manager. This tip was inspired by a question from Eugen Potlog in the Google Tag Manager Facebook group.
The use case is that you have an Element Visibility trigger firing for a number of elements all sharing the same CSS selector.
      <p>
        <a href="https://www.simoahava.com/analytics/get-position-index-of-visible-element/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/get-position-index-of-visible-element/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/08/get-position-index-of-visible-element.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/tag-sequencing-custom-html-tags/">
          #GTMTips: Tag Sequencing With Custom HTML Tags
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-07-22T10:14:32&#43;03:00">
        
  July 22, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


      | <a href="https://www.simoahava.com/analytics/tag-sequencing-custom-html-tags/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Tag sequencing was introdced to Google Tag Manager in late 2015. Its main purpose was to facilitate the sequential firing of tags that have dependencies with each other. Due to the asynchronous nature of third-party libraries like Google Tag Manager, it&rsquo;s difficult to establish an order of completion with tags that compete for their chance to fire.
Tag sequencing changed this, as it allows you to establish setup and cleanup tags - the former firing before the main tag, and the latter after.
      <p>
        <a href="https://www.simoahava.com/analytics/tag-sequencing-custom-html-tags/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/tag-sequencing-custom-html-tags/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/07/tag-sequencing-custom-html-tags.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/fire-trigger-when-user-about-to-leave-page/">
          #GTMTips: Fire Trigger When User Is About To Leave The Page
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-07-15T09:25:44&#43;03:00">
        
  July 15, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


      | <a href="https://www.simoahava.com/analytics/fire-trigger-when-user-about-to-leave-page/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      One of the great ways to leverage Google Tag Manager in your web analytics tracking is to make use of all the possible custom events that the browser has to offer. One such event is beforeunload. It&rsquo;s dispatched in the browser when the user is about to unload the page. This means, typically, that the user is about to leave the page after clicking a link, or they are about to exit the browser by either closing the tab or the entire window.
      <p>
        <a href="https://www.simoahava.com/analytics/fire-trigger-when-user-about-to-leave-page/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/fire-trigger-when-user-about-to-leave-page/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/07/fire-trigger-beforeunload.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/google-tag-manager-content-security-policy/">
          #GTMTips: Google Tag Manager Content Security Policy
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-07-05T11:45:21&#43;03:00">
        
  July 5, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


      | <a href="https://www.simoahava.com/analytics/google-tag-manager-content-security-policy/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      A Content Security Policy (CSP) is something you&rsquo;ll configure your web server with to add an additional layer of protection, especially from harmful scripts loaded from third-party vendors. Once you have a CSP in place, all resources loaded and executed by the web page need to pass the CSP directives. For Google Tag Manager, this is very relevant. If you have a CSP in place, you will need to modify it so that Google Tag Manager functions properly.
      <p>
        <a href="https://www.simoahava.com/analytics/google-tag-manager-content-security-policy/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/google-tag-manager-content-security-policy/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/07/google-tag-manager-content-security-policy.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/automatically-reduce-google-analytics-payload-length/">
          Automatically Reduce Google Analytics Payload Length
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-06-22T11:04:14&#43;03:00">
        
  June 22, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/automatically-reduce-google-analytics-payload-length/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Here we are, reunited with customTask. This time, we&rsquo;ll put this wonderful mechanism to work for a very, very good cause. One of the lesser known &ldquo;features&rdquo; of Google Analytics is that when the payload size (the request body that is actually sent to Google Analytics with each request) goes past a certain limit, specifically 8192 bytes, the hit is aborted without warning. This can come as a surprise, because there&rsquo;s no indication anywhere in Google Analytics that you are missing hits because of this.
      <p>
        <a href="https://www.simoahava.com/analytics/automatically-reduce-google-analytics-payload-length/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/automatically-reduce-google-analytics-payload-length/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/06/automatically-reduce-payload-length.jpg"/>
      </div>
    </a>
  
</article>

          
            
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/allow-block-advertising-features-google-analytics/">
          Allow And Block Advertising Features In Google Analytics
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-06-20T15:16:55&#43;03:00">
        
  June 20, 2018

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


      | <a href="https://www.simoahava.com/analytics/allow-block-advertising-features-google-analytics/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      After writing yet another customTask article on how to respect client-side opt-out using Google Analytics and Google Tag Manager, the analytics.js core library was enhanced with a new field that makes it all a lot easier to do. The field, allowAdFeatures, lets you either allow or block the request to DoubleClick that is initiated when Advertising Features have been enabled.
In this very short article, I&rsquo;ll quickly show you what the field does and why it&rsquo;s useful.
      <p>
        <a href="https://www.simoahava.com/analytics/allow-block-advertising-features-google-analytics/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/allow-block-advertising-features-google-analytics/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/06/property-settings.jpg"/>
      </div>
    </a>
  
</article>

          
          
  <div class="pagination-bar">
    <ul class="pagination">
      
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/post/page/15/">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/post/page/17/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
      
      <li class="pagination-number">page 16 of 49</li>
    </ul>
  </div>


	  
        </section>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>

    
  </body>
</html>

