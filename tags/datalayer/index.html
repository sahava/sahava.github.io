


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.48 with theme Tranquilpeak 0.4.3-BETA">
    <title>Datalayer | Simo Ahava's blog</title>
    

    <script src="//de.cdn-v3.conductrics.com/ac-GeQBKxGTiA/v3/agent-api/js/f-TNZdDPOknZ/dt-8BnrVvfJuB1PwktQxXXgVK2OikZ9WR?apikey=api-WDrqMnckreSqejZgDAMu" type="text/javascript"></script>
    <script src="https://www.simoahava.com/js/ctrics-manual.js"></script>
    
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PZ7GMV9');</script>
    
    <script src="//simoahava.disqus.com/count.js" id="dsq-count-scr" async></script>
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.simoahava.com/tags/datalayer/index.xml">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/tags/datalayer/">
    
    <meta name="description" content="Simo Ahava&#39;s blog">
    <meta property="og:description" content="Simo Ahava&#39;s blog">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Datalayer">
    <meta property="og:url" content="/tags/datalayer/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Datalayer">
    <meta name="twitter:description" content="Simo Ahava&#39;s blog">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
        

      
      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
        
          <section class="postShorten-group main-content-wrap">
            <span class="breadcrumbs">You are here: <a href="https://www.simoahava.com/tags/">Tags</a> / Datalayer</span>
            
            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/search-datalayer-for-key-value-pair/">
          #GTMTips: Search dataLayer For A Key-Value Pair
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-11-06T10:05:27&#43;02:00">
        
  November 6, 2018

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/search-datalayer-for-key-value-pair/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      One of the difficulties of working with Google Tag Manager and the dataLayer structure is that GTM doesn&rsquo;t preserve history of the items collected into its data model. Or, at least, it doesn&rsquo;t preserve it in a manner that would let us access it.
This is typically a very niche problem, but it does surface every now and then. For example, say you wanted to query whether an event with some specific value has already been pushed into dataLayer.
      <p>
        <a href="https://www.simoahava.com/analytics/search-datalayer-for-key-value-pair/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/search-datalayer-for-key-value-pair/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/11/search-datalayer-for-key-value-pair.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/fix-missing-page-view-broken-triggers/">
          #GTMTips: Fix Missing Page View Event And Broken Triggers
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2018-02-09T09:18:42&#43;02:00">
        
  February 9, 2018

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/fix-missing-page-view-broken-triggers/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Google Tag Manager should be relatively easy to implement. Just paste the container snippet to the &lt;head&gt; of the page and you&rsquo;re good to go! However, at some point you&rsquo;ll want to configure the dataLayer structure, too (read more about dataLayer here). There are two ways to do it: the right way and the wrong way.
In this article, we&rsquo;ll see what happens if you do it the wrong way, how to identify the issue, and how to fix it.
      <p>
        <a href="https://www.simoahava.com/analytics/fix-missing-page-view-broken-triggers/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/fix-missing-page-view-broken-triggers/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2018/02/missing-page-view-event-broken-triggers.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/use-eventtimeout-eventcallback/">
          #GTMTips: Use eventTimeout With eventCallback
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2016-07-27T08:43:20Z">
        
  July 27, 2016

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/use-eventtimeout-eventcallback/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      There are times when I&rsquo;m disappointed with Google&rsquo;s developer documentation, especially for Google Tag Manager. Most of the time they get it right, and I&rsquo;d say around 80% of questions being thrown around the forums can be answered just by reading through the documentation. But there are some cases where the documentation is misleading or even downright dangerous. One of these cases is Enhanced Ecommerce.
This isn&rsquo;t going to be a thorough critique of said documentation, but the tip in this post has to do with one of the examples that the documentation gives for measuring Product Clicks.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/use-eventtimeout-eventcallback/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/use-eventtimeout-eventcallback/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2016/07/gtmtips-use-eventtimeout-with-eventcallback.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/measure-google-tag-manager-event-duration/">
          Measure Google Tag Manager Event Duration
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2016-06-08T16:09:45Z">
        
  June 8, 2016

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/measure-google-tag-manager-event-duration/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Google Tag Manager is a great tool. Yeah, you came all the way to this article to read that truism. It also performs really well, loading at a sweet, swift pace even on a slow connection, thanks to pretty decent response times from Google servers. On top of that, the library itself loads asynchronously, meaning the container download doesn&rsquo;t interrupt the browser as it tries to make sense of your messy HTML.
      <p>
        <a href="https://www.simoahava.com/analytics/measure-google-tag-manager-event-duration/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/measure-google-tag-manager-event-duration/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2016/06/gtm-js-load.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/datalayer-declaration-vs-push/">
          #GTMtips: dataLayer Declaration Vs. .push()
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-10-13T06:43:21Z">
        
  October 13, 2014

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM tips</a>
    
  


       | <a href="https://www.simoahava.com/gtm-tips/datalayer-declaration-vs-push/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Here&rsquo;s a tip on how to avoid a horrible, horrible mistake with Google Tag Manager.
Tip 7: Always use .push() with dataLayer   When you assign a value to a variable using the equals ( = ) sign, you are actually reallocating the variable to a new value, and the garbage collection system of the runtime environment sweeps the previous value to bit heaven.
Let&rsquo;s put it simply: if you redefine dataLayer after the GTM container snippet, you will break GTM&rsquo;s proprietary functions.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/datalayer-declaration-vs-push/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/datalayer-declaration-vs-push/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2014/10/datalayer-declaration-push.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/data-layer/">
          The Data Layer
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-09-15T07:05:09Z">
        
  September 15, 2014

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/data-layer/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      Writing this article is dangerous. Data Layer is two marketers short of becoming a buzz word. This occasion will be heralded by articles such as &ldquo;Data Layer Is Dead&rdquo;, &ldquo;This Developer Implemented A Data Layer And You&rsquo;ll Never Guess What Happened Next&rdquo;, and other examples of the kind of content generation whose propagation should be prevented by military force. This is not one of those articles, I hope, but rather an honest look at what Data Layer is from a number of perspectives.
      <p>
        <a href="https://www.simoahava.com/analytics/data-layer/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/data-layer/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2014/09/data-layer.png"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/">
          Persist dataLayer In Google Tag Manager
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2014-09-01T06:57:02Z">
        
  September 1, 2014

      </time>
    
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/analytics">Analytics</a>
    
  


       | <a href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/#disqus_thread">Comments</a>
  </div>


    </div>
    <div class="postShorten-excerpt">
      If you know your JavaScript, you know that all variables, functions, objects, resources, and data in the document get rewritten with every page load. In other words, every single page refresh builds the page from scratch, and the state of the document before the page refresh is left drifting in the ocean of oblivion.
Google Tag Manager&rsquo;s dataLayer is also one such entity. It gets rewritten with every page load, so it&rsquo;s not possible to have a dataLayer variable persist from one page to the other without using cookies or, as I&rsquo;m going to show in this guide, the HTML5 Web Storage API.
      <p>
        <a href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/analytics/persist-datalayer-google-tag-manager/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2014/08/persist-datalayer.png"/>
      </div>
    </a>
  
</article>

            
            

          </section>
        
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://www.simoahava.com/js/script.js"></script>






    
  </body>
</html>

