


  





  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta name="google-site-verification" content="xQwWI2KUfP9LbFKhw2CVLFtrMY6Czrla7L3PD2aBolA" />



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>gtmtips | Simo Ahava's blog</title>
    

    
    
    <script src="https://www.simoahava.com/x-js/lazyload.iife.min.js"></script>

    

    
    <script>
      (function(S,i,m,o){
        window[m]=window[m]||[];
        window[m].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
        var f=S.getElementsByTagName(i)[0],j=S.createElement(i),dl=m!='dataLayer'?'&l='+m:'';
        j.async=true;
        j.src='https://sgtm.simoahava.com/gtm.js?id='+o+dl;
        f.parentNode.insertBefore(j,f);
      })(document,'script','dataLayer','GTM-PZ7GMV9');
    </script>
    
    <meta name="author" content="Simo Ahava">
    <meta name="keywords" content="">

    <link rel="icon" href="https://www.simoahava.com/images/favicon.ico">
    
      <link rel="alternate" type="application/rss+xml" title="RSS" href="https://www.simoahava.com/tags/gtmtips/index.xml">
    
    <link rel="amphtml" href="https://www.simoahava.com/amp/tags/gtmtips/">
    
    <meta name="description" content="Simo Ahava&#39;s blog">
    <meta property="og:description" content="Simo Ahava&#39;s blog">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="gtmtips">
    <meta property="og:url" content="https://www.simoahava.com/tags/gtmtips/">
    <meta property="og:site_name" content="Simo Ahava&#39;s blog">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="gtmtips">
    <meta name="twitter:description" content="Simo Ahava&#39;s blog">
    
      <meta name="twitter:creator" content="@SimoAhava">
      
    

    
    

    
      <meta property="og:image" content="https://www.simoahava.com/images/simo.png">
    


    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    
    
    
    <link rel="stylesheet" href="https://www.simoahava.com/css/style.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://www.simoahava.com/">Simo Ahava&#39;s blog</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://www.simoahava.com/">
          <img class="sidebar-profile-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Simo Ahava</h4>
        
          <h5 class="sidebar-profile-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tags/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/categories/gtm-tips/">
    
      <i class="sidebar-button-icon fa fa-lg fa-magic"></i>
      
      <span class="sidebar-button-desc">GTM Tips</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/about-simo-ahava/">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/tools/">
    
      <i class="sidebar-button-icon fa fa-lg fa-wrench"></i>
      
      <span class="sidebar-button-desc">Tools</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/blog-statistics/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bar-chart"></i>
      
      <span class="sidebar-button-desc">Blog statistics</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/sahava" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/upcoming-talks/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bullhorn"></i>
      
      <span class="sidebar-button-desc">Upcoming talks</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/custom-templates/">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Templates</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.simoahava.com/newsletter/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bell"></i>
      
      <span class="sidebar-button-desc">Newsletter</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      
        

      
      <div id="main" data-behavior="1"
        class="
               hasCoverMetaIn
               ">
        
          <section class="postShorten-group main-content-wrap">
            <span class="breadcrumbs">You are here: <a href="https://www.simoahava.com/tags/">Tags</a> / gtmtips</span>
            
            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/utilize-app-engine-headers-server-side-tagging/">
          #GTMTips: Utilize App Engine Headers In Server-side Tagging
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-08-26T09:00:17&#43;03:00">
        
  August 26, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/utilize-app-engine-headers-server-side-tagging/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      When you create a Server container in Google Tag Manager, GTM creates an App Engine deployment in the Google Cloud Platform for you.
App Engine is a managed serverless platform, which basically means it&rsquo;s a (set of) virtual machine(s) running in the cloud, with some extra bells and whistles added to make managing it easier.
A potentially useful thing that App Engine does is decorate all incoming HTTP requests with some HTTP headers that can be used in the app.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/utilize-app-engine-headers-server-side-tagging/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/utilize-app-engine-headers-server-side-tagging/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/08/app-engine-headers.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/get-true-ip-anonymization-server-side-tagging/">
          #GTMTips: Get True IP Anonymization With Server-side Tagging
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-08-25T09:52:51&#43;03:00">
        
  August 25, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/get-true-ip-anonymization-server-side-tagging/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Since the release of Server-side tagging in Google Tag Manager, I&rsquo;ve jumped at every opportunity to celebrate the tools it provides for improving end-user privacy and data security.
One of the biggest benefits is obfuscation-by-default. Since all hits are passed through the server-side proxy, the default view for any third-party tool (such as Google Analytics) is that of the server in the Google Cloud rather than the browser and device with which the user was browsing the site.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/get-true-ip-anonymization-server-side-tagging/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/get-true-ip-anonymization-server-side-tagging/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/08/anonymize-ip.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/">
          #GTMTips: Build A Custom Universal Analytics Client For Server-side Tagging
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-08-12T07:03:00&#43;03:00">
        
  August 12, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      You can utilize Server-side tagging in Google Tag Manager to build your own custom Universal Analytics proxy.
This proxy comes in the shape of a new Client custom template, which takes the incoming /collect requests and sends them to Google Analytics. While doing so, it also returns the _ga cookie in a Set-Cookie header, thus preventing Safari&rsquo;s Intelligent Tracking Prevention from capping its expiration to just 7 days.
 You might also be interested in reading what Google&rsquo;s own solution is for migrating from JavaScript cookies to those set in HTTP headers.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/build-custom-universal-analytics-client-server-side-tagging/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/07/custom-universal-analytics-client.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/send-google-analytics-requests-custom-endpoint/">
          #GTMTips: Send Google Analytics Requests To Custom Endpoint
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-08-12T07:01:00&#43;03:00">
        
  August 12, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/send-google-analytics-requests-custom-endpoint/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      When you use Google Analytics on the web, you are most likely implementing one of analytics.js, the global site tag (gtag.js), or Universal Analytics tags via Google Tag Manager.
These libraries all end up doing the same thing: compiling a payload-rich HTTP request to an endpoint at https://www.google-analytics.com.
What if you want to have the JavaScript libraries do their job, but instead of sending the data to Google&rsquo;s servers, you send them to a new, custom endpoint?
      <p>
        <a href="https://www.simoahava.com/gtm-tips/send-google-analytics-requests-custom-endpoint/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/send-google-analytics-requests-custom-endpoint/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/07/send-google-analytics-request-custom-endpoint.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/fix-preview-google-chrome-incognito-mode/">
          #GTMTips: Fix Container Preview In Google Chrome&#39;s Incognito Mode
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-06-29T13:08:26&#43;03:00">
        
  June 29, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/fix-preview-google-chrome-incognito-mode/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      Since updating to Google Chrome 83, you might have noticed that Google Tag Manager&rsquo;s Preview mode no longer works when browsing Chrome in Incognito mode.
This is because starting with Chrome 83, third-party cookies are blocked by default in Incognito windows.
Google Tag Manager uses third-party cookies to serve browsers in Preview mode with the container draft rather than the live container.
There&rsquo;s a simple workaround to make sure Preview mode continues working for any site you want to browse in Preview mode.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/fix-preview-google-chrome-incognito-mode/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/fix-preview-google-chrome-incognito-mode/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/06/chrome-incognito-preview-fix.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/use-all-events-trigger-more-control/">
          #GTMTips: Use An All Events Trigger For More Control
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-05-06T14:37:05&#43;03:00">
        
  May 6, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/use-all-events-trigger-more-control/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      One of the most versatile triggers in Google Tag Manager is the Custom Event trigger. As its name indicates, you can use it to fire your tags when an event is pushed into dataLayer.
This process is at the heart of GTM&rsquo;s dataLayer system. And it&rsquo;s not just custom events. Every single trigger type in Google Tag Manager uses the event key in a dataLayer.push(), which is why you&rsquo;ll see events like gtm.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/use-all-events-trigger-more-control/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/use-all-events-trigger-more-control/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/05/all-events-trigger.jpg"/>
      </div>
    </a>
  
</article>

            
              
  
    
  


  

<article class="postShorten postShorten--thumbnailimg-left">
  <div class="postShorten-wrap">
    
    <div class="postShorten-header">
      <h1 class="postShorten-title">
        <a class="link-unstyled" href="https://www.simoahava.com/gtm-tips/use-gtag-js-parameters-google-tag-manager/">
          #GTMTips: Use gtag.js Parameters In Google Tag Manager
        </a>
      </h1>
      
  <div class="postShorten-meta post-meta">
    
      <time datetime="2020-04-24T14:39:51&#43;03:00">
        
  April 24, 2020

      </time>
      
      
  
  
    <span>in</span>
    
      <a class="category-link" href="https://www.simoahava.com/categories/gtm-tips">GTM Tips</a>
    
  


      | <a href="https://www.simoahava.com/gtm-tips/use-gtag-js-parameters-google-tag-manager/#commento">Comments</a>
      
  </div>


    </div>
    <div class="postShorten-excerpt">
      With the proliferation of gtag.js implementations, we can see that there&rsquo;s a small-ish paradigm shift in how to implement Google&rsquo;s stack of marketing tools.
As adding gtag.js snippets to the site code becomes more and more common (to cater to things like early Optimize loading), you might be at a point where you have lots of interesting information stored in the gtag.js queue but no way to access it in your Google Tag Manager tags and variables.
      <p>
        <a href="https://www.simoahava.com/gtm-tips/use-gtag-js-parameters-google-tag-manager/" class="postShorten-excerpt_link link">Continue reading</a>
        
      </p>
    </div>
  </div>
  
    <a href="https://www.simoahava.com/gtm-tips/use-gtag-js-parameters-google-tag-manager/">
      <div class="postShorten-thumbnailimg">
        <img alt="" src="https://www.simoahava.com/images/2020/04/gtag-events-in-google-tag-manager.jpg"/>
      </div>
    </a>
  
</article>

            
            
  <div class="pagination-bar">
    <ul class="pagination">
      
        
          <li class="pagination-prev">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/tags/gtmtips/">
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a class="btn btn--default btn--small" href="https://www.simoahava.com/tags/gtmtips/page/3/">
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
      
      <li class="pagination-number">page 2 of 18</li>
    </ul>
  </div>


          </section>
        
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Simo Ahava. All Rights Reserved
  </span>
</footer>

      </div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.simoahava.com/images/simo.png" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Simo Ahava</h4>
    
      <div id="about-card-bio">Husband | Father | Analytics developer<br>simo (at) simoahava.com</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Senior Data Advocate at Reaktor
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Finland
      </div>
    
  </div>
</div>

    
  
    
    <div id="cover" style="background-image:url('https://www.simoahava.com/images/maisema.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>




<script src="https://www.simoahava.com/js/script.js"></script>




<script src="https://cdn.commento.io/js/count.js"></script>

    <script>
      !function(){var e=document.querySelector(".simmer"),t=document.querySelector(".simmer .close"),o=window.sessionStorage&&window.sessionStorage.getItem("nosimmer");if(e){if(o){e.style.display="none"}t.addEventListener("click",function(){window.sessionStorage.setItem("nosimmer","true"),e.style.display="none"})}}();
    </script>
    <script>
      var mylazyload = new LazyLoad({elements_selector: '.lazy'});
      </script>
    <style>
      .ads {
	  width: 1px;
      }
      </style>
    
    <script>
      !function(){
  var baitPath = 'https://sgtm.simoahava.com/ads-min.js';
  var pixelPath = 'https://sgtm.simoahava.com/4dchk';
	  if("/"===document.location.pathname){var e=document.createElement("script");e.src=baitPath,document.body.appendChild(e);var t=!1;fetch("https://www.google-analytics.com/analytics.js",{method:"HEAD",mode:"no-cors"}).catch(function(){t=!0}),window.addEventListener("load",function(){var e={adb_blocked:!document.querySelector("#ECKckuBYwZaP"),gtm_blocked:!(window.google_tag_manager&&window.google_tag_manager.dataLayer),ga_blocked:t},o=Math.floor(1e6*Math.random()+1)+"_"+(new Date).getTime(),a=document.createElement("img");a.style="width: 1; height: 1; display: none;",a.src=pixelPath+"?client_id="+o+"&"+Object.keys(e).reduce(function(t,o){return t.concat(o+"="+e[o])},[]).join("&"),document.body.appendChild(a)})}}();
      </script>
      

    
  </body>
</html>

