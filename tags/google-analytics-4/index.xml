<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Google Analytics 4 on Simo Ahava's blog</title><link>https://www.simoahava.com/tags/google-analytics-4/</link><description>Recent content in Google Analytics 4 on Simo Ahava's blog</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Mon, 22 Jul 2024 07:00:00 +0100</lastBuildDate><atom:link href="https://www.simoahava.com/tags/google-analytics-4/index.xml" rel="self" type="application/rss+xml"/><item><title>First-Party Mode For Google Tags</title><link>https://www.simoahava.com/analytics/first-party-mode-google-tags/</link><pubDate>Mon, 22 Jul 2024 07:00:00 +0100</pubDate><guid>https://www.simoahava.com/analytics/first-party-mode-google-tags/</guid><description>&lt;p>Google &lt;a href="https://developers.google.com/tag-platform/tag-manager/first-party/setup-guide.md">has released&lt;/a> a new feature, &lt;strong>First-Party Mode&lt;/strong> (FPM), into public beta.&lt;/p>



&lt;div style="aspect-ratio: 3016 / 1344;" class="figure nocaption">
 
 &lt;a href="https://www.simoahava.com/images/2024/07/first-party-mode-diagram.jpg" title="First-party mode">
 
 &lt;img class="fig-img" height="1344" width="3016" loading="lazy" src="https://www.simoahava.com/images/2024/07/first-party-mode-diagram.jpg#ZgotmplZ" alt="First-party mode">
 
 &lt;/a>
 
 
&lt;/div>


&lt;p>&lt;a href="https://developers.google.com/tag-platform/tag-manager/first-party/setup-guide.md">&lt;em>Image source&lt;/em>&lt;/a>&lt;/p>
&lt;p>First-Party Mode seeks to make it easier to wrap Google&amp;rsquo;s measurement and advertising technologies in a first-party, &lt;em>same-origin&lt;/em> context.&lt;/p>
&lt;p>This means that the user&amp;rsquo;s browser, when visiting a website running FPM, would no longer communicate directly with Google&amp;rsquo;s domains when fetching measurement libraries such as &lt;strong>Google Tag&lt;/strong> or &lt;strong>Google Tag Manager&lt;/strong>.&lt;/p></description></item><item><title>#GTMTips: Consent Granted Reprocesses Previously Denied Hits</title><link>https://www.simoahava.com/gtmtips/consent-granted-reprocesses-previously-denied-hits/</link><pubDate>Thu, 07 Mar 2024 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/gtmtips/consent-granted-reprocesses-previously-denied-hits/</guid><description>&lt;p>This will be a quick tip, but it&amp;rsquo;s here to correct my previous statements in the comments section of &lt;a href="https://www.simoahava.com/analytics/consent-mode-v2-google-tags/">different articles&lt;/a> on this blog.&lt;/p>
&lt;p>When using &lt;a href="https://support.google.com/google-ads/answer/10000067?hl=en">Advanced Consent Mode&lt;/a>, Google Analytics 4 collects hits when consent is in &lt;code>&amp;quot;denied&amp;quot;&lt;/code> state. These hits have a lot of parameters stripped off them, including identifiers like the &lt;strong>Client ID&lt;/strong> and the &lt;strong>Session ID&lt;/strong>.&lt;/p>
&lt;p>The hits will not surface in reports directly, but they will instead go through a &lt;a href="https://support.google.com/analytics/answer/11161109?hl=en">modeling process&lt;/a> to enrich the reports once modeled.&lt;/p></description></item><item><title>Join Google Ads And GA4 Data In Google BigQuery</title><link>https://www.simoahava.com/analytics/join-ga4-google-ads-data-in-google-bigquery/</link><pubDate>Thu, 30 Nov 2023 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/analytics/join-ga4-google-ads-data-in-google-bigquery/</guid><description>&lt;p>I am fortunate to share another &lt;strong>guest post&lt;/strong> by &lt;a href="https://www.linkedin.com/in/arben-kqiku-301457117/">Arben Kqiku&lt;/a>, Digital Analyst at &lt;a href="https://www.linkedin.com/company/assura-ch/">Assura&lt;/a>.&lt;/p>
&lt;p>Last time, Arben graced this blog with a &lt;a href="https://www.simoahava.com/analytics/content-analysis-using-ga4-bigquery-r-google-sheets-data-studio/">comprehensive love letter to R&lt;/a> as an example of the power of this programming language.&lt;/p>
&lt;p>This time, he&amp;rsquo;ll add even more fancy tools to the toolkit to help you build a &lt;strong>data pipeline&lt;/strong> in the Google Cloud Platform to join your Google Ads and Google Analytics 4 data together.&lt;/p>
&lt;!-- toc -->
&lt;h2 id="goal-of-this-article">Goal of this article&lt;/h2>
&lt;p>My goal for this article is twofold; first, I want to show my fellow R users that it is possible and fun to use R in a production environment! R is sometimes seen as a second-class citizen compared to Python, but in my experience, R has consistently proven effective in addressing all my data challenges at work.&lt;/p></description></item><item><title>The Google Tag Template In Google Tag Manager</title><link>https://www.simoahava.com/analytics/google-tag-template-in-google-tag-manager/</link><pubDate>Wed, 06 Sep 2023 07:01:00 +0300</pubDate><guid>https://www.simoahava.com/analytics/google-tag-template-in-google-tag-manager/</guid><description>&lt;p>Google is going all-in with &lt;a href="https://developers.google.com/tag-platform/gtagjs">Google Tag&lt;/a>. We&amp;rsquo;ve already seen &lt;a href="https://www.simoahava.com/analytics/one-tag-rule-them-all-introducing-google-tag/">the consolidation effort&lt;/a> through products like Google Analytics 4, and now Google is extending the merging of the tagging stack into Google Tag Manager, too.&lt;/p>
&lt;p>I&amp;rsquo;m referring to the new &lt;strong>Google Tag&lt;/strong> that has replaced Google Analytics 4 configuration tags in your Google Tag Manager containers.&lt;/p>
&lt;p>With this release, all your old GA4 configuration tags have been &lt;strong>auto-migrated&lt;/strong> to the new Google Tag.&lt;/p></description></item><item><title>Settings Variables For GA4 In Google Tag Manager</title><link>https://www.simoahava.com/analytics/settings-variables-for-ga4-in-google-tag-manager/</link><pubDate>Wed, 06 Sep 2023 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/analytics/settings-variables-for-ga4-in-google-tag-manager/</guid><description>&lt;p>One of the big pain points in configuring &lt;a href="https://developers.google.com/analytics/devguides/collection/ga4">Google Analytics 4&lt;/a> through &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> has been the difficulty of setting up event parameters, user properties, and settings across a range of tags.&lt;/p>
&lt;p>Well, we can finally get rid of our clumsy Config tag sequencing hacks because Google has released &lt;strong>two&lt;/strong> new settings variables that mimic how the &lt;a href="https://www.simoahava.com/analytics/google-analytics-settings-variable-in-gtm/">Google Analytics Settings Variable&lt;/a> used to work in Universal Analytics.&lt;/p>
&lt;p>The new variables are:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Google Tag: Configuration Settings&lt;/strong> for setting configuration values in the &lt;em>Google Tag&lt;/em> template (also a new thing, more on this below). &lt;a href="https://support.google.com/tagmanager/answer/13438166">Official documentation&lt;/a>.&lt;/li>
&lt;li>&lt;strong>Google Tag: Event Settings&lt;/strong> for setting event fields in the Google Tag template and in GA4 event tags. &lt;a href="https://support.google.com/tagmanager/answer/13438771">Official documentation&lt;/a>.&lt;/li>
&lt;/ul>



&lt;div style="aspect-ratio: 1784 / 508;" class="figure nocaption">
 
 &lt;a href="https://www.simoahava.com/images/2023/05/google-tag-event-settings-overview.jpg" title="Google Tag Event Settings overview">
 
 &lt;img class="fig-img" height="508" width="1784" loading="lazy" src="https://www.simoahava.com/images/2023/05/google-tag-event-settings-overview.jpg#ZgotmplZ" alt="Google Tag Event Settings overview">
 
 &lt;/a>
 
 
&lt;/div>


&lt;p>Read on for a quick overview as well as my thoughts about these new additions to Google Tag Manager.&lt;/p></description></item><item><title>Dear Google Analytics 4</title><link>https://www.simoahava.com/analytics/dear-google-analytics-4/</link><pubDate>Wed, 31 May 2023 07:00:16 +0300</pubDate><guid>https://www.simoahava.com/analytics/dear-google-analytics-4/</guid><description>&lt;p>I owe my career to Google Analytics.&lt;/p>
&lt;p>Whatever success I have achieved over the past 15 years or so can be directly attributed to my work with GA and, by extension, other tools in the Google stack.&lt;/p>
&lt;p>Now, &lt;a href="https://support.google.com/analytics/answer/13510998">Universal Analytics is about to be turned down&lt;/a>.&lt;/p>
&lt;p>It fills me with a sense of nostalgia and pining for past, simpler times.&lt;/p>
&lt;p>When I cast my mind back, a scattering of memories emerges in my mind:&lt;/p></description></item><item><title>#GTMTips: Override Google Analytics 4 Fields In Server-Side GTM</title><link>https://www.simoahava.com/gtm-tips/override-ga4-fields-in-server-side-gtm/</link><pubDate>Thu, 30 Mar 2023 06:00:00 +0300</pubDate><guid>https://www.simoahava.com/gtm-tips/override-ga4-fields-in-server-side-gtm/</guid><description>&lt;p>&lt;a href="https://www.simoahava.com/analytics/server-side-tagging-google-tag-manager/">Server-side tagging&lt;/a> is all about &lt;em>control&lt;/em>. Being able to intercept, modify, and even block requests as they come in &lt;em>before&lt;/em> they are dispatched to their actual endpoints is extremely valuable.&lt;/p>
&lt;p>The built-in &lt;strong>Google Analytics 4&lt;/strong> tag template has options for modifying event parameters and user properties in the Google Analytics 4 request, but did you know you can use these options to modify some of the &lt;strong>fields&lt;/strong> as well, such as Client ID, User ID, and event Engagement Time?&lt;/p></description></item><item><title>DebugView With GA4 Measurement Protocol</title><link>https://www.simoahava.com/analytics/debugview-with-ga4-measurement-protocol/</link><pubDate>Wed, 22 Feb 2023 07:00:39 +0200</pubDate><guid>https://www.simoahava.com/analytics/debugview-with-ga4-measurement-protocol/</guid><description>&lt;p>While &lt;a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4">Measurement Protocol for GA4&lt;/a> is still rather, well, rough, it can be used to augment existing collection quite nicely. Recently, I wrote &lt;a href="https://www.simoahava.com/analytics/session-attribution-with-ga4-measurement-protocol/">an article that discussed the nuances of session attribution&lt;/a> with Measurement Protocol.&lt;/p>
&lt;p>One of the pain points of any data ingestion setup is &lt;strong>how to debug it&lt;/strong>.&lt;/p>



&lt;div style="aspect-ratio: 2350 / 1432;" class="figure nocaption">
 
 &lt;a href="https://www.simoahava.com/images/2023/02/debugview-no-events.jpg" title="No events in DebugView">
 
 &lt;img class="fig-img" height="1432" width="2350" loading="lazy" src="https://www.simoahava.com/images/2023/02/debugview-no-events.jpg#ZgotmplZ" alt="No events in DebugView">
 
 &lt;/a>
 
 
&lt;/div>


&lt;p>Measurement Protocol hits are &lt;strong>not&lt;/strong> automatically surfaced in &lt;a href="https://support.google.com/analytics/answer/7201382?hl=en">GA4&amp;rsquo;s DebugView&lt;/a>.&lt;/p>
&lt;p>In this article, I&amp;rsquo;ll show you how to make those hits pop up in the debug stream. It&amp;rsquo;s very straightforward to do, and contrary to many of the articles I write, there&amp;rsquo;s only one &lt;strong>caveat&lt;/strong> that I could think of.&lt;/p></description></item><item><title>Session Attribution With GA4 Measurement Protocol</title><link>https://www.simoahava.com/analytics/session-attribution-with-ga4-measurement-protocol/</link><pubDate>Thu, 26 Jan 2023 12:28:27 +0200</pubDate><guid>https://www.simoahava.com/analytics/session-attribution-with-ga4-measurement-protocol/</guid><description>&lt;p>In this article, I&amp;rsquo;ll try to clarify the understandably murky &lt;a href="https://developers.google.com/analytics/devguides/collection/protocol/ga4">Measurement Protocol&lt;/a> functionality in &lt;a href="https://support.google.com/analytics/answer/10089681?hl=en">Google Analytics 4&lt;/a>.&lt;/p>
&lt;p>Measurement Protocol is a way to send events to Google Analytics 4 directly from a machine capable of sending HTTP requests (such as a web server). It&amp;rsquo;s an alternative collection method to the client-side libraries of &lt;a href="https://support.google.com/analytics/answer/11994839">Google Tag&lt;/a> and the &lt;a href="https://firebase.google.com/docs/analytics">Firebase SDK&lt;/a>.&lt;/p>



&lt;div style="aspect-ratio: 1806 / 1198;" class="figure nocaption">
 
 &lt;a href="https://www.simoahava.com/images/2023/01/mp-ga4.jpg" title="Measurement Protocol In Google Analytics 4">
 
 &lt;img class="fig-img" height="1198" width="1806" loading="lazy" src="https://www.simoahava.com/images/2023/01/mp-ga4.jpg#ZgotmplZ" alt="Measurement Protocol In Google Analytics 4">
 
 &lt;/a>
 
 
&lt;/div>


&lt;p>Measurement Protocol in GA4 is very different from its &lt;a href="https://developers.google.com/analytics/devguides/collection/protocol/v1">predecessor in Universal Analytics&lt;/a>. In Universal Analytics, Measurement Protocol was &lt;em>the&lt;/em> collection mechanism, with the same protocol being used for both client-side library hits and server-to-server hits.&lt;/p></description></item><item><title>Track And Categorize All Link Clicks On The Site With Google Analytics 4</title><link>https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/</link><pubDate>Mon, 12 Dec 2022 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/analytics/track-and-categorize-all-link-clicks-on-the-site/</guid><description>&lt;blockquote>
&lt;p>This is a &lt;strong>guest&lt;/strong> post by &lt;a href="https://www.linkedin.com/in/sebastianp/">Sebastian Pospischil&lt;/a>, Evangelist Digital Analytics at &lt;strong>TRKKN&lt;/strong>. All credit for the solution goes to him. The &lt;strong>Summary&lt;/strong> section is the only one authored by Simo Ahava.&lt;/p>
&lt;/blockquote>
&lt;p>You know the deal.&lt;/p>
&lt;p>Each and every day, clients reach out to you asking for &lt;strong>custom click tracking&lt;/strong> for this call-to-action on that slider, or that button in this section of a page. They reach out to you because such things cannot be answered out of the box in &lt;a href="https://analytics.google.com/">Google Analytics 4&lt;/a>.&lt;/p></description></item><item><title>Content Analysis With GA4, BigQuery, R, Sheets, And Data Studio</title><link>https://www.simoahava.com/analytics/content-analysis-using-ga4-bigquery-r-google-sheets-data-studio/</link><pubDate>Wed, 28 Sep 2022 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/analytics/content-analysis-using-ga4-bigquery-r-google-sheets-data-studio/</guid><description>&lt;p>This is a &lt;strong>guest post&lt;/strong> â€“ the first one in a long time! The foreword and summary are written by me, Simo, and the rest is by my esteemed guest author.&lt;/p>
&lt;p>How fortunate was I to have been contacted by &lt;a href="https://www.linkedin.com/in/arben-kqiku-301457117/">Arben Kqiku&lt;/a>, Digital Marketing &amp;amp; Data Manager from &lt;a href="https://comtogether.com/">comtogether&lt;/a>. Arben is one of our many &lt;a href="https://www.teamsimmer.com/">Simmer&lt;/a> students, and he&amp;rsquo;s walked through the &lt;a href="https://www.teamsimmer.com/courses/query-ga4-data-in-google-bigquery/">Query GA4 Data In Google BigQuery&lt;/a> course, learning a lot along the way.&lt;/p></description></item><item><title>#GTMTips: Cross-domain Tracking In Google Analytics 4</title><link>https://www.simoahava.com/gtm-tips/cross-domain-tracking-google-analytics-4/</link><pubDate>Mon, 25 Oct 2021 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/gtm-tips/cross-domain-tracking-google-analytics-4/</guid><description>&lt;p>Setting up &lt;strong>cross-domain tracking&lt;/strong> in &lt;strong>Google Analytics 4&lt;/strong> has been &lt;a href="https://support.google.com/analytics/answer/10071811?hl=en">well-documented&lt;/a>.&lt;/p>
&lt;p>The main departure from &lt;strong>Universal Analytics&lt;/strong> is how cross-domain measurement is something you configure through the &lt;em>Google Analytics user interface&lt;/em> rather than through implementation and JavaScript.&lt;/p>
&lt;p>While this approach is obviously beneficial especially for those who lack the know-how or the resources to configure the JavaScript trackers, it does lead to problems, too.&lt;/p>
&lt;p>In this article, I want to tackle these edge cases. They are:&lt;/p></description></item><item><title>Track Core Web Vitals In GA4 With Google Tag Manager</title><link>https://www.simoahava.com/analytics/track-core-web-vitals-in-ga4-with-google-tag-manager/</link><pubDate>Tue, 26 Jan 2021 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/analytics/track-core-web-vitals-in-ga4-with-google-tag-manager/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Updated 3 March 2023&lt;/strong>: Added a checkbox to the template to enable collecting FCP, INP, and TTFB metrics, too..&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>Core Web Vitals&lt;/strong> is described on the dedicated &lt;a href="https://web.dev/vitals/">web.dev resource&lt;/a> as (emphasis mine):&lt;/p>
&lt;blockquote>
&lt;p>&amp;ldquo;Core Web Vitals are the subset of Web Vitals that apply to all pages, &lt;strong>should be measured by all site owners&lt;/strong>, and will be surfaced across all Google tools.&amp;rdquo;&lt;/p>
&lt;/blockquote>



&lt;div style="aspect-ratio: 1560 / 514;" class="figure ">
 
 &lt;a href="https://www.simoahava.com/images/2021/01/vitals-recommendations.jpg" title="Recommended Core Web Vitals thresholds - from https://web.dev/vitals/">
 
 &lt;img class="fig-img" height="514" width="1560" loading="lazy" src="https://www.simoahava.com/images/2021/01/vitals-recommendations.jpg#ZgotmplZ" alt="Recommended Core Web Vitals thresholds - from https://web.dev/vitals/">
 
 &lt;/a>
 
 
 &lt;span class="caption">Recommended Core Web Vitals thresholds - from https://web.dev/vitals/&lt;/span>
 
&lt;/div>


&lt;p>The &lt;strong>Core&lt;/strong> Web Vitals measurement as suggested by Google are:&lt;/p></description></item><item><title>#GTMTips: Write Client ID And Other GTAG Fields Into dataLayer</title><link>https://www.simoahava.com/gtmtips/write-client-id-other-gtag-fields-datalayer/</link><pubDate>Fri, 22 Jan 2021 07:00:00 +0200</pubDate><guid>https://www.simoahava.com/gtmtips/write-client-id-other-gtag-fields-datalayer/</guid><description>&lt;p>One of the big omissions, at least for now, in &lt;a href="https://support.google.com/analytics/answer/10089681">Google Analytics 4&lt;/a> is the &lt;a href="https://www.simoahava.com/analytics/customtask-the-guide/">&lt;code>customTask&lt;/code>&lt;/a>. It is unfortunate, but no such mechanism exists in the client-side SDKs.&lt;/p>
&lt;p>This means that you won&amp;rsquo;t be able to do all the magical things that &lt;a href="https://www.simoahava.com/tools/customtask-builder/">&lt;code>customTask&lt;/code> enables in Universal Analytics&lt;/a>. One of the biggest headaches is how to collect extremely useful fields such as the Client ID, as these are &lt;em>not&lt;/em> available by default in the Google Analytics 4 reporting interface.&lt;/p></description></item><item><title>Implementation Guide For Events In Google Analytics 4</title><link>https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/</link><pubDate>Mon, 16 Nov 2020 07:00:51 +0200</pubDate><guid>https://www.simoahava.com/analytics/implementation-guide-events-google-analytics-4/</guid><description>&lt;p>On the surface, tracking &lt;strong>events&lt;/strong> in &lt;a href="https://developers.google.com/analytics/devguides/collection/ga4">Google Analytics 4&lt;/a> (GA4) is fairly simple. Events are, after all, pretty much the &lt;em>only thing&lt;/em> you can collect in GA4.&lt;/p>
&lt;p>It&amp;rsquo;s easy to get tied down with endless comparisons to Universal Analytics, though. While I&amp;rsquo;m steadfastly opposed to the idea that GA4 should resemble Universal Analytics, it&amp;rsquo;s still important to &lt;em>cleanse the palate&lt;/em> and approach GA4&amp;rsquo;s event tracking with an open mind.&lt;/p>
&lt;p>There are some comparisons that can be drawn between the new and the old, but what GA4 might lack in some features and use cases, it more than makes up for this with a more flexible data structure.&lt;/p></description></item><item><title>Google Analytics 4: Ecommerce Guide For Google Tag Manager</title><link>https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/</link><pubDate>Thu, 22 Oct 2020 07:00:00 +0300</pubDate><guid>https://www.simoahava.com/analytics/google-analytics-4-ecommerce-guide-google-tag-manager/</guid><description>&lt;blockquote>
&lt;p>&lt;strong>Last updated 17 March 2023&lt;/strong>: &lt;a href="https://support.google.com/analytics/answer/9164320?hl=en#031623">Item-scoped Custom Dimensions&lt;/a> are now available in Google Analytics 4.&lt;/p>
&lt;/blockquote>
&lt;p>This is an &lt;strong>implementation guide&lt;/strong> for &lt;a href="https://developers.google.com/analytics/devguides/collection/app-web/tag-guide">Google Analytics 4&lt;/a>. The guide is aimed at &lt;a href="https://tagmanager.google.com/">Google Tag Manager&lt;/a> users and has been designed to complement the &lt;a href="https://developers.google.com/tag-manager/ecommerce-appweb">official documentation&lt;/a>.&lt;/p>



&lt;div style="aspect-ratio: 1796 / 922;" class="figure nocaption">
 
 &lt;a href="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg" title="Google Analytics 4 ecommerce">
 
 &lt;img class="fig-img" height="922" width="1796" loading="lazy" src="https://www.simoahava.com/images/2020/10/app-web-ecommerce.jpg#ZgotmplZ" alt="Google Analytics 4 ecommerce">
 
 &lt;/a>
 
 
&lt;/div>


&lt;p>A thing to keep in mind is that Google Analytics 4 (GA4) is &lt;strong>still very new&lt;/strong>. The Google Tag Manager integration is still in its infancy, and implementation places a lot of responsibility on accurate tagging and proper &lt;code>dataLayer&lt;/code> instrumentation.&lt;/p></description></item></channel></rss>